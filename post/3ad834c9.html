<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="大数据 zookeeper," />





  <link rel="alternate" href="/atom.xml" title="FinGeek<http://zhaojie.tech>" type="application/atom+xml" />






<meta name="description" content="zookeeper部署安装到3台虚拟机上 安装好JDK 上传解压12su – hadoop（切换到hadoop用户）tar -zxvf zookeeper-3.4.5.tar.gz（解压） 重命名1mv zookeeper-3.4.5 zookeeper #（重命名文件夹zookeeper-3.4.5为zookeeper） 修改环境变量root用户下 在三台虚拟机上都要执行 123su – roo">
<meta name="keywords" content="大数据 zookeeper">
<meta property="og:type" content="article">
<meta property="og:title" content="zookeeper">
<meta property="og:url" content="http://yoursite.com/post/3ad834c9.html">
<meta property="og:site_name" content="FinGeek&lt;http:&#x2F;&#x2F;zhaojie.tech&gt;">
<meta property="og:description" content="zookeeper部署安装到3台虚拟机上 安装好JDK 上传解压12su – hadoop（切换到hadoop用户）tar -zxvf zookeeper-3.4.5.tar.gz（解压） 重命名1mv zookeeper-3.4.5 zookeeper #（重命名文件夹zookeeper-3.4.5为zookeeper） 修改环境变量root用户下 在三台虚拟机上都要执行 123su – roo">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fr4vjfih3fj20af06ddgb.jpg">
<meta property="og:updated_time" content="2018-07-23T05:02:20.296Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="zookeeper">
<meta name="twitter:description" content="zookeeper部署安装到3台虚拟机上 安装好JDK 上传解压12su – hadoop（切换到hadoop用户）tar -zxvf zookeeper-3.4.5.tar.gz（解压） 重命名1mv zookeeper-3.4.5 zookeeper #（重命名文件夹zookeeper-3.4.5为zookeeper） 修改环境变量root用户下 在三台虚拟机上都要执行 123su – roo">
<meta name="twitter:image" content="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fr4vjfih3fj20af06ddgb.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/post/3ad834c9.html"/>





  <title>zookeeper | FinGeek<http://zhaojie.tech></title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">FinGeek<http://zhaojie.tech></span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/post/3ad834c9.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JieZhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FinGeek<http://zhaojie.tech>">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">zookeeper</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-08T20:06:18+08:00">
                2018-05-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="zookeeper部署"><a href="#zookeeper部署" class="headerlink" title="zookeeper部署"></a>zookeeper部署</h1><p>安装到3台虚拟机上</p>
<p>安装好JDK</p>
<h2 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h2><h2 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su – hadoop（切换到hadoop用户）</span><br><span class="line">tar -zxvf zookeeper-3.4.5.tar.gz（解压）</span><br></pre></td></tr></table></figure>
<h2 id="重命名"><a href="#重命名" class="headerlink" title="重命名"></a>重命名</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv zookeeper-3.4.5 zookeeper #（重命名文件夹zookeeper-3.4.5为zookeeper）</span><br></pre></td></tr></table></figure>
<h2 id="修改环境变量"><a href="#修改环境变量" class="headerlink" title="修改环境变量"></a>修改环境变量</h2><p>root用户下</p>
<p>在三台虚拟机上都要执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">su – root</span><br><span class="line">vi /etc/profile(修改文件)</span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>
<p>profile里：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export ZOOKEEPER_HOME=/root/app/zookeeper-3.4.11</span><br><span class="line">export PATH=$PATH:$ZOOKEEPER_HOME/bin</span><br></pre></td></tr></table></figure>
<h2 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">su - hadoop</span><br><span class="line">cd zookeeper/conf</span><br><span class="line">cp zoo_sample.cfg zoo.cfg</span><br><span class="line">vi zoo.cfg</span><br></pre></td></tr></table></figure>
<p> 添加以下内容:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">dataDir=/home/hadoop/zookeeper/data</span><br><span class="line"></span><br><span class="line">dataLogDir=/home/hadoop/zookeeper/log</span><br><span class="line"></span><br><span class="line">server.1=slave1:2888:3888 (主机名, 心跳端口、数据端口)</span><br><span class="line"></span><br><span class="line">server.2=slave2:2888:3888</span><br><span class="line"></span><br><span class="line">server.3=slave3:2888:3888</span><br></pre></td></tr></table></figure>
<p>slave处也可以填ip地址，如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server.1=192.168.88.131:2888:3888</span><br><span class="line">server.2=192.168.88.141:2888:3888</span><br><span class="line">server.3=192.168.88.139:2888:3888</span><br></pre></td></tr></table></figure>
<p>创建文件夹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /home/hadoop/zookeeper/</span><br><span class="line">mkdir -m 755 data</span><br><span class="line">mkdir -m 755 log</span><br></pre></td></tr></table></figure>
<p>在data文件夹下新建myid文件，myid的文件内容为：</p>
<p>cd data</p>
<p>echo 1 &gt; myid</p>
<h2 id="将集群下发到其他机器上"><a href="#将集群下发到其他机器上" class="headerlink" title="将集群下发到其他机器上"></a>将集群下发到其他机器上</h2><p>scp -r /home/hadoop/zookeeperhadoop@slave2:/home/hadoop/</p>
<p>scp -r /home/hadoop/zookeeper hadoop@slave3:/home/hadoop/</p>
<h2 id="修改其他机器的配置文件"><a href="#修改其他机器的配置文件" class="headerlink" title="修改其他机器的配置文件"></a>修改其他机器的配置文件</h2><p>到slave2上：修改myid为：2</p>
<p>到slave3上：修改myid为：3</p>
<h2 id="查看集群状态"><a href="#查看集群状态" class="headerlink" title="查看集群状态"></a>查看集群状态</h2><p>1、  jps（查看进程）</p>
<p>2、  zkServer.sh status（查看集群状态，主从信息）</p>
<h1 id="zookeeper-结构和命令"><a href="#zookeeper-结构和命令" class="headerlink" title="zookeeper 结构和命令"></a>zookeeper 结构和命令</h1><h2 id="zookeeper特性"><a href="#zookeeper特性" class="headerlink" title="zookeeper特性"></a>zookeeper特性</h2><p>1、Zookeeper：一个leader，多个follower组成的集群</p>
<p>2、全局数据一致：每个server保存一份相同的数据副本，client无论连接到哪个server，数据都是一致的</p>
<p>3、分布式读写，更新请求转发，由leader实施</p>
<p>4、更新请求顺序进行，来自同一个client的更新请求按其发送顺序依次执行</p>
<p>5、数据更新原子性，一次数据更新要么成功，要么失败</p>
<p>6、实时性，在一定时间范围内，client能读到最新数据</p>
<h2 id="zookeeper数据结构"><a href="#zookeeper数据结构" class="headerlink" title="zookeeper数据结构"></a>zookeeper数据结构</h2><p>1、层次化的目录结构，命名符合常规文件系统规范(见下图)</p>
<p>2、每个节点在zookeeper中叫做znode,并且其有一个唯一的路径标识</p>
<p>3、节点Znode可以包含数据和子节点（但是EPHEMERAL类型的节点不能有子节点，下一页详细讲解）</p>
<p>4、客户端应用可以在节点上设置监视器（后续详细讲解）</p>
<h2 id="数据结构的图"><a href="#数据结构的图" class="headerlink" title="数据结构的图"></a>数据结构的图</h2><p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fr4vjfih3fj20af06ddgb.jpg" alt=""></p>
<p>最上面 / 父节点</p>
<p>每个节点都可以存放数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[zk: 192.168.88.141(CONNECTED) 0] ls /</span><br><span class="line">[zookeeper, app1, eclipse]</span><br></pre></td></tr></table></figure>
<p>/ 下面有三个子节点</p>
<p>再创建一个子节点app2 后面的<code>&quot;this is app2 servers parent&quot;</code>是写入的数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[zk: 192.168.88.141(CONNECTED) 3] create /app2 &quot;this is app2 servers parent&quot; </span><br><span class="line">Created /app2</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[zk: 192.168.88.141(CONNECTED) 5] ls /         </span><br><span class="line">[zookeeper, app2, app1, eclipse]</span><br></pre></td></tr></table></figure>
<p>于是根下多了app2</p>
<p>可以继续在app2下创建</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[zk: 192.168.88.141(CONNECTED) 6] create /app2/server01 &quot;192.168.33.5,100&quot;</span><br><span class="line">Created /app2/server01</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[zk: 192.168.88.141(CONNECTED) 10] get /app2</span><br><span class="line">this is app2 servers parent</span><br><span class="line">cZxid = 0x400000004</span><br><span class="line">ctime = Wed May 09 10:28:11 CST 2018</span><br><span class="line">mZxid = 0x400000004</span><br><span class="line">mtime = Wed May 09 10:28:11 CST 2018</span><br><span class="line">pZxid = 0x400000005</span><br><span class="line">cversion = 1</span><br><span class="line">dataVersion = 0</span><br><span class="line">aclVersion = 0</span><br><span class="line">ephemeralOwner = 0x0</span><br><span class="line">dataLength = 27</span><br><span class="line">numChildren = 1</span><br><span class="line"></span><br><span class="line">[zk: 192.168.88.141(CONNECTED) 11] get /app2/server01</span><br><span class="line">192.168.33.5,100</span><br><span class="line">cZxid = 0x400000005</span><br><span class="line">ctime = Wed May 09 10:31:18 CST 2018</span><br><span class="line">mZxid = 0x400000005</span><br><span class="line">mtime = Wed May 09 10:31:18 CST 2018</span><br><span class="line">pZxid = 0x400000005</span><br><span class="line">cversion = 0</span><br><span class="line">dataVersion = 0</span><br><span class="line">aclVersion = 0</span><br><span class="line">ephemeralOwner = 0x0</span><br><span class="line">dataLength = 16</span><br><span class="line">numChildren = 0</span><br></pre></td></tr></table></figure>
<p>用get查看数据</p>
<p>数据下面的是事务编号等信息</p>
<h2 id="节点类型"><a href="#节点类型" class="headerlink" title="节点类型"></a>节点类型</h2><p>1、Znode有两种类型：</p>
<p>短暂（ephemeral）（断开连接自己删除）</p>
<p>监控服务器是否掉线时有用，掉线节点会被删除</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[zk: 192.168.88.141(CONNECTED) 12] create -e /app-e &quot;hello this e&quot;</span><br><span class="line">Created /app-e</span><br><span class="line">[zk: 192.168.88.141(CONNECTED) 13] ls /</span><br><span class="line">[app-e, zookeeper, app2, app1, eclipse]</span><br><span class="line">[zk: 192.168.88.141(CONNECTED) 14] quit</span><br><span class="line">Quitting...</span><br><span class="line">2018-05-09 10:49:30,494 [myid:] - INFO  [main:ZooKeeper@687] - Session: 0x20007fd41fe0000 closed</span><br><span class="line">2018-05-09 10:49:30,498 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@520] - EventThread shut down for session: 0x20007fd41fe0000</span><br><span class="line">[root@mini3 conf]# zkCli.sh -server 192.168.88.141</span><br><span class="line">Connecting to 192.168.88.141</span><br><span class="line">[zk: 192.168.88.141(CONNECTED) 0] ls /</span><br><span class="line">[zookeeper, app2, app1, eclipse]</span><br></pre></td></tr></table></figure>
<p>创建一个暂时节点，退出重连后app-e消失</p>
<p>持久（persistent）（断开连接不删除）</p>
<p>2、Znode有四种形式的目录节点（默认是persistent ）</p>
<p>PERSISTENT</p>
<p>PERSISTENT_SEQUENTIAL（持久序列/test0000000019）</p>
<p>EPHEMERAL</p>
<p>EPHEMERAL_SEQUENTIAL</p>
<p>带序号，创建的节点名字后面会自动有序号，不怕名字重复。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[zk: 192.168.88.141(CONNECTED) 1] create /test 888</span><br><span class="line">Created /test</span><br><span class="line">[zk: 192.168.88.141(CONNECTED) 2] create -s /test/aa 999</span><br><span class="line">Created /test/aa0000000000</span><br><span class="line">[zk: 192.168.88.141(CONNECTED) 3] create -s /test/bb 999</span><br><span class="line">Created /test/bb0000000001</span><br><span class="line">[zk: 192.168.88.141(CONNECTED) 4] create -s /test/aa 999</span><br><span class="line">Created /test/aa0000000002</span><br><span class="line">[zk: 192.168.88.141(CONNECTED) 5] create -s /app2/aa 999</span><br><span class="line">Created /app2/aa0000000001</span><br><span class="line">[zk: 192.168.88.141(CONNECTED) 6] create -e -s /app2/aa 999</span><br><span class="line">Created /app2/aa0000000002</span><br></pre></td></tr></table></figure>
<p>3、创建znode时设置顺序标识，znode名称后会附加一个值，顺序号是一个单调递增的计数器，由父节点维护</p>
<p>4、在分布式系统中，顺序号可以被用于为所有的事件进行全局排序，这样客户端可以通过顺序号推断事件的顺序</p>
<h2 id="zookeeper命令行操作"><a href="#zookeeper命令行操作" class="headerlink" title="zookeeper命令行操作"></a>zookeeper命令行操作</h2><p>运行 zkCli.sh –server <ip>进入命令行工具</ip></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zkCli.sh -server 192.168.88.141</span><br></pre></td></tr></table></figure>
<p>没有-server会连接到自己</p>
<p>可以help命令，查看可以使用的命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[zk: 192.168.88.141(CONNECTED) 1] help</span><br><span class="line">ZooKeeper -server host:port cmd args</span><br><span class="line">        stat path [watch]</span><br><span class="line">        set path data [version]</span><br><span class="line">        ls path [watch]</span><br><span class="line">        delquota [-n|-b] path</span><br><span class="line">        ls2 path [watch]</span><br><span class="line">        setAcl path acl</span><br><span class="line">        setquota -n|-b val path</span><br><span class="line">        history </span><br><span class="line">        redo cmdno</span><br><span class="line">        printwatches on|off</span><br><span class="line">        delete path [version]</span><br><span class="line">        sync path</span><br><span class="line">        listquota path</span><br><span class="line">        rmr path</span><br><span class="line">        get path [watch]</span><br><span class="line">        create [-s] [-e] path data acl</span><br><span class="line">        addauth scheme auth</span><br><span class="line">        quit </span><br><span class="line">        getAcl path</span><br><span class="line">        close </span><br><span class="line">        connect host:port</span><br></pre></td></tr></table></figure>
<p>1、使用 ls 命令来查看当前 ZooKeeper 中所包含的内容：</p>
<p>[zk: 202.115.36.251:2181(CONNECTED) 1] ls /</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[zk: 192.168.88.141(CONNECTED) 0] ls /</span><br><span class="line">[zookeeper, app1, eclipse]</span><br></pre></td></tr></table></figure>
<p>2、创建一个新的 znode ，使用 create /zk myData 。这个命令创建了一个新的 znode 节点“ zk ”以及与它关联的字符串：</p>
<p>[zk: 202.115.36.251:2181(CONNECTED) 2] create /zk “myData“</p>
<p>3、我们运行 get 命令来确认 znode 是否包含我们所创建的字符串：</p>
<p>[zk: 202.115.36.251:2181(CONNECTED) 3] get /zk</p>
<p>#监听这个节点的变化,当另外一个客户端改变/zk时,它会打出下面的</p>
<p>#WATCHER::</p>
<p>#WatchedEvent state:SyncConnectedtype:NodeDataChanged path:/zk</p>
<p>[zk: localhost:2181(CONNECTED) 4] get /zkwatch</p>
<p>4、下面我们通过 set 命令来对 zk 所关联的字符串进行设置：</p>
<p>set 进行更新</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">[zk: 192.168.88.141(CONNECTED) 1] get /app1</span><br><span class="line">this is app1 service parent</span><br><span class="line">cZxid = 0x200000004</span><br><span class="line">ctime = Mon Jan 29 15:44:58 CST 2018</span><br><span class="line">mZxid = 0x200000004</span><br><span class="line">mtime = Mon Jan 29 15:44:58 CST 2018</span><br><span class="line">pZxid = 0x200000005</span><br><span class="line">cversion = 1</span><br><span class="line">dataVersion = 0</span><br><span class="line">aclVersion = 0</span><br><span class="line">ephemeralOwner = 0x0</span><br><span class="line">dataLength = 27</span><br><span class="line">numChildren = 1</span><br><span class="line"></span><br><span class="line">[zk: 192.168.88.141(CONNECTED) 2] set /app1 uuuuu</span><br><span class="line">cZxid = 0x200000004</span><br><span class="line">ctime = Mon Jan 29 15:44:58 CST 2018</span><br><span class="line">mZxid = 0x500000003</span><br><span class="line">mtime = Wed May 09 13:14:07 CST 2018</span><br><span class="line">pZxid = 0x200000005</span><br><span class="line">cversion = 1</span><br><span class="line">dataVersion = 1</span><br><span class="line">aclVersion = 0</span><br><span class="line">ephemeralOwner = 0x0</span><br><span class="line">dataLength = 5</span><br><span class="line">numChildren = 1</span><br><span class="line"></span><br><span class="line">[zk: 192.168.88.141(CONNECTED) 3] get /app1</span><br><span class="line">uuuuu</span><br><span class="line">cZxid = 0x200000004</span><br><span class="line">ctime = Mon Jan 29 15:44:58 CST 2018</span><br><span class="line">mZxid = 0x500000003</span><br><span class="line">mtime = Wed May 09 13:14:07 CST 2018</span><br><span class="line">pZxid = 0x200000005</span><br><span class="line">cversion = 1</span><br><span class="line">dataVersion = 1</span><br><span class="line">aclVersion = 0</span><br><span class="line">ephemeralOwner = 0x0</span><br><span class="line">dataLength = 5</span><br><span class="line">numChildren = 1</span><br></pre></td></tr></table></figure>
<p>在另一台虚拟机mini3里连接客户端：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@mini3 ~]# zkCli.sh</span><br><span class="line">Connecting to localhost:2181</span><br><span class="line">[zk: localhost:2181(CONNECTED) 0] ls /</span><br><span class="line">[zookeeper, app2, test, app1, eclipse]</span><br></pre></td></tr></table></figure>
<p>在虚拟机mini1中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[zk: 192.168.88.141(CONNECTED) 4] set /app1 yyyyy</span><br><span class="line">cZxid = 0x200000004</span><br><span class="line">ctime = Mon Jan 29 15:44:58 CST 2018</span><br><span class="line">mZxid = 0x500000005</span><br><span class="line">mtime = Wed May 09 13:20:19 CST 2018</span><br><span class="line">pZxid = 0x200000005</span><br><span class="line">cversion = 1</span><br><span class="line">dataVersion = 2</span><br><span class="line">aclVersion = 0</span><br><span class="line">ephemeralOwner = 0x0</span><br><span class="line">dataLength = 5</span><br><span class="line">numChildren = 1</span><br></pre></td></tr></table></figure>
<p>于是mini3中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[zk: localhost:2181(CONNECTED) 1] get /app1</span><br><span class="line">yyyyy</span><br><span class="line">cZxid = 0x200000004</span><br><span class="line">ctime = Mon Jan 29 15:44:58 CST 2018</span><br><span class="line">mZxid = 0x500000005</span><br><span class="line">mtime = Wed May 09 13:20:19 CST 2018</span><br><span class="line">pZxid = 0x200000005</span><br><span class="line">cversion = 1</span><br><span class="line">dataVersion = 2</span><br><span class="line">aclVersion = 0</span><br><span class="line">ephemeralOwner = 0x0</span><br><span class="line">dataLength = 5</span><br><span class="line">numChildren = 1</span><br></pre></td></tr></table></figure>
<p>瞬间就能取到变化了的数据，毫秒级别，但是机器非常多时就会有些延迟了。</p>
<p>5、get 监听功能</p>
<p>在mini3里</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[zk: localhost:2181(CONNECTED) 2] get /app1 watch</span><br><span class="line">yyyyy</span><br><span class="line">cZxid = 0x200000004</span><br><span class="line">ctime = Mon Jan 29 15:44:58 CST 2018</span><br><span class="line">mZxid = 0x500000005</span><br><span class="line">mtime = Wed May 09 13:20:19 CST 2018</span><br><span class="line">pZxid = 0x200000005</span><br><span class="line">cversion = 1</span><br><span class="line">dataVersion = 2</span><br><span class="line">aclVersion = 0</span><br><span class="line">ephemeralOwner = 0x0</span><br><span class="line">dataLength = 5</span><br><span class="line">numChildren = 1</span><br></pre></td></tr></table></figure>
<p>在mini1里修改</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[zk: 192.168.88.141(CONNECTED) 5] set /app1 hhhhh</span><br><span class="line">cZxid = 0x200000004</span><br><span class="line">ctime = Mon Jan 29 15:44:58 CST 2018</span><br><span class="line">mZxid = 0x500000006</span><br><span class="line">mtime = Wed May 09 13:25:56 CST 2018</span><br><span class="line">pZxid = 0x200000005</span><br><span class="line">cversion = 1</span><br><span class="line">dataVersion = 3</span><br><span class="line">aclVersion = 0</span><br><span class="line">ephemeralOwner = 0x0</span><br><span class="line">dataLength = 5</span><br><span class="line">numChildren = 1</span><br></pre></td></tr></table></figure>
<p>于是因为mini3中开启了监听功能，mini3中会自动出现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[zk: localhost:2181(CONNECTED) 3] </span><br><span class="line">WATCHER::</span><br><span class="line"></span><br><span class="line">WatchedEvent state:SyncConnected type:NodeDataChanged path:/app1</span><br></pre></td></tr></table></figure>
<p>但是这个监听只生效一次</p>
<p>并且添加节点不会监听，因为get的监听只会监听数据变化</p>
<p>想监听节点变化 用ls watch</p>
<p>mini3里</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[zk: localhost:2181(CONNECTED) 3] ls /app1 watch</span><br><span class="line">[server01]</span><br></pre></td></tr></table></figure>
<p>mini1里</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[zk: 192.168.88.141(CONNECTED) 6] create /app1/hello 123</span><br><span class="line">Created /app1/hello</span><br></pre></td></tr></table></figure>
<p>mini3里会出现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[zk: localhost:2181(CONNECTED) 4] </span><br><span class="line">WATCHER::</span><br><span class="line"></span><br><span class="line">WatchedEvent state:SyncConnected type:NodeChildrenChanged path:/app1</span><br></pre></td></tr></table></figure>
<p>6、下面我们将刚才创建的 znode 删除：</p>
<p>[zk: 202.115.36.251:2181(CONNECTED) 5] delete /zk</p>
<p>7、删除节点：rmr</p>
<p>[zk: 202.115.36.251:2181(CONNECTED) 5] rmr /zk</p>
<h1 id="zookeeper启动脚本"><a href="#zookeeper启动脚本" class="headerlink" title="zookeeper启动脚本"></a>zookeeper启动脚本</h1><p>export 一个 变量到底是在环境里还是哪里</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@mini2 ~]# a=1</span><br><span class="line">[root@mini2 ~]# vi s1.sh</span><br><span class="line">[root@mini2 ~]# echo $a</span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">[root@mini2 ~]# chmod 777 s1.sh</span><br><span class="line">[root@mini2 ~]# ./s1.sh         </span><br><span class="line"></span><br><span class="line">[root@mini2 ~]#</span><br></pre></td></tr></table></figure>
<p>脚本里是</p>
<p>#!/bin/bash</p>
<p>echo $a</p>
<p>打印不出</p>
<p>因为脚本s1.sh在运行的时候是在另外一个bash子进程中</p>
<p>利用pstree命令</p>
<p>米有安装先安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@mini2 ~]# yum install psmisc</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@mini2 ~]# pstree</span><br><span class="line">systemd─┬─NetworkManager─┬─dhclient</span><br><span class="line">        │                └─2*[&#123;NetworkManager&#125;]</span><br><span class="line">        ├─VGAuthService</span><br><span class="line">        ├─abrt-watch-log</span><br><span class="line">        ├─abrtd</span><br><span class="line">        ├─auditd───&#123;auditd&#125;</span><br><span class="line">        ├─chronyd</span><br><span class="line">        ├─crond</span><br><span class="line">        ├─dbus-daemon───&#123;dbus-daemon&#125;</span><br><span class="line">        ├─java───22*[&#123;java&#125;]</span><br><span class="line">        ├─login───bash</span><br><span class="line">        ├─master─┬─pickup</span><br><span class="line">        │        └─qmgr</span><br><span class="line">        ├─polkitd───5*[&#123;polkitd&#125;]</span><br><span class="line">        ├─rsyslogd───2*[&#123;rsyslogd&#125;]</span><br><span class="line">        ├─sshd───sshd───bash───pstree</span><br><span class="line">        ├─systemd-journal</span><br><span class="line">        ├─systemd-logind</span><br><span class="line">        ├─systemd-udevd</span><br><span class="line">        ├─tuned───4*[&#123;tuned&#125;]</span><br><span class="line">        └─vmtoolsd───&#123;vmtoolsd&#125;</span><br></pre></td></tr></table></figure>
<p>脚本不运行在当前bash中</p>
<p>export后可以打印</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@mini2 ~]# unset a</span><br><span class="line">[root@mini2 ~]# export a=1</span><br><span class="line">[root@mini2 ~]# ./s1.sh           </span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<p>修改脚本s1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">b=2</span><br><span class="line">echo &quot;in s1,a=&quot;$a</span><br><span class="line">echo &quot;in s1,b=&quot;$b</span><br><span class="line">./s2.sh</span><br></pre></td></tr></table></figure>
<p>创建s2</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># /bin/bash</span><br><span class="line">echo &quot;in s2,a=&quot;$a</span><br><span class="line">echo &quot;in s2,b=&quot;$b</span><br></pre></td></tr></table></figure>
<p>运行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@mini2 ~]# export a=1</span><br><span class="line">[root@mini2 ~]# ./s1.sh           </span><br><span class="line">1</span><br><span class="line">[root@mini2 ~]# vi s1.sh          </span><br><span class="line">[root@mini2 ~]# chmod 777 s1.sh   </span><br><span class="line">[root@mini2 ~]# vi s1.sh       </span><br><span class="line">[root@mini2 ~]# vi s2.sh</span><br><span class="line">[root@mini2 ~]# chmod +x s2.sh</span><br><span class="line"></span><br><span class="line"># 运行</span><br><span class="line">[root@mini2 ~]# ./s1.sh</span><br><span class="line">in s1,a=1</span><br><span class="line">in s1,b=2</span><br><span class="line">in s2,a=1</span><br><span class="line">in s2,b=</span><br></pre></td></tr></table></figure>
<p>b只运行在s1脚本子shell当中</p>
<p>在s1中export</p>
<p>#!/bin/bash</p>
<p>export b=2<br>echo “in s1,a=”$a<br>echo “in s1,b=”$b<br>./s2.sh</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@mini2 ~]# ./s1.sh </span><br><span class="line">in s1,a=1</span><br><span class="line">in s1,b=2</span><br><span class="line">in s2,a=1</span><br><span class="line">in s2,b=2</span><br></pre></td></tr></table></figure>
<p>但是在命令行中echo不到b</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@mini2 ~]# echo $b</span><br><span class="line"></span><br><span class="line">[root@mini2 ~]#</span><br></pre></td></tr></table></figure>
<p>s1和s2运行在当前bash的子进程中，父进程中没有b</p>
<p>要想在所有进程中都生效用source</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@mini2 ~]# source s1.sh</span><br><span class="line">in s1,a=1</span><br><span class="line">in s1,b=2</span><br><span class="line">in s2,a=1</span><br><span class="line">in s2,b=2</span><br><span class="line">[root@mini2 ~]# echo $b</span><br><span class="line">2</span><br></pre></td></tr></table></figure>
<p>启动登陆时会自动运行  /etc/porfile等</p>
<p>但ssh时不会运行，必须手动source</p>
<p>startzk.sh</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">echo &quot;start zkServer...&quot;</span><br><span class="line">for i in 1 2 3</span><br><span class="line">do</span><br><span class="line">ssh mini$i &quot;source /etc/profile;/root/app/zookeeper/bin/zkServer.sh start&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<h1 id="zookeeper-api应用"><a href="#zookeeper-api应用" class="headerlink" title="zookeeper-api应用"></a>zookeeper-api应用</h1><h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2>
      
    </div>
    
    
    
	<div>
	
	<div>

    <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>

</div>
	
	</div>
    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/大数据-zookeeper/" rel="tag"># 大数据 zookeeper</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/post/b00607be.html" rel="next" title="linux中的crontab">
                <i class="fa fa-chevron-left"></i> linux中的crontab
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/post/f78af6eb.html" rel="prev" title="pandas的API">
                pandas的API <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">JieZhao</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">34</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#zookeeper部署"><span class="nav-number">1.</span> <span class="nav-text">zookeeper部署</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#上传"><span class="nav-number">1.1.</span> <span class="nav-text">上传</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解压"><span class="nav-number">1.2.</span> <span class="nav-text">解压</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#重命名"><span class="nav-number">1.3.</span> <span class="nav-text">重命名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改环境变量"><span class="nav-number">1.4.</span> <span class="nav-text">修改环境变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改配置文件"><span class="nav-number">1.5.</span> <span class="nav-text">修改配置文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#将集群下发到其他机器上"><span class="nav-number">1.6.</span> <span class="nav-text">将集群下发到其他机器上</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改其他机器的配置文件"><span class="nav-number">1.7.</span> <span class="nav-text">修改其他机器的配置文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看集群状态"><span class="nav-number">1.8.</span> <span class="nav-text">查看集群状态</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#zookeeper-结构和命令"><span class="nav-number">2.</span> <span class="nav-text">zookeeper 结构和命令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#zookeeper特性"><span class="nav-number">2.1.</span> <span class="nav-text">zookeeper特性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#zookeeper数据结构"><span class="nav-number">2.2.</span> <span class="nav-text">zookeeper数据结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据结构的图"><span class="nav-number">2.3.</span> <span class="nav-text">数据结构的图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#节点类型"><span class="nav-number">2.4.</span> <span class="nav-text">节点类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#zookeeper命令行操作"><span class="nav-number">2.5.</span> <span class="nav-text">zookeeper命令行操作</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#zookeeper启动脚本"><span class="nav-number">3.</span> <span class="nav-text">zookeeper启动脚本</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#zookeeper-api应用"><span class="nav-number">4.</span> <span class="nav-text">zookeeper-api应用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#基本使用"><span class="nav-number">4.1.</span> <span class="nav-text">基本使用</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JieZhao</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  








  
  





  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/canvas_sphere.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->



  


  




	





  





  












  





  

  

  

  
  

  
  


  

  

</body>
</html>
<!-- 页面点击小红心 --> 
<script type="text/javascript" src="/js/src/love.js"></script>