<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="FinGeek|http://zhaojie.tech" type="application/atom+xml" />






<meta property="og:type" content="website">
<meta property="og:title" content="FinGeek|http:&#x2F;&#x2F;zhaojie.tech">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="FinGeek|http:&#x2F;&#x2F;zhaojie.tech">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="FinGeek|http:&#x2F;&#x2F;zhaojie.tech">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/3/"/>





  <title>FinGeek|http://zhaojie.tech</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">FinGeek|http://zhaojie.tech</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/post/52c64aaf.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JieZhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FinGeek|http://zhaojie.tech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/52c64aaf.html" itemprop="url">R语言再基础</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-05T15:59:49+08:00">
                2018-05-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="R语言基础数据结构"><a href="#R语言基础数据结构" class="headerlink" title="R语言基础数据结构"></a>R语言基础数据结构</h1><p>基本数据类型：向量、数组、列表</p>
<p>向量是最基本的，被称为原子型</p>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fr0j5se574j20hc09p403.jpg" alt=""></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 向量</span></span><br><span class="line"></span><br><span class="line">var1 &lt;- c(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"D"</span>, <span class="string">"E"</span>) <span class="comment"># 字符型</span></span><br><span class="line">var2 &lt;- c(<span class="number">21</span>, <span class="number">34</span>, <span class="number">56</span>, <span class="number">54</span>, <span class="number">32</span>) <span class="comment"># 数值型</span></span><br><span class="line">var3 &lt;- c(<span class="literal">TRUE</span>, <span class="literal">FALSE</span>, <span class="literal">TRUE</span>, <span class="literal">FALSE</span>, <span class="literal">FALSE</span>) <span class="comment"># 逻辑型</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 几种快速生成目标向量的快捷方式</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>:<span class="number">10</span> <span class="comment"># 连续整数序列</span></span><br><span class="line"></span><br><span class="line">rep(<span class="number">1</span>:<span class="number">3</span>, each = <span class="number">4</span>) <span class="comment"># 按照单个序列每一个元素重复指定次数</span></span><br><span class="line">rep(<span class="number">1</span>:<span class="number">3</span>, times = <span class="number">4</span>) <span class="comment"># 按照单个序列每一个元素重复指定次数</span></span><br><span class="line"></span><br><span class="line">seq(from = <span class="number">1</span>, to = <span class="number">100</span>, by = <span class="number">5</span>) <span class="comment"># 起点-终点-间隔</span></span><br><span class="line">seq(from = <span class="number">1</span>, by = <span class="number">5</span>, length = <span class="number">20</span>) <span class="comment"># 起点-间隔-长度</span></span><br><span class="line">seq(to = <span class="number">100</span>, by = <span class="number">5</span>, length = <span class="number">20</span>) <span class="comment"># 终点-间隔-长度</span></span><br><span class="line"></span><br><span class="line">rev(<span class="number">1</span>:<span class="number">5</span>) <span class="comment">#次序颠倒</span></span><br><span class="line"></span><br><span class="line">letters <span class="comment"># 内置小写字母字符串对象</span></span><br><span class="line">LETTERS <span class="comment"># 内置大写字母字符串对象</span></span><br><span class="line"></span><br><span class="line">sample(<span class="number">1</span>:<span class="number">10</span>, size = <span class="number">10</span>, replace = <span class="literal">FALSE</span>) <span class="comment"># 可放回抽样</span></span><br><span class="line">sample(<span class="number">1</span>:<span class="number">10</span>, size = <span class="number">10</span>, replace = <span class="literal">TRUE</span>) <span class="comment"># 不放回抽样</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在R语言中快速生成百分比</span></span><br><span class="line"></span><br><span class="line">sprintf(<span class="string">"%.2f%%"</span>, <span class="number">1</span>:<span class="number">10</span>)</span><br><span class="line">sca::percent(seq(<span class="number">0</span>, <span class="number">0.1</span>, <span class="number">0.01</span>), d=<span class="number">2</span>, sep=<span class="string">""</span>)</span><br><span class="line">scales::percent(runif(<span class="number">10</span>, <span class="number">0</span>, <span class="number">1</span>))</span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 矩阵</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># byrow 是否按行排列</span></span><br><span class="line">martx1 &lt;- matrix(<span class="number">1</span>:<span class="number">40</span>, nrow = <span class="number">8</span>, byrow = <span class="literal">FALSE</span>);martx1</span><br><span class="line">martx2 &lt;- matrix(<span class="number">1</span>:<span class="number">40</span>, nrow = <span class="number">8</span>, byrow = <span class="literal">TRUE</span>);martx2</span><br><span class="line">martx3 &lt;- matrix(<span class="number">1</span>:<span class="number">40</span>, ncol = <span class="number">8</span>, byrow = <span class="literal">FALSE</span>);martx3</span><br><span class="line">martx4 &lt;- matrix(<span class="number">1</span>:<span class="number">40</span>, ncol = <span class="number">8</span>, byrow = <span class="literal">TRUE</span>);martx4</span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数组</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#dim参数长度为2时，输出结果即为矩阵（矩阵即时数字的二维呈现）</span></span><br><span class="line">array(<span class="number">1</span>:<span class="number">100</span>, dim = c(<span class="number">10</span>, <span class="number">10</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># dim参数是一个数字向量，分别为行-列-第三维度</span></span><br><span class="line">array(<span class="number">1</span>:<span class="number">100</span>, dim = c(<span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>))</span><br></pre></td></tr></table></figure>
<p>结果:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&gt; array(1:100, dim = c(4, 5, 5))</span><br><span class="line">, , 1</span><br><span class="line"></span><br><span class="line">     [,1] [,2] [,3] [,4] [,5]</span><br><span class="line">[1,]    1    5    9   13   17</span><br><span class="line">[2,]    2    6   10   14   18</span><br><span class="line">[3,]    3    7   11   15   19</span><br><span class="line">[4,]    4    8   12   16   20</span><br><span class="line"></span><br><span class="line">, , 2</span><br><span class="line"></span><br><span class="line">     [,1] [,2] [,3] [,4] [,5]</span><br><span class="line">[1,]   21   25   29   33   37</span><br><span class="line">[2,]   22   26   30   34   38</span><br><span class="line">[3,]   23   27   31   35   39</span><br><span class="line">[4,]   24   28   32   36   40</span><br><span class="line"></span><br><span class="line">, , 3</span><br><span class="line"></span><br><span class="line">     [,1] [,2] [,3] [,4] [,5]</span><br><span class="line">[1,]   41   45   49   53   57</span><br><span class="line">[2,]   42   46   50   54   58</span><br><span class="line">[3,]   43   47   51   55   59</span><br><span class="line">[4,]   44   48   52   56   60</span><br><span class="line"></span><br><span class="line">, , 4</span><br><span class="line"></span><br><span class="line">     [,1] [,2] [,3] [,4] [,5]</span><br><span class="line">[1,]   61   65   69   73   77</span><br><span class="line">[2,]   62   66   70   74   78</span><br><span class="line">[3,]   63   67   71   75   79</span><br><span class="line">[4,]   64   68   72   76   80</span><br><span class="line"></span><br><span class="line">, , 5</span><br><span class="line"></span><br><span class="line">     [,1] [,2] [,3] [,4] [,5]</span><br><span class="line">[1,]   81   85   89   93   97</span><br><span class="line">[2,]   82   86   90   94   98</span><br><span class="line">[3,]   83   87   91   95   99</span><br><span class="line">[4,]   84   88   92   96  100</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 数据框</span><br><span class="line">mydata1 &lt;- data.frame(</span><br><span class="line">  name1 = c(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;),</span><br><span class="line">  name2 = c(21, 34, 56, 54, 32),</span><br><span class="line">  name3 = c(TRUE, FALSE, TRUE, FALSE, FALSE)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; mydata1</span><br><span class="line">  name1 name2 name3</span><br><span class="line">1     A    21  TRUE</span><br><span class="line">2     B    34 FALSE</span><br><span class="line">3     C    56  TRUE</span><br><span class="line">4     D    54 FALSE</span><br><span class="line">5     E    32 FALSE</span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 列表</span></span><br><span class="line"></span><br><span class="line">mylist &lt;- list(</span><br><span class="line">  object1 = c(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"D"</span>, <span class="string">"E"</span>),</span><br><span class="line">  object2 = matrix(<span class="number">1</span>:<span class="number">20</span>, nrow = <span class="number">4</span>, byrow = <span class="literal">FALSE</span>),</span><br><span class="line">  object3 = array(<span class="number">1</span>:<span class="number">27</span>, dim = c(<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>)),</span><br><span class="line">  object4 = data.frame(</span><br><span class="line">    name1 = c(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"D"</span>, <span class="string">"E"</span>),</span><br><span class="line">    name2 = c(<span class="number">21</span>, <span class="number">34</span>, <span class="number">56</span>, <span class="number">54</span>, <span class="number">32</span>),</span><br><span class="line">    name3 = c(<span class="literal">TRUE</span>, <span class="literal">FALSE</span>, <span class="literal">TRUE</span>, <span class="literal">FALSE</span>, <span class="literal">FALSE</span>)</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line">mylist</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&gt; mylist</span><br><span class="line">$object1</span><br><span class="line">[1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot;</span><br><span class="line"></span><br><span class="line">$object2</span><br><span class="line">     [,1] [,2] [,3] [,4] [,5]</span><br><span class="line">[1,]    1    5    9   13   17</span><br><span class="line">[2,]    2    6   10   14   18</span><br><span class="line">[3,]    3    7   11   15   19</span><br><span class="line">[4,]    4    8   12   16   20</span><br><span class="line"></span><br><span class="line">$object3</span><br><span class="line">, , 1</span><br><span class="line"></span><br><span class="line">     [,1] [,2] [,3]</span><br><span class="line">[1,]    1    4    7</span><br><span class="line">[2,]    2    5    8</span><br><span class="line">[3,]    3    6    9</span><br><span class="line"></span><br><span class="line">, , 2</span><br><span class="line"></span><br><span class="line">     [,1] [,2] [,3]</span><br><span class="line">[1,]   10   13   16</span><br><span class="line">[2,]   11   14   17</span><br><span class="line">[3,]   12   15   18</span><br><span class="line"></span><br><span class="line">, , 3</span><br><span class="line"></span><br><span class="line">     [,1] [,2] [,3]</span><br><span class="line">[1,]   19   22   25</span><br><span class="line">[2,]   20   23   26</span><br><span class="line">[3,]   21   24   27</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$object4</span><br><span class="line">  name1 name2 name3</span><br><span class="line">1     A    21  TRUE</span><br><span class="line">2     B    34 FALSE</span><br><span class="line">3     C    56  TRUE</span><br><span class="line">4     D    54 FALSE</span><br><span class="line">5     E    32 FALSE</span><br></pre></td></tr></table></figure>
<h1 id="变量格式转换与因子变量"><a href="#变量格式转换与因子变量" class="headerlink" title="变量格式转换与因子变量"></a>变量格式转换与因子变量</h1><p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fr0kpfvabqj20ne0bmgpw.jpg" alt=""></p>
<p>因子变量</p>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fr0kun9g6ej20n40bdtav.jpg" alt=""></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var1 &lt;- c(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"D"</span>, <span class="string">"E"</span>)</span><br><span class="line">&gt; typeof(var1)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"character"</span></span><br><span class="line">&gt; mode(var1)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"character"</span></span><br><span class="line">&gt; class(var1)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"character"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; var2 &lt;- c(<span class="number">21</span>, <span class="number">34</span>, <span class="number">56</span>, <span class="number">54</span>, <span class="number">32</span>)</span><br><span class="line">&gt; typeof(var2)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"double"</span></span><br><span class="line">&gt; mode(var2)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"numeric"</span></span><br><span class="line">&gt; class(var2)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"numeric"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; var21 &lt;- c(<span class="number">21.5</span>, <span class="number">34.6</span>, <span class="number">56.3</span>, <span class="number">54.9</span>, <span class="number">3.2</span>)</span><br><span class="line">&gt; typeof(var21)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"double"</span></span><br><span class="line">&gt; mode(var21)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"numeric"</span></span><br><span class="line">&gt; class(var21)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"numeric"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; var22 &lt;- c(<span class="number">21L</span>, <span class="number">34L</span>, <span class="number">56L</span>, <span class="number">54L</span>, <span class="number">32L</span>)</span><br><span class="line">&gt; typeof(var22)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"integer"</span></span><br><span class="line">&gt; mode(var22)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"numeric"</span></span><br><span class="line">&gt; class(var22)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"integer"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; martx1 &lt;- matrix(<span class="number">1</span>:<span class="number">40</span>, nrow = <span class="number">8</span>, byrow = <span class="literal">FALSE</span>)</span><br><span class="line">&gt; typeof(martx1)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"integer"</span></span><br><span class="line">&gt; mode(martx1)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"numeric"</span></span><br><span class="line">&gt; class(martx1)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"matrix"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用is._函数查看独享符合的类型</span></span><br><span class="line">&gt; is.integer(martx1)</span><br><span class="line">[<span class="number">1</span>] <span class="literal">TRUE</span></span><br><span class="line">&gt; is.numeric(martx1)</span><br><span class="line">[<span class="number">1</span>] <span class="literal">TRUE</span></span><br><span class="line">&gt; is.matrix(martx1)</span><br><span class="line">[<span class="number">1</span>] <span class="literal">TRUE</span></span><br><span class="line">&gt; is.array(martx1)</span><br><span class="line">[<span class="number">1</span>] <span class="literal">TRUE</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 转为向量</span></span><br><span class="line">&gt; as.numeric(martx1)</span><br><span class="line"> [<span class="number">1</span>]  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span> <span class="number">13</span> <span class="number">14</span> <span class="number">15</span> <span class="number">16</span> <span class="number">17</span> <span class="number">18</span> <span class="number">19</span> <span class="number">20</span> <span class="number">21</span> <span class="number">22</span> <span class="number">23</span> <span class="number">24</span> <span class="number">25</span> <span class="number">26</span> <span class="number">27</span></span><br><span class="line">[<span class="number">28</span>] <span class="number">28</span> <span class="number">29</span> <span class="number">30</span> <span class="number">31</span> <span class="number">32</span> <span class="number">33</span> <span class="number">34</span> <span class="number">35</span> <span class="number">36</span> <span class="number">37</span> <span class="number">38</span> <span class="number">39</span> <span class="number">40</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt; mydata1 &lt;- data.frame(</span><br><span class="line">+     name1 = c(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"D"</span>, <span class="string">"E"</span>),</span><br><span class="line">+     name2 = c(<span class="number">21</span>, <span class="number">34</span>, <span class="number">56</span>, <span class="number">54</span>, <span class="number">32</span>),</span><br><span class="line">+     name3 = c(<span class="literal">TRUE</span>, <span class="literal">FALSE</span>, <span class="literal">TRUE</span>, <span class="literal">FALSE</span>, <span class="literal">FALSE</span>)</span><br><span class="line">+ )</span><br><span class="line">&gt; typeof(mydata1)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"list"</span></span><br><span class="line">&gt; mode(mydata1)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"list"</span></span><br><span class="line">&gt; class(mydata1)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"data.frame"</span></span><br><span class="line">&gt; is.list(mydata1)</span><br><span class="line">[<span class="number">1</span>] <span class="literal">TRUE</span></span><br><span class="line">&gt; is.data.frame(mydata1)</span><br><span class="line">[<span class="number">1</span>] <span class="literal">TRUE</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; myarray1 &lt;- array(<span class="number">1</span>:<span class="number">100</span>, dim=c(<span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>))</span><br><span class="line">&gt; typeof(myarray1)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"integer"</span></span><br><span class="line">&gt; mode(myarray1)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"numeric"</span></span><br><span class="line">&gt; class(myarray1)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"array"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt; mylist &lt;- list(</span><br><span class="line">+     object1 = c(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"D"</span>, <span class="string">"E"</span>),</span><br><span class="line">+     object2 = matrix(<span class="number">1</span>:<span class="number">20</span>, nrow = <span class="number">4</span>, byrow = <span class="literal">FALSE</span>),</span><br><span class="line">+     object3 = array(<span class="number">1</span>:<span class="number">27</span>, dim = c(<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>)),</span><br><span class="line">+     object4 = data.frame(</span><br><span class="line">+         name1 = c(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"D"</span>, <span class="string">"E"</span>),</span><br><span class="line">+         name2 = c(<span class="number">21</span>, <span class="number">34</span>, <span class="number">56</span>, <span class="number">54</span>, <span class="number">32</span>),</span><br><span class="line">+         name3 = c(<span class="literal">TRUE</span>, <span class="literal">FALSE</span>, <span class="literal">TRUE</span>, <span class="literal">FALSE</span>, <span class="literal">FALSE</span>)</span><br><span class="line">+     )</span><br><span class="line">+ )</span><br><span class="line">&gt; typeof(mylist)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"list"</span></span><br><span class="line">&gt; mode(mylist)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"list"</span></span><br><span class="line">&gt; class(mylist)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"list"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt; fact1 &lt;- factor(</span><br><span class="line">+     x = rep(LETTERS[<span class="number">1</span>:<span class="number">5</span>], each = <span class="number">3</span>),</span><br><span class="line">+     levels = c(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"D"</span>, <span class="string">"E"</span>),</span><br><span class="line">+     ordered = <span class="literal">FALSE</span></span><br><span class="line">+ )</span><br><span class="line">&gt; fact1</span><br><span class="line"> [<span class="number">1</span>] A A A B B B C C C D D D E E E</span><br><span class="line">Levels: A B C D E</span><br><span class="line">&gt; str(fact1)</span><br><span class="line"> Factor w/ <span class="number">5</span> levels <span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>,<span class="string">"D"</span>,..: <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">3</span> <span class="number">3</span> <span class="number">3</span> <span class="number">4</span> <span class="keyword">...</span></span><br><span class="line">&gt; typeof(fact1)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"integer"</span></span><br><span class="line">&gt; mode(fact1)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"numeric"</span></span><br><span class="line">&gt; class(fact1)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"factor"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; fact1 &lt;- factor(</span><br><span class="line">+     x = rep(LETTERS[<span class="number">1</span>:<span class="number">5</span>], each = <span class="number">3</span>),</span><br><span class="line">+     levels = c(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"D"</span>, <span class="string">"E"</span>),</span><br><span class="line">+     ordered = <span class="literal">TRUE</span></span><br><span class="line">+ )</span><br><span class="line">&gt; fact1</span><br><span class="line"> [<span class="number">1</span>] A A A B B B C C C D D D E E E</span><br><span class="line">Levels: A &lt; B &lt; C &lt; D &lt; E</span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&gt; fact2 &lt;- factor(</span><br><span class="line">+     x = rep(<span class="number">1</span>:<span class="number">5</span>, each = <span class="number">3</span>),</span><br><span class="line">+     levels = <span class="number">1</span>:<span class="number">5</span>,</span><br><span class="line">+     labels = c(<span class="string">"婴儿"</span>, <span class="string">"儿童"</span>, <span class="string">"少年"</span>, <span class="string">"青年"</span>, <span class="string">"老年"</span>),</span><br><span class="line">+     ordered = <span class="literal">TRUE</span></span><br><span class="line">+ )</span><br><span class="line">&gt; fact2</span><br><span class="line"> [<span class="number">1</span>] 婴儿 婴儿 婴儿 儿童 儿童 儿童 少年 少年 少年 青年 青年 青年 老年 老年 老年</span><br><span class="line">Levels: 婴儿 &lt; 儿童 &lt; 少年 &lt; 青年 &lt; 老年</span><br><span class="line">&gt; </span><br><span class="line">&gt; str(fact2)</span><br><span class="line"> Ord.factor w/ <span class="number">5</span> levels <span class="string">"婴儿"</span>&lt;<span class="string">"儿童"</span>&lt;..: <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">3</span> <span class="number">3</span> <span class="number">3</span> <span class="number">4</span> <span class="keyword">...</span></span><br><span class="line">&gt; typeof(fact2)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"integer"</span></span><br><span class="line">&gt; mode(fact2)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"numeric"</span></span><br><span class="line">&gt; class(fact2)</span><br><span class="line">[<span class="number">1</span>] <span class="string">"ordered"</span> <span class="string">"factor"</span></span><br></pre></td></tr></table></figure>
<p>自定义区间分箱生成因子</p>
<p>使用自定义区间分箱</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&gt; fact3 &lt;- cut(</span><br><span class="line">+     x = sample(<span class="number">1</span>:<span class="number">100</span>, size = <span class="number">100</span>, replace = <span class="literal">TRUE</span>),</span><br><span class="line">+     breaks = c(<span class="number">0</span>, <span class="number">20</span>, <span class="number">40</span>, <span class="number">60</span>, <span class="number">80</span>, <span class="number">100</span>),</span><br><span class="line">+     labels = c(<span class="string">"0~20"</span>, <span class="string">"20~40"</span>, <span class="string">"40~60"</span>, <span class="string">"60~80"</span>, <span class="string">"80~100"</span>),</span><br><span class="line">+     include.lowest = <span class="literal">TRUE</span>, <span class="comment"># 默认是左开右闭的 这样包括最小值，第一个区间是左闭右闭的，其他仍是左开右闭</span></span><br><span class="line">+     ordered = <span class="literal">TRUE</span></span><br><span class="line">+ )</span><br><span class="line">&gt; fact3</span><br><span class="line">  [<span class="number">1</span>] <span class="number">0</span>~<span class="number">20</span>   <span class="number">0</span>~<span class="number">20</span>   <span class="number">40</span>~<span class="number">60</span>  <span class="number">20</span>~<span class="number">40</span>  <span class="number">20</span>~<span class="number">40</span>  <span class="number">20</span>~<span class="number">40</span>  <span class="number">80</span>~<span class="number">100</span> <span class="number">40</span>~<span class="number">60</span>  <span class="number">0</span>~<span class="number">20</span>   <span class="number">20</span>~<span class="number">40</span>  <span class="number">60</span>~<span class="number">80</span> </span><br><span class="line"> [<span class="number">12</span>] <span class="number">40</span>~<span class="number">60</span>  <span class="number">0</span>~<span class="number">20</span>   <span class="number">20</span>~<span class="number">40</span>  <span class="number">40</span>~<span class="number">60</span>  <span class="number">80</span>~<span class="number">100</span> <span class="number">60</span>~<span class="number">80</span>  <span class="number">0</span>~<span class="number">20</span>   <span class="number">20</span>~<span class="number">40</span>  <span class="number">60</span>~<span class="number">80</span>  <span class="number">80</span>~<span class="number">100</span> <span class="number">60</span>~<span class="number">80</span> </span><br><span class="line"> [<span class="number">23</span>] <span class="number">40</span>~<span class="number">60</span>  <span class="number">0</span>~<span class="number">20</span>   <span class="number">80</span>~<span class="number">100</span> <span class="number">40</span>~<span class="number">60</span>  <span class="number">80</span>~<span class="number">100</span> <span class="number">60</span>~<span class="number">80</span>  <span class="number">60</span>~<span class="number">80</span>  <span class="number">60</span>~<span class="number">80</span>  <span class="number">0</span>~<span class="number">20</span>   <span class="number">80</span>~<span class="number">100</span> <span class="number">80</span>~<span class="number">100</span></span><br><span class="line"> [<span class="number">34</span>] <span class="number">40</span>~<span class="number">60</span>  <span class="number">20</span>~<span class="number">40</span>  <span class="number">40</span>~<span class="number">60</span>  <span class="number">80</span>~<span class="number">100</span> <span class="number">60</span>~<span class="number">80</span>  <span class="number">0</span>~<span class="number">20</span>   <span class="number">0</span>~<span class="number">20</span>   <span class="number">60</span>~<span class="number">80</span>  <span class="number">40</span>~<span class="number">60</span>  <span class="number">0</span>~<span class="number">20</span>   <span class="number">20</span>~<span class="number">40</span> </span><br><span class="line"> [<span class="number">45</span>] <span class="number">80</span>~<span class="number">100</span> <span class="number">0</span>~<span class="number">20</span>   <span class="number">60</span>~<span class="number">80</span>  <span class="number">80</span>~<span class="number">100</span> <span class="number">20</span>~<span class="number">40</span>  <span class="number">0</span>~<span class="number">20</span>   <span class="number">80</span>~<span class="number">100</span> <span class="number">40</span>~<span class="number">60</span>  <span class="number">20</span>~<span class="number">40</span>  <span class="number">0</span>~<span class="number">20</span>   <span class="number">0</span>~<span class="number">20</span>  </span><br><span class="line"> [<span class="number">56</span>] <span class="number">60</span>~<span class="number">80</span>  <span class="number">40</span>~<span class="number">60</span>  <span class="number">80</span>~<span class="number">100</span> <span class="number">80</span>~<span class="number">100</span> <span class="number">40</span>~<span class="number">60</span>  <span class="number">20</span>~<span class="number">40</span>  <span class="number">40</span>~<span class="number">60</span>  <span class="number">0</span>~<span class="number">20</span>   <span class="number">20</span>~<span class="number">40</span>  <span class="number">20</span>~<span class="number">40</span>  <span class="number">0</span>~<span class="number">20</span>  </span><br><span class="line"> [<span class="number">67</span>] <span class="number">0</span>~<span class="number">20</span>   <span class="number">0</span>~<span class="number">20</span>   <span class="number">20</span>~<span class="number">40</span>  <span class="number">20</span>~<span class="number">40</span>  <span class="number">40</span>~<span class="number">60</span>  <span class="number">40</span>~<span class="number">60</span>  <span class="number">80</span>~<span class="number">100</span> <span class="number">60</span>~<span class="number">80</span>  <span class="number">80</span>~<span class="number">100</span> <span class="number">20</span>~<span class="number">40</span>  <span class="number">0</span>~<span class="number">20</span>  </span><br><span class="line"> [<span class="number">78</span>] <span class="number">0</span>~<span class="number">20</span>   <span class="number">0</span>~<span class="number">20</span>   <span class="number">0</span>~<span class="number">20</span>   <span class="number">40</span>~<span class="number">60</span>  <span class="number">20</span>~<span class="number">40</span>  <span class="number">0</span>~<span class="number">20</span>   <span class="number">60</span>~<span class="number">80</span>  <span class="number">40</span>~<span class="number">60</span>  <span class="number">80</span>~<span class="number">100</span> <span class="number">80</span>~<span class="number">100</span> <span class="number">40</span>~<span class="number">60</span> </span><br><span class="line"> [<span class="number">89</span>] <span class="number">60</span>~<span class="number">80</span>  <span class="number">20</span>~<span class="number">40</span>  <span class="number">0</span>~<span class="number">20</span>   <span class="number">60</span>~<span class="number">80</span>  <span class="number">80</span>~<span class="number">100</span> <span class="number">20</span>~<span class="number">40</span>  <span class="number">40</span>~<span class="number">60</span>  <span class="number">60</span>~<span class="number">80</span>  <span class="number">0</span>~<span class="number">20</span>   <span class="number">60</span>~<span class="number">80</span>  <span class="number">40</span>~<span class="number">60</span> </span><br><span class="line">[<span class="number">100</span>] <span class="number">40</span>~<span class="number">60</span> </span><br><span class="line">Levels: <span class="number">0</span>~<span class="number">20</span> &lt; <span class="number">20</span>~<span class="number">40</span> &lt; <span class="number">40</span>~<span class="number">60</span> &lt; <span class="number">60</span>~<span class="number">80</span> &lt; <span class="number">80</span>~<span class="number">100</span></span><br></pre></td></tr></table></figure>
<p>使用分位数作为分箱区间</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; value1 = sample(<span class="number">1</span>:<span class="number">100</span>, size=<span class="number">100</span>, replace = <span class="literal">TRUE</span>)</span><br><span class="line">&gt; </span><br><span class="line">&gt; qa &lt;- quantile(</span><br><span class="line">+     x = value1,</span><br><span class="line">+     probs = seq(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0.2</span>)</span><br><span class="line">+ )</span><br><span class="line">&gt; qa</span><br><span class="line">   <span class="number">0</span>%   <span class="number">20</span>%   <span class="number">40</span>%   <span class="number">60</span>%   <span class="number">80</span>%  <span class="number">100</span>% </span><br><span class="line">  <span class="number">1.0</span>  <span class="number">13.6</span>  <span class="number">35.6</span>  <span class="number">59.6</span>  <span class="number">78.2</span> <span class="number">100.0</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&gt; fact3 &lt;- cut(</span><br><span class="line">+     x = value1,</span><br><span class="line">+     breaks = c(<span class="number">0</span>, <span class="number">20</span>, <span class="number">40</span>, <span class="number">60</span>, <span class="number">80</span>, <span class="number">100</span>),</span><br><span class="line">+     labels = c(<span class="string">"0~20%"</span>, <span class="string">"20~40%"</span>, <span class="string">"40~60%"</span>, <span class="string">"60~80%"</span>, <span class="string">"80~100%"</span>),</span><br><span class="line">+     include.lowest = <span class="literal">TRUE</span>,</span><br><span class="line">+     ordered = <span class="literal">TRUE</span></span><br><span class="line">+ )</span><br><span class="line">&gt; fact3</span><br><span class="line">  [<span class="number">1</span>] <span class="number">40</span>~<span class="number">60</span>%  <span class="number">40</span>~<span class="number">60</span>%  <span class="number">60</span>~<span class="number">80</span>%  <span class="number">20</span>~<span class="number">40</span>%  <span class="number">80</span>~<span class="number">100</span>% <span class="number">60</span>~<span class="number">80</span>%  <span class="number">80</span>~<span class="number">100</span>% <span class="number">60</span>~<span class="number">80</span>%  <span class="number">80</span>~<span class="number">100</span>% <span class="number">40</span>~<span class="number">60</span>% </span><br><span class="line"> [<span class="number">11</span>] <span class="number">60</span>~<span class="number">80</span>%  <span class="number">60</span>~<span class="number">80</span>%  <span class="number">80</span>~<span class="number">100</span>% <span class="number">80</span>~<span class="number">100</span>% <span class="number">0</span>~<span class="number">20</span>%   <span class="number">60</span>~<span class="number">80</span>%  <span class="number">0</span>~<span class="number">20</span>%   <span class="number">80</span>~<span class="number">100</span>% <span class="number">40</span>~<span class="number">60</span>%  <span class="number">40</span>~<span class="number">60</span>% </span><br><span class="line"> [<span class="number">21</span>] <span class="number">60</span>~<span class="number">80</span>%  <span class="number">20</span>~<span class="number">40</span>%  <span class="number">60</span>~<span class="number">80</span>%  <span class="number">20</span>~<span class="number">40</span>%  <span class="number">40</span>~<span class="number">60</span>%  <span class="number">0</span>~<span class="number">20</span>%   <span class="number">0</span>~<span class="number">20</span>%   <span class="number">40</span>~<span class="number">60</span>%  <span class="number">60</span>~<span class="number">80</span>%  <span class="number">60</span>~<span class="number">80</span>% </span><br><span class="line"> [<span class="number">31</span>] <span class="number">0</span>~<span class="number">20</span>%   <span class="number">80</span>~<span class="number">100</span>% <span class="number">80</span>~<span class="number">100</span>% <span class="number">20</span>~<span class="number">40</span>%  <span class="number">20</span>~<span class="number">40</span>%  <span class="number">40</span>~<span class="number">60</span>%  <span class="number">60</span>~<span class="number">80</span>%  <span class="number">80</span>~<span class="number">100</span>% <span class="number">0</span>~<span class="number">20</span>%   <span class="number">80</span>~<span class="number">100</span>%</span><br><span class="line"> [<span class="number">41</span>] <span class="number">20</span>~<span class="number">40</span>%  <span class="number">0</span>~<span class="number">20</span>%   <span class="number">60</span>~<span class="number">80</span>%  <span class="number">0</span>~<span class="number">20</span>%   <span class="number">20</span>~<span class="number">40</span>%  <span class="number">0</span>~<span class="number">20</span>%   <span class="number">60</span>~<span class="number">80</span>%  <span class="number">40</span>~<span class="number">60</span>%  <span class="number">0</span>~<span class="number">20</span>%   <span class="number">0</span>~<span class="number">20</span>%  </span><br><span class="line"> [<span class="number">51</span>] <span class="number">0</span>~<span class="number">20</span>%   <span class="number">60</span>~<span class="number">80</span>%  <span class="number">20</span>~<span class="number">40</span>%  <span class="number">40</span>~<span class="number">60</span>%  <span class="number">60</span>~<span class="number">80</span>%  <span class="number">80</span>~<span class="number">100</span>% <span class="number">40</span>~<span class="number">60</span>%  <span class="number">0</span>~<span class="number">20</span>%   <span class="number">60</span>~<span class="number">80</span>%  <span class="number">60</span>~<span class="number">80</span>% </span><br><span class="line"> [<span class="number">61</span>] <span class="number">0</span>~<span class="number">20</span>%   <span class="number">0</span>~<span class="number">20</span>%   <span class="number">0</span>~<span class="number">20</span>%   <span class="number">40</span>~<span class="number">60</span>%  <span class="number">40</span>~<span class="number">60</span>%  <span class="number">0</span>~<span class="number">20</span>%   <span class="number">60</span>~<span class="number">80</span>%  <span class="number">20</span>~<span class="number">40</span>%  <span class="number">0</span>~<span class="number">20</span>%   <span class="number">0</span>~<span class="number">20</span>%  </span><br><span class="line"> [<span class="number">71</span>] <span class="number">40</span>~<span class="number">60</span>%  <span class="number">80</span>~<span class="number">100</span>% <span class="number">80</span>~<span class="number">100</span>% <span class="number">20</span>~<span class="number">40</span>%  <span class="number">40</span>~<span class="number">60</span>%  <span class="number">80</span>~<span class="number">100</span>% <span class="number">80</span>~<span class="number">100</span>% <span class="number">0</span>~<span class="number">20</span>%   <span class="number">60</span>~<span class="number">80</span>%  <span class="number">20</span>~<span class="number">40</span>% </span><br><span class="line"> [<span class="number">81</span>] <span class="number">20</span>~<span class="number">40</span>%  <span class="number">0</span>~<span class="number">20</span>%   <span class="number">80</span>~<span class="number">100</span>% <span class="number">20</span>~<span class="number">40</span>%  <span class="number">40</span>~<span class="number">60</span>%  <span class="number">20</span>~<span class="number">40</span>%  <span class="number">40</span>~<span class="number">60</span>%  <span class="number">40</span>~<span class="number">60</span>%  <span class="number">0</span>~<span class="number">20</span>%   <span class="number">0</span>~<span class="number">20</span>%  </span><br><span class="line"> [<span class="number">91</span>] <span class="number">0</span>~<span class="number">20</span>%   <span class="number">80</span>~<span class="number">100</span>% <span class="number">0</span>~<span class="number">20</span>%   <span class="number">0</span>~<span class="number">20</span>%   <span class="number">60</span>~<span class="number">80</span>%  <span class="number">0</span>~<span class="number">20</span>%   <span class="number">0</span>~<span class="number">20</span>%   <span class="number">60</span>~<span class="number">80</span>%  <span class="number">60</span>~<span class="number">80</span>%  <span class="number">60</span>~<span class="number">80</span>% </span><br><span class="line">Levels: <span class="number">0</span>~<span class="number">20</span>% &lt; <span class="number">20</span>~<span class="number">40</span>% &lt; <span class="number">40</span>~<span class="number">60</span>% &lt; <span class="number">60</span>~<span class="number">80</span>% &lt; <span class="number">80</span>~<span class="number">100</span>%</span><br></pre></td></tr></table></figure>
<h1 id="数据索引与切片、聚合"><a href="#数据索引与切片、聚合" class="headerlink" title="数据索引与切片、聚合"></a>数据索引与切片、聚合</h1><p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fr0quguzfuj20pz0bw410.jpg" alt=""></p>
<p>索引向量</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt; variable1 &lt;- <span class="number">1</span>:<span class="number">100</span></span><br><span class="line">&gt; <span class="comment"># 索引前10个值</span></span><br><span class="line">&gt; variable1[<span class="number">1</span>:<span class="number">10</span>]</span><br><span class="line"> [<span class="number">1</span>]  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span></span><br><span class="line">&gt; <span class="comment"># 索引第4、6、8、9个值</span></span><br><span class="line">&gt; variable1[c(<span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">9</span>)]</span><br><span class="line">[<span class="number">1</span>] <span class="number">4</span> <span class="number">6</span> <span class="number">8</span> <span class="number">9</span></span><br><span class="line">&gt; <span class="comment"># 布尔索引</span></span><br><span class="line">&gt; variable1[sample(x = c(<span class="literal">TRUE</span>, <span class="literal">FALSE</span>), size = <span class="number">100</span>, replace = <span class="literal">TRUE</span>)]</span><br><span class="line"> [<span class="number">1</span>]  <span class="number">4</span>  <span class="number">8</span> <span class="number">10</span> <span class="number">13</span> <span class="number">14</span> <span class="number">15</span> <span class="number">16</span> <span class="number">17</span> <span class="number">18</span> <span class="number">19</span> <span class="number">20</span> <span class="number">22</span> <span class="number">24</span> <span class="number">25</span> <span class="number">28</span> <span class="number">29</span> <span class="number">30</span> <span class="number">33</span> <span class="number">35</span> <span class="number">39</span> <span class="number">43</span> <span class="number">44</span> <span class="number">45</span> <span class="number">51</span> <span class="number">52</span> <span class="number">53</span> <span class="number">55</span></span><br><span class="line">[<span class="number">28</span>] <span class="number">59</span> <span class="number">60</span> <span class="number">62</span> <span class="number">63</span> <span class="number">69</span> <span class="number">70</span> <span class="number">73</span> <span class="number">75</span> <span class="number">76</span> <span class="number">77</span> <span class="number">79</span> <span class="number">81</span> <span class="number">83</span> <span class="number">91</span> <span class="number">92</span> <span class="number">93</span> <span class="number">98</span> <span class="number">99</span></span><br><span class="line">&gt; <span class="comment"># 条件索引（偶数）</span></span><br><span class="line">&gt; variable1[variable1%%<span class="number">2</span> == <span class="number">0</span>]</span><br><span class="line"> [<span class="number">1</span>]   <span class="number">2</span>   <span class="number">4</span>   <span class="number">6</span>   <span class="number">8</span>  <span class="number">10</span>  <span class="number">12</span>  <span class="number">14</span>  <span class="number">16</span>  <span class="number">18</span>  <span class="number">20</span>  <span class="number">22</span>  <span class="number">24</span>  <span class="number">26</span>  <span class="number">28</span>  <span class="number">30</span>  <span class="number">32</span>  <span class="number">34</span>  <span class="number">36</span>  <span class="number">38</span>  <span class="number">40</span></span><br><span class="line">[<span class="number">21</span>]  <span class="number">42</span>  <span class="number">44</span>  <span class="number">46</span>  <span class="number">48</span>  <span class="number">50</span>  <span class="number">52</span>  <span class="number">54</span>  <span class="number">56</span>  <span class="number">58</span>  <span class="number">60</span>  <span class="number">62</span>  <span class="number">64</span>  <span class="number">66</span>  <span class="number">68</span>  <span class="number">70</span>  <span class="number">72</span>  <span class="number">74</span>  <span class="number">76</span>  <span class="number">78</span>  <span class="number">80</span></span><br><span class="line">[<span class="number">41</span>]  <span class="number">82</span>  <span class="number">84</span>  <span class="number">86</span>  <span class="number">88</span>  <span class="number">90</span>  <span class="number">92</span>  <span class="number">94</span>  <span class="number">96</span>  <span class="number">98</span> <span class="number">100</span></span><br></pre></td></tr></table></figure>
<p>索引数据框</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入数据集数据，是个数据框</span></span><br><span class="line">&gt; mydata1 &lt;- ggplot2::mpg</span><br><span class="line">&gt; head(mydata1)</span><br><span class="line"><span class="comment"># A tibble: 6 x 11</span></span><br><span class="line">  manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class  </span><br><span class="line">  &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  </span><br><span class="line"><span class="number">1</span> audi         a4     <span class="number">1.80</span>  <span class="number">1999</span>     <span class="number">4</span> auto(l5)   f        <span class="number">18</span>    <span class="number">29</span> p     compact</span><br><span class="line"><span class="number">2</span> audi         a4     <span class="number">1.80</span>  <span class="number">1999</span>     <span class="number">4</span> manual(m5) f        <span class="number">21</span>    <span class="number">29</span> p     compact</span><br><span class="line"><span class="number">3</span> audi         a4     <span class="number">2.00</span>  <span class="number">2008</span>     <span class="number">4</span> manual(m6) f        <span class="number">20</span>    <span class="number">31</span> p     compact</span><br><span class="line"><span class="number">4</span> audi         a4     <span class="number">2.00</span>  <span class="number">2008</span>     <span class="number">4</span> auto(av)   f        <span class="number">21</span>    <span class="number">30</span> p     compact</span><br><span class="line"><span class="number">5</span> audi         a4     <span class="number">2.80</span>  <span class="number">1999</span>     <span class="number">6</span> auto(l5)   f        <span class="number">16</span>    <span class="number">26</span> p     compact</span><br><span class="line"><span class="number">6</span> audi         a4     <span class="number">2.80</span>  <span class="number">1999</span>     <span class="number">6</span> manual(m5) f        <span class="number">18</span>    <span class="number">26</span> p     compact</span><br><span class="line">&gt; str(mydata1)</span><br><span class="line">Classes ‘tbl_df’, ‘tbl’ and <span class="string">'data.frame'</span>:	<span class="number">234</span> obs. of  <span class="number">11</span> variables:</span><br><span class="line"> $ manufacturer: chr  <span class="string">"audi"</span> <span class="string">"audi"</span> <span class="string">"audi"</span> <span class="string">"audi"</span> <span class="keyword">...</span></span><br><span class="line"> $ model       : chr  <span class="string">"a4"</span> <span class="string">"a4"</span> <span class="string">"a4"</span> <span class="string">"a4"</span> <span class="keyword">...</span></span><br><span class="line"> $ displ       : num  <span class="number">1.8</span> <span class="number">1.8</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2.8</span> <span class="number">2.8</span> <span class="number">3.1</span> <span class="number">1.8</span> <span class="number">1.8</span> <span class="number">2</span> <span class="keyword">...</span></span><br><span class="line"> $ year        : int  <span class="number">1999</span> <span class="number">1999</span> <span class="number">2008</span> <span class="number">2008</span> <span class="number">1999</span> <span class="number">1999</span> <span class="number">2008</span> <span class="number">1999</span> <span class="number">1999</span> <span class="number">2008</span> <span class="keyword">...</span></span><br><span class="line"> $ cyl         : int  <span class="number">4</span> <span class="number">4</span> <span class="number">4</span> <span class="number">4</span> <span class="number">6</span> <span class="number">6</span> <span class="number">6</span> <span class="number">4</span> <span class="number">4</span> <span class="number">4</span> <span class="keyword">...</span></span><br><span class="line"> $ trans       : chr  <span class="string">"auto(l5)"</span> <span class="string">"manual(m5)"</span> <span class="string">"manual(m6)"</span> <span class="string">"auto(av)"</span> <span class="keyword">...</span></span><br><span class="line"> $ drv         : chr  <span class="string">"f"</span> <span class="string">"f"</span> <span class="string">"f"</span> <span class="string">"f"</span> <span class="keyword">...</span></span><br><span class="line"> $ cty         : int  <span class="number">18</span> <span class="number">21</span> <span class="number">20</span> <span class="number">21</span> <span class="number">16</span> <span class="number">18</span> <span class="number">18</span> <span class="number">18</span> <span class="number">16</span> <span class="number">20</span> <span class="keyword">...</span></span><br><span class="line"> $ hwy         : int  <span class="number">29</span> <span class="number">29</span> <span class="number">31</span> <span class="number">30</span> <span class="number">26</span> <span class="number">26</span> <span class="number">27</span> <span class="number">26</span> <span class="number">25</span> <span class="number">28</span> <span class="keyword">...</span></span><br><span class="line"> $ fl          : chr  <span class="string">"p"</span> <span class="string">"p"</span> <span class="string">"p"</span> <span class="string">"p"</span> <span class="keyword">...</span></span><br><span class="line"> $ class       : chr  <span class="string">"compact"</span> <span class="string">"compact"</span> <span class="string">"compact"</span> <span class="string">"compact"</span> <span class="keyword">...</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; <span class="comment"># 列索引</span></span><br><span class="line">&gt; mydata1[, c(<span class="number">2</span>, <span class="number">3</span>)]</span><br><span class="line"><span class="comment"># A tibble: 234 x 2</span></span><br><span class="line">   model      displ</span><br><span class="line">   &lt;chr&gt;      &lt;dbl&gt;</span><br><span class="line"> <span class="number">1</span> a4          <span class="number">1.80</span></span><br><span class="line"> <span class="number">2</span> a4          <span class="number">1.80</span></span><br><span class="line"> <span class="number">3</span> a4          <span class="number">2.00</span></span><br><span class="line"> <span class="number">4</span> a4          <span class="number">2.00</span></span><br><span class="line"> <span class="number">5</span> a4          <span class="number">2.80</span></span><br><span class="line"> <span class="number">6</span> a4          <span class="number">2.80</span></span><br><span class="line"> <span class="number">7</span> a4          <span class="number">3.10</span></span><br><span class="line"> <span class="number">8</span> a4 quattro  <span class="number">1.80</span></span><br><span class="line"> <span class="number">9</span> a4 quattro  <span class="number">1.80</span></span><br><span class="line"><span class="number">10</span> a4 quattro  <span class="number">2.00</span></span><br><span class="line"><span class="comment"># ... with 224 more rows</span></span><br><span class="line">&gt; mydata1[, c(<span class="string">"model"</span>, <span class="string">"displ"</span>)]</span><br><span class="line"><span class="comment"># A tibble: 234 x 2</span></span><br><span class="line">   model      displ</span><br><span class="line">   &lt;chr&gt;      &lt;dbl&gt;</span><br><span class="line"> <span class="number">1</span> a4          <span class="number">1.80</span></span><br><span class="line"> <span class="number">2</span> a4          <span class="number">1.80</span></span><br><span class="line"> <span class="number">3</span> a4          <span class="number">2.00</span></span><br><span class="line"> <span class="number">4</span> a4          <span class="number">2.00</span></span><br><span class="line"> <span class="number">5</span> a4          <span class="number">2.80</span></span><br><span class="line"> <span class="number">6</span> a4          <span class="number">2.80</span></span><br><span class="line"> <span class="number">7</span> a4          <span class="number">3.10</span></span><br><span class="line"> <span class="number">8</span> a4 quattro  <span class="number">1.80</span></span><br><span class="line"> <span class="number">9</span> a4 quattro  <span class="number">1.80</span></span><br><span class="line"><span class="number">10</span> a4 quattro  <span class="number">2.00</span></span><br><span class="line"><span class="comment"># ... with 224 more rows</span></span><br><span class="line">&gt; <span class="comment"># 行索引</span></span><br><span class="line">&gt; mydata1[<span class="number">1</span>:<span class="number">5</span>, ]</span><br><span class="line"><span class="comment"># A tibble: 5 x 11</span></span><br><span class="line">  manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class  </span><br><span class="line">  &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  </span><br><span class="line"><span class="number">1</span> audi         a4     <span class="number">1.80</span>  <span class="number">1999</span>     <span class="number">4</span> auto(l5)   f        <span class="number">18</span>    <span class="number">29</span> p     compact</span><br><span class="line"><span class="number">2</span> audi         a4     <span class="number">1.80</span>  <span class="number">1999</span>     <span class="number">4</span> manual(m5) f        <span class="number">21</span>    <span class="number">29</span> p     compact</span><br><span class="line"><span class="number">3</span> audi         a4     <span class="number">2.00</span>  <span class="number">2008</span>     <span class="number">4</span> manual(m6) f        <span class="number">20</span>    <span class="number">31</span> p     compact</span><br><span class="line"><span class="number">4</span> audi         a4     <span class="number">2.00</span>  <span class="number">2008</span>     <span class="number">4</span> auto(av)   f        <span class="number">21</span>    <span class="number">30</span> p     compact</span><br><span class="line"><span class="number">5</span> audi         a4     <span class="number">2.80</span>  <span class="number">1999</span>     <span class="number">6</span> auto(l5)   f        <span class="number">16</span>    <span class="number">26</span> p     compact</span><br><span class="line">&gt; mydata1[c(<span class="number">1</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">9</span>), ]</span><br><span class="line"><span class="comment"># A tibble: 5 x 11</span></span><br><span class="line">  manufacturer model      displ  year   cyl trans      drv     cty   hwy fl    class</span><br><span class="line">  &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;</span><br><span class="line"><span class="number">1</span> audi         a4          <span class="number">1.80</span>  <span class="number">1999</span>     <span class="number">4</span> auto(l5)   f        <span class="number">18</span>    <span class="number">29</span> p     comp~</span><br><span class="line"><span class="number">2</span> audi         a4          <span class="number">2.00</span>  <span class="number">2008</span>     <span class="number">4</span> auto(av)   f        <span class="number">21</span>    <span class="number">30</span> p     comp~</span><br><span class="line"><span class="number">3</span> audi         a4          <span class="number">2.80</span>  <span class="number">1999</span>     <span class="number">6</span> manual(m5) f        <span class="number">18</span>    <span class="number">26</span> p     comp~</span><br><span class="line"><span class="number">4</span> audi         a4 quattro  <span class="number">1.80</span>  <span class="number">1999</span>     <span class="number">4</span> manual(m5) <span class="number">4</span>        <span class="number">18</span>    <span class="number">26</span> p     comp~</span><br><span class="line"><span class="number">5</span> audi         a4 quattro  <span class="number">1.80</span>  <span class="number">1999</span>     <span class="number">4</span> auto(l5)   <span class="number">4</span>        <span class="number">16</span>    <span class="number">25</span> p     comp~</span><br><span class="line">&gt; mydata1[c(<span class="number">1</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">9</span>), c(<span class="string">"model"</span>, <span class="string">"displ"</span>)]</span><br><span class="line"><span class="comment"># A tibble: 5 x 2</span></span><br><span class="line">  model      displ</span><br><span class="line">  &lt;chr&gt;      &lt;dbl&gt;</span><br><span class="line"><span class="number">1</span> a4          <span class="number">1.80</span></span><br><span class="line"><span class="number">2</span> a4          <span class="number">2.00</span></span><br><span class="line"><span class="number">3</span> a4          <span class="number">2.80</span></span><br><span class="line"><span class="number">4</span> a4 quattro  <span class="number">1.80</span></span><br><span class="line"><span class="number">5</span> a4 quattro  <span class="number">1.80</span></span><br><span class="line">&gt; <span class="comment"># 条件索引</span></span><br><span class="line">&gt; <span class="comment"># 或条件</span></span><br><span class="line">&gt; mydata1[mydata1$model == <span class="string">"audi"</span> | mydata1$manufacturer == <span class="string">"mercury"</span>, ]</span><br><span class="line"><span class="comment"># A tibble: 4 x 11</span></span><br><span class="line">  manufacturer model           displ  year   cyl trans drv     cty   hwy fl    class</span><br><span class="line">  &lt;chr&gt;        &lt;chr&gt;           &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;</span><br><span class="line"><span class="number">1</span> mercury      mountaineer 4wd  <span class="number">4.00</span>  <span class="number">1999</span>     <span class="number">6</span> auto~ <span class="number">4</span>        <span class="number">14</span>    <span class="number">17</span> r     suv  </span><br><span class="line"><span class="number">2</span> mercury      mountaineer 4wd  <span class="number">4.00</span>  <span class="number">2008</span>     <span class="number">6</span> auto~ <span class="number">4</span>        <span class="number">13</span>    <span class="number">19</span> r     suv  </span><br><span class="line"><span class="number">3</span> mercury      mountaineer 4wd  <span class="number">4.60</span>  <span class="number">2008</span>     <span class="number">8</span> auto~ <span class="number">4</span>        <span class="number">13</span>    <span class="number">19</span> r     suv  </span><br><span class="line"><span class="number">4</span> mercury      mountaineer 4wd  <span class="number">5.00</span>  <span class="number">1999</span>     <span class="number">8</span> auto~ <span class="number">4</span>        <span class="number">13</span>    <span class="number">17</span> r     suv  </span><br><span class="line">&gt; <span class="comment"># 且条件</span></span><br><span class="line">&gt; mydata1[mydata1$model == <span class="string">"a4"</span> &amp; mydata1$manufacturer == <span class="string">"audi"</span>, ]</span><br><span class="line"><span class="comment"># A tibble: 7 x 11</span></span><br><span class="line">  manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class  </span><br><span class="line">  &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  </span><br><span class="line"><span class="number">1</span> audi         a4     <span class="number">1.80</span>  <span class="number">1999</span>     <span class="number">4</span> auto(l5)   f        <span class="number">18</span>    <span class="number">29</span> p     compact</span><br><span class="line"><span class="number">2</span> audi         a4     <span class="number">1.80</span>  <span class="number">1999</span>     <span class="number">4</span> manual(m5) f        <span class="number">21</span>    <span class="number">29</span> p     compact</span><br><span class="line"><span class="number">3</span> audi         a4     <span class="number">2.00</span>  <span class="number">2008</span>     <span class="number">4</span> manual(m6) f        <span class="number">20</span>    <span class="number">31</span> p     compact</span><br><span class="line"><span class="number">4</span> audi         a4     <span class="number">2.00</span>  <span class="number">2008</span>     <span class="number">4</span> auto(av)   f        <span class="number">21</span>    <span class="number">30</span> p     compact</span><br><span class="line"><span class="number">5</span> audi         a4     <span class="number">2.80</span>  <span class="number">1999</span>     <span class="number">6</span> auto(l5)   f        <span class="number">16</span>    <span class="number">26</span> p     compact</span><br><span class="line"><span class="number">6</span> audi         a4     <span class="number">2.80</span>  <span class="number">1999</span>     <span class="number">6</span> manual(m5) f        <span class="number">18</span>    <span class="number">26</span> p     compact</span><br><span class="line"><span class="number">7</span> audi         a4     <span class="number">3.10</span>  <span class="number">2008</span>     <span class="number">6</span> auto(av)   f        <span class="number">18</span>    <span class="number">27</span> p     compact</span><br></pre></td></tr></table></figure>
<p>使用内置的subset函数来实现基本的切片索引</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="comment"># 使用内置的subset函数来实现基本的切片索引</span></span><br><span class="line">&gt; subset(mydata1, model ==<span class="string">"audi"</span> | manufacturer == <span class="string">"mercury"</span>, select = c(<span class="string">"model"</span>, <span class="string">"manufacturer"</span>, <span class="string">"year"</span>))</span><br><span class="line"><span class="comment"># A tibble: 4 x 3</span></span><br><span class="line">  model           manufacturer  year</span><br><span class="line">  &lt;chr&gt;           &lt;chr&gt;        &lt;int&gt;</span><br><span class="line"><span class="number">1</span> mountaineer 4wd mercury       <span class="number">1999</span></span><br><span class="line"><span class="number">2</span> mountaineer 4wd mercury       <span class="number">2008</span></span><br><span class="line"><span class="number">3</span> mountaineer 4wd mercury       <span class="number">2008</span></span><br><span class="line"><span class="number">4</span> mountaineer 4wd mercury       <span class="number">1999</span></span><br><span class="line">&gt; subset(mydata1, model == <span class="string">"a4"</span> | manufacturer == <span class="string">"audi"</span>, select = c(<span class="string">"model"</span>, <span class="string">"manufacturer"</span>, <span class="string">"year"</span>))</span><br><span class="line"><span class="comment"># A tibble: 18 x 3</span></span><br><span class="line">   model      manufacturer  year</span><br><span class="line">   &lt;chr&gt;      &lt;chr&gt;        &lt;int&gt;</span><br><span class="line"> <span class="number">1</span> a4         audi          <span class="number">1999</span></span><br><span class="line"> <span class="number">2</span> a4         audi          <span class="number">1999</span></span><br><span class="line"> <span class="number">3</span> a4         audi          <span class="number">2008</span></span><br><span class="line"> <span class="number">4</span> a4         audi          <span class="number">2008</span></span><br><span class="line"> <span class="number">5</span> a4         audi          <span class="number">1999</span></span><br><span class="line"> <span class="number">6</span> a4         audi          <span class="number">1999</span></span><br><span class="line"> <span class="number">7</span> a4         audi          <span class="number">2008</span></span><br><span class="line"> <span class="number">8</span> a4 quattro audi          <span class="number">1999</span></span><br><span class="line"> <span class="number">9</span> a4 quattro audi          <span class="number">1999</span></span><br><span class="line"><span class="number">10</span> a4 quattro audi          <span class="number">2008</span></span><br><span class="line"><span class="number">11</span> a4 quattro audi          <span class="number">2008</span></span><br><span class="line"><span class="number">12</span> a4 quattro audi          <span class="number">1999</span></span><br><span class="line"><span class="number">13</span> a4 quattro audi          <span class="number">1999</span></span><br><span class="line"><span class="number">14</span> a4 quattro audi          <span class="number">2008</span></span><br><span class="line"><span class="number">15</span> a4 quattro audi          <span class="number">2008</span></span><br><span class="line"><span class="number">16</span> a6 quattro audi          <span class="number">1999</span></span><br><span class="line"><span class="number">17</span> a6 quattro audi          <span class="number">2008</span></span><br><span class="line"><span class="number">18</span> a6 quattro audi          <span class="number">2008</span></span><br></pre></td></tr></table></figure>
<p>使用dplyr包里面更为高效的函数实现切片索引</p>
<p>%&gt;%管道函数 左侧传给右侧</p>
<p>filter筛选行 select筛选列</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">library</span>(dplyr)</span><br><span class="line"></span><br><span class="line">载入程辑包：‘dplyr’</span><br><span class="line"></span><br><span class="line">The following objects are masked from ‘package:stats’:</span><br><span class="line"></span><br><span class="line">    filter, lag</span><br><span class="line"></span><br><span class="line">The following objects are masked from ‘package:base’:</span><br><span class="line"></span><br><span class="line">    intersect, setdiff, setequal, union</span><br><span class="line"></span><br><span class="line">Warning message:</span><br><span class="line">程辑包‘dplyr’是用R版本<span class="number">3.4</span><span class="number">.3</span> 来建造的 </span><br><span class="line">&gt; </span><br><span class="line">&gt; mydata1 %&gt;% filter(model==<span class="string">"audi"</span> | manufacturer==<span class="string">"mercury"</span>) %&gt;% select(model, manufacturer,year)</span><br><span class="line"><span class="comment"># A tibble: 4 x 3</span></span><br><span class="line">  model           manufacturer  year</span><br><span class="line">  &lt;chr&gt;           &lt;chr&gt;        &lt;int&gt;</span><br><span class="line"><span class="number">1</span> mountaineer 4wd mercury       <span class="number">1999</span></span><br><span class="line"><span class="number">2</span> mountaineer 4wd mercury       <span class="number">2008</span></span><br><span class="line"><span class="number">3</span> mountaineer 4wd mercury       <span class="number">2008</span></span><br><span class="line"><span class="number">4</span> mountaineer 4wd mercury       <span class="number">1999</span></span><br><span class="line">Warning message:</span><br><span class="line">package ‘bindrcpp’ was built under R version <span class="number">3.4</span><span class="number">.4</span> </span><br><span class="line">&gt; mydata1 %&gt;% filter(model==<span class="string">"a4"</span> &amp; manufacturer==<span class="string">"audi"</span>) %&gt;% select(model, manufacturer, year)</span><br><span class="line"><span class="comment"># A tibble: 7 x 3</span></span><br><span class="line">  model manufacturer  year</span><br><span class="line">  &lt;chr&gt; &lt;chr&gt;        &lt;int&gt;</span><br><span class="line"><span class="number">1</span> a4    audi          <span class="number">1999</span></span><br><span class="line"><span class="number">2</span> a4    audi          <span class="number">1999</span></span><br><span class="line"><span class="number">3</span> a4    audi          <span class="number">2008</span></span><br><span class="line"><span class="number">4</span> a4    audi          <span class="number">2008</span></span><br><span class="line"><span class="number">5</span> a4    audi          <span class="number">1999</span></span><br><span class="line"><span class="number">6</span> a4    audi          <span class="number">1999</span></span><br><span class="line"><span class="number">7</span> a4    audi          <span class="number">2008</span></span><br></pre></td></tr></table></figure>
<p>数据聚合计算</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&gt; iris1 &lt;- iris</span><br><span class="line">&gt; head(iris1)</span><br><span class="line">  Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span><br><span class="line"><span class="number">1</span>          <span class="number">5.1</span>         <span class="number">3.5</span>          <span class="number">1.4</span>         <span class="number">0.2</span>  setosa</span><br><span class="line"><span class="number">2</span>          <span class="number">4.9</span>         <span class="number">3.0</span>          <span class="number">1.4</span>         <span class="number">0.2</span>  setosa</span><br><span class="line"><span class="number">3</span>          <span class="number">4.7</span>         <span class="number">3.2</span>          <span class="number">1.3</span>         <span class="number">0.2</span>  setosa</span><br><span class="line"><span class="number">4</span>          <span class="number">4.6</span>         <span class="number">3.1</span>          <span class="number">1.5</span>         <span class="number">0.2</span>  setosa</span><br><span class="line"><span class="number">5</span>          <span class="number">5.0</span>         <span class="number">3.6</span>          <span class="number">1.4</span>         <span class="number">0.2</span>  setosa</span><br><span class="line"><span class="number">6</span>          <span class="number">5.4</span>         <span class="number">3.9</span>          <span class="number">1.7</span>         <span class="number">0.4</span>  setosa</span><br><span class="line">&gt; </span><br><span class="line">&gt; <span class="comment"># transform函数只能基于已有变量进行计算，无法基于新生成的变量进行计算</span></span><br><span class="line">&gt; iris1 &lt;- transform(</span><br><span class="line">+     iris1,</span><br><span class="line">+     dek=Sepal.Length/Sepal.Width,</span><br><span class="line">+     pek=Petal.Length+Petal.Width</span><br><span class="line">+ )</span><br><span class="line">&gt; iris1</span><br><span class="line">    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species      dek pek</span><br><span class="line"><span class="number">1</span>            <span class="number">5.1</span>         <span class="number">3.5</span>          <span class="number">1.4</span>         <span class="number">0.2</span>     setosa <span class="number">1.457143</span> <span class="number">1.6</span></span><br><span class="line"><span class="number">2</span>            <span class="number">4.9</span>         <span class="number">3.0</span>          <span class="number">1.4</span>         <span class="number">0.2</span>     setosa <span class="number">1.633333</span> <span class="number">1.6</span></span><br><span class="line"><span class="number">3</span>            <span class="number">4.7</span>         <span class="number">3.2</span>          <span class="number">1.3</span>         <span class="number">0.2</span>     setosa <span class="number">1.468750</span> <span class="number">1.5</span></span><br><span class="line"><span class="number">4</span>            <span class="number">4.6</span>         <span class="number">3.1</span>          <span class="number">1.5</span>         <span class="number">0.2</span>     setosa <span class="number">1.483871</span> <span class="number">1.7</span></span><br><span class="line"><span class="number">5</span>            <span class="number">5.0</span>         <span class="number">3.6</span>          <span class="number">1.4</span>         <span class="number">0.2</span>     setosa <span class="number">1.388889</span> <span class="number">1.6</span></span><br><span class="line"><span class="number">6</span>            <span class="number">5.4</span>         <span class="number">3.9</span>          <span class="number">1.7</span>         <span class="number">0.4</span>     setosa <span class="number">1.384615</span> <span class="number">2.1</span></span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"><span class="number">139</span>          <span class="number">6.0</span>         <span class="number">3.0</span>          <span class="number">4.8</span>         <span class="number">1.8</span>  virginica <span class="number">2.000000</span> <span class="number">6.6</span></span><br><span class="line"><span class="number">140</span>          <span class="number">6.9</span>         <span class="number">3.1</span>          <span class="number">5.4</span>         <span class="number">2.1</span>  virginica <span class="number">2.225806</span> <span class="number">7.5</span></span><br><span class="line"><span class="number">141</span>          <span class="number">6.7</span>         <span class="number">3.1</span>          <span class="number">5.6</span>         <span class="number">2.4</span>  virginica <span class="number">2.161290</span> <span class="number">8.0</span></span><br><span class="line"><span class="number">142</span>          <span class="number">6.9</span>         <span class="number">3.1</span>          <span class="number">5.1</span>         <span class="number">2.3</span>  virginica <span class="number">2.225806</span> <span class="number">7.4</span></span><br><span class="line"> [ reached getOption(<span class="string">"max.print"</span>) -- omitted <span class="number">8</span> rows ]</span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="comment"># mutate函数实现了基于新生成的变量进行计算的需求</span></span><br><span class="line">&gt; iris1 &lt;- dplyr::mutate(</span><br><span class="line">+     iris1,</span><br><span class="line">+     dek=Sepal.Length+Sepal.Width,</span><br><span class="line">+     jek=sqrt(dek)</span><br><span class="line">+ )</span><br><span class="line">&gt; iris1</span><br><span class="line">    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species  dek pek      jek</span><br><span class="line"><span class="number">1</span>            <span class="number">5.1</span>         <span class="number">3.5</span>          <span class="number">1.4</span>         <span class="number">0.2</span>     setosa  <span class="number">8.6</span> <span class="number">1.6</span> <span class="number">2.932576</span></span><br><span class="line"><span class="number">2</span>            <span class="number">4.9</span>         <span class="number">3.0</span>          <span class="number">1.4</span>         <span class="number">0.2</span>     setosa  <span class="number">7.9</span> <span class="number">1.6</span> <span class="number">2.810694</span></span><br><span class="line"><span class="number">3</span>            <span class="number">4.7</span>         <span class="number">3.2</span>          <span class="number">1.3</span>         <span class="number">0.2</span>     setosa  <span class="number">7.9</span> <span class="number">1.5</span> <span class="number">2.810694</span></span><br><span class="line"><span class="number">4</span>            <span class="number">4.6</span>         <span class="number">3.1</span>          <span class="number">1.5</span>         <span class="number">0.2</span>     setosa  <span class="number">7.7</span> <span class="number">1.7</span> <span class="number">2.774887</span></span><br><span class="line"><span class="number">5</span>            <span class="number">5.0</span>         <span class="number">3.6</span>          <span class="number">1.4</span>         <span class="number">0.2</span>     setosa  <span class="number">8.6</span> <span class="number">1.6</span> <span class="number">2.932576</span></span><br><span class="line"><span class="number">6</span>            <span class="number">5.4</span>         <span class="number">3.9</span>          <span class="number">1.7</span>         <span class="number">0.4</span>     setosa  <span class="number">9.3</span> <span class="number">2.1</span> <span class="number">3.049590</span></span><br><span class="line"><span class="number">7</span>            <span class="number">4.6</span>         <span class="number">3.4</span>          <span class="number">1.4</span>         <span class="number">0.3</span>     setosa  <span class="number">8.0</span> <span class="number">1.7</span> <span class="number">2.828427</span></span><br><span class="line"><span class="number">8</span>            <span class="number">5.0</span>         <span class="number">3.4</span>          <span class="number">1.5</span>         <span class="number">0.2</span>     setosa  <span class="number">8.4</span> <span class="number">1.7</span> <span class="number">2.898275</span></span><br><span class="line"><span class="number">9</span>            <span class="number">4.4</span>         <span class="number">2.9</span>          <span class="number">1.4</span>         <span class="number">0.2</span>     setosa  <span class="number">7.3</span> <span class="number">1.6</span> <span class="number">2.701851</span></span><br><span class="line"></span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"><span class="number">121</span>          <span class="number">6.9</span>         <span class="number">3.2</span>          <span class="number">5.7</span>         <span class="number">2.3</span>  virginica <span class="number">10.1</span> <span class="number">8.0</span> <span class="number">3.178050</span></span><br><span class="line"><span class="number">122</span>          <span class="number">5.6</span>         <span class="number">2.8</span>          <span class="number">4.9</span>         <span class="number">2.0</span>  virginica  <span class="number">8.4</span> <span class="number">6.9</span> <span class="number">2.898275</span></span><br><span class="line"><span class="number">123</span>          <span class="number">7.7</span>         <span class="number">2.8</span>          <span class="number">6.7</span>         <span class="number">2.0</span>  virginica <span class="number">10.5</span> <span class="number">8.7</span> <span class="number">3.240370</span></span><br><span class="line"><span class="number">124</span>          <span class="number">6.3</span>         <span class="number">2.7</span>          <span class="number">4.9</span>         <span class="number">1.8</span>  virginica  <span class="number">9.0</span> <span class="number">6.7</span> <span class="number">3.000000</span></span><br><span class="line"><span class="number">125</span>          <span class="number">6.7</span>         <span class="number">3.3</span>          <span class="number">5.7</span>         <span class="number">2.1</span>  virginica <span class="number">10.0</span> <span class="number">7.8</span> <span class="number">3.162278</span></span><br><span class="line"> [ reached getOption(<span class="string">"max.print"</span>) -- omitted <span class="number">25</span> rows ]</span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="comment"># within函数</span></span><br><span class="line">&gt; mydata &lt;- data.frame(</span><br><span class="line">+     Name = sample(LETTERS[<span class="number">1</span>:<span class="number">20</span>]),</span><br><span class="line">+     old = runif(<span class="number">20</span>, <span class="number">5</span>, <span class="number">65</span>) %&gt;% round(<span class="number">0</span>)</span><br><span class="line">+ )</span><br><span class="line">&gt; </span><br><span class="line">&gt; mydata &lt;- within(mydata,&#123;</span><br><span class="line">+     agecat &lt;- <span class="literal">NA</span></span><br><span class="line">+     agecat[old &gt; <span class="number">55</span>] &lt;- <span class="string">"Elder"</span></span><br><span class="line">+     agecat[old &gt;= <span class="number">35</span> &amp; old &lt;= <span class="number">55</span>] &lt;- <span class="string">"Middle Aged"</span></span><br><span class="line">+     agecat[old &lt; <span class="number">35</span>] &lt;- <span class="string">"Young"</span></span><br><span class="line">+ &#125;)</span><br><span class="line">&gt; mydata</span><br><span class="line">   Name old      agecat</span><br><span class="line"><span class="number">1</span>     Q  <span class="number">14</span>       Young</span><br><span class="line"><span class="number">2</span>     C  <span class="number">31</span>       Young</span><br><span class="line"><span class="number">3</span>     E  <span class="number">27</span>       Young</span><br><span class="line"><span class="number">4</span>     S  <span class="number">32</span>       Young</span><br><span class="line"><span class="number">5</span>     A  <span class="number">36</span> Middle Aged</span><br><span class="line"><span class="number">6</span>     D  <span class="number">25</span>       Young</span><br><span class="line"><span class="number">7</span>     B  <span class="number">11</span>       Young</span><br><span class="line"><span class="number">8</span>     L  <span class="number">53</span> Middle Aged</span><br><span class="line"><span class="number">9</span>     I  <span class="number">31</span>       Young</span><br><span class="line"><span class="number">10</span>    G  <span class="number">25</span>       Young</span><br><span class="line"><span class="number">11</span>    R  <span class="number">16</span>       Young</span><br><span class="line"><span class="number">12</span>    P  <span class="number">51</span> Middle Aged</span><br><span class="line"><span class="number">13</span>    J  <span class="number">30</span>       Young</span><br><span class="line"><span class="number">14</span>    N  <span class="number">38</span> Middle Aged</span><br><span class="line"><span class="number">15</span>    K  <span class="number">20</span>       Young</span><br><span class="line"><span class="number">16</span>    H  <span class="number">53</span> Middle Aged</span><br><span class="line"><span class="number">17</span>    O  <span class="number">13</span>       Young</span><br><span class="line"><span class="number">18</span>    M  <span class="number">63</span>       Elder</span><br><span class="line"><span class="number">19</span>    <span class="literal">F</span>  <span class="number">65</span>       Elder</span><br><span class="line"><span class="number">20</span>    <span class="literal">T</span>  <span class="number">22</span>       Young</span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&gt; mydata$old_n &lt;- ifelse(</span><br><span class="line">+     mydata$old &gt; <span class="number">55</span>, <span class="string">"Elder"</span>,</span><br><span class="line">+     ifelse(</span><br><span class="line">          <span class="comment"># 满足mydata$old &gt;= 35 &amp; mydata$old &lt;= "Middle Aged"，否则是"Young"</span></span><br><span class="line">+         mydata$old &gt;= <span class="number">35</span> &amp; mydata$old &lt;= <span class="number">55</span>, <span class="string">"Middle Aged"</span>, <span class="string">"Young"</span></span><br><span class="line">+     )</span><br><span class="line">+ )</span><br><span class="line">&gt; </span><br><span class="line">&gt; mydata</span><br><span class="line">   Name old      agecat       old_n</span><br><span class="line"><span class="number">1</span>     Q  <span class="number">14</span>       Young       Young</span><br><span class="line"><span class="number">2</span>     C  <span class="number">31</span>       Young       Young</span><br><span class="line"><span class="number">3</span>     E  <span class="number">27</span>       Young       Young</span><br><span class="line"><span class="number">4</span>     S  <span class="number">32</span>       Young       Young</span><br><span class="line"><span class="number">5</span>     A  <span class="number">36</span> Middle Aged Middle Aged</span><br><span class="line"><span class="number">6</span>     D  <span class="number">25</span>       Young       Young</span><br><span class="line"><span class="number">7</span>     B  <span class="number">11</span>       Young       Young</span><br><span class="line"><span class="number">8</span>     L  <span class="number">53</span> Middle Aged Middle Aged</span><br><span class="line"><span class="number">9</span>     I  <span class="number">31</span>       Young       Young</span><br><span class="line"><span class="number">10</span>    G  <span class="number">25</span>       Young       Young</span><br><span class="line"><span class="number">11</span>    R  <span class="number">16</span>       Young       Young</span><br><span class="line"><span class="number">12</span>    P  <span class="number">51</span> Middle Aged Middle Aged</span><br><span class="line"><span class="number">13</span>    J  <span class="number">30</span>       Young       Young</span><br><span class="line"><span class="number">14</span>    N  <span class="number">38</span> Middle Aged Middle Aged</span><br><span class="line"><span class="number">15</span>    K  <span class="number">20</span>       Young       Young</span><br><span class="line"><span class="number">16</span>    H  <span class="number">53</span> Middle Aged Middle Aged</span><br><span class="line"><span class="number">17</span>    O  <span class="number">13</span>       Young       Young</span><br><span class="line"><span class="number">18</span>    M  <span class="number">63</span>       Elder       Elder</span><br><span class="line"><span class="number">19</span>    <span class="literal">F</span>  <span class="number">65</span>       Elder       Elder</span><br><span class="line"><span class="number">20</span>    <span class="literal">T</span>  <span class="number">22</span>       Young       Young</span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="comment"># aggregate聚合函数（只能实现一个聚合指标）</span></span><br><span class="line"><span class="comment"># ~右边Species是分组依据，左边是要计算的数据，iris1是数据框名称，mean是要进行的运算</span></span><br><span class="line">&gt; aggregate(Sepal.Length~Species, iris1, mean)</span><br><span class="line">     Species Sepal.Length</span><br><span class="line"><span class="number">1</span>     setosa        <span class="number">5.006</span></span><br><span class="line"><span class="number">2</span> versicolor        <span class="number">5.936</span></span><br><span class="line"><span class="number">3</span>  virginica        <span class="number">6.588</span></span><br><span class="line">&gt; aggregate(Sepal.Length~Species, iris1, sum)</span><br><span class="line">     Species Sepal.Length</span><br><span class="line"><span class="number">1</span>     setosa        <span class="number">250.3</span></span><br><span class="line"><span class="number">2</span> versicolor        <span class="number">296.8</span></span><br><span class="line"><span class="number">3</span>  virginica        <span class="number">329.4</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="comment"># group_by+summarize实现了基于分组的自由聚合（与SQL中的标准聚合语法group by +聚合函数差不多）</span></span><br><span class="line">&gt; iris1 %&gt;% </span><br><span class="line">+     group_by(Species) %&gt;%</span><br><span class="line">+     <span class="comment"># 可聚合多个变量</span></span><br><span class="line">+      summarize(</span><br><span class="line">+         means = mean(Sepal.Length),</span><br><span class="line">+         sums = sum(Sepal.Length)</span><br><span class="line">+     )</span><br><span class="line"><span class="comment"># A tibble: 3 x 3</span></span><br><span class="line">  Species    means  sums</span><br><span class="line">  &lt;fct&gt;      &lt;dbl&gt; &lt;dbl&gt;</span><br><span class="line"><span class="number">1</span> setosa      <span class="number">5.01</span>  <span class="number">250.</span></span><br><span class="line"><span class="number">2</span> versicolor  <span class="number">5.94</span>  <span class="number">297.</span></span><br><span class="line"><span class="number">3</span> virginica   <span class="number">6.59</span>  <span class="number">329.</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="comment"># tapply专门用于聚合变量，但也只能聚合一个</span></span><br><span class="line">&gt; tapply(iris1$Sepal.Length, iris$Species, mean)</span><br><span class="line">    setosa versicolor  virginica </span><br><span class="line">     <span class="number">5.006</span>      <span class="number">5.936</span>      <span class="number">6.588</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># plyr包里面的ddply函数是一个极其高效的向量化聚合函数</span></span><br><span class="line">&gt; <span class="keyword">library</span>(<span class="string">'plyr'</span>)</span><br><span class="line">&gt; ddply(</span><br><span class="line">+     iris1,</span><br><span class="line">+     .(Species),</span><br><span class="line">+     summarize,</span><br><span class="line">+     means = mean(Sepal.Length),</span><br><span class="line">+     sums = sum(Sepal.Length)</span><br><span class="line">+ )</span><br><span class="line">     Species means  sums</span><br><span class="line"><span class="number">1</span>     setosa <span class="number">5.006</span> <span class="number">250.3</span></span><br><span class="line"><span class="number">2</span> versicolor <span class="number">5.936</span> <span class="number">296.8</span></span><br><span class="line"><span class="number">3</span>  virginica <span class="number">6.588</span> <span class="number">329.4</span></span><br></pre></td></tr></table></figure>
<h1 id="数据合并、追加与塑性"><a href="#数据合并、追加与塑性" class="headerlink" title="数据合并、追加与塑性"></a>数据合并、追加与塑性</h1><p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fr0w2xxa0xj20rq090wi9.jpg" alt=""></p>
<h1 id="字符串处理与正则表达式"><a href="#字符串处理与正则表达式" class="headerlink" title="字符串处理与正则表达式"></a>字符串处理与正则表达式</h1><h1 id="管道函数与向量化运算"><a href="#管道函数与向量化运算" class="headerlink" title="管道函数与向量化运算"></a>管道函数与向量化运算</h1><h1 id="非结构化数据与列表"><a href="#非结构化数据与列表" class="headerlink" title="非结构化数据与列表"></a>非结构化数据与列表</h1><h1 id="R语言与数据库交互"><a href="#R语言与数据库交互" class="headerlink" title="R语言与数据库交互"></a>R语言与数据库交互</h1><h1 id="数据梳理神器（data-table"><a href="#数据梳理神器（data-table" class="headerlink" title="数据梳理神器（data.table)"></a>数据梳理神器（data.table)</h1>
          
        
      
    </div>
    
    
    
	<div>
	
	</div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/post/a1360cb8.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JieZhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FinGeek|http://zhaojie.tech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/a1360cb8.html" itemprop="url">用Eclipse创建第一个java程序</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-05T13:57:32+08:00">
                2018-05-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>启动eclipse</p>
<p>File ——&gt; New ——&gt; Create Java Project</p>
<p>输入项目名称，自己起名即可，如helloworld</p>
<p>新创建的项目结构如下：</p>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fr0fdplqs2j20yx0hkdhs.jpg" alt=""></p>
<p>在scr下，右键点击Package</p>
<p>name中输入my：</p>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fr0fgi324hj20mp0h5jsd.jpg" alt=""></p>
<p>src下面会多一个叫my的包</p>
<p>下面添加代码</p>
<p>右键my</p>
<p>New ——&gt; Class</p>
<p>Name输入HelloWorld</p>
<p>勾选public static void main(String[] args)</p>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fr0ftmnrg7j20gi0j5js7.jpg" alt=""></p>
<p>my下多了一个java文件：</p>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fr0fvce59ij20t90d1757.jpg" alt=""></p>
<p>于是可以在HelloWorld.java中编写第一个程序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> my;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        System.out.println(<span class="string">"helloworld"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>右键 Run as ——&gt; 1 Java Application</p>

          
        
      
    </div>
    
    
    
	<div>
	
	</div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/post/534f1aa6.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JieZhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FinGeek|http://zhaojie.tech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/534f1aa6.html" itemprop="url">seaborn常用图形</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-03T10:36:20+08:00">
                2018-05-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="style"><a href="#style" class="headerlink" title="style"></a>style</h1><h2 id="风格管理"><a href="#风格管理" class="headerlink" title="风格管理"></a>风格管理</h2><ul>
<li>darkgrid/whitegrid：更关注数值</li>
<li>dark/white：更关注整体趋势</li>
<li>ticks：强化刻度</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.set_style(<span class="string">"whitegrid"</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.despine()</span><br></pre></td></tr></table></figure>
<h2 id="尺度参数设置"><a href="#尺度参数设置" class="headerlink" title="尺度参数设置"></a>尺度参数设置</h2><ul>
<li>paper</li>
<li>talk</li>
<li>notebook</li>
<li>poster</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.set_context(<span class="string">"poster"</span>)</span><br></pre></td></tr></table></figure>
<h2 id="颜色管理"><a href="#颜色管理" class="headerlink" title="颜色管理"></a>颜色管理</h2><h3 id="分类调色板"><a href="#分类调色板" class="headerlink" title="分类调色板"></a>分类调色板</h3><ul>
<li>适用于分类描述的数据，而且分类之间无序</li>
<li>hls颜色系统，色调+亮度+饱和度（hue + luminance + saturation）</li>
<li>husl颜色系统，hls中不同颜色存在视差，eg.黄色偏亮，蓝色偏暗，husl使得更加平衡</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sns.set_palette(sns.color_palette(<span class="string">"hls"</span>, <span class="number">10</span>), desat=<span class="number">0.9</span>)</span><br><span class="line">current_palette = sns.color_palette()</span><br><span class="line">sns.palplot(current_palette)</span><br></pre></td></tr></table></figure>
<h3 id="序列调色板"><a href="#序列调色板" class="headerlink" title="序列调色板"></a>序列调色板</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.palplot(sns.color_palette(&quot;Greens&quot;,10))</span><br></pre></td></tr></table></figure>
<h3 id="交叉调色板"><a href="#交叉调色板" class="headerlink" title="交叉调色板"></a>交叉调色板</h3><ul>
<li>主要通过亮度和饱和度区分有序分类</li>
<li>关注单级数据</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.palplot(sns.color_palette(<span class="string">"coolwarm"</span>,<span class="number">11</span>))</span><br></pre></td></tr></table></figure>
<h1 id="变量间的关系"><a href="#变量间的关系" class="headerlink" title="变量间的关系"></a>变量间的关系</h1><h2 id="绘制线性回归模型"><a href="#绘制线性回归模型" class="headerlink" title="绘制线性回归模型"></a>绘制线性回归模型</h2><p><strong>一般形式</strong></p>
<ul>
<li><p>最简单的方式：散点图 + 线性回归 + 95%置信区间</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.lmplot(x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, data=tips) <span class="comment"># confidence interval</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="C:\Users\my\AppData\Local\Temp\1525330528669.png" alt=""></p>
<p><strong>局部加权回归散点平滑</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.lmplot(x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, data=tips, lowess=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fqy5oa68rqj20dx09uq32.jpg" alt=""></p>
<p><strong>方法1 加抖动</strong></p>
<p>有时散点图上的点会重合在一起，可以加个抖动给抖动开。</p>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fqy5u34qobj20dr0bwdfz.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.lmplot(x=<span class="string">"size"</span>, y=<span class="string">"tip"</span>, data=tips, x_jitter=<span class="number">0.1</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fqy5veeuy6j20c80a2wem.jpg" alt=""></p>
<p><strong>方法2 离散取值上用均值和置信区间代替散点</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.lmplot(x=<span class="string">"size"</span>, y=<span class="string">"tip"</span>, data=tips, x_estimator=np.mean)</span><br></pre></td></tr></table></figure>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fqy5ze28b8j20dh09vmx9.jpg" alt=""></p>
<h2 id="拟合不同模型"><a href="#拟合不同模型" class="headerlink" title="拟合不同模型"></a>拟合不同模型</h2><p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fqy617u1vlj20ll0dyjro.jpg" alt=""></p>
<p><strong>指定阶数</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.lmplot(x=<span class="string">"x"</span>, y=<span class="string">"y"</span>, data=anscombe.query(<span class="string">"dataset == 'II'"</span>), ci=<span class="keyword">None</span>, scatter_kws=&#123;<span class="string">"s"</span>: <span class="number">80</span>&#125;, order=<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fqy65xeiopj20ea09r74c.jpg" alt=""></p>
<p><strong>异常值</strong></p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fqy67ivgeqj20lx0bjmxb.jpg" alt=""></p>
<p><strong>逻辑回归</strong></p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fqy69i81bxj20jz0e3t94.jpg" alt=""></p>
<p><strong>残差曲线</strong></p>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fqy6cr90rkj20kx09pdfx.jpg" alt=""></p>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fqy6e05dmij20i00bx0sw.jpg" alt=""></p>
<h2 id="变量间条件关系"><a href="#变量间条件关系" class="headerlink" title="变量间条件关系"></a>变量间条件关系</h2><p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fqy6fkiee2j20f70c3aaj.jpg" alt=""></p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fqy6gjosj2j20i00cjwf1.jpg" alt=""></p>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fqy6hl0q1wj20nh0dq759.jpg" alt=""></p>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fqy6im9jr0j20m10jcq5a.jpg" alt=""></p>
<h2 id="控制图片的大小和形状"><a href="#控制图片的大小和形状" class="headerlink" title="控制图片的大小和形状"></a>控制图片的大小和形状</h2><p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fqy6kce1dhj20ja0i43zv.jpg" alt=""></p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fqy6lgmbktj20s308nab1.jpg" alt=""></p>
<h1 id="分布"><a href="#分布" class="headerlink" title="分布"></a>分布</h1><h2 id="单变量"><a href="#单变量" class="headerlink" title="单变量"></a>单变量</h2><p><strong>灰度图</strong></p>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fqy7r0efr9j20iy09nmx7.jpg" alt=""></p>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fqy7ri9jp4j20cz0a3dfv.jpg" alt=""></p>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fqy7rc01j5j20ee099glr.jpg" alt=""></p>
<p><strong>核密度估计</strong></p>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fqy8ag8sz2j20ij09ddg1.jpg" alt=""></p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fqy8amiqllj20cz0cumxo.jpg" alt=""></p>
<p><strong>模型参数拟合</strong></p>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fqy8c3g3uxj20cs09omxc.jpg" alt=""></p>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fqy8czr5lqj20c709gmxf.jpg" alt=""></p>
<h2 id="双变量分布"><a href="#双变量分布" class="headerlink" title="双变量分布"></a>双变量分布</h2><p><strong>散点图</strong></p>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fqy8e1tzl6j20dh0dj0t9.jpg" alt=""></p>
<p><strong>六角箱图</strong></p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fqy8f8yq7rj20gn0h3mza.jpg" alt=""></p>
<p><strong>核密度估计</strong></p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fqy8gbe27qj20f70dqaae.jpg" alt=""></p>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fqy8hf6490j20fs0gr3zs.jpg" alt=""></p>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fqy8iih6sdj20k60fdaad.jpg" alt=""></p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fqy8je2i4wj20l00g2754.jpg" alt=""></p>
<h2 id="数据集中的两两关系"><a href="#数据集中的两两关系" class="headerlink" title="数据集中的两两关系"></a>数据集中的两两关系</h2><p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fqy8kzuf0bj20iy0hgmzm.jpg" alt=""></p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fqy8m6rz2cj20gl0i142b.jpg" alt=""></p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fqy8n5kd43j20i40he40s.jpg" alt=""></p>
<h1 id="分类数据"><a href="#分类数据" class="headerlink" title="分类数据"></a>分类数据</h1><h2 id="分类散点图"><a href="#分类散点图" class="headerlink" title="分类散点图"></a>分类散点图</h2><p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fqy8ujlfxfj20dl0b3aa9.jpg" alt=""></p>
<p>点重叠在一起，可以抖动</p>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fqy8vanbgoj20e009x3yr.jpg" alt=""></p>
<p>或者蜂群图</p>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fqy8wriu3nj20gm0c8t95.jpg" alt=""></p>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fqy8xzapfej20dn0awaah.jpg" alt=""></p>
<h2 id="分类分布图"><a href="#分类分布图" class="headerlink" title="分类分布图"></a>分类分布图</h2><p><strong>箱图</strong></p>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fqycef36fjj20d20addfx.jpg" alt=""></p>
<p><strong>提琴图</strong></p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fqycg24kfoj20ep098wew.jpg" alt=""></p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fqycg7uqe7j20i709hgm4.jpg" alt=""></p>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fqycgp8ui8j20hv09j0t9.jpg" alt=""></p>
<h2 id="分类统计估计图"><a href="#分类统计估计图" class="headerlink" title="分类统计估计图"></a>分类统计估计图</h2><p><strong>统计柱状图</strong></p>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fqy90jxp3lj20m70fuwex.jpg" alt=""></p>
<p><strong>灰度柱状图</strong></p>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fqy91hevqqj20fi09hdfu.jpg" alt=""></p>
<p><strong>点图</strong></p>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fqy929o6wjj20lm0fzmxr.jpg" alt=""></p>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fqy936948qj20kw0i2aan.jpg" alt=""></p>
<p><strong>分类子图</strong></p>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fqy940hiprj20k409mdga.jpg" alt=""></p>
<p><strong>多分类标准的子图</strong></p>
<p><img src="C:\Users\my\Desktop\图片\多分类.png" alt=""></p>

          
        
      
    </div>
    
    
    
	<div>
	
	</div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/post/e123bc90.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JieZhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FinGeek|http://zhaojie.tech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/e123bc90.html" itemprop="url">matplotlib常用图形</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-03T10:36:06+08:00">
                2018-05-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="常用设置"><a href="#常用设置" class="headerlink" title="常用设置"></a>常用设置</h1><ul>
<li>获得当前图表对象 fig = matplotlib.pyplot.gcf() # gcf = get current figure</li>
<li>常用图表对象设置 fig.set_size_inches(10,10), matplotlib.pyplot.figure(figsize=(14,7))</li>
<li>保存当前图表对象 matplotlib.pyplot.savefig(“figure1.png”)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 设置一些全局的资源参数，可以进行个性化修改</span><br><span class="line">import matplotlib</span><br><span class="line"># 设置图片尺寸 14&quot; x 7&quot;</span><br><span class="line"># rc: resource configuration</span><br><span class="line">matplotlib.rc(&apos;figure&apos;, figsize = (14, 7))</span><br><span class="line"># 设置字体 14</span><br><span class="line">matplotlib.rc(&apos;font&apos;, size = 14)</span><br><span class="line"># 不显示网格</span><br><span class="line">matplotlib.rc(&apos;axes&apos;, grid = False)</span><br><span class="line"># 设置背景颜色是白色</span><br><span class="line">matplotlib.rc(&apos;axes&apos;, facecolor = &apos;white&apos;)</span><br></pre></td></tr></table></figure>
<p><strong>颜色/线条/标记</strong></p>
<ul>
<li>pyplot.plot(x, color=’g’)</li>
<li>pyplot.plot(x, linestyle=’—‘)</li>
<li>pyplot.plot(x, marker=’+’)</li>
<li>pyplot.plot(x, ‘ro-‘)</li>
</ul>
<p><strong>标题</strong></p>
<ul>
<li>pyplot.title(“xxxx”)</li>
</ul>
<p><strong>坐标轴标签</strong></p>
<ul>
<li>pyplot.xlabel(“xxxx”)</li>
<li>pyplot.ylabel(“xxxx”)</li>
</ul>
<p><strong>图注</strong></p>
<ul>
<li>pyplot.legend(loc=”best”)配合pyplot.plot(label=”xxxx”)</li>
</ul>
<p><strong>网格</strong></p>
<ul>
<li>pyplot.grid(color=”xxx”, linestyle=”-“, alpha=0.5)</li>
</ul>
<h1 id="关联分析"><a href="#关联分析" class="headerlink" title="关联分析"></a>关联分析</h1><h2 id="散点图"><a href="#散点图" class="headerlink" title="散点图"></a>散点图</h2><p>分析变量关系</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">scatterplot</span><span class="params">(x_data, y_data, x_label, y_label, title)</span>:</span></span><br><span class="line">    <span class="comment"># 创建一个绘图对象</span></span><br><span class="line">    fig, ax = plt.subplots()</span><br><span class="line">    <span class="comment"># 不显示顶部和右侧的坐标线</span></span><br><span class="line">    ax.spines[<span class="string">'top'</span>].set_color(<span class="string">'none'</span>)</span><br><span class="line">    ax.spines[<span class="string">'right'</span>].set_color(<span class="string">'none'</span>)</span><br><span class="line">    <span class="comment"># 设置数据、点的大小、点的颜色和透明度</span></span><br><span class="line">    ax.scatter(x_data, y_data, s = <span class="number">20</span>, color = <span class="string">'#539caf'</span>, alpha = <span class="number">0.2</span>) <span class="comment"># 配色查询：http://tool.oschina.net/commons?type=3</span></span><br><span class="line">    <span class="comment"># 添加标题和坐标说明</span></span><br><span class="line">    ax.set_title(title)</span><br><span class="line">    ax.set_xlabel(x_label)</span><br><span class="line">    ax.set_ylabel(y_label)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 绘制散点图</span></span><br><span class="line">scatterplot(x_data = daily_data[<span class="string">'temp'</span>]</span><br><span class="line">            , y_data = daily_data[<span class="string">'cnt'</span>]</span><br><span class="line">            , x_label = <span class="string">'Normalized temperature (C)'</span></span><br><span class="line">            , y_label = <span class="string">'Check outs'</span></span><br><span class="line">            , title = <span class="string">'Number of Check Outs vs Temperature'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fqy0r93wz7j20mi0blabo.jpg" alt=""></p>
<h2 id="曲线图"><a href="#曲线图" class="headerlink" title="曲线图"></a>曲线图</h2><p>拟合变量关系</p>
<h3 id="一般曲线图"><a href="#一般曲线图" class="headerlink" title="一般曲线图"></a>一般曲线图</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lineplot</span><span class="params">(x_data, y_data, x_label, y_label, title)</span>:</span></span><br><span class="line">    <span class="comment"># 创建绘图对象</span></span><br><span class="line">    _, ax = plt.subplots()</span><br><span class="line">    <span class="comment"># 绘制拟合曲线，lw=linewidth，alpha=transparancy</span></span><br><span class="line">    ax.plot(x_data, y_data, lw = <span class="number">2</span>, color = <span class="string">'#539caf'</span>, alpha = <span class="number">0.5</span>)</span><br><span class="line">    <span class="comment"># 添加标题和坐标说明</span></span><br><span class="line">    ax.set_title(title)</span><br><span class="line">    ax.set_xlabel(x_label)</span><br><span class="line">    ax.set_ylabel(y_label)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 调用绘图函数</span></span><br><span class="line">lineplot(x_data = daily_data[<span class="string">'temp'</span>]</span><br><span class="line">         , y_data = fitted_values</span><br><span class="line">         , x_label = <span class="string">'Normalized temperature (C)'</span></span><br><span class="line">         , y_label = <span class="string">'Check outs'</span></span><br><span class="line">         , title = <span class="string">'Line of Best Fit for Number of Check Outs vs Temperature'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fqy0ts1nj6j20nu0bh3z5.jpg" alt=""></p>
<h3 id="带置信区间的曲线图"><a href="#带置信区间的曲线图" class="headerlink" title="带置信区间的曲线图"></a>带置信区间的曲线图</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lineplotCI</span><span class="params">(x_data, y_data, sorted_x, low_CI, upper_CI, x_label, y_label, title)</span>:</span></span><br><span class="line">    <span class="comment"># 创建绘图对象</span></span><br><span class="line">    _, ax = plt.subplots()</span><br><span class="line">    <span class="comment"># 绘制预测曲线</span></span><br><span class="line">    ax.plot(x_data, y_data, lw = <span class="number">1</span>, color = <span class="string">'#539caf'</span>, alpha = <span class="number">1</span>, label = <span class="string">'Fit'</span>)</span><br><span class="line">    <span class="comment"># 绘制置信区间，顺序填充</span></span><br><span class="line">    ax.fill_between(sorted_x, low_CI, upper_CI, color = <span class="string">'#539caf'</span>, alpha = <span class="number">0.4</span>, label = <span class="string">'95% CI'</span>)</span><br><span class="line">    <span class="comment"># 添加标题和坐标说明</span></span><br><span class="line">    ax.set_title(title)</span><br><span class="line">    ax.set_xlabel(x_label)</span><br><span class="line">    ax.set_ylabel(y_label)</span><br><span class="line">    <span class="comment"># 显示图例，配合label参数，loc=“best”自适应方式</span></span><br><span class="line">    ax.legend(loc = <span class="string">'best'</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># Call the function to create plot</span></span><br><span class="line">lineplotCI(x_data = daily_data[<span class="string">'temp'</span>]</span><br><span class="line">           , y_data = fitted_values</span><br><span class="line">           , sorted_x = CI_df[<span class="string">'x_data'</span>]</span><br><span class="line">           , low_CI = CI_df[<span class="string">'low_CI'</span>]</span><br><span class="line">           , upper_CI = CI_df[<span class="string">'upper_CI'</span>]</span><br><span class="line">           , x_label = <span class="string">'Normalized temperature (C)'</span></span><br><span class="line">           , y_label = <span class="string">'Check outs'</span></span><br><span class="line">           , title = <span class="string">'Line of Best Fit for Number of Check Outs vs Temperature'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fqy0wjkhvhj20my0bkjsc.jpg" alt=""></p>
<h3 id="双坐标曲线"><a href="#双坐标曲线" class="headerlink" title="双坐标曲线"></a>双坐标曲线</h3><ul>
<li>曲线拟合不满足置信阈值时，考虑增加独立变量</li>
<li>分析不同尺度多变量的关系</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lineplot2y</span><span class="params">(x_data, x_label, y1_data, y1_color, y1_label, y2_data, y2_color, y2_label, title)</span>:</span></span><br><span class="line">    _, ax1 = plt.subplots()</span><br><span class="line">    ax1.plot(x_data, y1_data, color = y1_color)</span><br><span class="line">    <span class="comment"># 添加标题和坐标说明</span></span><br><span class="line">    ax1.set_ylabel(y1_label, color = y1_color)</span><br><span class="line">    ax1.set_xlabel(x_label)</span><br><span class="line">    ax1.set_title(title)</span><br><span class="line">    ax2 = ax1.twinx() <span class="comment"># 两个绘图对象共享横坐标轴</span></span><br><span class="line">    ax2.plot(x_data, y2_data, color = y2_color)</span><br><span class="line">    ax2.set_ylabel(y2_label, color = y2_color)</span><br><span class="line">    <span class="comment"># 右侧坐标轴可见</span></span><br><span class="line">    ax2.spines[<span class="string">'right'</span>].set_visible(<span class="keyword">True</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 调用绘图函数</span></span><br><span class="line">lineplot2y(x_data = daily_data[<span class="string">'dteday'</span>]</span><br><span class="line">           , x_label = <span class="string">'Day'</span></span><br><span class="line">           , y1_data = daily_data[<span class="string">'cnt'</span>]</span><br><span class="line">           , y1_color = <span class="string">'#539caf'</span></span><br><span class="line">           , y1_label = <span class="string">'Check outs'</span></span><br><span class="line">           , y2_data = daily_data[<span class="string">'windspeed'</span>]</span><br><span class="line">           , y2_color = <span class="string">'#7663b0'</span></span><br><span class="line">           , y2_label = <span class="string">'Normalized windspeed'</span></span><br><span class="line">           , title = <span class="string">'Check Outs and Windspeed Over Time'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fqy0ypi8azj20nt0avjwh.jpg" alt=""></p>
<h1 id="分布分析"><a href="#分布分析" class="headerlink" title="分布分析"></a>分布分析</h1><h2 id="灰度图"><a href="#灰度图" class="headerlink" title="灰度图"></a>灰度图</h2><p>粗略区间计数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 绘制灰度图的函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">histogram</span><span class="params">(data, x_label, y_label, title)</span>:</span></span><br><span class="line">    _, ax = plt.subplots()</span><br><span class="line">    res = ax.hist(data, color = <span class="string">'#539caf'</span>, bins=<span class="number">50</span>, edgecolor=<span class="string">'k'</span>) <span class="comment"># 设置bin的数量</span></span><br><span class="line">    ax.set_ylabel(y_label)</span><br><span class="line">    ax.set_xlabel(x_label)</span><br><span class="line">    ax.set_title(title)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘图函数调用</span></span><br><span class="line">res = histogram(data = daily_data[<span class="string">'registered'</span>]</span><br><span class="line">           , x_label = <span class="string">'Check outs'</span></span><br><span class="line">           , y_label = <span class="string">'Frequency'</span></span><br><span class="line">           , title = <span class="string">'Distribution of Registered Check Outs'</span>)</span><br><span class="line">res[<span class="number">0</span>] <span class="comment"># value of bins</span></span><br><span class="line">res[<span class="number">1</span>] <span class="comment"># boundary of bins</span></span><br></pre></td></tr></table></figure>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fqy12d5w72j20mg0c0dgc.jpg" alt=""></p>
<h2 id="堆叠直方图"><a href="#堆叠直方图" class="headerlink" title="堆叠直方图"></a>堆叠直方图</h2><p>比较两个分布</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 绘制堆叠的直方图</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">overlaid_histogram</span><span class="params">(data1, data1_name, data1_color, data2, data2_name, data2_color, x_label, y_label, title)</span>:</span></span><br><span class="line">    <span class="comment"># 归一化数据区间，对齐两个直方图的bins</span></span><br><span class="line">    max_nbins = <span class="number">20</span></span><br><span class="line">    data_range = [min(min(data1), min(data2)), max(max(data1), max(data2))]</span><br><span class="line">    binwidth = (data_range[<span class="number">1</span>] - data_range[<span class="number">0</span>]) / max_nbins</span><br><span class="line">    bins = np.arange(data_range[<span class="number">0</span>], data_range[<span class="number">1</span>] + binwidth, binwidth) <span class="comment"># 生成直方图bins区间</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Create the plot</span></span><br><span class="line">    _, ax = plt.subplots()</span><br><span class="line">    ax.hist(data1, bins = bins, color = data1_color, alpha = <span class="number">1</span>, label = data1_name, edgecolor=<span class="string">'k'</span>)</span><br><span class="line">    ax.hist(data2, bins = bins, color = data2_color, alpha = <span class="number">0.75</span>, label = data2_name, edgecolor=<span class="string">'k'</span>)</span><br><span class="line">    ax.set_ylabel(y_label)</span><br><span class="line">    ax.set_xlabel(x_label)</span><br><span class="line">    ax.set_title(title)</span><br><span class="line">    ax.legend(loc = <span class="string">'best'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Call the function to create plot</span></span><br><span class="line">overlaid_histogram(data1 = daily_data[<span class="string">'registered'</span>]</span><br><span class="line">                   , data1_name = <span class="string">'Registered'</span></span><br><span class="line">                   , data1_color = <span class="string">'#539caf'</span></span><br><span class="line">                   , data2 = daily_data[<span class="string">'casual'</span>]</span><br><span class="line">                   , data2_name = <span class="string">'Casual'</span></span><br><span class="line">                   , data2_color = <span class="string">'#7663b0'</span></span><br><span class="line">                   , x_label = <span class="string">'Check outs'</span></span><br><span class="line">                   , y_label = <span class="string">'Frequency'</span></span><br><span class="line">                   , title = <span class="string">'Distribution of Check Outs By Type'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fqy23p0kepj20nc0bk74t.jpg" alt=""></p>
<h2 id="密度图"><a href="#密度图" class="headerlink" title="密度图"></a>密度图</h2><ul>
<li>精细刻画概率分布</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 计算概率密度</span><br><span class="line">from scipy.stats import gaussian_kde</span><br><span class="line">data = daily_data[&apos;registered&apos;]</span><br><span class="line">density_est = gaussian_kde(data) # kernal density estimate: https://en.wikipedia.org/wiki/Kernel_density_estimation</span><br><span class="line"># 控制平滑程度，数值越大，越平滑哈</span><br><span class="line">density_est.covariance_factor = lambda : 0.5</span><br><span class="line">density_est._compute_covariance()</span><br><span class="line">x_data = np.arange(min(data), max(data), 200)</span><br><span class="line"></span><br><span class="line"># 绘制密度估计曲线</span><br><span class="line">def densityplot(x_data, density_est, x_label, y_label, title):</span><br><span class="line">    _, ax = plt.subplots()</span><br><span class="line">    ax.plot(x_data, density_est(x_data), color = &apos;#539caf&apos;, lw = 4)</span><br><span class="line">    ax.set_ylabel(y_label)</span><br><span class="line">    ax.set_xlabel(x_label)</span><br><span class="line">    ax.set_title(title)</span><br><span class="line"></span><br><span class="line"># 调用绘图函数</span><br><span class="line">densityplot(x_data = x_data</span><br><span class="line">            , density_est = density_est</span><br><span class="line">            , x_label = &apos;Check outs&apos;</span><br><span class="line">            , y_label = &apos;Frequency&apos;</span><br><span class="line">            , title = &apos;Distribution of Registered Check Outs&apos;)</span><br></pre></td></tr></table></figure>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fqy25jhljzj20mr0b50tl.jpg" alt=""></p>
<h1 id="组间分析"><a href="#组间分析" class="headerlink" title="组间分析"></a>组间分析</h1><ul>
<li>组间定量比较</li>
<li>分组粒度</li>
<li>组间聚类</li>
</ul>
<h2 id="柱状图"><a href="#柱状图" class="headerlink" title="柱状图"></a>柱状图</h2><ul>
<li><p>一级类间均值方差比较</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 分天分析统计特征</span></span><br><span class="line">mean_total_co_day = daily_data[[<span class="string">'weekday'</span>, <span class="string">'cnt'</span>]].groupby(<span class="string">'weekday'</span>).agg([np.mean, np.std])</span><br><span class="line">mean_total_co_day.columns = mean_total_co_day.columns.droplevel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义绘制柱状图的函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">barplot</span><span class="params">(x_data, y_data, error_data, x_label, y_label, title)</span>:</span></span><br><span class="line">    _, ax = plt.subplots()</span><br><span class="line">    <span class="comment"># 柱状图</span></span><br><span class="line">    ax.bar(x_data, y_data, color = <span class="string">'#539caf'</span>, align = <span class="string">'center'</span>)</span><br><span class="line">    <span class="comment"># 绘制方差</span></span><br><span class="line">    <span class="comment"># ls='none'去掉bar之间的连线</span></span><br><span class="line">    ax.errorbar(x_data, y_data, yerr = error_data, color = <span class="string">'#297083'</span>, ls = <span class="string">'none'</span>, lw = <span class="number">5</span>) <span class="comment"># ls = line style</span></span><br><span class="line">    ax.set_ylabel(y_label)</span><br><span class="line">    ax.set_xlabel(x_label)</span><br><span class="line">    ax.set_title(title)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘图函数调用</span></span><br><span class="line">barplot(x_data = mean_total_co_day.index.values</span><br><span class="line">        , y_data = mean_total_co_day[<span class="string">'mean'</span>]</span><br><span class="line">        , error_data = mean_total_co_day[<span class="string">'std'</span>]</span><br><span class="line">        , x_label = <span class="string">'Day of week'</span></span><br><span class="line">        , y_label = <span class="string">'Check outs'</span></span><br><span class="line">        , title = <span class="string">'Total Check Outs By Day of Week (0 = Sunday)'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fqy2dkhtaij20m80bk0t8.jpg" alt=""></p>
</li>
</ul>
<h2 id="堆积柱状图"><a href="#堆积柱状图" class="headerlink" title="堆积柱状图"></a>堆积柱状图</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 分天统计注册和偶然使用的情况</span></span><br><span class="line">mean_by_reg_co_day = daily_data[[<span class="string">'weekday'</span>, <span class="string">'registered'</span>, <span class="string">'casual'</span>]].groupby(<span class="string">'weekday'</span>).mean()</span><br><span class="line"><span class="comment"># 分天统计注册和偶然使用的占比</span></span><br><span class="line">mean_by_reg_co_day[<span class="string">'total'</span>] = mean_by_reg_co_day[<span class="string">'registered'</span>] + mean_by_reg_co_day[<span class="string">'casual'</span>]</span><br><span class="line">mean_by_reg_co_day[<span class="string">'reg_prop'</span>] = mean_by_reg_co_day[<span class="string">'registered'</span>] / mean_by_reg_co_day[<span class="string">'total'</span>]</span><br><span class="line">mean_by_reg_co_day[<span class="string">'casual_prop'</span>] = mean_by_reg_co_day[<span class="string">'casual'</span>] / mean_by_reg_co_day[<span class="string">'total'</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制堆积柱状图</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">stackedbarplot</span><span class="params">(x_data, y_data_list, y_data_names, colors, x_label, y_label, title)</span>:</span></span><br><span class="line">    _, ax = plt.subplots()</span><br><span class="line">    <span class="comment"># 循环绘制堆积柱状图</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(y_data_list)):</span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">            ax.bar(x_data, y_data_list[i], color = colors[i], align = <span class="string">'center'</span>, label = y_data_names[i])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 采用堆积的方式，除了第一个分类，后面的分类都从前一个分类的柱状图接着画</span></span><br><span class="line">            <span class="comment"># 用归一化保证最终累积结果为1</span></span><br><span class="line">            ax.bar(x_data, y_data_list[i], color = colors[i], bottom = y_data_list[i - <span class="number">1</span>], align = <span class="string">'center'</span>, label = y_data_names[i])</span><br><span class="line">    ax.set_ylabel(y_label)</span><br><span class="line">    ax.set_xlabel(x_label)</span><br><span class="line">    ax.set_title(title)</span><br><span class="line">    ax.legend(loc = <span class="string">'upper left'</span>) <span class="comment"># 设定图例位置</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用绘图函数</span></span><br><span class="line">stackedbarplot(x_data = mean_by_reg_co_day.index.values</span><br><span class="line">               , y_data_list = [mean_by_reg_co_day[<span class="string">'reg_prop'</span>], mean_by_reg_co_day[<span class="string">'casual_prop'</span>]]</span><br><span class="line">               , y_data_names = [<span class="string">'Registered'</span>, <span class="string">'Casual'</span>]</span><br><span class="line">               , colors = [<span class="string">'#539caf'</span>, <span class="string">'#7663b0'</span>]</span><br><span class="line">               , x_label = <span class="string">'Day of week'</span></span><br><span class="line">               , y_label = <span class="string">'Proportion of check outs'</span></span><br><span class="line">               , title = <span class="string">'Check Outs By Registration Status and Day of Week (0 = Sunday)'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fqy2fupl5kj20mi0bvjs1.jpg" alt=""></p>
<h2 id="分组柱状图"><a href="#分组柱状图" class="headerlink" title="分组柱状图"></a>分组柱状图</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 绘制分组柱状图的函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">groupedbarplot</span><span class="params">(x_data, y_data_list, y_data_names, colors, x_label, y_label, title)</span>:</span></span><br><span class="line">    _, ax = plt.subplots()</span><br><span class="line">    <span class="comment"># 设置每一组柱状图的宽度</span></span><br><span class="line">    total_width = <span class="number">0.8</span></span><br><span class="line">    <span class="comment"># 设置每一个柱状图的宽度</span></span><br><span class="line">    ind_width = total_width / len(y_data_list)</span><br><span class="line">    <span class="comment"># 计算每一个柱状图的中心偏移</span></span><br><span class="line">    alteration = np.arange(-total_width/<span class="number">2</span>+ind_width/<span class="number">2</span>, total_width/<span class="number">2</span>+ind_width/<span class="number">2</span>, ind_width)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 分别绘制每一个柱状图</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(y_data_list)):</span><br><span class="line">        <span class="comment"># 横向散开绘制</span></span><br><span class="line">        ax.bar(x_data + alteration[i], y_data_list[i], color = colors[i], label = y_data_names[i], width = ind_width)</span><br><span class="line">    ax.set_ylabel(y_label)</span><br><span class="line">    ax.set_xlabel(x_label)</span><br><span class="line">    ax.set_title(title)</span><br><span class="line">    ax.legend(loc = <span class="string">'upper right'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用绘图函数</span></span><br><span class="line">groupedbarplot(x_data = mean_by_reg_co_day.index.values</span><br><span class="line">               , y_data_list = [mean_by_reg_co_day[<span class="string">'registered'</span>], mean_by_reg_co_day[<span class="string">'casual'</span>]]</span><br><span class="line">               , y_data_names = [<span class="string">'Registered'</span>, <span class="string">'Casual'</span>]</span><br><span class="line">               , colors = [<span class="string">'#539caf'</span>, <span class="string">'#7663b0'</span>]</span><br><span class="line">               , x_label = <span class="string">'Day of week'</span></span><br><span class="line">               , y_label = <span class="string">'Check outs'</span></span><br><span class="line">               , title = <span class="string">'Check Outs By Registration Status and Day of Week (0 = Sunday)'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fqy2hb37m7j20mc0bp0tc.jpg" alt=""></p>
<h2 id="箱式图"><a href="#箱式图" class="headerlink" title="箱式图"></a>箱式图</h2><ul>
<li>多级类间数据分布比较</li>
<li>柱状图 + 堆叠灰度图</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 只需要指定分类的依据，就能自动绘制箱式图</span></span><br><span class="line">days = np.unique(daily_data[<span class="string">'weekday'</span>])</span><br><span class="line">bp_data = []</span><br><span class="line"><span class="keyword">for</span> day <span class="keyword">in</span> days:</span><br><span class="line">    bp_data.append(daily_data[daily_data[<span class="string">'weekday'</span>] == day][<span class="string">'registered'</span>].values)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义绘图函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">boxplot</span><span class="params">(x_data, y_data, base_color, median_color, x_label, y_label, title)</span>:</span></span><br><span class="line">    _, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 设置样式</span></span><br><span class="line">    ax.boxplot(y_data</span><br><span class="line">               <span class="comment"># 箱子是否颜色填充</span></span><br><span class="line">               , patch_artist = <span class="keyword">True</span></span><br><span class="line">               <span class="comment"># 中位数线颜色</span></span><br><span class="line">               , medianprops = &#123;<span class="string">'color'</span>: base_color&#125;</span><br><span class="line">               <span class="comment"># 箱子颜色设置，color：边框颜色，facecolor：填充颜色</span></span><br><span class="line">               , boxprops = &#123;<span class="string">'color'</span>: base_color, <span class="string">'facecolor'</span>: median_color&#125;</span><br><span class="line">               <span class="comment"># 猫须颜色whisker</span></span><br><span class="line">               , whiskerprops = &#123;<span class="string">'color'</span>: median_color&#125;</span><br><span class="line">               <span class="comment"># 猫须界限颜色whisker cap</span></span><br><span class="line">               , capprops = &#123;<span class="string">'color'</span>: base_color&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 箱图与x_data保持一致</span></span><br><span class="line">    ax.set_xticklabels(x_data)</span><br><span class="line">    ax.set_ylabel(y_label)</span><br><span class="line">    ax.set_xlabel(x_label)</span><br><span class="line">    ax.set_title(title)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用绘图函数</span></span><br><span class="line">boxplot(x_data = days</span><br><span class="line">        , y_data = bp_data</span><br><span class="line">        , base_color = <span class="string">'b'</span></span><br><span class="line">        , median_color = <span class="string">'r'</span></span><br><span class="line">        , x_label = <span class="string">'Day of week'</span></span><br><span class="line">        , y_label = <span class="string">'Check outs'</span></span><br><span class="line">        , title = <span class="string">'Total Check Outs By Day of Week (0 = Sunday)'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fqy2jfzh9vj20qi0csjrw.jpg" alt=""></p>

          
        
      
    </div>
    
    
    
	<div>
	
	</div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/post/4d591cd8.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JieZhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FinGeek|http://zhaojie.tech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/4d591cd8.html" itemprop="url">python数据可视化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-03T10:17:20+08:00">
                2018-05-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    
	<div>
	
	</div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/post/467c8455.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JieZhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FinGeek|http://zhaojie.tech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/467c8455.html" itemprop="url">腾讯漫画</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-28T21:32:32+08:00">
                2018-04-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="PhantomJS和腾讯漫画爬虫"><a href="#PhantomJS和腾讯漫画爬虫" class="headerlink" title="PhantomJS和腾讯漫画爬虫"></a>PhantomJS和腾讯漫画爬虫</h1><p>相当于一个无界面的浏览器，效率不算高，但是当一些反爬措施无法破解时，可以使用PhantomJs。</p>
<p>实际中可以难点部分交给PhantomJs处理，其他部分有urllib或scrapy处理</p>
<p>去官网<code>http://phantomjs.org/</code>下载</p>
<p>设置一下环境变量</p>
<p>安装selenium模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import time</span><br><span class="line">from selenium import webdriver</span><br><span class="line"></span><br><span class="line">browser=webdriver.PhantomJS() # phantomjs的接口 生成一个对象</span><br><span class="line">browser.get(&apos;http://www.baidu.com&apos;) # get访问</span><br><span class="line">a=browser.get_screenshot_as_file(&apos;./test.jpg&apos;) # 截屏</span><br><span class="line"># browser.find_element_by_xpath(&apos;//*[@id=&quot;kw&quot;]&apos;).clear() # 通过xpath找到输入框 清除一下</span><br><span class="line"># browser.find_element_by_xpath(&apos;//*[@id=&quot;kw&quot;]&apos;).send_keys(&apos;爬虫&apos;) # send_keys 输入数据</span><br><span class="line"># browser.find_element_by_xpath(&apos;//*[@id=&quot;su&quot;]&apos;).click() # 找到搜索点击按钮</span><br><span class="line"># time.sleep(5)</span><br><span class="line"># a=browser.get_screenshot_as_file(&apos;./test.jpg&apos;)</span><br><span class="line">data=browser.page_source # 找到网页源码</span><br><span class="line">browser.quit()</span><br><span class="line">print(len(data))</span><br><span class="line">import re</span><br><span class="line">title=re.compile(&apos;&lt;title&gt;(.*?)&lt;/title&gt;&apos;).findall(data)</span><br><span class="line">print(title)</span><br><span class="line">print(data)</span><br></pre></td></tr></table></figure>
<h2 id="腾讯动漫爬取"><a href="#腾讯动漫爬取" class="headerlink" title="腾讯动漫爬取"></a>腾讯动漫爬取</h2><p>图片地址随机生成没有规律，无法通过以前的办法爬下来漫画</p>
<p>导入头</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.desired_capabilities <span class="keyword">import</span> DesiredCapabilities</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br></pre></td></tr></table></figure>
<p>上面第三个是伪装浏览器要用到的</p>
<p>浏览器伪装</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dcap = dict(DesiredCapabilities.PHANTOMJS)</span><br><span class="line">dcap[<span class="string">"phantomjs.page.settings.userAgent"</span>] = (<span class="string">"Mozilla/4.0 (compatible; MSIE 5.5; windows NT)"</span>  )</span><br><span class="line">browser = webdriver.PhantomJS(desired_capabilities=dcap)</span><br></pre></td></tr></table></figure>
<p>访问漫画的网址，保存截图</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">browser.get(<span class="string">"http://ac.qq.com/ComicView/index/id/539443/cid/1"</span>)</span><br><span class="line">a=browser.get_screenshot_as_file(<span class="string">"./test.jpg"</span>)</span><br></pre></td></tr></table></figure>
<p>发现截图只有三张动漫</p>
<p>必须下滑才能显示下面的图片</p>
<p>于是，要实现下滑的操作，用js语句实现</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    <span class="comment">#browser.execute_script('window.scrollTo(0,document.body.scrollHeight)')</span></span><br><span class="line">    js=<span class="string">'window.scrollTo('</span>+str(i*<span class="number">1280</span>)+<span class="string">','</span>+str((i+<span class="number">1</span>)*<span class="number">1280</span>)+<span class="string">')'</span></span><br><span class="line">    browser.execute_script(js)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>下滑之后，源码就会出现，可以把源码下载下来了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data=browser.page_source</span><br><span class="line">fh=open(<span class="string">"./dongman.html"</span>,<span class="string">"w"</span>,encoding=<span class="string">"utf-8"</span>)</span><br><span class="line">fh.write(data)</span><br><span class="line">fh.close()</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>
<p>现在可以爬取源码中的图片了</p>
<p>构造正则如下</p>
<p><code>pat=&#39;&lt;img src=&quot;(http:..ac.tc.qq.com.store_file_download.buid=.*?name=.*?).jpg&quot;&#39;</code></p>
<p>开爬</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pat=<span class="string">'&lt;img src="(http:..ac.tc.qq.com.store_file_download.buid=.*?name=.*?).jpg"'</span></span><br><span class="line">allimg=re.compile(pat).findall(data)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,len(allimg)):</span><br><span class="line">    thisurl=allimg[i]</span><br><span class="line">    thisurl2=thisurl.replace(<span class="string">"amp;"</span>,<span class="string">""</span>)+<span class="string">".jpg"</span></span><br><span class="line">    print(thisurl2)</span><br><span class="line">    localpath=<span class="string">"./"</span>+str(i)+<span class="string">".jpg"</span></span><br><span class="line">    urllib.request.urlretrieve(thisurl2,filename=localpath)</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    
	<div>
	
	</div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/post/157cd0b2.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JieZhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FinGeek|http://zhaojie.tech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/157cd0b2.html" itemprop="url">scrapy初步</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-28T21:30:10+08:00">
                2018-04-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="认识scrapy框架"><a href="#认识scrapy框架" class="headerlink" title="认识scrapy框架"></a>认识scrapy框架</h1><p>过去我们写的爬虫只能成为爬虫文件，现在我们要学习的scrapy框架会形成一个完整的爬虫项目。scrapy是python的一个通用型爬虫框架，可以胜任任何爬虫工作，可以提高我们的开发效率，并且适合做一些中大型的爬虫项目。urllib适合写爬虫文件，scrapy更适合做爬虫项目。</p>
<p>安装好scrapy之后，在命令行输入scrapy -h，会得到可以使用的命令：</p>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fpykd4tgtzj20gy09emx8.jpg" alt="scrapy命令"></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>指令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>bench</td>
<td>即可在项目里面执行，也可在项目外面执行，一般应在项目里运行</td>
</tr>
<tr>
<td>fetch</td>
<td>直接获取网页</td>
</tr>
<tr>
<td>genspier</td>
<td>创建爬虫文件，而不是爬虫项目</td>
</tr>
<tr>
<td>runspider</td>
<td>运行爬虫文件</td>
</tr>
<tr>
<td>settings</td>
<td>获取setings的值</td>
</tr>
<tr>
<td>shell</td>
<td>进入交互式页面</td>
</tr>
<tr>
<td>startproject</td>
<td>创建一个项目</td>
</tr>
<tr>
<td>version</td>
<td>版本</td>
</tr>
<tr>
<td>view</td>
<td>爬取并在浏览器中打开</td>
</tr>
</tbody>
</table>
</div>
<p>下面我们在e盘myscrapy文件夹下创建一个名为test的爬虫项目：</p>
<p><code>scrapy startproject hello</code></p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fpykq8s2k8j20i0046jra.jpg" alt="startproject"></p>
<p>我们的myscrapy多出一个hello文件夹，这个文件夹中就是我们的爬虫项目，我们的爬虫项目就叫hello。</p>
<p>进入hello项目文件夹</p>
<p>我们看到还有一个hello文件夹，以及一个scrapy.cfg文件，这个hello文件夹我们称为爬虫项目里面的核心目录，scrapy.cfg主要是用来进行整个爬虫项目的配置的。</p>
<p>我们再次进入hello文件夹</p>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fpykw308j0j20mr096js1.jpg" alt="文件夹格式"></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>文件/目录</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>_pycache_</td>
<td>缓存相关的文件，不用管</td>
</tr>
<tr>
<td>spider文件夹</td>
<td>放置我们项目的爬虫文件</td>
</tr>
<tr>
<td>_init_.py</td>
<td>初始化文件</td>
</tr>
<tr>
<td>items.py</td>
<td>存放我们要爬取的具体目标</td>
</tr>
<tr>
<td>middlewates.py</td>
<td>中间件文件</td>
</tr>
<tr>
<td>pipelines.py</td>
<td>主要是爬后处理的文件，如是写进文件中还是数据库中</td>
</tr>
<tr>
<td>settings.py</td>
<td>一个总体设置的文件</td>
</tr>
</tbody>
</table>
</div>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fpylwznfubj20hs0dbmxn.jpg" alt="scrapy流程图"></p>
<p>从调度程序Scheduler开始看，调度程序从scrapy引擎接受请求并排序列入队列从而形成了任务队列，然后把请求发给Downloader，Downloader就会从因特网上下载信息，这些信息是Responses，传给Spider，Spider会根据我们编写的代码进行数据处理、筛选、提取等操作，会获得新的请求网址，再次通过引擎传给任务队列，最终会得到了我们定义的目标Items，然后把Items传给Pipeline进行后续的处理。</p>
<p>我们创建了爬虫项目，在爬虫项目下我们可以使用一些创建项目前不能使用的指令。这些新的指令被称为项目指令，而那些创建项目之前就能使用的指令被称为全局指令。</p>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fpymp88wcdj20hg0ad0su.jpg" alt="新指令"></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>指令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>check</td>
<td>检查爬虫协议</td>
</tr>
<tr>
<td>crawl</td>
<td>运行爬虫文件</td>
</tr>
<tr>
<td>edit</td>
<td>编辑spider，主要在linux中用</td>
</tr>
<tr>
<td>list</td>
<td>列出当前爬虫项目下可用的爬虫文件</td>
</tr>
<tr>
<td>parse</td>
<td>解析url并打印结果</td>
</tr>
</tbody>
</table>
</div>
<p>下面详细说一下：</p>
<p><code>scrapy fetch http://www.baidu.com</code></p>
<p>获取网页，命令行中会显示我们抓取的网页，记得把settings里的rebots关掉， <code>ROBOTSTXT_OBEY = False</code>。</p>
<p><code>scrapy runspider</code>  不依托scrapy爬虫项目直接运行爬虫文件，即有的时候不想创建爬虫项目，直接做一个爬虫文件，做了一个爬虫文件后一般 不可直接执行,下面是一个简单的scrapy爬虫文件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scrapy.spiders <span class="keyword">import</span> Spider</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FirstSpider</span><span class="params">(Spider)</span>:</span></span><br><span class="line"></span><br><span class="line">	name = <span class="string">'First'</span></span><br><span class="line"></span><br><span class="line">	allowed_domains=[<span class="string">'baidu.com'</span>]</span><br><span class="line"></span><br><span class="line">	start_urls=[<span class="string">'http://www.baidu.com'</span>]</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>此时，我们可以用runspider+爬虫文件名来运行这个爬虫文件。</p>
<p>进入爬虫项目后</p>
<p><code>scrapy settings  --get BOT_NAME</code> 获取了settings.py里的BOT_NAME的值。</p>
<p><code>scrapy shell http://www.baidu.com</code> 交互式爬取 exit()退出</p>
<p><code>scrapy view http://news.163.com</code> 会把163新闻首页爬取下来存到本地，并用浏览器打开，如下图所示</p>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fpz7ip9ryyj213e0lgtj7.jpg" alt="首页"></p>
<p><code>scrapy bench</code>  测试硬件性能</p>
<p><code>scrapy genspider -l</code>   查看爬虫模板</p>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fpz94zj1drj20fn031dfn.jpg" alt="模板"></p>
<p>我们一般用basic模板即可</p>
<p>crawl 自动爬虫，做类似搜索引擎的爬虫</p>
<p>csvfeed 爬取csv格式数据</p>
<p>xmlfeed 爬取xml格式数据</p>
<p>scrapy genspider -t 模板 爬虫文件名 域名</p>
<p><code>scrapy genspider -t basic dangdang dangdang.com</code> 创建一个名为dangdang的爬虫文件，用的是basic模板，指定域名dangdang.com。</p>
<p><code>scrapy check dangdang</code> 检查dangdang这个爬虫文件是否合规，以合同的方式进行测试</p>
<hr>
<p>Spider Contracts</p>
<hr>
<p><code>spider crawl dangdang</code>  运行爬虫项目下的爬虫文件，和前面的runspider是不一样的，那里是独立的爬虫文件。如果不想显示日志信息可以加上 —nolog ，即<code>spider crawl dangdang --nolog</code>。</p>
<p><code>spider list</code> 查看当前项目下有哪些可用的爬虫文件</p>
<p><code>scrapy parse --spider=dangdang http:www.baidu.com</code>  指定项目中的爬虫文件爬取网页</p>
<h1 id="当当网爬取实战"><a href="#当当网爬取实战" class="headerlink" title="当当网爬取实战"></a>当当网爬取实战</h1><p>目标：获取商品名 商品链接 商品评论数</p>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fpzb5nj833j20rh06vabx.jpg" alt="当当网"></p>
<p>url 是<code>http://search.dangdang.com/?key=python&amp;act=input&amp;show=big#J_tab</code></p>
<p><code>scrapy startproject dangdang</code></p>
<p>创建名为dangdang的爬虫项目</p>
<p><code>cd dangdnag</code></p>
<p>进入项目目录</p>
<p><code>scrapy genspider -t basic dd dangdang.com</code></p>
<p>创建名为dd的爬虫文件，爬虫文件名不能和爬虫项目名重名</p>
<p>首先，编写items.py，确定我们的目标，创建三个容器来盛放我们的目标：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DangdangItem</span><span class="params">(scrapy.Item)</span>:</span></span><br><span class="line">    <span class="comment"># define the fields for your item here like:</span></span><br><span class="line">    <span class="comment"># name = scrapy.Field()</span></span><br><span class="line">    title = scrapy.Field()</span><br><span class="line">    link = scrapy.Field()</span><br><span class="line">    comment = scrapy.Field()</span><br></pre></td></tr></table></figure>
<p>然后，进入dd.py</p>
<p>导入我们的目标</p>
<p><code>from dangdang.items import DangdangItem</code></p>
<p>容器实例化</p>
<p>item=DangdangItem()</p>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fpzcxgo4c7j216t04at9b.jpg" alt="html"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">title</span>=<span class="string">" Python编程 从入门到实践"</span>  <span class="attr">ddclick</span>=<span class="string">"act=normalResult_picture&amp;pos=24003310_0_1_q"</span> <span class="attr">class</span>=<span class="string">"pic"</span> <span class="attr">name</span>=<span class="string">"itemlist-picture"</span>  <span class="attr">dd_name</span>=<span class="string">"单品图片"</span> <span class="attr">href</span>=<span class="string">"http://product.dangdang.com/24003310.html"</span>  <span class="attr">target</span>=<span class="string">"_blank"</span> &gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">'http://img3m0.ddimg.cn/67/4/24003310-1_b_5.jpg'</span> <span class="attr">alt</span>=<span class="string">' Python编程 从入门到实践'</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"price"</span> &gt;</span> <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"price_n"</span>&gt;</span>&amp;yen;69.80<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color: #878787;text-decoration:none;"</span>&gt;</span>定价：<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"price_r"</span>&gt;</span>&amp;yen;89.00<span class="tag">&lt;/<span class="name">span</span>&gt;</span>(<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"price_s"</span>&gt;</span>7.85折<span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"name"</span> <span class="attr">name</span>=<span class="string">"title"</span> &gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">title</span>=<span class="string">" Python编程 从入门到实践"</span> <span class="attr">href</span>=<span class="string">"http://product.dangdang.com/24003310.html"</span> <span class="attr">ddclick</span>=<span class="string">"act=normalResult_title&amp;pos=24003310_0_1_q"</span> <span class="attr">name</span>=<span class="string">"itemlist-title"</span> <span class="attr">dd_name</span>=<span class="string">"单品标题"</span> <span class="attr">target</span>=<span class="string">"_blank"</span> &gt;</span> <span class="tag">&lt;<span class="name">font</span> <span class="attr">class</span>=<span class="string">"skcolor_ljg"</span>&gt;</span>Python<span class="tag">&lt;/<span class="name">font</span>&gt;</span>编程 从入门到实践<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"search_hot_word"</span> &gt;</span>Python3.5编程入门图书 机器学习 数据处理 网络爬虫热门编程语言 从基本概念到完整项目开发 帮助零基础读者迅速掌握Python编程 附赠源代码文件<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"star"</span> &gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"level"</span> &gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"width: 90%;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://product.dangdang.com/24003310.html?point=comment_point"</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">name</span>=<span class="string">"itemlist-review"</span> <span class="attr">dd_name</span>=<span class="string">"单品评论"</span> <span class="attr">ddclick</span>=<span class="string">"act=click_review_count&amp;pos=24003310_0_1_q"</span>&gt;</span>5307条评论<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"empty_div"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"new_lable"</span> <span class="attr">y</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"tag_box"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"shop_button"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"bottom_p"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>  <span class="attr">class</span>=<span class="string">'search_btn_cart '</span> <span class="attr">name</span>=<span class="string">'Buy'</span> <span class="attr">dd_name</span>=<span class="string">'加入购物车'</span> <span class="attr">href</span>=<span class="string">'javascript:AddToShoppingCart(24003310)'</span> <span class="attr">ddclick</span>=<span class="string">'act=normalResult_addToCart&amp;pos=24003310_0_1_q'</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">'icon'</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>加入购物车<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">'search_btn_collect'</span> <span class="attr">name</span>=<span class="string">'collect'</span> <span class="attr">dd_name</span>=<span class="string">'加入收藏'</span> <span class="attr">id</span>=<span class="string">"lcase24003310"</span> <span class="attr">href</span>=<span class="string">"javascript:void(0);"</span> <span class="attr">name</span>=<span class="string">"Sc"</span> <span class="attr">ddclick</span>=<span class="string">'act=normalResult_favor&amp;pos=24003310_0_1_q'</span>&gt;</span>收藏<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>浏览器中，搜索商品名，有三个地方有我们要找的商品名，选哪个地方呢？我们试一下第一个a标签中的name=”itemlist-picture”，搜索了一下发现有60个，正好是商品页的商品数，再对应一下，每个商品都有该属性，于是可以用该属性值来提取商品名，xpath表达式是：</p>
<p><code>//a[@name=&quot;itemlist-picture&quot;]/@title</code></p>
<p>同理取商品链接的xpath表达式是：</p>
<p><code>//a[@name=&quot;itemlist-title&quot;]/@href</code></p>
<p>取商品评论数的xpath表达式是：</p>
<p><code>//a[@name=&quot;itemlist-review&quot;]/text()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> dangdang.items <span class="keyword">import</span> DangdangItem</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DdSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'dd'</span></span><br><span class="line">    allowed_domains = [<span class="string">'dangdang.com'</span>]</span><br><span class="line">    start_urls = [<span class="string">'http://search.dangdang.com/?key=python&amp;act=input&amp;show=big#J_tab'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        item=DangdangItem()</span><br><span class="line">        item[<span class="string">'title'</span>]=response.xpath(<span class="string">'//a[@name="itemlist-picture"]/@title'</span>).extract()</span><br><span class="line">        item[<span class="string">'link'</span>]=response.xpath(<span class="string">'//a[@name="itemlist-title"]/@href'</span>).extract()</span><br><span class="line">        item[<span class="string">'comment'</span>]=response.xpath(<span class="string">'//a[@name="itemlist-review"]/text()'</span>).extract()</span><br><span class="line">        print(item[<span class="string">'link'</span>])</span><br></pre></td></tr></table></figure>
<p>我们用print打印验证一下</p>
<p>运行爬虫文件</p>
<p><code>scrapy crawl dd</code></p>
<p>不显示输出日志的话用</p>
<p><code>scrapy crawl dd --nolog</code></p>
<p>命令行中会显示我们爬取的名称、链接和评论数</p>
<p>最后，我们要进行处理了，把这些内容写进数据库中。</p>
<p>把上面的<code>print(item[&#39;link&#39;])</code>改成<code>yield item</code>即可把我们获取的item传到pipelines中，下面我们到pipelines.py中进行处理。</p>
<p>我们要去settings.py里开启pipelines,即去掉注释，下面是去掉注释后的代码:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Configure item pipelines</span></span><br><span class="line"><span class="comment"># See http://scrapy.readthedocs.org/en/latest/topics/item-pipeline.html</span></span><br><span class="line">ITEM_PIPELINES = &#123;</span><br><span class="line">   <span class="string">'dangdang.pipelines.DangdangPipeline'</span>: <span class="number">300</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在pipelines.py中输入以下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DangdangPipeline</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(item[<span class="string">'title'</span>])):</span><br><span class="line">            title=item[<span class="string">'title'</span>][i]</span><br><span class="line">            link=item[<span class="string">'link'</span>][i]</span><br><span class="line">            comment=item[<span class="string">'comment'</span>][i]</span><br><span class="line">            print(title+link+comment)</span><br><span class="line">        <span class="keyword">return</span> item</span><br></pre></td></tr></table></figure>
<p>重新运行爬虫文件，开打印效果。</p>
<p>成功后我们下面写入数据库中：</p>
<p>依次在mysql命令行中输入以下代码建立数据库和数据表：</p>
<p><code>create database dd;</code></p>
<p><code>use dd;</code></p>
<p><code>create table goods(id int(32) auto_increment primary key,title varchar(100),link varchar(100) unique,comment varchar(100))ENGINE=InnoDB DEFAULT CHARSET=utf8;</code></p>
<p>或者</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="string">`goods`</span>(</span><br><span class="line"><span class="string">`id`</span> <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> AUTO_INCREMENT,</span><br><span class="line"><span class="string">`title`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line"><span class="string">`link`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line"><span class="string">`comment`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">PRIMARY <span class="keyword">KEY</span> ( <span class="string">`id`</span> )</span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure>
<p>然后，把title、link、comment写入数据库:</p>
<p>有两种写法:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DangdangPipeline</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span></span><br><span class="line">        conn = pymysql.connect(host=<span class="string">'127.0.0.1'</span>, user=<span class="string">'root'</span>, passwd=<span class="string">'root'</span>, db=<span class="string">'dd'</span>, charset=<span class="string">'utf8'</span>, use_unicode=<span class="keyword">True</span>)</span><br><span class="line">        cursor = conn.cursor()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(item[<span class="string">'title'</span>])):</span><br><span class="line">            title=item[<span class="string">'title'</span>][i]</span><br><span class="line">            link=item[<span class="string">'link'</span>][i]</span><br><span class="line">            comment=item[<span class="string">'comment'</span>][i]</span><br><span class="line">            sql = <span class="string">'insert into goods(title,link,comment) values("'</span>+title+<span class="string">'","'</span>+link+<span class="string">'","'</span>+comment+<span class="string">'")'</span> <span class="comment"># values是字符串的话必须用引号引起来</span></span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">            	conn.query(sql)</span><br><span class="line">            	conn.commit() <span class="comment"># 不能漏掉</span></span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> err：</span><br><span class="line">            	print(err)</span><br><span class="line">        conn.close()</span><br><span class="line">        <span class="keyword">return</span> item</span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DangdangPipeline</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span></span><br><span class="line">        conn = pymysql.connect(host=<span class="string">'127.0.0.1'</span>, user=<span class="string">'root'</span>, passwd=<span class="string">'root'</span>, db=<span class="string">'dd'</span>, charset=<span class="string">'utf8'</span>, use_unicode=<span class="keyword">True</span>)</span><br><span class="line">        cursor = conn.cursor()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(item[<span class="string">'title'</span>])):</span><br><span class="line">            title=item[<span class="string">'title'</span>][i]</span><br><span class="line">            link=item[<span class="string">'link'</span>][i]</span><br><span class="line">            comment=item[<span class="string">'comment'</span>][i]</span><br><span class="line">            sql = <span class="string">'insert into goods(title,link,comment) values("%s", "%s", "%s")'</span></span><br><span class="line">            data = (str(title), str(link), str(comment))</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">            	cursor.execute(sql %data)</span><br><span class="line">            	conn.commit()</span><br><span class="line">             <span class="keyword">except</span> Exception <span class="keyword">as</span> err:</span><br><span class="line">             	print(err)</span><br><span class="line">        conn.close()</span><br><span class="line">        <span class="keyword">return</span> item</span><br></pre></td></tr></table></figure>
<p>上面我们是抓取了一页，如果想抓取多页怎么办，我们点击下面的页码，发现url的规律，构造url如下：</p>
<p><code>url = &#39;http://search.dangdang.com/?key=python&amp;act=input&amp;show=big&amp;page_index=&#39;+str(i)</code></p>
<p>而抓取多页的方式和抓取一页的方式是一样的，我们只需要再调用我们的parse方法即可，此时要用到Request方法，导入包<code>from scrapy.http import Request</code>。</p>
<p>用Request抓取url</p>
<p>最终代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> dangdang.items <span class="keyword">import</span> DangdangItem</span><br><span class="line"><span class="keyword">from</span> scrapy.http <span class="keyword">import</span> Request</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DdSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'dd'</span></span><br><span class="line">    allowed_domains = [<span class="string">'dangdang.com'</span>]</span><br><span class="line">    start_urls = [<span class="string">'http://search.dangdang.com/?key=python&amp;act=input&amp;show=big#J_tab'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        item=DangdangItem()</span><br><span class="line">        item[<span class="string">'title'</span>]=response.xpath(<span class="string">'//a[@name="itemlist-picture"]/@title'</span>).extract()</span><br><span class="line">        item[<span class="string">'link'</span>]=response.xpath(<span class="string">'//a[@name="itemlist-title"]/@href'</span>).extract()</span><br><span class="line">        item[<span class="string">'comment'</span>]=response.xpath(<span class="string">'//a[@name="itemlist-review"]/text()'</span>).extract()</span><br><span class="line">        <span class="keyword">yield</span> item</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, <span class="number">8</span>):</span><br><span class="line">            url = <span class="string">'http://search.dangdang.com/?key=python&amp;act=input&amp;show=big&amp;page_index='</span>+str(i)</span><br><span class="line">            <span class="keyword">yield</span> Request(url, callback=self.parse)</span><br></pre></td></tr></table></figure>
<h1 id="scrapy模拟登录"><a href="#scrapy模拟登录" class="headerlink" title="scrapy模拟登录"></a>scrapy模拟登录</h1><p>思路：等网站登录进行抓包分析，分析出form表单中有哪些数据，找到真实的post地址，构造数据，把信息post到真实的地址，实现登录并保存cookie。</p>
<h3 id="豆瓣网"><a href="#豆瓣网" class="headerlink" title="豆瓣网"></a>豆瓣网</h3><p>登陆页url<code>https://accounts.douban.com/login</code></p>
<p>在setting.py内启动<code>DOWNLOAD_DELAY=3</code> 以及<em>User-Agent</em>代理：<code>USER_AGENT = &#39;Douban (+http://www.douban.com)&#39;</code></p>
<p>我们先爬一下这个页面，爬豆瓣的时要进行浏览器伪装，设置headers，因此不用start_urls,而是重载start_requests方法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D1Spider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'d1'</span></span><br><span class="line">    allowed_domains = [<span class="string">'douban.com'</span>]</span><br><span class="line">    <span class="comment">#start_urls = ['http://douban.com/']</span></span><br><span class="line">    header = &#123;</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.36'</span>&#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">start_requests</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># 首先爬一次登录页，然后进入回调函数parse()</span></span><br><span class="line">        <span class="keyword">return</span> [Request(<span class="string">'https://accounts.douban.com/login'</span>, meta=&#123;<span class="string">'cookiejar'</span>: <span class="number">1</span>&#125;, callback=self.parse,headers=self.header)]</span><br></pre></td></tr></table></figure>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fq0luwwoezj216d0h177d.jpg" alt="豆瓣"></p>
<p>浏览器中F12,然后在登录页面输错账号密码，观察post的form格式，上面红框就是我们要找的内容。</p>
<p>构造post信息</p>
<p>有时登陆需要验证码，有时不需要</p>
<p>需要的时候，html页面中会有</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">"captcha_image"</span> <span class="attr">src</span>=<span class="string">"[https://www.douban.com/misc/captcha?id=2F79w3zHWIEQjiVe03ZbnfzO:en&amp;size=s](https://www.douban.com/misc/captcha?id=2F79w3zHWIEQjiVe03ZbnfzO:en&amp;size=s)"</span> <span class="attr">alt</span>=<span class="string">"captcha"</span> <span class="attr">class</span>=<span class="string">"captcha_image"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>因此，如果能用xpath取到这个img标签就说明有验证码，否则，就没有验证码。</p>
<p>有验证码和没有验证码我们要构造的post信息是不一样的</p>
<p>有验证码时，构造的post必须含有’captcha-solution’这一项：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;</span><br><span class="line">               <span class="string">'redir'</span>: <span class="string">'https://www.douban.com/'</span>,</span><br><span class="line">               <span class="string">'form_email'</span>: <span class="string">'zhao750456695@163.com'</span>,</span><br><span class="line">               <span class="string">'form_password'</span>: <span class="string">'zhaojie123'</span></span><br><span class="line">               <span class="string">'captcha-solution'</span>: ,</span><br><span class="line">           &#125;</span><br></pre></td></tr></table></figure>
<p>关键问题是验证码识别</p>
<h2 id="验证码识别"><a href="#验证码识别" class="headerlink" title="验证码识别"></a>验证码识别</h2><p>1.半自动处理</p>
<p>半自动处理是将验证码图片储存到本地，手工打开验证码图片进行识别并输入验证码。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">       <span class="comment"># 判断是否有验证码</span></span><br><span class="line">       captcha=response.xpath(<span class="string">'//img[@id="captcha_image"]/@src'</span>).extract()</span><br><span class="line">       <span class="comment"># 设置要传递的post信息，此时没有验证码字段</span></span><br><span class="line">       print(response.xpath(<span class="string">'/html/head/title/text()'</span>).extract())</span><br><span class="line">       <span class="keyword">if</span>(len(captcha)&gt;<span class="number">0</span>):</span><br><span class="line">           print(<span class="string">'此时有验证码'</span>)</span><br><span class="line">           localpath=<span class="string">'./captcha.png'</span></span><br><span class="line">           urllib.request.urlretrieve(captcha[<span class="number">0</span>],filename=localpath)</span><br><span class="line">           captcha_value=input(<span class="string">'请输入验证码'</span>)</span><br><span class="line">           data = &#123;</span><br><span class="line">               <span class="string">'redir'</span>: <span class="string">'https://www.douban.com/'</span>,</span><br><span class="line">               <span class="string">'form_email'</span>: <span class="string">'xxxxxxx,</span></span><br><span class="line"><span class="string">               '</span>form_password<span class="string">': '</span>xxxxxx<span class="string">',</span></span><br><span class="line"><span class="string">               '</span>captcha-solution<span class="string">': captcha_value</span></span><br><span class="line"><span class="string">           &#125;</span></span><br></pre></td></tr></table></figure>
<p>2.接口处理</p>
<p>下面我们以云打码平台为例<code>http://www.yundama.com/</code></p>
<p>注册一个开发者用户和一个普通用户</p>
<p>登录开发者用户</p>
<p>点击网站上方菜单栏开发者文档</p>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fq0ovzn3ubj20ti0hswgj.jpg" alt="云打码"></p>
<p>点击根据开发语言下载DEMO一栏的链接，新页面中点击<em>Python调用示例下载</em>，下载压缩包。</p>
<p>解压缩到你想要解压缩的地方</p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fq0p3h6qpjj20lk0bn74o.jpg" alt="云打码"></p>
<p>打开<code>YDMPython3.x.py</code></p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fq0p7wanq7j20qr0aigm9.jpg" alt="path"></p>
<p>如上图红框，填上API的路径，我们选的是64位的，34位系统选择另一个即可。</p>
<p>在云打码平台开发者账号下，点击<em>我的软件</em>选择<em>添加新软件</em>，名字随便起，如下所示：</p>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fq0paqq1rlj20u0062q3f.jpg" alt="秘钥"></p>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fq0pemtbmzj20rj045wep.jpg" alt="秘钥"></p>
<p>填完API路径后，继续输入appId和appKey，这两项就是软件代码和通讯秘钥，填上即可。</p>
<p>在下面所示的位置填上自己的普通账号和密码即可。</p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fq0phijxzsj20l602rmx3.jpg" alt="user"></p>
<p>在下面的位置填上获取的验证码图片的路径。</p>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fq0pnl5rvtj20mm081mxg.jpg" alt="验证码"></p>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fq0pw0aud0j20n40degm7.jpg" alt="img"></p>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fq0pw3o750j20pp05nglp.jpg" alt=""></p>
<p>根据网站的说明和豆瓣网站的验证码情况，把codetype改为3000</p>
<p>配置完成，去验证一下看看能不能运行，打开cmd，进入配置文件的目录，运行配置文件：</p>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fq0prlbm1ej20hm04q0sp.jpg" alt="运行"></p>
<p>出现这个结果说明配置正确</p>
<p>有普通识别和一键识别，留一个即可，我留了一键识别，可以把普通识别删掉或注释掉。注释掉所有打印的地方，只留下下面：</p>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fq0qxua16wj20s60480sp.jpg" alt=""></p>
<p>result.value后面加上decode(),把byte转为str。</p>
<p>于是，在爬虫文件执行上面的cmd命令，可以自动识别验证码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">    <span class="comment"># 判断是否有验证码</span></span><br><span class="line">    captcha=response.xpath(<span class="string">'//img[@id="captcha_image"]/@src'</span>).extract()</span><br><span class="line">    <span class="comment"># 设置要传递的post信息，此时没有验证码字段</span></span><br><span class="line">    print(response.xpath(<span class="string">'/html/head/title/text()'</span>).extract())</span><br><span class="line">    <span class="keyword">if</span>(len(captcha)&gt;<span class="number">0</span>):</span><br><span class="line">        print(<span class="string">'此时有验证码'</span>)</span><br><span class="line">        localpath=<span class="string">'./captcha.png'</span></span><br><span class="line">        urllib.request.urlretrieve(captcha[<span class="number">0</span>],filename=localpath)</span><br><span class="line">        <span class="comment">#captcha_value=input('请输入验证码')</span></span><br><span class="line">        cmd=<span class="string">'python E:/Python调用示例/YDMPython3.x.py'</span></span><br><span class="line">        r=os.popen(cmd) <span class="comment"># 执行cmd命令</span></span><br><span class="line">        captcha_value=r.read() <span class="comment"># 读取命令执行结果</span></span><br><span class="line">        print(<span class="string">'验证码识别结果为:'</span>+captcha_value)</span><br><span class="line">        data = &#123;</span><br><span class="line">            <span class="string">'redir'</span>: <span class="string">'https://www.douban.com/'</span>,</span><br><span class="line">            <span class="string">'form_email'</span>: <span class="string">'xxxx'</span>,</span><br><span class="line">            <span class="string">'form_password'</span>: <span class="string">'xxx'</span>,</span><br><span class="line">            <span class="string">'captcha-solution'</span>: captcha_value</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        data = &#123;</span><br><span class="line">            <span class="string">'redir'</span>: <span class="string">'https://www.douban.com/'</span>,</span><br><span class="line">            <span class="string">'form_email'</span>: <span class="string">'xxxx'</span>,</span><br><span class="line">            <span class="string">'form_password'</span>: <span class="string">'xxx'</span></span><br><span class="line">        &#125;</span><br><span class="line">    print(<span class="string">'登录中'</span>)</span><br><span class="line">    <span class="comment"># 通过FormRequest.from_response()进行登录</span></span><br><span class="line">    <span class="keyword">return</span>  [FormRequest.from_response(response,</span><br><span class="line">                                       <span class="comment"># 设置cookie信息</span></span><br><span class="line">                                       meta=&#123;<span class="string">'cookiejar'</span>: response.meta[<span class="string">'cookiejar'</span>]&#125;,</span><br><span class="line">                                       headers=self.header,</span><br><span class="line">                                       formdata=data,</span><br><span class="line">                                       callback=self.next,</span><br><span class="line">                                       )]</span><br></pre></td></tr></table></figure>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fq0r1gp3c0j20gx04iq2t.jpg" alt=""></p>
<p>大功告成</p>
<p>3.自动识别</p>
<p>需要运用机器学习的内容，此处略过不讲。</p>
<h1 id="scrapy百度新闻爬取"><a href="#scrapy百度新闻爬取" class="headerlink" title="scrapy百度新闻爬取"></a>scrapy百度新闻爬取</h1><p>去重，布隆过滤器。</p>
<p>我们要爬取百度新闻首页的所有新闻标题，内容和链接</p>
<p>我们先来分析一下，查看源代码，我们发现，网页源代码中只有部分内容，举下面网页来说，北京新闻以上的部分我们都能在html源码中找到，而北京新闻及下面的内容我们找不到，因此能找到的部分我们直接从网页爬取即可，找不到的部分要进行抓包分析。</p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fpzl6ejyrxj216e0n7guo.jpg" alt="baidunews"></p>
<p>我们使用fiddler，下滑页面，触发网页链接。</p>
<p>我们首先发现了一个json数据格式的链接，查看其内容，是Unicode编码的形式，我们进行解码，发现确实是新闻内容。</p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fpzltuxnznj21880fmaeh.jpg" alt="baidu"></p>
<p>但是明显只是我们要找的新闻的一部分，我们继续寻找。</p>
<p>会找到链接形式的数据也包含新闻</p>
<p>我们把这些url全都复制下来</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">http://news.baidu.com/widget?id=LocalNews&amp;ajax=json&amp;t=1522747393879</span><br><span class="line"></span><br><span class="line">http://news.baidu.com/widget?id=civilnews&amp;t=1522747396140</span><br><span class="line"></span><br><span class="line">http://news.baidu.com/widget?id=InternationalNews&amp;t=1522747396161</span><br><span class="line"></span><br><span class="line">http://news.baidu.com/widget?id=EnterNews&amp;t=1522747396185</span><br><span class="line"></span><br><span class="line">http://news.baidu.com/widget?id=SportNews&amp;t=1522747396239</span><br><span class="line"></span><br><span class="line">http://news.baidu.com/widget?id=FinanceNews&amp;t=1522747396346</span><br><span class="line"></span><br><span class="line">http://news.baidu.com/widget?id=TechNews&amp;t=1522747396382</span><br><span class="line"></span><br><span class="line">http://news.baidu.com/widget?id=MilitaryNews&amp;t=1522747396426</span><br><span class="line"></span><br><span class="line">http://news.baidu.com/widget?id=InternetNews&amp;t=1522747396485</span><br><span class="line"></span><br><span class="line">http://news.baidu.com/widget?id=DiscoveryNews&amp;t=1522747396523</span><br><span class="line"></span><br><span class="line">http://news.baidu.com/widget?id=LadyNews&amp;t=1522747396581</span><br><span class="line"></span><br><span class="line">http://news.baidu.com/widget?id=HealthNews&amp;t=1522747396645</span><br><span class="line"></span><br><span class="line">http://news.baidu.com/widget?id=PicWall&amp;t=1522747396778</span><br></pre></td></tr></table></figure>
<p>我们发现最重要的就是id了，我们只要获取全部的id即可爬取新闻了。</p>
<p><code>http://news.baidu.com/widget?id=LocalNews&amp;ajax=json&amp;t=1522747393879</code></p>
<p>上面链接的&amp;t=1522747393879是时间戳，我们并不需要，可以删掉，而且这个链接得到的数据是json形式，下面的链接都不是，差别就在ajax=json，我们把下面链接的id替换上面连接的id，就可以把下面的链接的数据全转为json的形式，因此我们可以统一数据格式了。</p>
<p>我们继续观察这些数据，发现有些地方有细微差别，摘取一些如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"url"</span>:<span class="string">"http:\/\/news.timedg.com\/2018-04\/03\/20652324.shtml"</span>,<span class="attr">"title"</span>:<span class="string">"\u4ece\u592e\u884c\u5230\u516c\u5b89\u90e8\uff0c\u591a\u90e8\u95e8\u8054\u5408\u6574\u6cbb\u5047\u79bb\u5a5a\u3001\u5047\u7ed3\u5a5a"</span>,<span class="attr">"time"</span>:<span class="string">"09:30"</span>,<span class="attr">"imgUrl"</span>:<span class="string">"http:\/\/t11.baidu.com\/it\/u=1303570930,2885677410&amp;fm=173&amp;app=12&amp;f=JPEG?w=218&amp;h=146&amp;s=5498CC3A05584DC854FDF1DE010050B3"</span>&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;"ID":"7057276","TS":"2018-04-03 13:32:25","m_class_id":"-1","m_local_id":"-1","m_url":"http:\/\/news.ifeng.com\/a\/20180403\/57277278_0.shtml?_zbs_baidu_news","m_title":"\u4ea4\u901a\u8fd0\u8f93\u90e8\uff1a\u6e05\u660e\u5047\u671f\u9ad8\u901f\u516c\u8def\u5c0f\u5ba2\u8f66\u514d\u8d39\u901a\u884c","m_site":"","m_editor":"","m_news_time":"0","m_public_time":"13:32","m_text":"","m_image_url":"","m_is_picnews":"0","m_is_vidnews":"0","m_is_manualnews":"1","m_ext_type":"9","m_ext":"&#123;\"type\":\"1\",\"vote\":\"0\"&#125;","m_topic_id":0,"m_relate_count":"1","m_same_count":"1","m_relate_url":"http:\/\/xinwen.eastday.com\/a\/xjump.html?id=180328111930970","m_v_table":"t_class_focus","m_v_class_id":"1","m_v_local_id":"-20480000","m_v_topic_id":"-20480000","m_v_tag":"class_focustop","m_position":"4","m_user":"lvnanjing_sh","m_add_time":"1522216660","m_time_start":"0","m_time_end":"1522905530","url_sign":null,"_ext":&#123;"type":"1","vote":"0"&#125;,"_url_type":1,"m_public_time_seconds":"1522733545"&#125;,&#123;"ID":"7057277","TS":"2018-04-03 13:35:39","m_class_id":"-1","m_local_id":"-1","m_url":"http:\/\/xinwen.eastday.com\/a\/xjump.html?id=180403114015007","m_title":"\u7236\u6bcd\u7838\u94b1\u201c\u517b\u751f\u201d\u6295\u8d44 \u513f\u5b50\u6012\u8f9e\u804c\u5f00\u529e\u9632\u9a97\u516c\u53f8","m_site":"","m_editor":"","m_news_time":"0","m_public_time":"13:35","m_text":"","m_image_url":"","m_is_picnews":"0","m_is_vidnews":"0","m_is_manualnews":"1","m_ext_type":"9","m_ext":"&#123;\"type\":\"1\",\"vote\":\"0\"&#125;","m_topic_id":0,"m_relate_count":"1","m_same_count":"1","m_relate_url":"http:\/\/news.china.com\/domestic\/945\/20180328\/32241107.html","m_v_table":"t_class_focus","m_v_class_id":"1","m_v_local_id":"-20480000","m_v_topic_id":"-20480000","m_v_tag":"class_focustop","m_position":"5","m_user":"lvnanjing_sh","m_add_time":"1522216660","m_time_start":"0","m_time_end":"1522905051","url_sign":null,"_ext":&#123;"type":"1","vote":"0"&#125;,"_url_type":1,"m_public_time_seconds":"1522733739"&#125;,&#123;"ID":"7057278","TS":"2018-04-03</span><br></pre></td></tr></table></figure>
<p>url链接有些前面是”url”有些是”m_relate_url”有些是”m_url”,我们又发现”m_relate_url”和”m_url”实际上是一样的，因此我们只要提取url和m_url即可。</p>
<p>分析完毕，开始写代码吧。</p>
<h1 id="scrapy与urllib整合"><a href="#scrapy与urllib整合" class="headerlink" title="scrapy与urllib整合"></a>scrapy与urllib整合</h1><p>目标:爬取京东书籍的名称、价格、销售方、出版社、评论数、作者、频道</p>
<p>规定最上面的目录，如文学综合馆，名为馆，馆下一级目录，如小说，名为频道1，再下一级目录，如小说下的<strong>侦探/悬疑/推理</strong>，名为频道2</p>
<p>首先分析一下页面，打开京东图书网页，左侧的图书分类，大类是<em>文学综合馆</em>、<em>童书馆</em>等等馆，各个馆下面还有子类。</p>
<p>各个馆</p>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fq1ivi2vbfj212e0lfwtb.jpg" alt=""></p>
<p>网页源代码</p>
<p><img src="C:\Users\my\Desktop\图片\book.jd.com.png" alt="源码"></p>
<p>注意和检查元素看到的不一样:</p>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fq1kbqgp9oj21700fq195.jpg" alt=""></p>
<p>这是因为查看网页源码是服务器发回来的原始代码，而在开发者工具看到的是被 Javascript 动态修改过后的源码。</p>
<p>文学综合馆*下面的子类</p>
<p>url <code>https://channel.jd.com/p_wenxuezongheguan.html</code></p>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fq1iyws5gfj212h0kjh2g.jpg" alt="馆"></p>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fq1jpx6ny3j212r0l1t9z.jpg" alt="channel"></p>
<p>点击第一个<em>侦探悬疑</em>，进入图书列表</p>
<p>url <code>https://list.jd.com/list.html?cat=1713,3258,3304</code></p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fq1j0alx8bj214h0l64a6.jpg" alt="list"></p>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fq1rt8ox64j209l01q742.jpg" alt=""></p>
<p>我们把<em>文学综合馆</em>下面的<em>小说</em>和<em>侦探/悬疑/推理</em>分别定义为频道1和频道2</p>
<p>大体思路就是在京东图书主页爬取各个馆的链接、名称等信息，进入各个馆，在各个馆的页面爬取各个子类的链接等信息，进入子类爬取图书信息。</p>
<p>怎么抓各个馆呢，其实馆的数量并不多，省心省力的办法是直接把这些馆打开，把链接复制下来。</p>
<p>其次就是观察网页源码，发现规律进行爬取，各个馆都藏在下面这段json样式中：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">navFirst: [&#123;"NAME":"\u7279\u8272\u5206\u7c7b","URL":"\/\/book.jd.com\/withoutHref","ANCHOR":"1","children":[&#123;"NAME":"\u7545\u9500\u699c","URL":"\/\/book.jd.com\/booktop\/1713-0-0-0-10001-1.html"&#125;,&#123;"NAME":" \u70ed\u641c\u699c","URL":"\/\/book.jd.com\/hotsearch.html"&#125;,&#123;"NAME":"\u7279\u4ef7\u597d\u4e66","URL":"https:\/\/sale.jd.com\/act\/PdxOpZVLG4fa3.html"&#125;]&#125;,&#123;"NAME":"\u6587\u5b66\u7efc\u5408\u9986","URL":"\/\/channel.jd.com\/p_wenxuezongheguan.html","ANCHOR":"2","children":[&#123;"NAME":"\u5c0f\u8bf4","URL":"\/\/channel.jd.com\/1713-3258.html"&#125;,&#123;"NAME":" \u6587\u5b66","URL":"\/\/channel.jd.com\/1713-3259.html"&#125;,&#123;"NAME":" \u4f20\u8bb0","URL":"\/\/channel.jd.com\/1713-3261.html"&#125;,&#123;"NAME":" \u9752\u6625","URL":"\/\/list.jd.com\/list.html?cat=1713,3260"&#125;,&#123;"NAME":" \u52a8\u6f2b","URL":"\/\/list.jd.com\/list.html?cat=1713,3272"&#125;,&#123;"NAME":"\u79d1\u5e7b","URL":"\/\/list.jd.com\/list.html?cat=1713,3258,6569&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"&#125;,&#123;"NAME":" \u60ac\u7591","URL":"\/\/list.jd.com\/list.html?cat=1713,3258,3304&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"&#125;,&#123;"NAME":" \u6563\u6587","URL":"\/\/list.jd.com\/list.html?cat=1713,3259,3333&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main","YFLAG":"0"&#125;,&#123;"NAME":" \u7eaa\u5b9e","URL":"\/\/list.jd.com\/list.html?cat=1713,3259,3330&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;jl=4_2_0#J_main"&#125;,&#123;"NAME":" \u60ca\u609a","URL":"\/\/list.jd.com\/list.html?cat=1713,3258,3305&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"&#125;]&#125;,&#123;"NAME":"\u7ae5\u4e66\u9986","URL":"\/\/book.jd.com\/children.html","ANCHOR":"3","CUSTOM1":"\/\/misc.360buyimg.com\/channel\/bookhome\/1.0.2\/widget\/common\/i\/hot.png","children":[&#123;"NAME":"\uff10-\uff12","URL":"\/\/book.jd.com\/children0-2.html"&#125;,&#123;"NAME":"\uff13-\uff16","URL":"\/\/book.jd.com\/children3-6.html"&#125;,&#123;"NAME":"7-10","URL":"\/\/book.jd.com\/children7-10.html"&#125;,&#123;"NAME":"11-14","URL":"\/\/book.jd.com\/children11-14.html"&#125;,&#123;"NAME":"\u7ed8\u672c  ","URL":"\/\/list.jd.com\/list.html?cat=1713,3263,4761&amp;go=0"&#125;,&#123;"NAME":"\u79d1\u666e\u767e\u79d1 ","URL":"\/\/list.jd.com\/list.html?cat=1713,3263,3399"&#125;,&#123;"NAME":"\u513f\u7ae5\u6587\u5b66 ","URL":"\/\/list.jd.com\/list.html?cat=1713,3263,3394"&#125;,&#123;"NAME":"\u5e7c\u513f\u542f\u8499","URL":"\/\/list.jd.com\/list.html?cat=1713,3263,3395&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"&#125;,&#123;"NAME":"\u52a8\u6f2b\u5361\u901a","URL":"\/\/list.jd.com\/list.html?cat=1713,3263,3391&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"&#125;,&#123;"NAME":" \u5c11\u513f\u82f1\u8bed","URL":"\/\/list.jd.com\/list.html?cat=1713,3263,3401"&#125;,&#123;"NAME":" \u76ca\u667a\u6e38\u620f","URL":"\/\/list.jd.com\/list.html?cat=1713,3263,3398&amp;page=1&amp;sort=sort%5Ftotalsales15%5Fdesc&amp;trans=1&amp;JL=4_2_0#J_main"&#125;]&#125;,&#123;"NAME":"\u6559\u80b2\u9986","URL":"\/\/book.jd.com\/education.html","ANCHOR":"4","CUSTOM1":"\/\/misc.360buyimg.com\/channel\/bookhome\/1.0.2\/widget\/common\/i\/hot.png","children":[&#123;"NAME":"\u4e2d\u5c0f\u6559\u8f85","URL":"\/\/channel.jd.com\/1713-3289.html"&#125;,&#123;"NAME":"\u5916\u8bed\u5b66\u4e60","URL":"\/\/channel.jd.com\/1713-3291.html"&#125;,&#123;"NAME":"\u8003\u8bd5","URL":"\/\/channel.jd.com\/1713-3290.html"&#125;,&#123;"NAME":"\u6559\u6750","URL":"\/\/channel.jd.com\/1713-11047.html"&#125;,&#123;"NAME":"\u5b57\u5178\u8bcd\u5178","URL":"\/\/channel.jd.com\/1713-3294.html"&#125;,&#123;"NAME":"\u8bfe\u5916\u8bfb\u7269","URL":"\/\/list.jd.com\/list.html?cat=1713,3289,3839"&#125;,&#123;"NAME":"\u5b57\u5e16","URL":"\/\/list.jd.com\/list.html?cat=1713,3289,6592"&#125;,&#123;"NAME":"\u4f5c\u6587","URL":"\/\/list.jd.com\/list.html?cat=1713,3289,3837"&#125;,&#123;"NAME":"\u9ad8\u4e2d\u6559\u8f85","URL":"https:\/\/sale.jd.com\/act\/Q3hUClDMENPf.html"&#125;,&#123;"NAME":"\u7559\u5b66\u8003\u8bd5","URL":"https:\/\/sale.jd.com\/act\/pxE6irwM52vK1PTY.html"&#125;,&#123;"NAME":"\u56db\u516d\u7ea7","URL":"https:\/\/sale.jd.com\/act\/g4kFXImhBWu.html"&#125;]&#125;,&#123;"NAME":"\u4eba\u6587\u793e\u79d1\u9986","URL":"\/\/book.jd.com\/library\/socialscience.html","ANCHOR":"5","children":[&#123;"NAME":"\u653f\u6cbb\u519b\u4e8b","URL":"\/\/channel.jd.com\/1713-3276.html"&#125;,&#123;"NAME":"\u4f20\u7edf\u6587\u5316","URL":"\/\/channel.jd.com\/p_guoxueguji.html"&#125;,&#123;"NAME":"\u5386\u53f2","URL":"\/\/channel.jd.com\/1713-3273.html"&#125;,&#123;"NAME":"\u5fc3\u7406","URL":"\/\/channel.jd.com\/1713-3279.html"&#125;,&#123;"NAME":"\u54f2\u5b66\u5b97\u6559","URL":"\/\/channel.jd.com\/p_zhexuezongjiao.html"&#125;,&#123;"NAME":"\u793e\u4f1a\u79d1\u5b66","URL":"\/\/channel.jd.com\/1713-3281.html"&#125;,&#123;"NAME":"\u6587\u5316","URL":"\/\/list.jd.com\/list.html?cat=1713,3280,3664"&#125;,&#123;"NAME":"\u6cd5\u5f8b","URL":"\/\/channel.jd.com\/1713-3277.html"&#125;]&#125;,&#123;"NAME":"\u7ecf\u7ba1\u7efc\u5408\u9986","URL":"\/\/channel.jd.com\/p_Comprehensive.html","ANCHOR":"6","children":[&#123;"NAME":"\u7ba1\u7406","URL":"\/\/channel.jd.com\/1713-3266.html"&#125;,&#123;"NAME":" \u7ecf\u6d4e","URL":"\/\/channel.jd.com\/1713-3264.html"&#125;,&#123;"NAME":" \u6295\u8d44","URL":"\/\/channel.jd.com\/1713-3265.html"&#125;,&#123;"NAME":" \u4f1a\u8ba1","URL":"\/\/list.jd.com\/list.html?cat=1713,3264,3409&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"&#125;,&#123;"NAME":" \u8425\u9500","URL":"\/\/list.jd.com\/list.html?cat=1713,3266,3444&amp;page=1&amp;sort=sort%5Ftotalsales15%5Fdesc&amp;trans=1&amp;JL=4_2_0#J_main"&#125;]&#125;,&#123;"NAME":"\u52b1\u5fd7\u6210\u529f\u9986","URL":"\/\/channel.jd.com\/1713-3267.html","ANCHOR":"7","children":[&#123;"NAME":"\u5973\u6027\u52b1\u5fd7","URL":"\/\/list.jd.com\/list.html?cat=1713,3267,3463&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"&#125;,&#123;"NAME":"\u5fc3\u7075\u9e21\u6c64","URL":"\/\/list.jd.com\/list.html?cat=1713,3267,3466&amp;page=1&amp;sort=sort%5Ftotalsales15%5Fdesc&amp;trans=1&amp;JL=4_2_0#J_main"&#125;,&#123;"NAME":"\u793e\u4ea4","URL":"\/\/list.jd.com\/list.html?cat=1713,3267,3459&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"&#125;,&#123;"NAME":"\u53e3\u624d","URL":"\/\/list.jd.com\/list.html?cat=1713,3267,3470"&#125;]&#125;,&#123;"NAME":"\u751f\u6d3b\u9986","URL":"\/\/book.jd.com\/library\/life.html","ANCHOR":"8","CUSTOM1":"\/\/misc.360buyimg.com\/channel\/bookhome\/1.0.2\/widget\/common\/i\/hot.png","children":[&#123;"NAME":"\u5b55\u4ea7\u80ce\u6559","URL":"\/\/list.jd.com\/list.html?cat=1713,13613&amp;go=0"&#125;,&#123;"NAME":"\u80b2\u513f\u5bb6\u6559","URL":"\/\/channel.jd.com\/1713-3270.html"&#125;,&#123;"NAME":"\u7f8e\u98df","URL":"\/\/list.jd.com\/list.html?cat=1713,9278&amp;go=0"&#125;,&#123;"NAME":"\u5bb6\u5c45","URL":"\/\/list.jd.com\/list.html?cat=1713,9301&amp;go=0"&#125;,&#123;"NAME":"\u5065\u8eab\u4fdd\u5065","URL":"https:\/\/channel.jd.com\/1713-3269.html"&#125;,&#123;"NAME":"\u65c5\u6e38\u5730\u56fe","URL":"\/\/channel.jd.com\/1713-3271.html"&#125;,&#123;"NAME":"\u7f8e\u5986","URL":"https:\/\/list.jd.com\/list.html?cat=1713,9291"&#125;,&#123;"NAME":"\u4f53\u80b2","URL":"https:\/\/list.jd.com\/list.html?cat=1713,3288&amp;jth=i"&#125;,&#123;"NAME":"\u5a31\u4e50\u4f11\u95f2","URL":"https:\/\/list.jd.com\/list.html?cat=1713,9314"&#125;,&#123;"NAME":"\u5a5a\u604b\u4e24\u6027","URL":"\/\/list.jd.com\/list.html?cat=1713,9309&amp;jth=i"&#125;,&#123;"NAME":"\u624b\u5de5DIY","URL":"https:\/\/list.jd.com\/list.html?cat=1713,9314,9315&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"&#125;]&#125;,&#123;"NAME":"\u827a\u672f\u9986","URL":"\/\/channel.jd.com\/1713-3262.html","ANCHOR":"9","children":[&#123;"NAME":"\u7ed8\u753b","URL":"https:\/\/channel.jd.com\/1713-12775.html"&#125;,&#123;"NAME":" \u4e66\u6cd5","URL":"\/\/list.jd.com\/list.html?cat=1713,13627"&#125;,&#123;"NAME":" \u6444\u5f71","URL":"https:\/\/channel.jd.com\/p_sheying.html"&#125;,&#123;"NAME":" \u97f3\u4e50","URL":"\/\/list.jd.com\/list.html?cat=1713,13634"&#125;,&#123;"NAME":" \u8bbe\u8ba1","URL":"\/\/list.jd.com\/list.html?cat=1713,3262,3379"&#125;]&#125;,&#123;"NAME":"\u79d1\u6280\u9986","URL":"\/\/book.jd.com\/library\/science.html","ANCHOR":"10","children":[&#123;"NAME":"\u79d1\u666e","URL":"\/\/book.jd.com\/popscicence.html"&#125;,&#123;"NAME":" \u5de5\u4e1a","URL":"\/\/channel.jd.com\/1713-3282.html"&#125;,&#123;"NAME":" \u5efa\u7b51","URL":"\/\/channel.jd.com\/1713-3284.html"&#125;,&#123;"NAME":" \u533b\u5b66","URL":"\/\/channel.jd.com\/1713-3285.html"&#125;,&#123;"NAME":" \u7535\u5b50","URL":"\/\/list.jd.com\/list.html?cat=1713,9351"&#125;]&#125;,&#123;"NAME":"\u8ba1\u7b97\u673a\u9986","URL":"\/\/channel.jd.com\/1713-3287.html","ANCHOR":"11","children":[&#123;"NAME":"\u7f16\u7a0b\u8bed\u8a00","URL":"\/\/list.jd.com\/list.html?cat=1713,3287,3797"&#125;,&#123;"NAME":"\u529e\u516c\u8f6f\u4ef6","URL":"\/\/list.jd.com\/list.html?cat=1713,3287,3814"&#125;,&#123;"NAME":"\u8ba1\u7b97\u673a\u5b89\u5168","URL":"https:\/\/list.jd.com\/list.html?cat=1713,3287,3801"&#125;,&#123;"NAME":"\u4eba\u5de5\u667a\u80fd","URL":"\/\/list.jd.com\/list.html?cat=1713,3287,3804&amp;go=0"&#125;,&#123;"NAME":"\u64cd\u4f5c\u7cfb\u7edf","URL":"\/\/list.jd.com\/1713-3287-3800.html"&#125;,&#123;"NAME":"\u6570\u636e\u5e93","URL":"\/\/list.jd.com\/list.html?cat=1713,3287,3799"&#125;]&#125;,&#123;"NAME":"\u539f\u7248\u4e66","URL":"\/\/book.jd.com\/withoutHref","ANCHOR":"12","children":[&#123;"NAME":"\u82f1\u6587\u539f\u7248","URL":"\/\/channel.jd.com\/1713-4855.html"&#125;,&#123;"NAME":"\u6e2f\u53f0\u539f\u7248","URL":"\/\/channel.jd.com\/1713-6929.html"&#125;,&#123;"NAME":"\u65e5\u6587\u539f\u7248","URL":"\/\/channel.jd.com\/1713-14669.html"&#125;]&#125;,&#123;"NAME":"\u6570\u5b57\u5185\u5bb9","URL":"\/\/e.jd.com\/ebook.html","ANCHOR":"13"&#125;,&#123;"NAME":"\u6742\u5fd7\/\u671f\u520a","URL":"\/\/channel.jd.com\/1713-4758.html","ANCHOR":"14"&#125;,&#123;"NAME":"\u7279\u8272\u4e66\u5e97","URL":"\/\/book.jd.com\/popbook.html","ANCHOR":"15"&#125;,&#123;"NAME":"\u90ae\u5e01\/\u6587\u5316\u7528\u54c1","URL":"\/\/channel.jd.com\/1713-11745.html","ANCHOR":"16"&#125;,&#123;"NAME":"\u6587\u5a31\/\u5468\u8fb9\/\u6e38\u620f","URL":"\/\/mvd.jd.com\/","ANCHOR":"17"&#125;],</span><br></pre></td></tr></table></figure>
<p>Unicode转中文后是：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123;<span class="attr">"NAME"</span>:<span class="string">"特色分类"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/book.jd.com\/withoutHref"</span>,<span class="attr">"ANCHOR"</span>:<span class="string">"1"</span>,<span class="attr">"children"</span>:[&#123;<span class="attr">"NAME"</span>:<span class="string">"畅销榜"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/book.jd.com\/booktop\/1713-0-0-0-10001-1.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 热搜榜"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/book.jd.com\/hotsearch.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"特价好书"</span>,<span class="attr">"URL"</span>:<span class="string">"https:\/\/sale.jd.com\/act\/PdxOpZVLG4fa3.html"</span>&#125;]&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"文学综合馆"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/p_wenxuezongheguan.html"</span>,<span class="attr">"ANCHOR"</span>:<span class="string">"2"</span>,<span class="attr">"children"</span>:[&#123;<span class="attr">"NAME"</span>:<span class="string">"小说"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3258.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 文学"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3259.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 传记"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3261.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 青春"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3260"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 动漫"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3272"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"科幻"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3258,6569&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 悬疑"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3258,3304&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 散文"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3259,3333&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"</span>,<span class="attr">"YFLAG"</span>:<span class="string">"0"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 纪实"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3259,3330&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;jl=4_2_0#J_main"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 惊悚"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3258,3305&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"</span>&#125;]&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"童书馆"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/book.jd.com\/children.html"</span>,<span class="attr">"ANCHOR"</span>:<span class="string">"3"</span>,<span class="attr">"CUSTOM1"</span>:<span class="string">"\/\/misc.360buyimg.com\/channel\/bookhome\/1.0.2\/widget\/common\/i\/hot.png"</span>,<span class="attr">"children"</span>:[&#123;<span class="attr">"NAME"</span>:<span class="string">"０-２"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/book.jd.com\/children0-2.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"３-６"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/book.jd.com\/children3-6.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"7-10"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/book.jd.com\/children7-10.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"11-14"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/book.jd.com\/children11-14.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"绘本  "</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3263,4761&amp;go=0"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"科普百科 "</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3263,3399"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"儿童文学 "</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3263,3394"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"幼儿启蒙"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3263,3395&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"动漫卡通"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3263,3391&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 少儿英语"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3263,3401"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 益智游戏"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3263,3398&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"</span>&#125;]&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"教育馆"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/book.jd.com\/education.html"</span>,<span class="attr">"ANCHOR"</span>:<span class="string">"4"</span>,<span class="attr">"CUSTOM1"</span>:<span class="string">"\/\/misc.360buyimg.com\/channel\/bookhome\/1.0.2\/widget\/common\/i\/hot.png"</span>,<span class="attr">"children"</span>:[&#123;<span class="attr">"NAME"</span>:<span class="string">"中小教辅"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3289.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"外语学习"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3291.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"考试"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3290.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"教材"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-11047.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"字典词典"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3294.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"课外读物"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3289,3839"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"字帖"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3289,6592"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"作文"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3289,3837"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"高中教辅"</span>,<span class="attr">"URL"</span>:<span class="string">"https:\/\/sale.jd.com\/act\/Q3hUClDMENPf.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"留学考试"</span>,<span class="attr">"URL"</span>:<span class="string">"https:\/\/sale.jd.com\/act\/pxE6irwM52vK1PTY.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"四六级"</span>,<span class="attr">"URL"</span>:<span class="string">"https:\/\/sale.jd.com\/act\/g4kFXImhBWu.html"</span>&#125;]&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"人文社科馆"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/book.jd.com\/library\/socialscience.html"</span>,<span class="attr">"ANCHOR"</span>:<span class="string">"5"</span>,<span class="attr">"children"</span>:[&#123;<span class="attr">"NAME"</span>:<span class="string">"政治军事"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3276.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"传统文化"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/p_guoxueguji.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"历史"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3273.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"心理"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3279.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"哲学宗教"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/p_zhexuezongjiao.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"社会科学"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3281.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"文化"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3280,3664"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"法律"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3277.html"</span>&#125;]&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"经管综合馆"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/p_Comprehensive.html"</span>,<span class="attr">"ANCHOR"</span>:<span class="string">"6"</span>,<span class="attr">"children"</span>:[&#123;<span class="attr">"NAME"</span>:<span class="string">"管理"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3266.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 经济"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3264.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 投资"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3265.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 会计"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3264,3409&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 营销"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3266,3444&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"</span>&#125;]&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"励志成功馆"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3267.html"</span>,<span class="attr">"ANCHOR"</span>:<span class="string">"7"</span>,<span class="attr">"children"</span>:[&#123;<span class="attr">"NAME"</span>:<span class="string">"女性励志"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3267,3463&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"心灵鸡汤"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3267,3466&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"社交"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3267,3459&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"口才"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3267,3470"</span>&#125;]&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"生活馆"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/book.jd.com\/library\/life.html"</span>,<span class="attr">"ANCHOR"</span>:<span class="string">"8"</span>,<span class="attr">"CUSTOM1"</span>:<span class="string">"\/\/misc.360buyimg.com\/channel\/bookhome\/1.0.2\/widget\/common\/i\/hot.png"</span>,<span class="attr">"children"</span>:[&#123;<span class="attr">"NAME"</span>:<span class="string">"孕产胎教"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,13613&amp;go=0"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"育儿家教"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3270.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"美食"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,9278&amp;go=0"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"家居"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,9301&amp;go=0"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"健身保健"</span>,<span class="attr">"URL"</span>:<span class="string">"https:\/\/channel.jd.com\/1713-3269.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"旅游地图"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3271.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"美妆"</span>,<span class="attr">"URL"</span>:<span class="string">"https:\/\/list.jd.com\/list.html?cat=1713,9291"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"体育"</span>,<span class="attr">"URL"</span>:<span class="string">"https:\/\/list.jd.com\/list.html?cat=1713,3288&amp;jth=i"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"娱乐休闲"</span>,<span class="attr">"URL"</span>:<span class="string">"https:\/\/list.jd.com\/list.html?cat=1713,9314"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"婚恋两性"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,9309&amp;jth=i"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"手工DIY"</span>,<span class="attr">"URL"</span>:<span class="string">"https:\/\/list.jd.com\/list.html?cat=1713,9314,9315&amp;page=1&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=4_2_0#J_main"</span>&#125;]&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"艺术馆"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3262.html"</span>,<span class="attr">"ANCHOR"</span>:<span class="string">"9"</span>,<span class="attr">"children"</span>:[&#123;<span class="attr">"NAME"</span>:<span class="string">"绘画"</span>,<span class="attr">"URL"</span>:<span class="string">"https:\/\/channel.jd.com\/1713-12775.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 书法"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,13627"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 摄影"</span>,<span class="attr">"URL"</span>:<span class="string">"https:\/\/channel.jd.com\/p_sheying.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 音乐"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,13634"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 设计"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3262,3379"</span>&#125;]&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"科技馆"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/book.jd.com\/library\/science.html"</span>,<span class="attr">"ANCHOR"</span>:<span class="string">"10"</span>,<span class="attr">"children"</span>:[&#123;<span class="attr">"NAME"</span>:<span class="string">"科普"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/book.jd.com\/popscicence.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 工业"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3282.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 建筑"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3284.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 医学"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3285.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">" 电子"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,9351"</span>&#125;]&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"计算机馆"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-3287.html"</span>,<span class="attr">"ANCHOR"</span>:<span class="string">"11"</span>,<span class="attr">"children"</span>:[&#123;<span class="attr">"NAME"</span>:<span class="string">"编程语言"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3287,3797"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"办公软件"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3287,3814"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"计算机安全"</span>,<span class="attr">"URL"</span>:<span class="string">"https:\/\/list.jd.com\/list.html?cat=1713,3287,3801"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"人工智能"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3287,3804&amp;go=0"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"操作系统"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/1713-3287-3800.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"数据库"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/list.jd.com\/list.html?cat=1713,3287,3799"</span>&#125;]&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"原版书"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/book.jd.com\/withoutHref"</span>,<span class="attr">"ANCHOR"</span>:<span class="string">"12"</span>,<span class="attr">"children"</span>:[&#123;<span class="attr">"NAME"</span>:<span class="string">"英文原版"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-4855.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"港台原版"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-6929.html"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"日文原版"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-14669.html"</span>&#125;]&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"数字内容"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/e.jd.com\/ebook.html"</span>,<span class="attr">"ANCHOR"</span>:<span class="string">"13"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"杂志\/期刊"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-4758.html"</span>,<span class="attr">"ANCHOR"</span>:<span class="string">"14"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"特色书店"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/book.jd.com\/popbook.html"</span>,<span class="attr">"ANCHOR"</span>:<span class="string">"15"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"邮币\/文化用品"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/channel.jd.com\/1713-11745.html"</span>,<span class="attr">"ANCHOR"</span>:<span class="string">"16"</span>&#125;,&#123;<span class="attr">"NAME"</span>:<span class="string">"文娱\/周边\/游戏"</span>,<span class="attr">"URL"</span>:<span class="string">"\/\/mvd.jd.com\/"</span>,<span class="attr">"ANCHOR"</span>:<span class="string">"17"</span>&#125;]</span><br></pre></td></tr></table></figure>
<p>转为json视图：</p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fq1kwj32yxj20q40j9gmh.jpg" alt=""></p>
<p>查看京东图书首页的源代码</p>
<p>items.py下定义要爬取的目标：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JingdongItem</span><span class="params">(scrapy.Item)</span>:</span></span><br><span class="line">    <span class="comment"># define the fields for your item here like:</span></span><br><span class="line">    <span class="comment"># name = scrapy.Field()</span></span><br><span class="line">    channel_num=scrapy.Field()</span><br><span class="line">    <span class="comment"># 频道1</span></span><br><span class="line">    channel1=scrapy.Field()</span><br><span class="line">    <span class="comment"># 频道2</span></span><br><span class="line">    channel2=scrapy.Field()</span><br><span class="line">    <span class="comment"># 图书名</span></span><br><span class="line">    name=scrapy.Field()</span><br><span class="line">    <span class="comment"># 价格</span></span><br><span class="line">    price=scrapy.Field()</span><br><span class="line">    <span class="comment">#  评论数</span></span><br><span class="line">    comment_num=scrapy.Field()</span><br><span class="line">    <span class="comment"># 作者</span></span><br><span class="line">    author=scrapy.Field()</span><br><span class="line">    <span class="comment"># 出版社</span></span><br><span class="line">    pub=scrapy.Field()</span><br><span class="line">    <span class="comment"># 销售方</span></span><br><span class="line">    seller=scrapy.Field()</span><br></pre></td></tr></table></figure>
<p>打开 创建的爬虫文件</p>
<p>导入所需要的包</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> jingdong.items <span class="keyword">import</span> JingdongItem</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">from</span> scrapy.http <span class="keyword">import</span> Request</span><br></pre></td></tr></table></figure>
<p><code>https://channel.jd.com/p_wenxuezongheguan.html</code></p>
<p>由于用到urllib，有很多需要自己定义的东西，因此要实现start_requests函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JdSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'jd'</span></span><br><span class="line">    allowed_domains = [<span class="string">'jd.com'</span>]</span><br><span class="line">    <span class="comment">#start_urls = ['http://jd.com/']</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">start_requests</span><span class="params">(self)</span>:</span></span><br><span class="line">        ua=[</span><br><span class="line">                <span class="string">'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.36'</span>,</span><br><span class="line">                <span class="string">'Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.1; WOW64; Trident/6.0)'</span>,</span><br><span class="line">                <span class="string">'Mozilla/5.0(Macintosh;U;IntelMacOSX10_6_8;en-us)AppleWebKit/534.50(KHTML,likeGecko)Version/5.1Safari/534.50'</span></span><br><span class="line">                <span class="string">'Mozilla/5.0(Windows;U;WindowsNT6.1;en-us)AppleWebKit/534.50(KHTML,likeGecko)Version/5.1Safari/534.50'</span>,</span><br><span class="line">                <span class="string">'Opera/9.80(Macintosh;IntelMacOSX10.6.8;U;en)Presto/2.8.131Version/11.11'</span>,</span><br><span class="line">                <span class="string">'Mozilla/5.0(WindowsNT6.1;rv:2.0.1)Gecko/20100101Firefox/4.0.1'</span></span><br><span class="line">                ]</span><br></pre></td></tr></table></figure>
<p>打开文学综合馆的页面就可以直接抓取频道2，不需要抓取频道1比如小说再抓侦探悬疑，可以直接抓侦探悬疑。</p>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fq1jpx6ny3j212r0l1t9z.jpg" alt="channel"></p>
<p>观察频道2的url</p>
<p>href=”//list.jd.com/list.html?cat=1713,3258,3304” </p>
<p>href=”//list.jd.com/list.html?cat=1713,3260,13623&amp;go=0” </p>
<p>构造正则表达式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pat2=&apos;href=&quot;..list.jd.com.list.html.cat=([0-9,]*?)[&amp;&quot;]&apos;</span><br></pre></td></tr></table></figure>
<p>/和？这些特殊的附后一律用..代替</p>
<p>以上正则可以获取所有的频道2的频道号</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">urls = [&apos;https://channel.jd.com/p_wenxuezongheguan.html&apos;]</span><br><span class="line">        catall=[]</span><br><span class="line">        for url in urls:</span><br><span class="line">            req2 = urllib.request.Request(url)</span><br><span class="line">            req2.add_header(&apos;User-Agent&apos;, random.choice(ua))</span><br><span class="line">            pddata=urllib.request.urlopen(req2).read().decode(&apos;gbk&apos;, &apos;ignore&apos;)</span><br><span class="line">            pat2=&apos;href=&quot;..list.jd.com.list.html.cat=([0-9,]*?)[&amp;&quot;]&apos;</span><br><span class="line">            catdata=re.compile(pat2).findall(pddata)</span><br><span class="line">            for j in catdata:</span><br><span class="line">                catall.append(j)</span><br><span class="line">        catall2=set(catall)</span><br></pre></td></tr></table></figure>
<p>都存放到catall2中去，set有去重的功能</p>
<p>频道2下就是书籍列表了，如<strong>侦探/悬疑/推理</strong>类的书籍列表</p>
<p>频道2下可能有很多页的书籍，要去获得页数</p>
<p>发现网页底下有共x页的字样，可以构造表达式爬取下来，从而得到总页数</p>
<p>而页数不是独立的，它是与频道2一起存在，只存页数并没有什么用，因此，将其与每个频道2的名字一起存入字典中，字典放在列表中，便于处理。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获得页数</span></span><br><span class="line">    allpage=[]</span><br><span class="line">    <span class="keyword">for</span> m <span class="keyword">in</span> catall2:</span><br><span class="line">        thispdnum=m</span><br><span class="line">        url=<span class="string">'https://list.jd.com/list.html?cat='</span>+thispdnum</span><br><span class="line">        req3 = urllib.request.Request(url)</span><br><span class="line">        req3.add_header(<span class="string">'User-Agent'</span>, random.choice(ua))</span><br><span class="line">        listdata = urllib.request.urlopen(req3).read().decode(<span class="string">'gbk'</span>, <span class="string">'ignore'</span>)</span><br><span class="line">        pat3=<span class="string">'&lt;em&gt;共&lt;b&gt;(.*?)&lt;/b&gt;页'</span></span><br><span class="line">        page=re.compile(pat3).findall(listdata)</span><br><span class="line">        <span class="keyword">if</span> len(page)&gt;<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            page=[<span class="number">1</span>]</span><br><span class="line">        allpage.append(&#123;thispdnum:page[<span class="number">0</span>]&#125;)</span><br><span class="line">        <span class="keyword">if</span> x&gt;<span class="number">2</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br></pre></td></tr></table></figure>
<p>循环每一个频道2的每一页</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">x=<span class="number">0</span></span><br><span class="line">      <span class="keyword">for</span> n <span class="keyword">in</span> catall2:</span><br><span class="line">          thispage=allpage[x][n]</span><br><span class="line">          <span class="keyword">for</span> p <span class="keyword">in</span> range(<span class="number">1</span>, int(thispage)+<span class="number">1</span>):</span><br><span class="line">              thispageurl= <span class="string">'https://list.jd.com/list.html?cat='</span>+str(n)+<span class="string">'&amp;page='</span>+str(p)</span><br><span class="line">              print(thispageurl)</span><br><span class="line">              <span class="keyword">yield</span> Request(thispageurl, callback=self.parse)</span><br><span class="line">          x+=<span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>将这一页传给parse进行具体处理，此处将urllib与scrapy联系了起来</p>
<p>提取频道1和频道2，通过观察发现可以通过<code>&lt;span class=&quot;curr&quot;&gt;</code>这个标签来提取频道1和频道2.</p>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fq1rzj7lo4j208701tjr7.jpg" alt=""></p>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fq1rzbueysj209w03cq2t.jpg" alt=""></p>
<p>通过构造xpath表达式来同时提取频道：</p>
<p><code>pd=response.xpath(&#39;//span[@class=&quot;curr&quot;]/text()&#39;).extract()</code></p>
<p>这会返回一个包含两个元素的列表，这两元素分别是频道1和频道2的名称</p>
<p>而有的时候可能频道不存在，因此要处理频道不存或只存在一个的情况</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> len(pd)==<span class="number">0</span>:</span><br><span class="line">    pd=[<span class="string">'缺省'</span>, <span class="string">'缺省'</span>]</span><br><span class="line"><span class="keyword">if</span> len(pd)==<span class="number">1</span>:</span><br><span class="line">    pda=pd[<span class="number">0</span>]</span><br><span class="line">    pd=[pda, <span class="string">'缺省'</span>]</span><br><span class="line">pd1=pd[<span class="number">0</span>]</span><br><span class="line">pd2=pd[<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<p>继续获取书籍名称，在源码中搜索第一本数<em>解忧杂货店</em>发现下图选中的标签和书籍名称有关</p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fq1snnhehij20lj08m3yn.jpg" alt=""></p>
<p>这个标签不仅在书籍列表中出现，还在上面的<em>热卖推荐</em>中出现</p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fq1sr0baopj20to06hq3n.jpg" alt=""></p>
<p>不提取<em>热卖推荐</em>中的，因此略过，从第四个标签开始提取</p>
<p> 接下来关键环节，提取价格，价格 必须通过抓包分析才能得到</p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fq1tccl21bj217n083t9y.jpg" alt=""></p>
<p>我们发现了疑似价格的json数据，把里面的数字和网页上的价格进行对比，发现确实是价格</p>
<p><img src="http://wx4.sinaimg.cn/mw690/c3a5a043ly1fq1toguvh1j211j04ojro.jpg" alt=""></p>
<p>把url复制出来进行观察</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://p.3.cn/prices/mgets?callback=jQuery7839616&amp;ext=11000000&amp;pin=jd_60292a13b08e5&amp;type=1&amp;area=1_2800_2850_0&amp;skuIds=J_11452840%2CJ_11984135%2CJ_12018031%2CJ_11479404%2CJ_11322667%2CJ_11577583%2CJ_11920399%2CJ_11846856%2CJ_11720490%2CJ_10415116696%2CJ_12206744%2CJ_12019565%2CJ_12102873%2CJ_12029805%2CJ_11965555%2CJ_12102776%2CJ_12094982%2CJ_12155028%2CJ_12135337%2CJ_11951658%2CJ_12287808%2CJ_11701682%2CJ_12102873%2CJ_11318932%2CJ_11846850%2CJ_12124169%2CJ_11026413%2CJ_12197506%2CJ_11732611%2CJ_11932116&amp;pdbp=0&amp;pdtk=&amp;pdpin=jd_60292a13b08e5&amp;pduid=15100301156331932758360&amp;source=list_pc_front&amp;_=1522912708856</span><br></pre></td></tr></table></figure>
<p>从url尾部开始试着删除一些东西，观察网页内容的变化</p>
<p>json数据中的id包含在url中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jQuery7839616([&#123;&quot;op&quot;:&quot;27.30&quot;,&quot;m&quot;:&quot;39.50&quot;,&quot;id&quot;:&quot;J_11452840&quot;,&quot;p&quot;:&quot;27.30&quot;&#125;,&#123;&quot;op&quot;:&quot;27.30&quot;,&quot;m&quot;:&quot;39.50&quot;,&quot;id&quot;:&quot;J_11984135&quot;,&quot;p&quot;:&quot;27.30&quot;&#125;,&#123;&quot;op&quot;:&quot;54.70&quot;,&quot;m&quot;:&quot;79.60&quot;,&quot;id&quot;:&quot;J_12018031&quot;,&quot;p&quot;:&quot;54.70&quot;&#125;,&#123;&quot;op&quot;:&quot;24.20&quot;,&quot;m&quot;:&quot;35.00&quot;,&quot;id&quot;:&quot;J_11479404&quot;,&quot;p&quot;:&quot;24.20&quot;&#125;,&#123;&quot;op&quot;:&quot;29.63&quot;,&quot;m&quot;:&quot;39.50&quot;,&quot;id&quot;:&quot;J_11322667&quot;,&quot;p&quot;:&quot;29.63&quot;&#125;,&#123;&quot;op&quot;:&quot;25.00&quot;,&quot;m&quot;:&quot;39.50&quot;,&quot;id&quot;:&quot;J_11577583&quot;,&quot;p&quot;:&quot;25.00&quot;&#125;,&#123;&quot;op&quot;:&quot;25.00&quot;,&quot;m&quot;:&quot;39.50&quot;,&quot;id&quot;:&quot;J_11920399&quot;,&quot;p&quot;:&quot;25.00&quot;&#125;,&#123;&quot;op&quot;:&quot;25.00&quot;,&quot;m&quot;:&quot;39.50&quot;,&quot;id&quot;:&quot;J_11846856&quot;,&quot;p&quot;:&quot;25.00&quot;&#125;,&#123;&quot;op&quot;:&quot;36.80&quot;,&quot;m&quot;:&quot;39.50&quot;,&quot;id&quot;:&quot;J_11720490&quot;,&quot;p&quot;:&quot;36.80&quot;&#125;,&#123;&quot;op&quot;:&quot;158.00&quot;,&quot;m&quot;:&quot;158.00&quot;,&quot;id&quot;:&quot;J_10415116696&quot;,&quot;p&quot;:&quot;42.90&quot;&#125;,&#123;&quot;op&quot;:&quot;28.40&quot;,&quot;m&quot;:&quot;45.00&quot;,&quot;id&quot;:&quot;J_12206744&quot;,&quot;p&quot;:&quot;28.40&quot;&#125;,&#123;&quot;op&quot;:&quot;28.70&quot;,&quot;m&quot;:&quot;39.80&quot;,&quot;id&quot;:&quot;J_12019565&quot;,&quot;p&quot;:&quot;28.70&quot;&#125;,&#123;&quot;op&quot;:&quot;162.10&quot;,&quot;m&quot;:&quot;228.40&quot;,&quot;id&quot;:&quot;J_12102873&quot;,&quot;p&quot;:&quot;162.10&quot;&#125;,&#123;&quot;op&quot;:&quot;27.90&quot;,&quot;m&quot;:&quot;39.50&quot;,&quot;id&quot;:&quot;J_12029805&quot;,&quot;p&quot;:&quot;27.90&quot;&#125;,&#123;&quot;op&quot;:&quot;26.30&quot;,&quot;m&quot;:&quot;35.00&quot;,&quot;id&quot;:&quot;J_11965555&quot;,&quot;p&quot;:&quot;26.30&quot;&#125;,&#123;&quot;op&quot;:&quot;24.70&quot;,&quot;m&quot;:&quot;35.00&quot;,&quot;id&quot;:&quot;J_12102776&quot;,&quot;p&quot;:&quot;24.70&quot;&#125;,&#123;&quot;op&quot;:&quot;41.90&quot;,&quot;m&quot;:&quot;45.00&quot;,&quot;id&quot;:&quot;J_12094982&quot;,&quot;p&quot;:&quot;41.90&quot;&#125;,&#123;&quot;op&quot;:&quot;29.60&quot;,&quot;m&quot;:&quot;39.50&quot;,&quot;id&quot;:&quot;J_12155028&quot;,&quot;p&quot;:&quot;29.60&quot;&#125;,&#123;&quot;op&quot;:&quot;44.70&quot;,&quot;m&quot;:&quot;59.60&quot;,&quot;id&quot;:&quot;J_12135337&quot;,&quot;p&quot;:&quot;44.70&quot;&#125;,&#123;&quot;op&quot;:&quot;28.40&quot;,&quot;m&quot;:&quot;45.00&quot;,&quot;id&quot;:&quot;J_11951658&quot;,&quot;p&quot;:&quot;28.40&quot;&#125;,&#123;&quot;op&quot;:&quot;29.90&quot;,&quot;m&quot;:&quot;42.00&quot;,&quot;id&quot;:&quot;J_12287808&quot;,&quot;p&quot;:&quot;29.90&quot;&#125;,&#123;&quot;op&quot;:&quot;27.40&quot;,&quot;m&quot;:&quot;39.80&quot;,&quot;id&quot;:&quot;J_11701682&quot;,&quot;p&quot;:&quot;27.40&quot;&#125;,&#123;&quot;op&quot;:&quot;21.90&quot;,&quot;m&quot;:&quot;28.00&quot;,&quot;id&quot;:&quot;J_11318932&quot;,&quot;p&quot;:&quot;21.90&quot;&#125;,&#123;&quot;op&quot;:&quot;25.00&quot;,&quot;m&quot;:&quot;39.50&quot;,&quot;id&quot;:&quot;J_11846850&quot;,&quot;p&quot;:&quot;25.00&quot;&#125;,&#123;&quot;op&quot;:&quot;28.50&quot;,&quot;m&quot;:&quot;38.00&quot;,&quot;id&quot;:&quot;J_12124169&quot;,&quot;p&quot;:&quot;28.50&quot;&#125;,&#123;&quot;op&quot;:&quot;177.10&quot;,&quot;m&quot;:&quot;295.20&quot;,&quot;id&quot;:&quot;J_11026413&quot;,&quot;p&quot;:&quot;177.10&quot;&#125;,&#123;&quot;op&quot;:&quot;22.10&quot;,&quot;m&quot;:&quot;35.00&quot;,&quot;id&quot;:&quot;J_12197506&quot;,&quot;p&quot;:&quot;22.10&quot;&#125;,&#123;&quot;op&quot;:&quot;20.20&quot;,&quot;m&quot;:&quot;32.00&quot;,&quot;id&quot;:&quot;J_11732611&quot;,&quot;p&quot;:&quot;20.20&quot;&#125;,&#123;&quot;op&quot;:&quot;112.00&quot;,&quot;m&quot;:&quot;168.00&quot;,&quot;id&quot;:&quot;J_11932116&quot;,&quot;p&quot;:&quot;112.00&quot;&#125;]);</span><br></pre></td></tr></table></figure>
<p>删掉一个url中的id，下面的价格等信息就少一个，因此，只要把所有id全都放到url中就可以找到所有的价格数据，问题是如何找id</p>
<p><code>&quot;id&quot;:&quot;J_11984135&quot;</code></p>
<p>在网页中搜索J_11984135没有任何信息，不要慌张，把J_删除后只留下数字，继续搜索，在网页中发现了要找的东西</p>
<p><img src="http://wx3.sinaimg.cn/mw690/c3a5a043ly1fq1tx1dsc3j20y70dkgm6.jpg" alt=""></p>
<p>哪个标签更合适呢，继续观察发现</p>
<p><code>&lt;a data-sku=&quot;11984135&quot; href=&quot;[//cart.jd.com/gate.action?pid=11984135&amp;pcount=1&amp;ptype=1](https://cart.jd.com/gate.action?pid=11984135&amp;pcount=1&amp;ptype=1)&quot;&gt;</code></p>
<p>这个有data-sku属性的a标签正好与商品一一对应，因此可以使用这个a标签。</p>
<p>下面构造正则表达式来提取</p>
<p>由于scrapy的response是树的形式，所以能直接使用xpath，而不能直接使用正则，所以要把树的形式转变为字符串的形式</p>
<p><code>listdata=response.body.decode(&#39;utf-8&#39;, &#39;ignore&#39;)</code></p>
<p>构造正则获取</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">allskupat=&apos;&lt;a data-sku=&quot;(.*?)&quot;&apos;</span><br><span class="line">allsku=re.compile(allskupat).findall(listdata)</span><br></pre></td></tr></table></figure>
<p>评论数也需要抓包分析</p>
<p>url如下，这些数字也是id，并用逗号隔开了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://club.jd.com/comment/productCommentSummaries.action?my=pinglun&amp;referenceIds=11452840,11984135,12018031,11479404,11322667,11577583,11920399,11846856,11720490,10415116696,12206744,12019565,12102873,12029805,11965555,12102776,12094982,12155028,12135337,11951658,12287808,11701682,12102873,11318932,11846850,12124169,11026413,12197506,11732611,11932116&amp;callback=jQuery8841347&amp;_=1522912708686</span><br></pre></td></tr></table></figure>
<p>提取作者和出版社的信息</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 作者的信息</span></span><br><span class="line">author=response.xpath(<span class="string">'//span[@class="author_type_1"]/a/@title'</span>).extract()</span><br><span class="line"><span class="comment"># 出版社的信息</span></span><br><span class="line">pub=response.xpath(<span class="string">'//span[@class="p-bi-store"]/a/@title'</span>).extract()</span><br></pre></td></tr></table></figure>
<p>上面可以看成是预处理，大体写出了如何获得我们的目标信息</p>
<p>下面一本书一本书的来，找到现在所处的这一页所有书籍的各自信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"># 处理当前页的数据</span><br><span class="line">		# 以当前页所有的卖家的长度来循环当前页的每一本书</span><br><span class="line">        for n in range(0, len(seller)): </span><br><span class="line">            # 从第四个名字开始，前三个是热卖的书，后面才是书籍列表的书</span><br><span class="line">            name=bookname[n+3]</span><br><span class="line">            # 找到这本书的id</span><br><span class="line">            thissku=allsku[n]</span><br><span class="line">            # 构造价格链接</span><br><span class="line">            priceurl=&apos;https://p.3.cn/prices/mgets?callback=jQuery7839616&amp;type=1&amp;skuIds=J_&apos;+str(thissku)</span><br><span class="line">            pricedata=urllib.request.urlopen(priceurl).read().decode(&apos;utf-8&apos;, &apos;ignore&apos;)   </span><br><span class="line">            # 获得价格</span><br><span class="line">            pricepat=&apos;&quot;p&quot;:&quot;(.*?)&quot;&apos;</span><br><span class="line">            price=re.compile(pricepat).findall(pricedata)[0]</span><br><span class="line">		   # 构造评论链接</span><br><span class="line">            commenturl = &apos;https://club.jd.com/comment/productCommentSummaries.action?my=pinglun&amp;referenceIds=&apos; + str(thissku)+&apos;&amp;callback=jQuery8841347&apos;</span><br><span class="line">            commentdata = urllib.request.urlopen(commenturl).read().decode(&apos;utf-8&apos;, &apos;ignore&apos;)</span><br><span class="line">            commentpat = &apos;&quot;CommentCount&quot;:(.*?),&apos;</span><br><span class="line">            commentnum = re.compile(commentpat).findall(commentdata)[0]</span><br><span class="line">            thisauthor=author[n]</span><br><span class="line">            thispub=pub[n]</span><br><span class="line">            thisseller=seller[n]</span><br><span class="line">            item[&apos;channel1&apos;]=pd1</span><br><span class="line">            item[&apos;channel2&apos;]=pd2</span><br><span class="line">            item[&apos;name&apos;]=bookname</span><br><span class="line">            item[&apos;comment_num&apos;]=commentnum</span><br><span class="line">            item[&apos;author&apos;] = thisauthor</span><br><span class="line">            item[&apos;pub&apos;] = thispub</span><br><span class="line">            item[&apos;seller&apos;] = thisseller</span><br><span class="line">            yield item</span><br></pre></td></tr></table></figure>
<h1 id="淘宝爬虫"><a href="#淘宝爬虫" class="headerlink" title="淘宝爬虫"></a>淘宝爬虫</h1><p>需求：在淘宝搜索栏输入要搜索的商品，爬取搜到的商品的名称、价格、链接、评论数</p>
<p>定义目标</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ShopItem</span><span class="params">(scrapy.Item)</span>:</span></span><br><span class="line">    <span class="comment"># define the fields for your item here like:</span></span><br><span class="line">    <span class="comment"># name = scrapy.Field()</span></span><br><span class="line">    <span class="comment">#商品名称</span></span><br><span class="line">    name=scrapy.Field()</span><br><span class="line">    <span class="comment">#商品链接</span></span><br><span class="line">    link=scrapy.Field()</span><br><span class="line">    <span class="comment">#商品价格</span></span><br><span class="line">    price=scrapy.Field()</span><br><span class="line">    <span class="comment">#商品评论数</span></span><br><span class="line">    comment=scrapy.Field()</span><br></pre></td></tr></table></figure>
<p>导入包</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> ssl</span><br><span class="line"><span class="keyword">from</span> scrapy.http <span class="keyword">import</span> Request</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> shop.items <span class="keyword">import</span> ShopItem</span><br></pre></td></tr></table></figure>
<p>设置要查询的关键词key</p>
<p>url格式</p>
<p><code>https://s.taobao.com/search?q=坚果&amp;imgfile=&amp;commend=all&amp;ssid=s5-e&amp;search_type=item&amp;sourceId=tb.index&amp;spm=&amp;ie=utf8&amp;initiative_id=tbindexz_20170306</code></p>
<p>点击下一页观察url变化</p>
<p>s=后面的数字以44的间隔变化，这就控制着页数，下面只爬10页</p>
<p>构造url<code>url=&quot;https://s.taobao.com/search?q=&quot;+str(key)+&quot;&amp;search_type=item&amp;s=&quot;+str(44*i)</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TbSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">"tb"</span></span><br><span class="line">    allowed_domains = [<span class="string">"taobao.com"</span>]</span><br><span class="line">    start_urls = (</span><br><span class="line">        <span class="string">'https://www.taobao.com/'</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        key=<span class="string">"坚果"</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">10</span>):</span><br><span class="line">            url=<span class="string">"https://s.taobao.com/search?q="</span>+str(key)+<span class="string">"&amp;search_type=item&amp;s="</span>+str(<span class="number">44</span>*i)</span><br><span class="line">            <span class="keyword">yield</span> Request(url=url,callback=self.page)</span><br></pre></td></tr></table></figure>
<p>定义一个page方法，处理传过来的各具体页的数据</p>
<p>价格得不到，还需要进入具体的商品页面，进入具体的商品，要有具体商品的id</p>
<p>根据正则获得id</p>
<p>构造url</p>
<p>Request获得具体商品页面信息</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">page</span><span class="params">(self,response)</span>:</span></span><br><span class="line">       <span class="comment">#title=response.xpath("/html/head/title").extract()</span></span><br><span class="line">       body=response.body.decode(<span class="string">"utf-8"</span>,<span class="string">"ignore"</span>)</span><br><span class="line">       patid=<span class="string">'"nid":"(.*?)"'</span></span><br><span class="line">       allid=re.compile(patid).findall(body)</span><br><span class="line">       print(allid)</span><br><span class="line">       <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>,len(allid)):</span><br><span class="line">           thisid=allid[j]</span><br><span class="line">           url1=<span class="string">"https://item.taobao.com/item.htm?id="</span>+str(thisid)</span><br><span class="line">           <span class="keyword">yield</span> Request(url=url1,callback=self.next)</span><br></pre></td></tr></table></figure>
<p>把具体商品页面信息传给next进行处理</p>
<p>评论数需要抓包分析，构造出url</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">next</span><span class="params">(self,response)</span>:</span></span><br><span class="line">        item=ShopItem()</span><br><span class="line">        item[<span class="string">"title"</span>]=response.xpath(<span class="string">"//h3[@class='tb-main-title']/@data-title"</span>).extract()</span><br><span class="line">        item[<span class="string">"link"</span>]=response.url</span><br><span class="line">        item[<span class="string">"price"</span>]=response.xpath(<span class="string">"//input[@name='current_price']/@value"</span>).extract()</span><br><span class="line">        patid=<span class="string">'id=(.*?)$'</span></span><br><span class="line">        thisid=re.compile(patid).findall(response.url)[<span class="number">0</span>]</span><br><span class="line">        commenturl=<span class="string">"https://rate.taobao.com/detailCount.do?callback=jsonp100&amp;itemId="</span>+str(thisid)</span><br><span class="line">        <span class="comment">#print(commenturl)</span></span><br><span class="line">        ssl._create_default_https_context=ssl._create_unverified_context</span><br><span class="line">        commentdata=urllib.request.urlopen(commenturl).read().decode(<span class="string">"utf-8"</span>,<span class="string">"ignore"</span>)</span><br><span class="line">        pat=<span class="string">'"count":(.*?)&#125;'</span></span><br><span class="line">        item[<span class="string">"comment"</span>]=re.compile(pat).findall(commentdata)</span><br><span class="line">        <span class="keyword">yield</span> item</span><br></pre></td></tr></table></figure>
<p>pipeline写入数据库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ShopPipeline</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.conn=pymysql.connect(host=<span class="string">"127.0.0.1"</span>,user=<span class="string">"root"</span>,passwd=<span class="string">"root"</span>,db=<span class="string">"tb"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            title=item[<span class="string">"title"</span>][<span class="number">0</span>]</span><br><span class="line">            link=item[<span class="string">"link"</span>]</span><br><span class="line">            price=item[<span class="string">"price"</span>][<span class="number">0</span>]</span><br><span class="line">            comment=item[<span class="string">"comment"</span>][<span class="number">0</span>]</span><br><span class="line">            sql=<span class="string">"insert into goods(title,link,price,comment) values('"</span>+title+<span class="string">"','"</span>+link+<span class="string">"','"</span>+price+<span class="string">"','"</span>+comment+<span class="string">"')"</span></span><br><span class="line">            self.conn.query(sql)</span><br><span class="line">            self.conn.commit()</span><br><span class="line">            print(title)</span><br><span class="line">            print(link)</span><br><span class="line">            print(price)</span><br><span class="line">            print(comment)</span><br><span class="line">            <span class="keyword">return</span> item</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">close_spider</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.conn.close()</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    
	<div>
	
	</div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/post/fa288682.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JieZhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FinGeek|http://zhaojie.tech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/fa288682.html" itemprop="url">numpy</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-28T21:25:46+08:00">
                2018-04-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    
	<div>
	
	</div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/post/590ea81e.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JieZhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FinGeek|http://zhaojie.tech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/590ea81e.html" itemprop="url">pandas数据聚合和分组运算</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-20T21:39:57+08:00">
                2018-04-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> division</span><br><span class="line"><span class="keyword">from</span> numpy.random <span class="keyword">import</span> randn</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">np.random.seed(<span class="number">12345</span>)</span><br><span class="line">plt.rc(<span class="string">'figure'</span>, figsize=(<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> Series, DataFrame</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">np.set_printoptions(precision=<span class="number">4</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>根据一个或多个键拆分pandas对象 键可以是函数、数组或DataFrame</li>
<li>计算分组摘要统计，比如计数、平均值、标准差，或用户自定义函数</li>
<li>对DataFrame的列应用各种各样的函数</li>
<li>应用组内转换或其他运算，如规格化、线性回归、排名或选取子集等等</li>
<li>计算透视表或交叉表</li>
<li>执行分位数分析以及其他组分析</li>
</ul>
<h1 id="1-GroupBy计数"><a href="#1-GroupBy计数" class="headerlink" title="1 GroupBy计数"></a>1 GroupBy计数</h1><h2 id="1-1-概览-split—-apply—-combine-拆分—-操作—-合并"><a href="#1-1-概览-split—-apply—-combine-拆分—-操作—-合并" class="headerlink" title="1.1 概览 split—-apply—-combine 拆分—-操作—-合并"></a>1.1 概览 split—-apply—-combine 拆分—-操作—-合并</h2><p>运用groupby</p>
<ul>
<li>第一阶段 pandas对象（无论是Series还是DataFrame）中的数据根据所提供的的一个或多个键被拆分为多组。拆分操作在对象的特定轴上执行。如，DataFrame可以在其行（axis=0）或列（axis=1）上进行分组。</li>
<li>第二阶段 将一个函数应用（apply）到各个分组并产生一个新值。</li>
<li>第三阶段 所有这些函数的执行结果会被合并到最终的结果对象中。结果对象的形式一般取决于数据上所执行的操作。</li>
</ul>
<p><strong>分组键</strong>可以有多重形式，且类型不必相同：</p>
<ul>
<li>列表或数组 长度与待分组的每个组的轴一样</li>
<li>表示DataFrame某个列名的值</li>
<li>字典或Series，给出待分组轴上的值与分组名之间的对应关系</li>
<li>函数，用于处理轴索引或索引中的各个标签</li>
</ul>
<p>后三种只是快捷方式而已</p>
<p><strong>分组键为Series</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df = DataFrame(&#123;<span class="string">'key1'</span> : [<span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>],</span><br><span class="line">                <span class="string">'key2'</span> : [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'one'</span>],</span><br><span class="line">                <span class="string">'data1'</span> : np.random.randn(<span class="number">5</span>),</span><br><span class="line">                <span class="string">'data2'</span> : np.random.randn(<span class="number">5</span>)&#125;)</span><br><span class="line">df</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>data1</th>
      <th>data2</th>
      <th>key1</th>
      <th>key2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.204708</td>
      <td>1.393406</td>
      <td>a</td>
      <td>one</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.478943</td>
      <td>0.092908</td>
      <td>a</td>
      <td>two</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-0.519439</td>
      <td>0.281746</td>
      <td>b</td>
      <td>one</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-0.555730</td>
      <td>0.769023</td>
      <td>b</td>
      <td>two</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1.965781</td>
      <td>1.246435</td>
      <td>a</td>
      <td>one</td>
    </tr>
  </tbody>
</table>
</div>



<p>按key1进行分组，计算data1列的均值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grouped = df[<span class="string">'data1'</span>].groupby(df[<span class="string">'key1'</span>])</span><br><span class="line">grouped</span><br></pre></td></tr></table></figure>
<pre><code>&lt;pandas.core.groupby.SeriesGroupBy object at 0x000000000A320860&gt;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">'data1'</span>].groupby(<span class="string">'key1'</span>)</span><br></pre></td></tr></table></figure>
<pre><code>---------------------------------------------------------------------------

KeyError                                  Traceback (most recent call last)

&lt;ipython-input-12-eb747cf58d65&gt; in &lt;module&gt;()
----&gt; 1 df[&#39;data1&#39;].groupby(&#39;key1&#39;)


D:\ProgramFiles\Anaconda3\lib\site-packages\pandas\core\generic.py in groupby(self, by, axis, level, as_index, sort, group_keys, squeeze, **kwargs)
   4414         return groupby(self, by=by, axis=axis, level=level, as_index=as_index,
   4415                        sort=sort, group_keys=group_keys, squeeze=squeeze,
-&gt; 4416                        **kwargs)
   4417 
   4418     def asfreq(self, freq, method=None, how=None, normalize=False,


D:\ProgramFiles\Anaconda3\lib\site-packages\pandas\core\groupby.py in groupby(obj, by, **kwds)
   1697         raise TypeError(&#39;invalid type: %s&#39; % type(obj))
   1698 
-&gt; 1699     return klass(obj, by, **kwds)
   1700 
   1701 


D:\ProgramFiles\Anaconda3\lib\site-packages\pandas\core\groupby.py in __init__(self, obj, keys, axis, level, grouper, exclusions, selection, as_index, sort, group_keys, squeeze, **kwargs)
    390                                                     level=level,
    391                                                     sort=sort,
--&gt; 392                                                     mutated=self.mutated)
    393 
    394         self.obj = obj


D:\ProgramFiles\Anaconda3\lib\site-packages\pandas\core\groupby.py in _get_grouper(obj, key, axis, level, sort, mutated)
   2688                 in_axis, name, level, gpr = False, None, gpr, None
   2689             else:
-&gt; 2690                 raise KeyError(gpr)
   2691         elif isinstance(gpr, Grouper) and gpr.key is not None:
   2692             # Add key to exclusions


KeyError: &#39;key1&#39;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grouped = df.groupby(<span class="string">'key1'</span>)</span><br><span class="line">grouped</span><br></pre></td></tr></table></figure>
<pre><code>&lt;pandas.core.groupby.DataFrameGroupBy object at 0x000000000A198A58&gt;
</code></pre><p>df[‘data1’].groupby(df[‘key1’])<br><br>df[‘data2’].groupby(df[‘key1’])<br><br>是<br><br>df.groupby(‘key1’)[‘data1’]<br><br>df.groupby(‘key1’)[[‘data2’]]<br><br>的语法糖</p>
<p>变量grouped是一个GroupBy对象，实际上还没有进行任何计算，只是含有一些关于分组键df[‘key1’]的中间数据而已。该对象已经有了接下来对分组执行运算所需要的一切信息。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grouped.mean()</span><br></pre></td></tr></table></figure>
<pre><code>key1
a    0.746672
b   -0.537585
Name: data1, dtype: float64
</code></pre><p>数据（Series）根据分组键进行聚合，产生了一个新的Series，其索引为key1列中的唯一值。之所以结果索引的名称为key1，是因为原始DataFrame的列df[‘key1’]就叫这个名字。</p>
<p>一次传入多个数组</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">means = df[<span class="string">'data1'</span>].groupby([df[<span class="string">'key1'</span>], df[<span class="string">'key2'</span>]]).mean() <span class="comment"># 返回Series</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">means</span><br></pre></td></tr></table></figure>
<pre><code>key1  key2
a     one     0.880536
      two     0.478943
b     one    -0.519439
      two    -0.555730
Name: data1, dtype: float64
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.groupby([df[<span class="string">'key1'</span>], df[<span class="string">'key2'</span>]]).mean() <span class="comment"># 反回DataFrame df就是个DataFrame</span></span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>data1</th>
      <th>data2</th>
    </tr>
    <tr>
      <th>key1</th>
      <th>key2</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">a</th>
      <th>one</th>
      <td>0.880536</td>
      <td>1.319920</td>
    </tr>
    <tr>
      <th>two</th>
      <td>0.478943</td>
      <td>0.092908</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">b</th>
      <th>one</th>
      <td>-0.519439</td>
      <td>0.281746</td>
    </tr>
    <tr>
      <th>two</th>
      <td>-0.555730</td>
      <td>0.769023</td>
    </tr>
  </tbody>
</table>
</div>



<p><strong>分组键是数组</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>data1</th>
      <th>data2</th>
      <th>key1</th>
      <th>key2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.204708</td>
      <td>1.393406</td>
      <td>a</td>
      <td>one</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.478943</td>
      <td>0.092908</td>
      <td>a</td>
      <td>two</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-0.519439</td>
      <td>0.281746</td>
      <td>b</td>
      <td>one</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-0.555730</td>
      <td>0.769023</td>
      <td>b</td>
      <td>two</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1.965781</td>
      <td>1.246435</td>
      <td>a</td>
      <td>one</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">states = np.array([<span class="string">'Ohio'</span>, <span class="string">'California'</span>, <span class="string">'California'</span>, <span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>])</span><br><span class="line">years = np.array([<span class="number">2005</span>, <span class="number">2005</span>, <span class="number">2006</span>, <span class="number">2005</span>, <span class="number">2006</span>])</span><br><span class="line">df[<span class="string">'data1'</span>].groupby([states, years]).mean()</span><br></pre></td></tr></table></figure>
<pre><code>California  2005    0.478943
            2006   -0.519439
Ohio        2005   -0.380219
            2006    1.965781
Name: data1, dtype: float64
</code></pre><p>可以理解为给df增加了states和years两列，这两列的长度必须和地方列的长度相同。即书中所说，分组键可以是任何长度适当的数组。</p>
<p><strong>还可以将列名用作分组键</strong></p>
<p>列名可以使字符串、数字或其他Python对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.groupby(<span class="string">'key1'</span>).mean()</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>data1</th>
      <th>data2</th>
    </tr>
    <tr>
      <th>key1</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>a</th>
      <td>0.746672</td>
      <td>0.910916</td>
    </tr>
    <tr>
      <th>b</th>
      <td>-0.537585</td>
      <td>0.525384</td>
    </tr>
  </tbody>
</table>
</div>



<p>上面没有key2的值，因为key2不是数值型的，被自动忽略了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.groupby([<span class="string">'key1'</span>, <span class="string">'key2'</span>]).size() <span class="comment"># 多列要写成列表</span></span><br></pre></td></tr></table></figure>
<pre><code>key1  key2
a     one     2
      two     1
b     one     1
      two     1
dtype: int64
</code></pre><h2 id="1-2-对分组进行迭代"><a href="#1-2-对分组进行迭代" class="headerlink" title="1.2 对分组进行迭代"></a>1.2 对分组进行迭代</h2><p>GroupBy对象支持迭代，可以产生一组二元元组（由分组名和数据块组成）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> name, group <span class="keyword">in</span> df.groupby(<span class="string">'key1'</span>):</span><br><span class="line">    print(name)</span><br><span class="line">    print(group)</span><br></pre></td></tr></table></figure>
<pre><code>a
      data1     data2 key1 key2
0 -0.204708  1.393406    a  one
1  0.478943  0.092908    a  two
4  1.965781  1.246435    a  one
b
      data1     data2 key1 key2
2 -0.519439  0.281746    b  one
3 -0.555730  0.769023    b  two
</code></pre><p>对于多重键的情况，元组的第一个元素将会是由键值组成的元组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (k1, k2), group <span class="keyword">in</span> df.groupby([<span class="string">'key1'</span>, <span class="string">'key2'</span>]):</span><br><span class="line">    print((k1, k2))</span><br><span class="line">    print(group)</span><br></pre></td></tr></table></figure>
<pre><code>(&#39;a&#39;, &#39;one&#39;)
      data1     data2 key1 key2
0 -0.204708  1.393406    a  one
4  1.965781  1.246435    a  one
(&#39;a&#39;, &#39;two&#39;)
      data1     data2 key1 key2
1  0.478943  0.092908    a  two
(&#39;b&#39;, &#39;one&#39;)
      data1     data2 key1 key2
2 -0.519439  0.281746    b  one
(&#39;b&#39;, &#39;two&#39;)
     data1     data2 key1 key2
3 -0.55573  0.769023    b  two
</code></pre><p>可以对这些数据片段做任何操作，下面是将这些数据片段做成一个字典：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list(df.groupby(<span class="string">'key1'</span>))</span><br></pre></td></tr></table></figure>
<pre><code>[(&#39;a&#39;,       data1     data2 key1 key2
  0 -0.204708  1.393406    a  one
  1  0.478943  0.092908    a  two
  4  1.965781  1.246435    a  one), (&#39;b&#39;,       data1     data2 key1 key2
  2 -0.519439  0.281746    b  one
  3 -0.555730  0.769023    b  two)]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dict(list(df.groupby(<span class="string">'key1'</span>)))</span><br></pre></td></tr></table></figure>
<pre><code>{&#39;a&#39;:       data1     data2 key1 key2
 0 -0.204708  1.393406    a  one
 1  0.478943  0.092908    a  two
 4  1.965781  1.246435    a  one, &#39;b&#39;:       data1     data2 key1 key2
 2 -0.519439  0.281746    b  one
 3 -0.555730  0.769023    b  two}
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pieces = dict(list(df.groupby(<span class="string">'key1'</span>)))</span><br><span class="line">pieces[<span class="string">'b'</span>]</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>data1</th>
      <th>data2</th>
      <th>key1</th>
      <th>key2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2</th>
      <td>-0.519439</td>
      <td>0.281746</td>
      <td>b</td>
      <td>one</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-0.555730</td>
      <td>0.769023</td>
      <td>b</td>
      <td>two</td>
    </tr>
  </tbody>
</table>
</div>



<p>key1（这列中的唯一值）就是字典的键，这可能是分组键的名称的由来？</p>
<p>groupby默认是在axis=0上进行分组的，通过设置也可以在其他任何轴上进行分组。下面根据dtypes对列进行分组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.dtypes</span><br></pre></td></tr></table></figure>
<pre><code>data1    float64
data2    float64
key1      object
key2      object
dtype: object
</code></pre><p>df.dtypes是键<br><br>取的是列，data1、data2这两列一组，key1、key2这两列另一组</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grouped = df.groupby(df.dtypes, axis=<span class="number">1</span>)</span><br><span class="line">dict(list(grouped))</span><br></pre></td></tr></table></figure>
<pre><code>{dtype(&#39;float64&#39;):       data1     data2
 0 -0.204708  1.393406
 1  0.478943  0.092908
 2 -0.519439  0.281746
 3 -0.555730  0.769023
 4  1.965781  1.246435, dtype(&#39;O&#39;):   key1 key2
 0    a  one
 1    a  two
 2    b  one
 3    b  two
 4    a  one}
</code></pre><h2 id="1-3-选取一个或一组列"><a href="#1-3-选取一个或一组列" class="headerlink" title="1.3 选取一个或一组列"></a>1.3 选取一个或一组列</h2><p>对于由DataFrame产生的GroupBy对象，如果用一个（单个字符串）或一组（字符串数组）列名对其进行索引，可以实现选取部分列进行聚合的目的。</p>
<p>df[‘data1’].groupby(df[‘key1’])<br><br>df[‘data2’].groupby(df[‘key1’])<br><br>是<br><br>df.groupby(‘key1’)[‘data1’]<br><br>df.groupby(‘key1’)[[‘data2’]]<br><br>的语法糖</p>
<p>如果传入的是列表或数组（[‘data2’]）， 返回的对象是一个已分组的DataFrame</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.groupby([<span class="string">'key1'</span>, <span class="string">'key2'</span>])[[<span class="string">'data2'</span>]].mean()</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>data2</th>
    </tr>
    <tr>
      <th>key1</th>
      <th>key2</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">a</th>
      <th>one</th>
      <td>1.319920</td>
    </tr>
    <tr>
      <th>two</th>
      <td>0.092908</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">b</th>
      <th>one</th>
      <td>0.281746</td>
    </tr>
    <tr>
      <th>two</th>
      <td>0.769023</td>
    </tr>
  </tbody>
</table>
</div>



<p>如果传入的是标量形式的单个列名（’data2’），返回的对象是已分组的Series</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s_grouped = df.groupby([<span class="string">'key1'</span>, <span class="string">'key2'</span>])[<span class="string">'data2'</span>]</span><br><span class="line">s_grouped</span><br></pre></td></tr></table></figure>
<pre><code>&lt;pandas.core.groupby.SeriesGroupBy object at 0x000000000A198B70&gt;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s_grouped.mean()</span><br></pre></td></tr></table></figure>
<pre><code>key1  key2
a     one     1.319920
      two     0.092908
b     one     0.281746
      two     0.769023
Name: data2, dtype: float64
</code></pre><h2 id="1-4-通过字典或Series进行分组"><a href="#1-4-通过字典或Series进行分组" class="headerlink" title="1.4 通过字典或Series进行分组"></a>1.4 通过字典或Series进行分组</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">people = DataFrame(np.random.randn(<span class="number">5</span>, <span class="number">5</span>),</span><br><span class="line">                   columns=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>],</span><br><span class="line">                   index=[<span class="string">'Joe'</span>, <span class="string">'Steve'</span>, <span class="string">'Wes'</span>, <span class="string">'Jim'</span>, <span class="string">'Travis'</span>])</span><br><span class="line">people.ix[<span class="number">2</span>:<span class="number">3</span>, [<span class="string">'b'</span>, <span class="string">'c'</span>]] = np.nan <span class="comment"># Add a few NA values</span></span><br><span class="line">people</span><br></pre></td></tr></table></figure>
<pre><code>D:\ProgramFiles\Anaconda3\lib\site-packages\ipykernel_launcher.py:4: DeprecationWarning: 
.ix is deprecated. Please use
.loc for label based indexing or
.iloc for positional indexing

See the documentation here:
http://pandas.pydata.org/pandas-docs/stable/indexing.html#ix-indexer-is-deprecated
  after removing the cwd from sys.path.
</code></pre><div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>a</th>
      <th>b</th>
      <th>c</th>
      <th>d</th>
      <th>e</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Joe</th>
      <td>1.007189</td>
      <td>-1.296221</td>
      <td>0.274992</td>
      <td>0.228913</td>
      <td>1.352917</td>
    </tr>
    <tr>
      <th>Steve</th>
      <td>0.886429</td>
      <td>-2.001637</td>
      <td>-0.371843</td>
      <td>1.669025</td>
      <td>-0.438570</td>
    </tr>
    <tr>
      <th>Wes</th>
      <td>-0.539741</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>-1.021228</td>
      <td>-0.577087</td>
    </tr>
    <tr>
      <th>Jim</th>
      <td>0.124121</td>
      <td>0.302614</td>
      <td>0.523772</td>
      <td>0.000940</td>
      <td>1.343810</td>
    </tr>
    <tr>
      <th>Travis</th>
      <td>-0.713544</td>
      <td>-0.831154</td>
      <td>-2.370232</td>
      <td>-1.860761</td>
      <td>-0.860757</td>
    </tr>
  </tbody>
</table>
</div>



<p><strong>字典</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mapping = &#123;</span><br><span class="line">    <span class="string">'a'</span>: <span class="string">'red'</span>, <span class="string">'b'</span>: <span class="string">'red'</span>, <span class="string">'c'</span>: <span class="string">'blue'</span>, <span class="string">'d'</span>: <span class="string">'blue'</span>, <span class="string">'e'</span>: <span class="string">'red'</span>, <span class="string">'f'</span>: <span class="string">'orange'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">by_column = people.groupby(mapping, axis=<span class="number">1</span>)</span><br><span class="line">by_column.sum()</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>blue</th>
      <th>red</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Joe</th>
      <td>0.503905</td>
      <td>1.063885</td>
    </tr>
    <tr>
      <th>Steve</th>
      <td>1.297183</td>
      <td>-1.553778</td>
    </tr>
    <tr>
      <th>Wes</th>
      <td>-1.021228</td>
      <td>-1.116829</td>
    </tr>
    <tr>
      <th>Jim</th>
      <td>0.524712</td>
      <td>1.770545</td>
    </tr>
    <tr>
      <th>Travis</th>
      <td>-4.230992</td>
      <td>-2.405455</td>
    </tr>
  </tbody>
</table>
</div>



<p><strong>Series</strong></p>
<p>Series也有同样的功能，它可以被看做一个固定大小的映射。对于上面的例子，如果用Series作为分组键，则pandas会检查Series以确保其索引跟分组轴是对齐的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">map_series = Series(mapping)</span><br><span class="line">map_series</span><br></pre></td></tr></table></figure>
<pre><code>a       red
b       red
c      blue
d      blue
e       red
f    orange
dtype: object
</code></pre><h2 id="1-5-通过函数进行分组"><a href="#1-5-通过函数进行分组" class="headerlink" title="1.5 通过函数进行分组"></a>1.5 通过函数进行分组</h2><p>任何被当做分组键的函数都会在各个索引值上被调用一次，其返回值会被用作分组名称。如下面返回的长度，成为了分组名称：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">people.groupby(len).sum()</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>a</th>
      <th>b</th>
      <th>c</th>
      <th>d</th>
      <th>e</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3</th>
      <td>0.591569</td>
      <td>-0.993608</td>
      <td>0.798764</td>
      <td>-0.791374</td>
      <td>2.119639</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.886429</td>
      <td>-2.001637</td>
      <td>-0.371843</td>
      <td>1.669025</td>
      <td>-0.438570</td>
    </tr>
    <tr>
      <th>6</th>
      <td>-0.713544</td>
      <td>-0.831154</td>
      <td>-2.370232</td>
      <td>-1.860761</td>
      <td>-0.860757</td>
    </tr>
  </tbody>
</table>
</div>



<p>可以将函数跟数组、列表、字典、Series混合使用，任何东西最终都会被转换为数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">key_list = [<span class="string">'one'</span>, <span class="string">'one'</span>, <span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'two'</span>]</span><br><span class="line">people.groupby([len, key_list]).min()</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>a</th>
      <th>b</th>
      <th>c</th>
      <th>d</th>
      <th>e</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">3</th>
      <th>one</th>
      <td>-0.539741</td>
      <td>-1.296221</td>
      <td>0.274992</td>
      <td>-1.021228</td>
      <td>-0.577087</td>
    </tr>
    <tr>
      <th>two</th>
      <td>0.124121</td>
      <td>0.302614</td>
      <td>0.523772</td>
      <td>0.000940</td>
      <td>1.343810</td>
    </tr>
    <tr>
      <th>5</th>
      <th>one</th>
      <td>0.886429</td>
      <td>-2.001637</td>
      <td>-0.371843</td>
      <td>1.669025</td>
      <td>-0.438570</td>
    </tr>
    <tr>
      <th>6</th>
      <th>two</th>
      <td>-0.713544</td>
      <td>-0.831154</td>
      <td>-2.370232</td>
      <td>-1.860761</td>
      <td>-0.860757</td>
    </tr>
  </tbody>
</table>
</div>



<h2 id="1-6-根据索引级别分组"><a href="#1-6-根据索引级别分组" class="headerlink" title="1.6 根据索引级别分组"></a>1.6 根据索引级别分组</h2><p>层次化索引数据集能根据索引级别进行聚合，要实现该目的，通过level关键字传入级别编号或名称即可。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">columns = pd.MultiIndex.from_arrays([[<span class="string">'US'</span>, <span class="string">'US'</span>, <span class="string">'US'</span>, <span class="string">'JP'</span>, <span class="string">'JP'</span>], [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>]], names=[<span class="string">'cty'</span>, <span class="string">'tenor'</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hier_df = DataFrame(np.random.randn(<span class="number">4</span>, <span class="number">5</span>), columns=columns)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hier_df</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th>cty</th>
      <th colspan="3" halign="left">US</th>
      <th colspan="2" halign="left">JP</th>
    </tr>
    <tr>
      <th>tenor</th>
      <th>1</th>
      <th>3</th>
      <th>5</th>
      <th>1</th>
      <th>3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.919262</td>
      <td>-1.549106</td>
      <td>0.022185</td>
      <td>0.758363</td>
      <td>-0.660524</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.862580</td>
      <td>-0.010032</td>
      <td>0.050009</td>
      <td>0.670216</td>
      <td>0.852965</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-0.955869</td>
      <td>-0.023493</td>
      <td>-2.304234</td>
      <td>-0.652469</td>
      <td>-1.218302</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-1.332610</td>
      <td>1.074623</td>
      <td>0.723642</td>
      <td>0.690002</td>
      <td>1.001543</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hier_df.groupby(level=<span class="string">'cty'</span>, axis=<span class="number">1</span>).count()</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>cty</th>
      <th>JP</th>
      <th>US</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2</td>
      <td>3</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>



<h1 id="2-数据聚合"><a href="#2-数据聚合" class="headerlink" title="2 数据聚合"></a>2 数据聚合</h1><p>聚合是从数组产生标量值的转换过程，如mean、sum、count、min以及sum等。</p>
<h2 id="2-1-常见的聚合方法"><a href="#2-1-常见的聚合方法" class="headerlink" title="2.1 常见的聚合方法"></a>2.1 常见的聚合方法</h2><p>GroupBy方法</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">函数名</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">count</td>
<td style="text-align:center">分组中非NA值的数量</td>
</tr>
<tr>
<td style="text-align:center">sum</td>
<td style="text-align:center">非NA值的和</td>
</tr>
<tr>
<td style="text-align:center">mean</td>
<td style="text-align:center">非NA值的平均值</td>
</tr>
<tr>
<td style="text-align:center">median</td>
<td style="text-align:center">非NA值的算术中位数</td>
</tr>
<tr>
<td style="text-align:center">std、var</td>
<td style="text-align:center">无偏（分母为n-1）标准差和方差</td>
</tr>
<tr>
<td style="text-align:center">min、max</td>
<td style="text-align:center">非NAN值的最小值和最大值</td>
</tr>
<tr>
<td style="text-align:center">prod</td>
<td style="text-align:center">非NAN值的积</td>
</tr>
<tr>
<td style="text-align:center">first、last</td>
<td style="text-align:center">第一个和最后一个非NA值</td>
</tr>
</tbody>
</table>
</div>
<p>然而，并非只是能使用上面的方法，上面的方法只不过是将一些常见的聚合运算方法进行了优化。一些Series和DataFrame的聚合方法都是可以使用的，如计算中位数的quantile：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>data1</th>
      <th>data2</th>
      <th>key1</th>
      <th>key2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.204708</td>
      <td>1.393406</td>
      <td>a</td>
      <td>one</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.478943</td>
      <td>0.092908</td>
      <td>a</td>
      <td>two</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-0.519439</td>
      <td>0.281746</td>
      <td>b</td>
      <td>one</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-0.555730</td>
      <td>0.769023</td>
      <td>b</td>
      <td>two</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1.965781</td>
      <td>1.246435</td>
      <td>a</td>
      <td>one</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grouped = df.groupby(<span class="string">'key1'</span>)</span><br><span class="line">grouped[<span class="string">'data1'</span>].quantile(<span class="number">0.9</span>)</span><br></pre></td></tr></table></figure>
<pre><code>key1
a    1.668413
b   -0.523068
Name: data1, dtype: float64
</code></pre><p>GroupBy会高效地对Series进行切片，然后对各片调用piece.quantile(0.9)，最后将这些结果组装成最后的结果。</p>
<p>除了上面两种情况，还可以使用自己定义的函数，这时就要用到agg（aggregate）了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">peak_to_peak</span><span class="params">(arr)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> arr.max() - arr.min()</span><br><span class="line"></span><br><span class="line">grouped.agg(peak_to_peak)</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>size</th>
      <th>tip</th>
      <th>tips_pct</th>
      <th>total_bill</th>
    </tr>
    <tr>
      <th>sex</th>
      <th>smoker</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">Female</th>
      <th>No</th>
      <td>5</td>
      <td>4.20</td>
      <td>0.195876</td>
      <td>28.58</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>3</td>
      <td>5.50</td>
      <td>0.360233</td>
      <td>41.23</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Male</th>
      <th>No</th>
      <td>4</td>
      <td>7.75</td>
      <td>0.220186</td>
      <td>40.82</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>4</td>
      <td>9.00</td>
      <td>0.674707</td>
      <td>43.56</td>
    </tr>
  </tbody>
</table>
</div>



<p>上面的函数作用在了每组的各列</p>
<p>最后，有些方法虽然不是聚合运算，但是也可以用在这里，如describe：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grouped.describe()</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="8" halign="left">data1</th>
      <th colspan="8" halign="left">data2</th>
    </tr>
    <tr>
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
    <tr>
      <th>key1</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>a</th>
      <td>3.0</td>
      <td>0.746672</td>
      <td>1.109736</td>
      <td>-0.204708</td>
      <td>0.137118</td>
      <td>0.478943</td>
      <td>1.222362</td>
      <td>1.965781</td>
      <td>3.0</td>
      <td>0.910916</td>
      <td>0.712217</td>
      <td>0.092908</td>
      <td>0.669671</td>
      <td>1.246435</td>
      <td>1.319920</td>
      <td>1.393406</td>
    </tr>
    <tr>
      <th>b</th>
      <td>2.0</td>
      <td>-0.537585</td>
      <td>0.025662</td>
      <td>-0.555730</td>
      <td>-0.546657</td>
      <td>-0.537585</td>
      <td>-0.528512</td>
      <td>-0.519439</td>
      <td>2.0</td>
      <td>0.525384</td>
      <td>0.344556</td>
      <td>0.281746</td>
      <td>0.403565</td>
      <td>0.525384</td>
      <td>0.647203</td>
      <td>0.769023</td>
    </tr>
  </tbody>
</table>
</div>



<h2 id="2-2-多函数聚合"><a href="#2-2-多函数聚合" class="headerlink" title="2.2 多函数聚合"></a>2.2 多函数聚合</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">path = <span class="string">'https://raw.githubusercontent.com/zhao750456695/dataset/master/tips.csv'</span></span><br><span class="line">tips = pd.read_csv(path)</span><br><span class="line">tips.head()</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>sex</th>
      <th>smoker</th>
      <th>day</th>
      <th>time</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>16.99</td>
      <td>1.01</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10.34</td>
      <td>1.66</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>21.01</td>
      <td>3.50</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>23.68</td>
      <td>3.31</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>24.59</td>
      <td>3.61</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div>



<p>包括：<br></p>
<ul>
<li>对不同的列使用不同的聚合函数</li>
<li>一次应用多个函数</li>
</ul>
<p><strong>一次应用多个函数</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tips[<span class="string">'tips_pct'</span>] = tips[<span class="string">'tip'</span>]/tips[<span class="string">'total_bill'</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grouped = tips.groupby([<span class="string">'sex'</span>, <span class="string">'smoker'</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grouped_pct = grouped[<span class="string">'tips_pct'</span>]</span><br></pre></td></tr></table></figure>
<p>对于上面表中的GroupBy方法，可以将函数名以字符串的形式传入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grouped_pct.agg(<span class="string">'mean'</span>)</span><br></pre></td></tr></table></figure>
<pre><code>sex     smoker
Female  No        0.156921
        Yes       0.182150
Male    No        0.160669
        Yes       0.152771
Name: tips_pct, dtype: float64
</code></pre><p>如果传入一组函数或函数名，得到的DataFrame的列就会以相应的函数命名：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grouped_pct.agg([<span class="string">'mean'</span>, <span class="string">'std'</span>, peak_to_peak])</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>mean</th>
      <th>std</th>
      <th>peak_to_peak</th>
    </tr>
    <tr>
      <th>sex</th>
      <th>smoker</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">Female</th>
      <th>No</th>
      <td>0.156921</td>
      <td>0.036421</td>
      <td>0.195876</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>0.182150</td>
      <td>0.071595</td>
      <td>0.360233</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Male</th>
      <th>No</th>
      <td>0.160669</td>
      <td>0.041849</td>
      <td>0.220186</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>0.152771</td>
      <td>0.090588</td>
      <td>0.674707</td>
    </tr>
  </tbody>
</table>
</div>



<p>出入的一个由（name, function）元组组成的列表，则各元组的第一个元素就会被用作DataFrame的列名（可以将这种二元元组列表看做一个有序映射）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grouped_pct.agg([(<span class="string">'foo'</span>, <span class="string">'mean'</span>), (<span class="string">'bar'</span>, np.std)])</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>foo</th>
      <th>bar</th>
    </tr>
    <tr>
      <th>sex</th>
      <th>smoker</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">Female</th>
      <th>No</th>
      <td>0.156921</td>
      <td>0.036421</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>0.182150</td>
      <td>0.071595</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Male</th>
      <th>No</th>
      <td>0.160669</td>
      <td>0.041849</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>0.152771</td>
      <td>0.090588</td>
    </tr>
  </tbody>
</table>
</div>



<p><strong>对不同的列使用不同的聚合函数</strong><br>对于DataFrame，你可以定义一组应用于全部列的函数，或不同的列应用不同的函数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">functions = [<span class="string">'count'</span>, <span class="string">'mean'</span>, <span class="string">'max'</span>]</span><br><span class="line">result = grouped[<span class="string">'tips_pct'</span>, <span class="string">'total_bill'</span>].agg(functions)</span><br><span class="line">result</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th colspan="3" halign="left">tips_pct</th>
      <th colspan="3" halign="left">total_bill</th>
    </tr>
    <tr>
      <th></th>
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>max</th>
      <th>count</th>
      <th>mean</th>
      <th>max</th>
    </tr>
    <tr>
      <th>sex</th>
      <th>smoker</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">Female</th>
      <th>No</th>
      <td>54</td>
      <td>0.156921</td>
      <td>0.252672</td>
      <td>54</td>
      <td>18.105185</td>
      <td>35.83</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>33</td>
      <td>0.182150</td>
      <td>0.416667</td>
      <td>33</td>
      <td>17.977879</td>
      <td>44.30</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Male</th>
      <th>No</th>
      <td>97</td>
      <td>0.160669</td>
      <td>0.291990</td>
      <td>97</td>
      <td>19.791237</td>
      <td>48.33</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>60</td>
      <td>0.152771</td>
      <td>0.710345</td>
      <td>60</td>
      <td>22.284500</td>
      <td>50.81</td>
    </tr>
  </tbody>
</table>
</div>



<p>结果DataFrame拥有层次化的列，这相当于分别对各列进行聚合，然后用concat将结果组装到一起，列名用作keys参数。</p>
<p>也可以出入带有自定义名称的元组列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ftuples = [(<span class="string">'Durchschnitt'</span>, <span class="string">'mean'</span>), (<span class="string">'Abweichung'</span>, np.var)]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grouped[<span class="string">'tips_pct'</span>, <span class="string">'total_bill'</span>].agg(ftuples)</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th colspan="2" halign="left">tips_pct</th>
      <th colspan="2" halign="left">total_bill</th>
    </tr>
    <tr>
      <th></th>
      <th></th>
      <th>Durchschnitt</th>
      <th>Abweichung</th>
      <th>Durchschnitt</th>
      <th>Abweichung</th>
    </tr>
    <tr>
      <th>sex</th>
      <th>smoker</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">Female</th>
      <th>No</th>
      <td>0.156921</td>
      <td>0.001327</td>
      <td>18.105185</td>
      <td>53.092422</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>0.182150</td>
      <td>0.005126</td>
      <td>17.977879</td>
      <td>84.451517</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Male</th>
      <th>No</th>
      <td>0.160669</td>
      <td>0.001751</td>
      <td>19.791237</td>
      <td>76.152961</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>0.152771</td>
      <td>0.008206</td>
      <td>22.284500</td>
      <td>98.244673</td>
    </tr>
  </tbody>
</table>
</div>



<p>下面对不同的列应用不同的函数，向agg传入一个列名映射到函数的字典：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grouped.agg(&#123;<span class="string">'tip'</span>: np.max, <span class="string">'size'</span>: <span class="string">'sum'</span>&#125;)</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>tip</th>
      <th>size</th>
    </tr>
    <tr>
      <th>sex</th>
      <th>smoker</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">Female</th>
      <th>No</th>
      <td>5.2</td>
      <td>140</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>6.5</td>
      <td>74</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Male</th>
      <th>No</th>
      <td>9.0</td>
      <td>263</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>10.0</td>
      <td>150</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grouped.agg(&#123;<span class="string">'tips_pct'</span>: [<span class="string">'min'</span>, <span class="string">'max'</span>, <span class="string">'mean'</span>, <span class="string">'std'</span>], <span class="string">'size'</span>: <span class="string">'sum'</span>&#125;)</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th colspan="4" halign="left">tips_pct</th>
      <th>size</th>
    </tr>
    <tr>
      <th></th>
      <th></th>
      <th>min</th>
      <th>max</th>
      <th>mean</th>
      <th>std</th>
      <th>sum</th>
    </tr>
    <tr>
      <th>sex</th>
      <th>smoker</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">Female</th>
      <th>No</th>
      <td>0.056797</td>
      <td>0.252672</td>
      <td>0.156921</td>
      <td>0.036421</td>
      <td>140</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>0.056433</td>
      <td>0.416667</td>
      <td>0.182150</td>
      <td>0.071595</td>
      <td>74</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Male</th>
      <th>No</th>
      <td>0.071804</td>
      <td>0.291990</td>
      <td>0.160669</td>
      <td>0.041849</td>
      <td>263</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>0.035638</td>
      <td>0.710345</td>
      <td>0.152771</td>
      <td>0.090588</td>
      <td>150</td>
    </tr>
  </tbody>
</table>
</div>



<h2 id="2-3-以“无索引”的形式返回聚合数据"><a href="#2-3-以“无索引”的形式返回聚合数据" class="headerlink" title="2.3 以“无索引”的形式返回聚合数据"></a>2.3 以“无索引”的形式返回聚合数据</h2><p>上面的实例都有<strong>由唯一分组键组成的索引（可能还是层次化的）</strong>，可以用as_index=False禁用该功能</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tips.groupby([<span class="string">'sex'</span>, <span class="string">'smoker'</span>], as_index=<span class="keyword">False</span>).mean()</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sex</th>
      <th>smoker</th>
      <th>total_bill</th>
      <th>tip</th>
      <th>size</th>
      <th>tips_pct</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Female</td>
      <td>No</td>
      <td>18.105185</td>
      <td>2.773519</td>
      <td>2.592593</td>
      <td>0.156921</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Female</td>
      <td>Yes</td>
      <td>17.977879</td>
      <td>2.931515</td>
      <td>2.242424</td>
      <td>0.182150</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Male</td>
      <td>No</td>
      <td>19.791237</td>
      <td>3.113402</td>
      <td>2.711340</td>
      <td>0.160669</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Male</td>
      <td>Yes</td>
      <td>22.284500</td>
      <td>3.051167</td>
      <td>2.500000</td>
      <td>0.152771</td>
    </tr>
  </tbody>
</table>
</div>



<h1 id="3-分组级运算和转换"><a href="#3-分组级运算和转换" class="headerlink" title="3 分组级运算和转换"></a>3 分组级运算和转换</h1><p>聚合只不过是分组运算的其中一种，是数据转换的一个特例，它接受将一维数组简化为标量值的函数。<br><br>transform和apply方法，能够执行更多的其他分组运算。</p>
<h2 id="3-1-transform"><a href="#3-1-transform" class="headerlink" title="3.1 transform"></a>3.1 transform</h2><p>下面为一个DataFrame添加一个用于存放各索引分组平均值的列。一个办法是：</p>
<p>先聚合，列名前添加前缀，创建新的DataFrame</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>data1</th>
      <th>data2</th>
      <th>key1</th>
      <th>key2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.204708</td>
      <td>1.393406</td>
      <td>a</td>
      <td>one</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.478943</td>
      <td>0.092908</td>
      <td>a</td>
      <td>two</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-0.519439</td>
      <td>0.281746</td>
      <td>b</td>
      <td>one</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-0.555730</td>
      <td>0.769023</td>
      <td>b</td>
      <td>two</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1.965781</td>
      <td>1.246435</td>
      <td>a</td>
      <td>one</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">k1_means = df.groupby(<span class="string">'key1'</span>).mean().add_prefix(<span class="string">'mean_'</span>)</span><br><span class="line">k1_means</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean_data1</th>
      <th>mean_data2</th>
    </tr>
    <tr>
      <th>key1</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>a</th>
      <td>0.746672</td>
      <td>0.910916</td>
    </tr>
    <tr>
      <th>b</th>
      <td>-0.537585</td>
      <td>0.525384</td>
    </tr>
  </tbody>
</table>
</div>



<p>再合并</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.merge(df, k1_means, left_on=<span class="string">'key1'</span>, right_index=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>data1</th>
      <th>data2</th>
      <th>key1</th>
      <th>key2</th>
      <th>mean_data1</th>
      <th>mean_data2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.204708</td>
      <td>1.393406</td>
      <td>a</td>
      <td>one</td>
      <td>0.746672</td>
      <td>0.910916</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.478943</td>
      <td>0.092908</td>
      <td>a</td>
      <td>two</td>
      <td>0.746672</td>
      <td>0.910916</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1.965781</td>
      <td>1.246435</td>
      <td>a</td>
      <td>one</td>
      <td>0.746672</td>
      <td>0.910916</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-0.519439</td>
      <td>0.281746</td>
      <td>b</td>
      <td>one</td>
      <td>-0.537585</td>
      <td>0.525384</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-0.555730</td>
      <td>0.769023</td>
      <td>b</td>
      <td>two</td>
      <td>-0.537585</td>
      <td>0.525384</td>
    </tr>
  </tbody>
</table>
</div>



<p>比较麻烦，用transform可以大大简化。</p>
<p>下面介绍transform</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">people</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>a</th>
      <th>b</th>
      <th>c</th>
      <th>d</th>
      <th>e</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Joe</th>
      <td>1.007189</td>
      <td>-1.296221</td>
      <td>0.274992</td>
      <td>0.228913</td>
      <td>1.352917</td>
    </tr>
    <tr>
      <th>Steve</th>
      <td>0.886429</td>
      <td>-2.001637</td>
      <td>-0.371843</td>
      <td>1.669025</td>
      <td>-0.438570</td>
    </tr>
    <tr>
      <th>Wes</th>
      <td>-0.539741</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>-1.021228</td>
      <td>-0.577087</td>
    </tr>
    <tr>
      <th>Jim</th>
      <td>0.124121</td>
      <td>0.302614</td>
      <td>0.523772</td>
      <td>0.000940</td>
      <td>1.343810</td>
    </tr>
    <tr>
      <th>Travis</th>
      <td>-0.713544</td>
      <td>-0.831154</td>
      <td>-2.370232</td>
      <td>-1.860761</td>
      <td>-0.860757</td>
    </tr>
  </tbody>
</table>
</div>



<p>使用transform</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">key=[<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'one'</span>]</span><br><span class="line">people.groupby(key).transform(np.mean)</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>a</th>
      <th>b</th>
      <th>c</th>
      <th>d</th>
      <th>e</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Joe</th>
      <td>-0.082032</td>
      <td>-1.063687</td>
      <td>-1.047620</td>
      <td>-0.884358</td>
      <td>-0.028309</td>
    </tr>
    <tr>
      <th>Steve</th>
      <td>0.505275</td>
      <td>-0.849512</td>
      <td>0.075965</td>
      <td>0.834983</td>
      <td>0.452620</td>
    </tr>
    <tr>
      <th>Wes</th>
      <td>-0.082032</td>
      <td>-1.063687</td>
      <td>-1.047620</td>
      <td>-0.884358</td>
      <td>-0.028309</td>
    </tr>
    <tr>
      <th>Jim</th>
      <td>0.505275</td>
      <td>-0.849512</td>
      <td>0.075965</td>
      <td>0.834983</td>
      <td>0.452620</td>
    </tr>
    <tr>
      <th>Travis</th>
      <td>-0.082032</td>
      <td>-1.063687</td>
      <td>-1.047620</td>
      <td>-0.884358</td>
      <td>-0.028309</td>
    </tr>
  </tbody>
</table>
</div>



<p>使用apply</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">people.groupby(key).apply(np.mean)</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>a</th>
      <th>b</th>
      <th>c</th>
      <th>d</th>
      <th>e</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>one</th>
      <td>-0.082032</td>
      <td>-1.063687</td>
      <td>-1.047620</td>
      <td>-0.884358</td>
      <td>-0.028309</td>
    </tr>
    <tr>
      <th>two</th>
      <td>0.505275</td>
      <td>-0.849512</td>
      <td>0.075965</td>
      <td>0.834983</td>
      <td>0.452620</td>
    </tr>
  </tbody>
</table>
</div>



<p>直接使用mean，和apply的结果是一样的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">people.groupby(key).mean()</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>a</th>
      <th>b</th>
      <th>c</th>
      <th>d</th>
      <th>e</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>one</th>
      <td>-0.082032</td>
      <td>-1.063687</td>
      <td>-1.047620</td>
      <td>-0.884358</td>
      <td>-0.028309</td>
    </tr>
    <tr>
      <th>two</th>
      <td>0.505275</td>
      <td>-0.849512</td>
      <td>0.075965</td>
      <td>0.834983</td>
      <td>0.452620</td>
    </tr>
  </tbody>
</table>
</div>



<p>下面用transform添加均值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>data1</th>
      <th>data2</th>
      <th>key1</th>
      <th>key2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.204708</td>
      <td>1.393406</td>
      <td>a</td>
      <td>one</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.478943</td>
      <td>0.092908</td>
      <td>a</td>
      <td>two</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-0.519439</td>
      <td>0.281746</td>
      <td>b</td>
      <td>one</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-0.555730</td>
      <td>0.769023</td>
      <td>b</td>
      <td>two</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1.965781</td>
      <td>1.246435</td>
      <td>a</td>
      <td>one</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.groupby(<span class="string">'key1'</span>).transform(<span class="string">'mean'</span>)</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>data1</th>
      <th>data2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.746672</td>
      <td>0.910916</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.746672</td>
      <td>0.910916</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-0.537585</td>
      <td>0.525384</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-0.537585</td>
      <td>0.525384</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.746672</td>
      <td>0.910916</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[[<span class="string">'data1_mean'</span>, <span class="string">'data2_mean'</span>]] = df.groupby(<span class="string">'key1'</span>).transform(<span class="string">'mean'</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>data1</th>
      <th>data2</th>
      <th>key1</th>
      <th>key2</th>
      <th>data1_mean</th>
      <th>data2_mean</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.204708</td>
      <td>1.393406</td>
      <td>a</td>
      <td>one</td>
      <td>0.746672</td>
      <td>0.910916</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.478943</td>
      <td>0.092908</td>
      <td>a</td>
      <td>two</td>
      <td>0.746672</td>
      <td>0.910916</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-0.519439</td>
      <td>0.281746</td>
      <td>b</td>
      <td>one</td>
      <td>-0.537585</td>
      <td>0.525384</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-0.555730</td>
      <td>0.769023</td>
      <td>b</td>
      <td>two</td>
      <td>-0.537585</td>
      <td>0.525384</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1.965781</td>
      <td>1.246435</td>
      <td>a</td>
      <td>one</td>
      <td>0.746672</td>
      <td>0.910916</td>
    </tr>
  </tbody>
</table>
</div>



<p>简单方便又快捷<br><br>transform会保留原来的索引，把得到的标量广播出去，如根据key分组，a得到的data1均值是0.746672，这个均值会给所有key1是a的行。</p>
<p>tansform的过程：</p>
<p><img src="http://wx1.sinaimg.cn/mw690/c3a5a043ly1fqjb2ge3sbj20jg09cq49.jpg" alt=""></p>
<p>apply的过程：</p>
<p><img src="http://wx2.sinaimg.cn/mw690/c3a5a043ly1fqjb29tztbj20jg09r0tp.jpg" alt=""></p>
<h2 id="3-2-apply：一般性的“拆分—-应用—-合并”"><a href="#3-2-apply：一般性的“拆分—-应用—-合并”" class="headerlink" title="3.2 apply：一般性的“拆分—-应用—-合并”"></a>3.2 apply：一般性的“拆分—-应用—-合并”</h2><p>和agg一样，transform是有着严格的使用条件的特殊函数：传入的函数只能产生两种结果，要么产生一个可以广播的标量值（如np.mean），要命产生一个相同大小的结果数组。</p>
<p>最一般化的GroupBy方法还是是apply，apply会将待处理的对象拆分成多个片段，然后对各片段调用传入的函数，最后尝试将各片段组合到一起。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">path = <span class="string">'https://raw.githubusercontent.com/zhao750456695/dataset/master/tips.csv'</span></span><br><span class="line">tips = pd.read_csv(path)</span><br><span class="line">tips[<span class="string">'tips_pct'</span>] = tips[<span class="string">'tip'</span>]/tips[<span class="string">'total_bill'</span>]</span><br><span class="line">tips.head()</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>sex</th>
      <th>smoker</th>
      <th>day</th>
      <th>time</th>
      <th>size</th>
      <th>tips_pct</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>16.99</td>
      <td>1.01</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.059447</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10.34</td>
      <td>1.66</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
      <td>0.160542</td>
    </tr>
    <tr>
      <th>2</th>
      <td>21.01</td>
      <td>3.50</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
      <td>0.166587</td>
    </tr>
    <tr>
      <th>3</th>
      <td>23.68</td>
      <td>3.31</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.139780</td>
    </tr>
    <tr>
      <th>4</th>
      <td>24.59</td>
      <td>3.61</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>4</td>
      <td>0.146808</td>
    </tr>
  </tbody>
</table>
</div>



<p>回到这个消费数据集上，假设想根据分组选出最高的5个tip_pct值，先编写一个函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">top</span><span class="params">(df, n=<span class="number">5</span>, column=<span class="string">'tips_pct'</span>)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> df.sort_index(by=column)[-n: ]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top(tips, n=<span class="number">6</span>)</span><br></pre></td></tr></table></figure>
<pre><code>D:\ProgramFiles\Anaconda3\lib\site-packages\ipykernel_launcher.py:2: FutureWarning: by argument to sort_index is deprecated, pls use .sort_values(by=...)
</code></pre><div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>sex</th>
      <th>smoker</th>
      <th>day</th>
      <th>time</th>
      <th>size</th>
      <th>tips_pct</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>109</th>
      <td>14.31</td>
      <td>4.00</td>
      <td>Female</td>
      <td>Yes</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.279525</td>
    </tr>
    <tr>
      <th>183</th>
      <td>23.17</td>
      <td>6.50</td>
      <td>Male</td>
      <td>Yes</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>4</td>
      <td>0.280535</td>
    </tr>
    <tr>
      <th>232</th>
      <td>11.61</td>
      <td>3.39</td>
      <td>Male</td>
      <td>No</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.291990</td>
    </tr>
    <tr>
      <th>67</th>
      <td>3.07</td>
      <td>1.00</td>
      <td>Female</td>
      <td>Yes</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>1</td>
      <td>0.325733</td>
    </tr>
    <tr>
      <th>178</th>
      <td>9.60</td>
      <td>4.00</td>
      <td>Female</td>
      <td>Yes</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.416667</td>
    </tr>
    <tr>
      <th>172</th>
      <td>7.25</td>
      <td>5.15</td>
      <td>Male</td>
      <td>Yes</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.710345</td>
    </tr>
  </tbody>
</table>
</div>



<p>现在对smoker分组并使用apply：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tips.groupby(<span class="string">'smoker'</span>).apply(top)</span><br></pre></td></tr></table></figure>
<pre><code>D:\ProgramFiles\Anaconda3\lib\site-packages\ipykernel_launcher.py:2: FutureWarning: by argument to sort_index is deprecated, pls use .sort_values(by=...)
</code></pre><div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>sex</th>
      <th>smoker</th>
      <th>day</th>
      <th>time</th>
      <th>size</th>
      <th>tips_pct</th>
    </tr>
    <tr>
      <th>smoker</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">No</th>
      <th>88</th>
      <td>24.71</td>
      <td>5.85</td>
      <td>Male</td>
      <td>No</td>
      <td>Thur</td>
      <td>Lunch</td>
      <td>2</td>
      <td>0.236746</td>
    </tr>
    <tr>
      <th>185</th>
      <td>20.69</td>
      <td>5.00</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>5</td>
      <td>0.241663</td>
    </tr>
    <tr>
      <th>51</th>
      <td>10.29</td>
      <td>2.60</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.252672</td>
    </tr>
    <tr>
      <th>149</th>
      <td>7.51</td>
      <td>2.00</td>
      <td>Male</td>
      <td>No</td>
      <td>Thur</td>
      <td>Lunch</td>
      <td>2</td>
      <td>0.266312</td>
    </tr>
    <tr>
      <th>232</th>
      <td>11.61</td>
      <td>3.39</td>
      <td>Male</td>
      <td>No</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.291990</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">Yes</th>
      <th>109</th>
      <td>14.31</td>
      <td>4.00</td>
      <td>Female</td>
      <td>Yes</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.279525</td>
    </tr>
    <tr>
      <th>183</th>
      <td>23.17</td>
      <td>6.50</td>
      <td>Male</td>
      <td>Yes</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>4</td>
      <td>0.280535</td>
    </tr>
    <tr>
      <th>67</th>
      <td>3.07</td>
      <td>1.00</td>
      <td>Female</td>
      <td>Yes</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>1</td>
      <td>0.325733</td>
    </tr>
    <tr>
      <th>178</th>
      <td>9.60</td>
      <td>4.00</td>
      <td>Female</td>
      <td>Yes</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.416667</td>
    </tr>
    <tr>
      <th>172</th>
      <td>7.25</td>
      <td>5.15</td>
      <td>Male</td>
      <td>Yes</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.710345</td>
    </tr>
  </tbody>
</table>
</div>



<p>这里发生了什么？top函数在DataFrame的各个片段上调用，然后结果由pandas.concat组装到一起，并以分组名称进行标记。于是，最终结果就有了一个层次化索引，<strong>其内层索引来自原DataFrame</strong>。</p>
<p>如果传给apply的函数能够接受其他参数或关键字，则可以将这些内容放在函数名后面一并传入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tips.groupby([<span class="string">'smoker'</span>, <span class="string">'day'</span>]).apply(top, n=<span class="number">1</span>, column=<span class="string">'total_bill'</span>)</span><br></pre></td></tr></table></figure>
<pre><code>D:\ProgramFiles\Anaconda3\lib\site-packages\ipykernel_launcher.py:2: FutureWarning: by argument to sort_index is deprecated, pls use .sort_values(by=...)
</code></pre><div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>sex</th>
      <th>smoker</th>
      <th>day</th>
      <th>time</th>
      <th>size</th>
      <th>tips_pct</th>
    </tr>
    <tr>
      <th>smoker</th>
      <th>day</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="4" valign="top">No</th>
      <th>Fri</th>
      <th>94</th>
      <td>22.75</td>
      <td>3.25</td>
      <td>Female</td>
      <td>No</td>
      <td>Fri</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.142857</td>
    </tr>
    <tr>
      <th>Sat</th>
      <th>212</th>
      <td>48.33</td>
      <td>9.00</td>
      <td>Male</td>
      <td>No</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>4</td>
      <td>0.186220</td>
    </tr>
    <tr>
      <th>Sun</th>
      <th>156</th>
      <td>48.17</td>
      <td>5.00</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>6</td>
      <td>0.103799</td>
    </tr>
    <tr>
      <th>Thur</th>
      <th>142</th>
      <td>41.19</td>
      <td>5.00</td>
      <td>Male</td>
      <td>No</td>
      <td>Thur</td>
      <td>Lunch</td>
      <td>5</td>
      <td>0.121389</td>
    </tr>
    <tr>
      <th rowspan="4" valign="top">Yes</th>
      <th>Fri</th>
      <th>95</th>
      <td>40.17</td>
      <td>4.73</td>
      <td>Male</td>
      <td>Yes</td>
      <td>Fri</td>
      <td>Dinner</td>
      <td>4</td>
      <td>0.117750</td>
    </tr>
    <tr>
      <th>Sat</th>
      <th>170</th>
      <td>50.81</td>
      <td>10.00</td>
      <td>Male</td>
      <td>Yes</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>3</td>
      <td>0.196812</td>
    </tr>
    <tr>
      <th>Sun</th>
      <th>182</th>
      <td>45.35</td>
      <td>3.50</td>
      <td>Male</td>
      <td>Yes</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
      <td>0.077178</td>
    </tr>
    <tr>
      <th>Thur</th>
      <th>197</th>
      <td>43.11</td>
      <td>5.00</td>
      <td>Female</td>
      <td>Yes</td>
      <td>Thur</td>
      <td>Lunch</td>
      <td>4</td>
      <td>0.115982</td>
    </tr>
  </tbody>
</table>
</div>



<p>前面用到过describe，其实只是一种快捷方式：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">result = tips.groupby(<span class="string">'smoker'</span>)[<span class="string">'tips_pct'</span>].describe()</span><br><span class="line">result</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
    <tr>
      <th>smoker</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>No</th>
      <td>151.0</td>
      <td>0.159328</td>
      <td>0.039910</td>
      <td>0.056797</td>
      <td>0.136906</td>
      <td>0.155625</td>
      <td>0.185014</td>
      <td>0.291990</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>93.0</td>
      <td>0.163196</td>
      <td>0.085119</td>
      <td>0.035638</td>
      <td>0.106771</td>
      <td>0.153846</td>
      <td>0.195059</td>
      <td>0.710345</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result.unstack(<span class="string">'smoker'</span>)</span><br></pre></td></tr></table></figure>
<pre><code>       smoker
count  No        151.000000
       Yes        93.000000
mean   No          0.159328
       Yes         0.163196
std    No          0.039910
       Yes         0.085119
min    No          0.056797
       Yes         0.035638
25%    No          0.136906
       Yes         0.106771
50%    No          0.155625
       Yes         0.153846
75%    No          0.185014
       Yes         0.195059
max    No          0.291990
       Yes         0.710345
dtype: float64
</code></pre><p>在GroupBy中，当你调用诸如describe之类的方法时，实际上只是应用了下面两条代码的快捷方式而已：</p>
<p>f = lambda x: x.describe()<br><br>grouped.apply(f)</p>
<p><strong>禁止分组键</strong></p>
<p>从上面知，分组键会跟原始对象的索引共同构成结果对象中的层次化索引。将group_keys=False传入groupby即可禁止该效果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tips.groupby(<span class="string">'smoker'</span>, group_keys=<span class="keyword">False</span>).apply(top)</span><br></pre></td></tr></table></figure>
<pre><code>D:\ProgramFiles\Anaconda3\lib\site-packages\ipykernel_launcher.py:2: FutureWarning: by argument to sort_index is deprecated, pls use .sort_values(by=...)
</code></pre><div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>sex</th>
      <th>smoker</th>
      <th>day</th>
      <th>time</th>
      <th>size</th>
      <th>tips_pct</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>88</th>
      <td>24.71</td>
      <td>5.85</td>
      <td>Male</td>
      <td>No</td>
      <td>Thur</td>
      <td>Lunch</td>
      <td>2</td>
      <td>0.236746</td>
    </tr>
    <tr>
      <th>185</th>
      <td>20.69</td>
      <td>5.00</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>5</td>
      <td>0.241663</td>
    </tr>
    <tr>
      <th>51</th>
      <td>10.29</td>
      <td>2.60</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.252672</td>
    </tr>
    <tr>
      <th>149</th>
      <td>7.51</td>
      <td>2.00</td>
      <td>Male</td>
      <td>No</td>
      <td>Thur</td>
      <td>Lunch</td>
      <td>2</td>
      <td>0.266312</td>
    </tr>
    <tr>
      <th>232</th>
      <td>11.61</td>
      <td>3.39</td>
      <td>Male</td>
      <td>No</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.291990</td>
    </tr>
    <tr>
      <th>109</th>
      <td>14.31</td>
      <td>4.00</td>
      <td>Female</td>
      <td>Yes</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.279525</td>
    </tr>
    <tr>
      <th>183</th>
      <td>23.17</td>
      <td>6.50</td>
      <td>Male</td>
      <td>Yes</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>4</td>
      <td>0.280535</td>
    </tr>
    <tr>
      <th>67</th>
      <td>3.07</td>
      <td>1.00</td>
      <td>Female</td>
      <td>Yes</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>1</td>
      <td>0.325733</td>
    </tr>
    <tr>
      <th>178</th>
      <td>9.60</td>
      <td>4.00</td>
      <td>Female</td>
      <td>Yes</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.416667</td>
    </tr>
    <tr>
      <th>172</th>
      <td>7.25</td>
      <td>5.15</td>
      <td>Male</td>
      <td>Yes</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.710345</td>
    </tr>
  </tbody>
</table>
</div>



<h2 id="3-3-分位数和桶分析"><a href="#3-3-分位数和桶分析" class="headerlink" title="3.3 分位数和桶分析"></a>3.3 分位数和桶分析</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">frame = DataFrame(&#123;<span class="string">'data1'</span>: np.random.randn(<span class="number">1000</span>),</span><br><span class="line">                   <span class="string">'data2'</span>: np.random.randn(<span class="number">1000</span>)&#125;)</span><br><span class="line">factor = pd.cut(frame.data1, <span class="number">4</span>)</span><br><span class="line">factor[:<span class="number">10</span>]</span><br></pre></td></tr></table></figure>
<pre><code>0     (0.489, 2.208]
1    (-2.956, -1.23]
2     (-1.23, 0.489]
3     (-1.23, 0.489]
4     (0.489, 2.208]
5     (0.489, 2.208]
6    (-2.956, -1.23]
7     (-1.23, 0.489]
8     (0.489, 2.208]
9     (-1.23, 0.489]
Name: data1, dtype: category
Categories (4, interval[float64]): [(-2.956, -1.23] &lt; (-1.23, 0.489] &lt; (0.489, 2.208] &lt; (2.208, 3.928]]
</code></pre><p>cut返回的Factor对象可以直接用于groupby。因此，可以像下面这样对data2做一些统计计算：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_stats</span><span class="params">(group)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">'min'</span>: group.min(), <span class="string">'max'</span>: group.max(),</span><br><span class="line">            <span class="string">'count'</span>: group.count(), <span class="string">'mean'</span>: group.mean()&#125;</span><br><span class="line"></span><br><span class="line">grouped = frame.data2.groupby(factor)</span><br><span class="line">grouped.apply(get_stats).unstack()</span><br><span class="line"></span><br><span class="line"><span class="comment">#ADAPT the output is not sorted in the book while this is the case now (swap first two lines)</span></span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>max</th>
      <th>mean</th>
      <th>min</th>
    </tr>
    <tr>
      <th>data1</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>(-2.956, -1.23]</th>
      <td>96.0</td>
      <td>1.670835</td>
      <td>-0.063122</td>
      <td>-3.399312</td>
    </tr>
    <tr>
      <th>(-1.23, 0.489]</th>
      <td>596.0</td>
      <td>3.260383</td>
      <td>-0.003908</td>
      <td>-2.989741</td>
    </tr>
    <tr>
      <th>(0.489, 2.208]</th>
      <td>297.0</td>
      <td>2.954439</td>
      <td>0.092315</td>
      <td>-3.745356</td>
    </tr>
    <tr>
      <th>(2.208, 3.928]</th>
      <td>11.0</td>
      <td>1.765640</td>
      <td>0.030607</td>
      <td>-1.929776</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Return quantile numbers</span></span><br><span class="line">grouping = pd.qcut(frame.data1, <span class="number">10</span>, labels=<span class="keyword">False</span>)</span><br><span class="line">grouped = frame.data2.groupby(grouping)</span><br><span class="line">grouped.apply(get_stats).unstack()</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>max</th>
      <th>mean</th>
      <th>min</th>
    </tr>
    <tr>
      <th>data1</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>100.0</td>
      <td>1.670835</td>
      <td>-0.086107</td>
      <td>-3.399312</td>
    </tr>
    <tr>
      <th>1</th>
      <td>100.0</td>
      <td>2.628441</td>
      <td>0.051974</td>
      <td>-1.801179</td>
    </tr>
    <tr>
      <th>2</th>
      <td>100.0</td>
      <td>2.527939</td>
      <td>-0.073978</td>
      <td>-2.925113</td>
    </tr>
    <tr>
      <th>3</th>
      <td>100.0</td>
      <td>3.260383</td>
      <td>0.114297</td>
      <td>-2.315555</td>
    </tr>
    <tr>
      <th>4</th>
      <td>100.0</td>
      <td>2.074345</td>
      <td>-0.127181</td>
      <td>-2.047939</td>
    </tr>
    <tr>
      <th>5</th>
      <td>100.0</td>
      <td>2.184810</td>
      <td>0.021461</td>
      <td>-2.989741</td>
    </tr>
    <tr>
      <th>6</th>
      <td>100.0</td>
      <td>2.458842</td>
      <td>-0.038834</td>
      <td>-2.084231</td>
    </tr>
    <tr>
      <th>7</th>
      <td>100.0</td>
      <td>2.954439</td>
      <td>0.003504</td>
      <td>-3.056990</td>
    </tr>
    <tr>
      <th>8</th>
      <td>100.0</td>
      <td>2.735527</td>
      <td>0.129800</td>
      <td>-3.745356</td>
    </tr>
    <tr>
      <th>9</th>
      <td>100.0</td>
      <td>2.377020</td>
      <td>0.198718</td>
      <td>-2.064111</td>
    </tr>
  </tbody>
</table>
</div>



<p>上面是长度相等的桶，要根据样本分位数得到大小相等的桶，使用qcut即可。传入labels=False即可只获得分位数的编号。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Return quantile numbers</span></span><br><span class="line">grouping = pd.qcut(frame.data1, <span class="number">10</span>, labels=<span class="keyword">False</span>)</span><br><span class="line">grouped = frame.data2.groupby(grouping)</span><br><span class="line">grouped.apply(get_stats).unstack()</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>max</th>
      <th>mean</th>
      <th>min</th>
    </tr>
    <tr>
      <th>data1</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>100.0</td>
      <td>1.670835</td>
      <td>-0.086107</td>
      <td>-3.399312</td>
    </tr>
    <tr>
      <th>1</th>
      <td>100.0</td>
      <td>2.628441</td>
      <td>0.051974</td>
      <td>-1.801179</td>
    </tr>
    <tr>
      <th>2</th>
      <td>100.0</td>
      <td>2.527939</td>
      <td>-0.073978</td>
      <td>-2.925113</td>
    </tr>
    <tr>
      <th>3</th>
      <td>100.0</td>
      <td>3.260383</td>
      <td>0.114297</td>
      <td>-2.315555</td>
    </tr>
    <tr>
      <th>4</th>
      <td>100.0</td>
      <td>2.074345</td>
      <td>-0.127181</td>
      <td>-2.047939</td>
    </tr>
    <tr>
      <th>5</th>
      <td>100.0</td>
      <td>2.184810</td>
      <td>0.021461</td>
      <td>-2.989741</td>
    </tr>
    <tr>
      <th>6</th>
      <td>100.0</td>
      <td>2.458842</td>
      <td>-0.038834</td>
      <td>-2.084231</td>
    </tr>
    <tr>
      <th>7</th>
      <td>100.0</td>
      <td>2.954439</td>
      <td>0.003504</td>
      <td>-3.056990</td>
    </tr>
    <tr>
      <th>8</th>
      <td>100.0</td>
      <td>2.735527</td>
      <td>0.129800</td>
      <td>-3.745356</td>
    </tr>
    <tr>
      <th>9</th>
      <td>100.0</td>
      <td>2.377020</td>
      <td>0.198718</td>
      <td>-2.064111</td>
    </tr>
  </tbody>
</table>
</div>



<h1 id="4-透视表和交叉表"><a href="#4-透视表和交叉表" class="headerlink" title="4 透视表和交叉表"></a>4 透视表和交叉表</h1><h2 id="4-1-透视表"><a href="#4-1-透视表" class="headerlink" title="4.1 透视表"></a>4.1 透视表</h2><p>透视表是各种电子表格程序和其他数据分析软件中一种常见的数据汇总工具。它根据一个或多个键对数据进行聚合，并根据<strong>行和列上的分组键</strong>将数据分配到各个矩形区域中。</p>
<p>回到小费数据集上，假设我想要根据sex和smoker计算分组平均数（pivot_table的默认聚合类型），并将sex和smoker放到行的索引上：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tips.pivot_table(index=[<span class="string">'sex'</span>, <span class="string">'smoker'</span>])</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>size</th>
      <th>tip</th>
      <th>tips_pct</th>
      <th>total_bill</th>
    </tr>
    <tr>
      <th>sex</th>
      <th>smoker</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">Female</th>
      <th>No</th>
      <td>2.592593</td>
      <td>2.773519</td>
      <td>0.156921</td>
      <td>18.105185</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>2.242424</td>
      <td>2.931515</td>
      <td>0.182150</td>
      <td>17.977879</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Male</th>
      <th>No</th>
      <td>2.711340</td>
      <td>3.113402</td>
      <td>0.160669</td>
      <td>19.791237</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>2.500000</td>
      <td>3.051167</td>
      <td>0.152771</td>
      <td>22.284500</td>
    </tr>
  </tbody>
</table>
</div>



<p>这对groupby来说很简单，现在，假设只想聚合tips_pct和size，而且想根据day进行分组。我将smoker放到列上，把day放到行上：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tips.pivot_table([<span class="string">'tips_pct'</span>, <span class="string">'size'</span>], index=[<span class="string">'sex'</span>, <span class="string">'day'</span>], columns=<span class="string">'smoker'</span>)</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th colspan="2" halign="left">size</th>
      <th colspan="2" halign="left">tips_pct</th>
    </tr>
    <tr>
      <th></th>
      <th>smoker</th>
      <th>No</th>
      <th>Yes</th>
      <th>No</th>
      <th>Yes</th>
    </tr>
    <tr>
      <th>sex</th>
      <th>day</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="4" valign="top">Female</th>
      <th>Fri</th>
      <td>2.500000</td>
      <td>2.000000</td>
      <td>0.165296</td>
      <td>0.209129</td>
    </tr>
    <tr>
      <th>Sat</th>
      <td>2.307692</td>
      <td>2.200000</td>
      <td>0.147993</td>
      <td>0.163817</td>
    </tr>
    <tr>
      <th>Sun</th>
      <td>3.071429</td>
      <td>2.500000</td>
      <td>0.165710</td>
      <td>0.237075</td>
    </tr>
    <tr>
      <th>Thur</th>
      <td>2.480000</td>
      <td>2.428571</td>
      <td>0.155971</td>
      <td>0.163073</td>
    </tr>
    <tr>
      <th rowspan="4" valign="top">Male</th>
      <th>Fri</th>
      <td>2.000000</td>
      <td>2.125000</td>
      <td>0.138005</td>
      <td>0.144730</td>
    </tr>
    <tr>
      <th>Sat</th>
      <td>2.656250</td>
      <td>2.629630</td>
      <td>0.162132</td>
      <td>0.139067</td>
    </tr>
    <tr>
      <th>Sun</th>
      <td>2.883721</td>
      <td>2.600000</td>
      <td>0.158291</td>
      <td>0.173964</td>
    </tr>
    <tr>
      <th>Thur</th>
      <td>2.500000</td>
      <td>2.300000</td>
      <td>0.165706</td>
      <td>0.164417</td>
    </tr>
  </tbody>
</table>
</div>



<p>还可以对这个列表进一步处理，出入margins=True添加分项小计。这将会添加标签为ALL的行和列，其值对应于单个等级中所有数据的分组统计。在下面的例子中，ALL值为平均值：不单独考虑烟民与非烟民（ALL列），不单独考虑行分组两个级别中的任何单项（ALL行）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tips.pivot_table([<span class="string">'tips_pct'</span>, <span class="string">'size'</span>], index=[<span class="string">'sex'</span>, <span class="string">'day'</span>], columns=<span class="string">'smoker'</span>, margins=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th colspan="3" halign="left">size</th>
      <th colspan="3" halign="left">tips_pct</th>
    </tr>
    <tr>
      <th></th>
      <th>smoker</th>
      <th>No</th>
      <th>Yes</th>
      <th>All</th>
      <th>No</th>
      <th>Yes</th>
      <th>All</th>
    </tr>
    <tr>
      <th>sex</th>
      <th>day</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="4" valign="top">Female</th>
      <th>Fri</th>
      <td>2.500000</td>
      <td>2.000000</td>
      <td>2.111111</td>
      <td>0.165296</td>
      <td>0.209129</td>
      <td>0.199388</td>
    </tr>
    <tr>
      <th>Sat</th>
      <td>2.307692</td>
      <td>2.200000</td>
      <td>2.250000</td>
      <td>0.147993</td>
      <td>0.163817</td>
      <td>0.156470</td>
    </tr>
    <tr>
      <th>Sun</th>
      <td>3.071429</td>
      <td>2.500000</td>
      <td>2.944444</td>
      <td>0.165710</td>
      <td>0.237075</td>
      <td>0.181569</td>
    </tr>
    <tr>
      <th>Thur</th>
      <td>2.480000</td>
      <td>2.428571</td>
      <td>2.468750</td>
      <td>0.155971</td>
      <td>0.163073</td>
      <td>0.157525</td>
    </tr>
    <tr>
      <th rowspan="4" valign="top">Male</th>
      <th>Fri</th>
      <td>2.000000</td>
      <td>2.125000</td>
      <td>2.100000</td>
      <td>0.138005</td>
      <td>0.144730</td>
      <td>0.143385</td>
    </tr>
    <tr>
      <th>Sat</th>
      <td>2.656250</td>
      <td>2.629630</td>
      <td>2.644068</td>
      <td>0.162132</td>
      <td>0.139067</td>
      <td>0.151577</td>
    </tr>
    <tr>
      <th>Sun</th>
      <td>2.883721</td>
      <td>2.600000</td>
      <td>2.810345</td>
      <td>0.158291</td>
      <td>0.173964</td>
      <td>0.162344</td>
    </tr>
    <tr>
      <th>Thur</th>
      <td>2.500000</td>
      <td>2.300000</td>
      <td>2.433333</td>
      <td>0.165706</td>
      <td>0.164417</td>
      <td>0.165276</td>
    </tr>
    <tr>
      <th>All</th>
      <th></th>
      <td>2.668874</td>
      <td>2.408602</td>
      <td>2.569672</td>
      <td>0.159328</td>
      <td>0.163196</td>
      <td>0.160803</td>
    </tr>
  </tbody>
</table>
</div>



<p>要使用其他的聚合函数，将其传给aggfunc即可。例如，使用count或len可以得到有关分组大小的交叉表：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tips.pivot_table(<span class="string">'tips_pct'</span>, index=[<span class="string">'sex'</span>, <span class="string">'smoker'</span>], columns=<span class="string">'day'</span>, aggfunc=len, margins=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>day</th>
      <th>Fri</th>
      <th>Sat</th>
      <th>Sun</th>
      <th>Thur</th>
      <th>All</th>
    </tr>
    <tr>
      <th>sex</th>
      <th>smoker</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">Female</th>
      <th>No</th>
      <td>2.0</td>
      <td>13.0</td>
      <td>14.0</td>
      <td>25.0</td>
      <td>54.0</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>7.0</td>
      <td>15.0</td>
      <td>4.0</td>
      <td>7.0</td>
      <td>33.0</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Male</th>
      <th>No</th>
      <td>2.0</td>
      <td>32.0</td>
      <td>43.0</td>
      <td>20.0</td>
      <td>97.0</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>8.0</td>
      <td>27.0</td>
      <td>15.0</td>
      <td>10.0</td>
      <td>60.0</td>
    </tr>
    <tr>
      <th>All</th>
      <th></th>
      <td>19.0</td>
      <td>87.0</td>
      <td>76.0</td>
      <td>62.0</td>
      <td>244.0</td>
    </tr>
  </tbody>
</table>
</div>



<p>如果存在空的组合（也就是NA），可能希望设置一个fill_value:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tips.pivot_table(<span class="string">'size'</span>, index=[<span class="string">'time'</span>, <span class="string">'sex'</span>, <span class="string">'smoker'</span>], columns=<span class="string">'day'</span>, aggfunc=<span class="string">'sum'</span>, fill_value=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>day</th>
      <th>Fri</th>
      <th>Sat</th>
      <th>Sun</th>
      <th>Thur</th>
    </tr>
    <tr>
      <th>time</th>
      <th>sex</th>
      <th>smoker</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="4" valign="top">Dinner</th>
      <th rowspan="2" valign="top">Female</th>
      <th>No</th>
      <td>2</td>
      <td>30</td>
      <td>43</td>
      <td>2</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>8</td>
      <td>33</td>
      <td>10</td>
      <td>0</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Male</th>
      <th>No</th>
      <td>4</td>
      <td>85</td>
      <td>124</td>
      <td>0</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>12</td>
      <td>71</td>
      <td>39</td>
      <td>0</td>
    </tr>
    <tr>
      <th rowspan="4" valign="top">Lunch</th>
      <th rowspan="2" valign="top">Female</th>
      <th>No</th>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>60</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>6</td>
      <td>0</td>
      <td>0</td>
      <td>17</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Male</th>
      <th>No</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>50</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>5</td>
      <td>0</td>
      <td>0</td>
      <td>23</td>
    </tr>
  </tbody>
</table>
</div>



<h2 id="4-2-交叉表"><a href="#4-2-交叉表" class="headerlink" title="4.2 交叉表"></a>4.2 交叉表</h2><p>交叉表是一种计算分组频率的特殊透视表。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io</span><br><span class="line">data = <span class="string">"""\</span></span><br><span class="line"><span class="string">Sample    Gender    Handedness</span></span><br><span class="line"><span class="string">1    Female    Right-handed</span></span><br><span class="line"><span class="string">2    Male    Left-handed</span></span><br><span class="line"><span class="string">3    Female    Right-handed</span></span><br><span class="line"><span class="string">4    Male    Right-handed</span></span><br><span class="line"><span class="string">5    Male    Left-handed</span></span><br><span class="line"><span class="string">6    Male    Right-handed</span></span><br><span class="line"><span class="string">7    Female    Right-handed</span></span><br><span class="line"><span class="string">8    Female    Left-handed</span></span><br><span class="line"><span class="string">9    Male    Right-handed</span></span><br><span class="line"><span class="string">10    Female    Right-handed"""</span></span><br><span class="line">data = pd.read_table(io.StringIO(data), sep=<span class="string">'\s+'</span>)</span><br><span class="line">data</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Sample</th>
      <th>Gender</th>
      <th>Handedness</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>Female</td>
      <td>Right-handed</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>Male</td>
      <td>Left-handed</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>Female</td>
      <td>Right-handed</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>Male</td>
      <td>Right-handed</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>Male</td>
      <td>Left-handed</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>Male</td>
      <td>Right-handed</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>Female</td>
      <td>Right-handed</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>Female</td>
      <td>Left-handed</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>Male</td>
      <td>Right-handed</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>Female</td>
      <td>Right-handed</td>
    </tr>
  </tbody>
</table>
</div>



<p>想要根据性别和用手习惯对这段数据进行汇总：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.crosstab(data.Gender, data.Handedness, margins=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Handedness</th>
      <th>Left-handed</th>
      <th>Right-handed</th>
      <th>All</th>
    </tr>
    <tr>
      <th>Gender</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Female</th>
      <td>1</td>
      <td>4</td>
      <td>5</td>
    </tr>
    <tr>
      <th>Male</th>
      <td>2</td>
      <td>3</td>
      <td>5</td>
    </tr>
    <tr>
      <th>All</th>
      <td>3</td>
      <td>7</td>
      <td>10</td>
    </tr>
  </tbody>
</table>
</div>



<p>前两个参数可以是数组、Series或数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.crosstab([tips.time, tips.day], tips.smoker, margins=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>smoker</th>
      <th>No</th>
      <th>Yes</th>
      <th>All</th>
    </tr>
    <tr>
      <th>time</th>
      <th>day</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="4" valign="top">Dinner</th>
      <th>Fri</th>
      <td>3</td>
      <td>9</td>
      <td>12</td>
    </tr>
    <tr>
      <th>Sat</th>
      <td>45</td>
      <td>42</td>
      <td>87</td>
    </tr>
    <tr>
      <th>Sun</th>
      <td>57</td>
      <td>19</td>
      <td>76</td>
    </tr>
    <tr>
      <th>Thur</th>
      <td>1</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Lunch</th>
      <th>Fri</th>
      <td>1</td>
      <td>6</td>
      <td>7</td>
    </tr>
    <tr>
      <th>Thur</th>
      <td>44</td>
      <td>17</td>
      <td>61</td>
    </tr>
    <tr>
      <th>All</th>
      <th></th>
      <td>151</td>
      <td>93</td>
      <td>244</td>
    </tr>
  </tbody>
</table>
</div>



          
        
      
    </div>
    
    
    
	<div>
	
	</div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/post/0.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JieZhao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FinGeek|http://zhaojie.tech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/0.html" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-17T20:55:23+08:00">
                2018-04-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>title: 链家网租房数据分析<br>date: 2018-04-17 20:55:23<br>tags: 案例</p>
<pre><code>import pandas as pd
import numpy as np
from pandas import Series, DataFrame
pd.set_option(&#39;expand_frame_repr&#39;, False)

df = pd.read_csv(&#39;./1_LJdata.csv&#39;)
df
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>区域</th>

      <th>地址</th>

      <th>标题</th>

      <th>户型</th>

      <th>面积</th>

      <th>价格</th>

      <th>楼层</th>

      <th>建造时间</th>

      <th>朝向</th>

      <th>更新时间</th>

      <th>看房人数</th>

      <th>备注</th>

      <th>链接地址</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>0</th>

      <td>燕莎租房</td>

      <td>新源街</td>

      <td>亮马桥 新源街  精装两居 交通便利 看房方便 随时入住</td>

      <td>2室1厅</td>

      <td>50平米</td>

      <td>5800</td>

      <td>中楼层(共6层)</td>

      <td>1981年建板楼</td>

      <td>南</td>

      <td>2017.07.21</td>

      <td>26</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101803342.html</td>

    </tr>

    <tr>

      <th>1</th>

      <td>望京租房</td>

      <td>澳洲康都</td>

      <td>澳洲康都东向精致两居室...........</td>

      <td>2室1厅</td>

      <td>79平米</td>

      <td>7800</td>

      <td>中楼层(共28层)</td>

      <td>2005年建板塔结合</td>

      <td>东</td>

      <td>2017.07.23</td>

      <td>33</td>

      <td>距离14号线(东段)东湖渠站731米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101753126.html</td>

    </tr>

    <tr>

      <th>2</th>

      <td>广安门租房</td>

      <td>远见名苑</td>

      <td>远见名苑 东向两居室 独立小区环境 适合居家</td>

      <td>2室1厅</td>

      <td>86平米</td>

      <td>8000</td>

      <td>低楼层(共25层)</td>

      <td>2006年建塔楼</td>

      <td>东</td>

      <td>2017.07.20</td>

      <td>34</td>

      <td>距离7号线达官营站684米 随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101756753.html</td>

    </tr>

    <tr>

      <th>3</th>

      <td>天通苑租房</td>

      <td>天通苑北一区</td>

      <td>北一区简装两居，采光好，视野美，出行方便</td>

      <td>2室1厅</td>

      <td>103平米</td>

      <td>5300</td>

      <td>低楼层(共13层)</td>

      <td>2004年建板楼</td>

      <td>东南</td>

      <td>2017.07.25</td>

      <td>30</td>

      <td>距离5号线天通苑站927米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101780034.html</td>

    </tr>

    <tr>

      <th>4</th>

      <td>团结湖租房</td>

      <td>团结湖北口</td>

      <td>团结湖北口近地铁高楼层朝南向精装修正规两居室</td>

      <td>2室1厅</td>

      <td>63平米</td>

      <td>6400</td>

      <td>高楼层(共16层)</td>

      <td>1982年建塔楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>30</td>

      <td>距离10号线团结湖站88米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101781083.html</td>

    </tr>

    <tr>

      <th>5</th>

      <td>回龙观租房</td>

      <td>龙华园</td>

      <td>龙泽龙华园57平低楼层一居室家具家电齐全拎包入住</td>

      <td>1室1厅</td>

      <td>58平米</td>

      <td>4000</td>

      <td>低楼层(共6层)</td>

      <td>1994年建板楼</td>

      <td>南</td>

      <td>2017.07.23</td>

      <td>61</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101748994.html</td>

    </tr>

    <tr>

      <th>6</th>

      <td>北苑租房</td>

      <td>筑华年</td>

      <td>筑华年西南小三居 靠谱出租 看房方便有钥匙</td>

      <td>3室1厅</td>

      <td>89平米</td>

      <td>7500</td>

      <td>高楼层(共24层)</td>

      <td>2012年建板楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>29</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101767631.html</td>

    </tr>

    <tr>

      <th>7</th>

      <td>马甸租房</td>

      <td>月季园</td>

      <td>10号牡丹园站月季园小区 拎包入住 离梦想更近一点</td>

      <td>2室1厅</td>

      <td>53平米</td>

      <td>6000</td>

      <td>低楼层(共21层)</td>

      <td>1997年建塔楼</td>

      <td>南</td>

      <td>2017.07.16</td>

      <td>26</td>

      <td>距离10号线牡丹园站580米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101763532.html</td>

    </tr>

    <tr>

      <th>8</th>

      <td>小西天租房</td>

      <td>今典花园</td>

      <td>花园社区，西直门 今典花园精装两居，诚心出售。</td>

      <td>2室1厅</td>

      <td>73平米</td>

      <td>8500</td>

      <td>中楼层(共25层)</td>

      <td>2004年建塔楼</td>

      <td>西</td>

      <td>2017.07.23</td>

      <td>44</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101758850.html</td>

    </tr>

    <tr>

      <th>9</th>

      <td>北苑租房</td>

      <td>北苑家园绣菊园</td>

      <td>北苑东南两居室，可改三居 业主随时签约</td>

      <td>2室1厅</td>

      <td>82平米</td>

      <td>5300</td>

      <td>低楼层(共25层)</td>

      <td>2000年建塔楼</td>

      <td>东南</td>

      <td>2017.07.26</td>

      <td>30</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101779767.html</td>

    </tr>

    <tr>

      <th>10</th>

      <td>和平里租房</td>

      <td>甘水桥</td>

      <td>北三环里   蒋宅口   安外甘水桥   正规三居室</td>

      <td>3室1厅</td>

      <td>76平米</td>

      <td>7600</td>

      <td>高楼层(共14层)</td>

      <td>1988年建板塔结合</td>

      <td>东 西</td>

      <td>2017.07.26</td>

      <td>24</td>

      <td>距离5号线和平里北街站1198米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101753337.html</td>

    </tr>

    <tr>

      <th>11</th>

      <td>健翔桥租房</td>

      <td>华严北里中科院</td>

      <td>中科院 双南向 二居室 看房方便</td>

      <td>2室1厅</td>

      <td>60平米</td>

      <td>6300</td>

      <td>中楼层(共16层)</td>

      <td>1988年建塔楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>27</td>

      <td>距离10号线健德门站1056米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101758776.html</td>

    </tr>

    <tr>

      <th>12</th>

      <td>看丹桥租房</td>

      <td>新华街七里</td>

      <td>低楼层带电梯两居室，交通便利，家电齐全</td>

      <td>2室1厅</td>

      <td>65平米</td>

      <td>4500</td>

      <td>低楼层(共24层)</td>

      <td>2000年建塔楼</td>

      <td>西北</td>

      <td>2017.07.22</td>

      <td>27</td>

      <td>距离9号线丰台南路站924米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101762732.html</td>

    </tr>

    <tr>

      <th>13</th>

      <td>朝阳门内租房</td>

      <td>朝阳首府</td>

      <td>商品房  24小时保安 刷卡进出</td>

      <td>2室2厅</td>

      <td>104平米</td>

      <td>14500</td>

      <td>高楼层(共15层)</td>

      <td>2009年建塔楼</td>

      <td>东 东北</td>

      <td>2017.07.26</td>

      <td>34</td>

      <td>距离2号线朝阳门站94米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101755036.html</td>

    </tr>

    <tr>

      <th>14</th>

      <td>双井租房</td>

      <td>富力城B区</td>

      <td>顶层大复式，带私人70平大露台，豪华装修，随时能看</td>

      <td>4室1厅</td>

      <td>253平米</td>

      <td>32000</td>

      <td>高楼层(共18层)</td>

      <td>2004年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>18</td>

      <td>距离10号线双井站498米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101751322.html</td>

    </tr>

    <tr>

      <th>15</th>

      <td>刘家窑租房</td>

      <td>石榴园南里小区</td>

      <td>石榴园南里简装一居室，朝南采光好</td>

      <td>1室1厅</td>

      <td>47平米</td>

      <td>3700</td>

      <td>高楼层(共6层)</td>

      <td>1997年建板楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>23</td>

      <td>距离10号线石榴庄站752米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101807363.html</td>

    </tr>

    <tr>

      <th>16</th>

      <td>紫竹桥租房</td>

      <td>北洼西里</td>

      <td>北洼路北洼西里精装修两居出租随时看房</td>

      <td>2室1厅</td>

      <td>74平米</td>

      <td>7000</td>

      <td>中楼层(共18层)</td>

      <td>1996年建塔楼</td>

      <td>东南</td>

      <td>2017.07.27</td>

      <td>27</td>

      <td>距离6号线慈寿寺站1166米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101827666.html</td>

    </tr>

    <tr>

      <th>17</th>

      <td>甘家口租房</td>

      <td>建设部大院</td>

      <td>建设部大院  乙子区铁道部2001年楼龄  高楼层  精装修</td>

      <td>3室1厅</td>

      <td>100平米</td>

      <td>13000</td>

      <td>中楼层(共24层)</td>

      <td>2000年建塔楼</td>

      <td>西 北</td>

      <td>2017.07.26</td>

      <td>24</td>

      <td>距离6号线白石桥南站732米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101819163.html</td>

    </tr>

    <tr>

      <th>18</th>

      <td>北苑租房</td>

      <td>新街坊</td>

      <td>地铁5号线、精装修一改二，看房方便</td>

      <td>2室1厅</td>

      <td>57平米</td>

      <td>5500</td>

      <td>低楼层(共18层)</td>

      <td>2004年建板塔结合</td>

      <td>东</td>

      <td>2017.07.27</td>

      <td>19</td>

      <td>距离5号线北苑路北站1130米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101822606.html</td>

    </tr>

    <tr>

      <th>19</th>

      <td>四季青租房</td>

      <td>绿波漫板</td>

      <td>绿波漫板 东北向开间 带燃气 带家具家电 舒适宜人</td>

      <td>1室0厅</td>

      <td>43平米</td>

      <td>5200</td>

      <td>中楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>东 北</td>

      <td>2017.07.20</td>

      <td>41</td>

      <td>距离6号线慈寿寺站667米 随时看房 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101811584.html</td>

    </tr>

    <tr>

      <th>20</th>

      <td>望京租房</td>

      <td>宝星园一区</td>

      <td>大四居室   低于市场价  可办公 可居家</td>

      <td>4室2厅</td>

      <td>217平米</td>

      <td>15000</td>

      <td>低楼层(共23层)</td>

      <td>2003年建塔楼</td>

      <td>南</td>

      <td>2017.07.23</td>

      <td>32</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101603861.html</td>

    </tr>

    <tr>

      <th>21</th>

      <td>望京租房</td>

      <td>融科橄榄城三期</td>

      <td>融科两居室，精装家具家电齐全，随时入住，采光好</td>

      <td>2室1厅</td>

      <td>95平米</td>

      <td>12000</td>

      <td>低楼层(共27层)</td>

      <td>2009年建板楼</td>

      <td>南</td>

      <td>2017.07.19</td>

      <td>32</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101641236.html</td>

    </tr>

    <tr>

      <th>22</th>

      <td>酒仙桥租房</td>

      <td>卡布其诺</td>

      <td>全南两居 东西通透 直观小区花园 观景房</td>

      <td>2室1厅</td>

      <td>90平米</td>

      <td>8800</td>

      <td>中楼层(共9层)</td>

      <td>2005年建板楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>50</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101712757.html</td>

    </tr>

    <tr>

      <th>23</th>

      <td>官园租房</td>

      <td>官苑8号</td>

      <td>官苑8号 精装西南三居可以长租，看房随时</td>

      <td>3室2厅</td>

      <td>121平米</td>

      <td>21500</td>

      <td>中楼层(共16层)</td>

      <td>2007年建板塔结合</td>

      <td>南 西</td>

      <td>2017.07.25</td>

      <td>61</td>

      <td>距离2号线车公庄站773米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101583407.html</td>

    </tr>

    <tr>

      <th>24</th>

      <td>北大地租房</td>

      <td>西安街4号院</td>

      <td>精装三改二大两居 南北通透 希望客户能把它当自己的家</td>

      <td>2室1厅</td>

      <td>83平米</td>

      <td>4500</td>

      <td>高楼层(共6层)</td>

      <td>1989年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>27</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101601709.html</td>

    </tr>

    <tr>

      <th>25</th>

      <td>回龙观租房</td>

      <td>佰嘉城</td>

      <td>佰嘉城一层三居室 户型方正 南北通透</td>

      <td>3室1厅</td>

      <td>119平米</td>

      <td>6300</td>

      <td>低楼层(共6层)</td>

      <td>2006年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>25</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101726428.html</td>

    </tr>

    <tr>

      <th>26</th>

      <td>广安门租房</td>

      <td>朗琴园</td>

      <td>广安门朗琴园精装开间 随时入住 交通方便</td>

      <td>1室0厅</td>

      <td>58平米</td>

      <td>5600</td>

      <td>中楼层(共29层)</td>

      <td>2006年建塔楼</td>

      <td>西</td>

      <td>2017.07.25</td>

      <td>30</td>

      <td>距离7号线达官营站731米 随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101692994.html</td>

    </tr>

    <tr>

      <th>27</th>

      <td>鼓楼大街租房</td>

      <td>金隅万科城</td>

      <td>金隅万科城 三居室 家具家电齐全 诚意出租</td>

      <td>3室1厅</td>

      <td>88平米</td>

      <td>4800</td>

      <td>低楼层(共26层)</td>

      <td>2012年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>31</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101612398.html</td>

    </tr>

    <tr>

      <th>28</th>

      <td>紫竹桥租房</td>

      <td>西三环北路89号院</td>

      <td>花园桥 南北两居 家具家电齐全 拎包入住</td>

      <td>2室1厅</td>

      <td>54平米</td>

      <td>6000</td>

      <td>高楼层(共6层)</td>

      <td>1987年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>31</td>

      <td>距离6号线花园桥站620米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101567440.html</td>

    </tr>

    <tr>

      <th>29</th>

      <td>六里桥租房</td>

      <td>京铁家园</td>

      <td>地铁1号线五棵松站 京铁家园精装两居室 东南向 有钥匙</td>

      <td>2室1厅</td>

      <td>107平米</td>

      <td>6000</td>

      <td>中楼层(共22层)</td>

      <td>2002年建塔楼</td>

      <td>东南</td>

      <td>2017.07.22</td>

      <td>32</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101647855.html</td>

    </tr>

    <tr>

      <th>...</th>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

    </tr>

    <tr>

      <th>2730</th>

      <td>安定门租房</td>

      <td>朗家胡同13号院</td>

      <td>安定门内 南北通透一居室 家具家电齐全</td>

      <td>1室1厅</td>

      <td>40平米</td>

      <td>4500</td>

      <td>高楼层(共6层)</td>

      <td>1990年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>11</td>

      <td>距离2号线鼓楼大街站774米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739270.html</td>

    </tr>

    <tr>

      <th>2731</th>

      <td>东关租房</td>

      <td>清秀园北区</td>

      <td>楼龄新，精装修，可直接拎包入住</td>

      <td>1室0厅</td>

      <td>59平米</td>

      <td>2500</td>

      <td>高楼层(共19层)</td>

      <td>2003年建塔楼</td>

      <td>西</td>

      <td>2017.07.27</td>

      <td>15</td>

      <td>距离昌平线昌平站810米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739341.html</td>

    </tr>

    <tr>

      <th>2732</th>

      <td>西坝河租房</td>

      <td>光熙门北里</td>

      <td>光熙门北里 3室1厅 7300元</td>

      <td>3室1厅</td>

      <td>68平米</td>

      <td>7300</td>

      <td>低楼层(共22层)</td>

      <td>1991年建塔楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>12</td>

      <td>距离13号线光熙门站471米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739485.html</td>

    </tr>

    <tr>

      <th>2733</th>

      <td>建国门外租房</td>

      <td>地杰长安驿</td>

      <td>东二环 地杰长安驿 南向高层开间</td>

      <td>1室0厅</td>

      <td>45平米</td>

      <td>8500</td>

      <td>中楼层(共27层)</td>

      <td>2007年建塔楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>9</td>

      <td>距离1号线永安里站712米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739616.html</td>

    </tr>

    <tr>

      <th>2734</th>

      <td>临河里租房</td>

      <td>海棠湾二期</td>

      <td>海棠湾精装两居随时看房随时签约拎包入住</td>

      <td>2室1厅</td>

      <td>88平米</td>

      <td>5500</td>

      <td>中楼层(共20层)</td>

      <td>2011年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.16</td>

      <td>10</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739983.html</td>

    </tr>

    <tr>

      <th>2735</th>

      <td>滨河西区租房</td>

      <td>永兴小区</td>

      <td>永兴小区  南北向       两 居室</td>

      <td>2室1厅</td>

      <td>79平米</td>

      <td>2900</td>

      <td>高楼层(共6层)</td>

      <td>2000年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>9</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101735385.html</td>

    </tr>

    <tr>

      <th>2736</th>

      <td>定福庄租房</td>

      <td>妇联小区</td>

      <td>东南朝向，装修较好，通风比较好。</td>

      <td>1室1厅</td>

      <td>46平米</td>

      <td>3500</td>

      <td>低楼层(共16层)</td>

      <td>1995年建塔楼</td>

      <td>东南</td>

      <td>2017.07.23</td>

      <td>16</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101738106.html</td>

    </tr>

    <tr>

      <th>2737</th>

      <td>公主坟租房</td>

      <td>水利新宿舍</td>

      <td>水利新宿舍东南朝向大两居复式结构带出租车位</td>

      <td>2室2厅</td>

      <td>138平米</td>

      <td>15000</td>

      <td>低楼层(共28层)</td>

      <td>1995年建塔楼</td>

      <td>东南</td>

      <td>2017.07.27</td>

      <td>9</td>

      <td>距离1号线公主坟站748米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101705949.html</td>

    </tr>

    <tr>

      <th>2738</th>

      <td>良乡租房</td>

      <td>北潞春家园</td>

      <td>北潞春家园 5室3厅 4500元</td>

      <td>5室3厅</td>

      <td>196平米</td>

      <td>4500</td>

      <td>高楼层(共6层)</td>

      <td>2000年建板楼</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>10</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101631061.html</td>

    </tr>

    <tr>

      <th>2739</th>

      <td>西关环岛租房</td>

      <td>秋实家园</td>

      <td>精装修，南北通透两居室，家具家电齐全</td>

      <td>2室1厅</td>

      <td>81平米</td>

      <td>2300</td>

      <td>高楼层(共5层)</td>

      <td>2002年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>7</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101632293.html</td>

    </tr>

    <tr>

      <th>2740</th>

      <td>酒仙桥租房</td>

      <td>丽都水岸</td>

      <td>丽都水岸小区，一层带花园三居室</td>

      <td>3室2厅</td>

      <td>167平米</td>

      <td>25000</td>

      <td>低楼层(共20层)</td>

      <td>2005年建塔楼</td>

      <td>东南 西北</td>

      <td>2017.07.20</td>

      <td>9</td>

      <td>距离14号线(东段)将台站648米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101636553.html</td>

    </tr>

    <tr>

      <th>2741</th>

      <td>潞苑租房</td>

      <td>上潞园</td>

      <td>上潞园精装一居改两居室  业主诚租看房方便</td>

      <td>2室1厅</td>

      <td>57平米</td>

      <td>2200</td>

      <td>高楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>东</td>

      <td>2017.07.25</td>

      <td>5</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101655660.html</td>

    </tr>

    <tr>

      <th>2742</th>

      <td>良乡租房</td>

      <td>嘉瑞通小区</td>

      <td>嘉瑞通小区 2室1厅 2600元</td>

      <td>2室1厅</td>

      <td>92平米</td>

      <td>2600</td>

      <td>低楼层(共15层)</td>

      <td>2006年建塔楼</td>

      <td>南 西</td>

      <td>2017.07.19</td>

      <td>13</td>

      <td>距离房山线良乡南关站165米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101660289.html</td>

    </tr>

    <tr>

      <th>2743</th>

      <td>朝青租房</td>

      <td>银谷美泉家园</td>

      <td>朝青 花园社区 银谷美泉 精装三居</td>

      <td>3室2厅</td>

      <td>142平米</td>

      <td>13000</td>

      <td>中楼层(共7层)</td>

      <td>2008年建板楼</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>6</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101584316.html</td>

    </tr>

    <tr>

      <th>2744</th>

      <td>朝青租房</td>

      <td>润枫水尚</td>

      <td>润枫水尚 2室1厅 10000元</td>

      <td>2室1厅</td>

      <td>121平米</td>

      <td>10000</td>

      <td>低楼层(共14层)</td>

      <td>2008年建板楼</td>

      <td>南 北</td>

      <td>2017.07.21</td>

      <td>34</td>

      <td>距离6号线青年路站829米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101283618.html</td>

    </tr>

    <tr>

      <th>2745</th>

      <td>新宫租房</td>

      <td>飞腾家园</td>

      <td>飞腾家园 3室1厅 4000元</td>

      <td>3室1厅</td>

      <td>91平米</td>

      <td>4000</td>

      <td>高楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>17</td>

      <td>随时看房 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101677753.html</td>

    </tr>

    <tr>

      <th>2746</th>

      <td>奥林匹克公园租房</td>

      <td>京师园</td>

      <td>京师园 3室1厅 14000元</td>

      <td>3室1厅</td>

      <td>147平米</td>

      <td>14000</td>

      <td>低楼层(共21层)</td>

      <td>2004年建板塔结合</td>

      <td>东 南</td>

      <td>2017.07.20</td>

      <td>13</td>

      <td>距离8号线林萃桥站781米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101692633.html</td>

    </tr>

    <tr>

      <th>2747</th>

      <td>朝青租房</td>

      <td>青年汇佳园</td>

      <td>青年汇佳园一居室诚意出租七月到期</td>

      <td>1室1厅</td>

      <td>65平米</td>

      <td>6300</td>

      <td>低楼层(共13层)</td>

      <td>2008年建板塔结合</td>

      <td>南 西 北</td>

      <td>2017.07.26</td>

      <td>17</td>

      <td>距离6号线青年路站458米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101693532.html</td>

    </tr>

    <tr>

      <th>2748</th>

      <td>九棵树(家乐福)租房</td>

      <td>大方居</td>

      <td>大方居简装西向两居室 家电家具齐</td>

      <td>2室1厅</td>

      <td>89平米</td>

      <td>3100</td>

      <td>低楼层(共22层)</td>

      <td>2008年建板塔结合</td>

      <td>西</td>

      <td>2017.07.26</td>

      <td>9</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101694062.html</td>

    </tr>

    <tr>

      <th>2749</th>

      <td>天通苑租房</td>

      <td>天通苑北二区</td>

      <td>天通苑北二区电梯高层 精装修 观景高层</td>

      <td>2室1厅</td>

      <td>103平米</td>

      <td>5000</td>

      <td>高楼层(共12层)</td>

      <td>2005年建板楼</td>

      <td>西南</td>

      <td>2017.07.27</td>

      <td>14</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101694097.html</td>

    </tr>

    <tr>

      <th>2750</th>

      <td>朝阳门外租房</td>

      <td>麒麟公馆</td>

      <td>麒麟公馆 2室1厅 18500元</td>

      <td>2室1厅</td>

      <td>95平米</td>

      <td>18500</td>

      <td>低楼层(共24层)</td>

      <td>2010年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.23</td>

      <td>14</td>

      <td>距离2号线朝阳门站801米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101696313.html</td>

    </tr>

    <tr>

      <th>2751</th>

      <td>芍药居租房</td>

      <td>芍药居</td>

      <td>芍药居 中煤信息大厦 精装南北2居 有车位</td>

      <td>2室1厅</td>

      <td>75平米</td>

      <td>7500</td>

      <td>高楼层(共14层)</td>

      <td>2000年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.18</td>

      <td>7</td>

      <td>距离13号线芍药居站947米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101696415.html</td>

    </tr>

    <tr>

      <th>2752</th>

      <td>双榆树租房</td>

      <td>双榆树东里</td>

      <td>南北通透三居室，业主可以接受长租，家具家电齐全</td>

      <td>3室1厅</td>

      <td>81平米</td>

      <td>10000</td>

      <td>中楼层(共12层)</td>

      <td>1990年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.19</td>

      <td>8</td>

      <td>距离4号线人民大学站735米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697415.html</td>

    </tr>

    <tr>

      <th>2753</th>

      <td>红庙租房</td>

      <td>延静里中街</td>

      <td>房子是双南向的小两居 ，楼层低，最重要的是价格低</td>

      <td>2室0厅</td>

      <td>46平米</td>

      <td>5200</td>

      <td>低楼层(共6层)</td>

      <td>1984年建板楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>13</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697453.html</td>

    </tr>

    <tr>

      <th>2754</th>

      <td>西三旗租房</td>

      <td>知本时代</td>

      <td>知本时代精装北向开间，有电梯，距离地铁近，看房方便</td>

      <td>1室0厅</td>

      <td>42平米</td>

      <td>4000</td>

      <td>高楼层(共15层)</td>

      <td>2003年建板塔结合</td>

      <td>北</td>

      <td>2017.07.27</td>

      <td>16</td>

      <td>距离8号线霍营站1144米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697749.html</td>

    </tr>

    <tr>

      <th>2755</th>

      <td>朝青租房</td>

      <td>天鹅湾北区</td>

      <td>天鹅湾北区 1室1厅 9500元</td>

      <td>1室1厅</td>

      <td>50平米</td>

      <td>9500</td>

      <td>中楼层(共8层)</td>

      <td>2010年建板塔结合</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>13</td>

      <td>距离6号线青年路站736米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697995.html</td>

    </tr>

    <tr>

      <th>2756</th>

      <td>太阳宫租房</td>

      <td>水星园</td>

      <td>水星园精装一居室  可自带家具家电 业主也可配齐</td>

      <td>1室1厅</td>

      <td>68平米</td>

      <td>9500</td>

      <td>中楼层(共23层)</td>

      <td>2005年建板塔结合</td>

      <td>北</td>

      <td>2017.07.24</td>

      <td>14</td>

      <td>距离10号线太阳宫站432米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101698013.html</td>

    </tr>

    <tr>

      <th>2757</th>

      <td>六里桥租房</td>

      <td>莲花小区</td>

      <td>莲花小区 西南两居室 温馨舒适 楼层合适</td>

      <td>2室1厅</td>

      <td>84平米</td>

      <td>7200</td>

      <td>低楼层(共28层)</td>

      <td>1999年建板塔结合</td>

      <td>西南</td>

      <td>2017.07.26</td>

      <td>7</td>

      <td>距离10号线莲花桥站661米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101702130.html</td>

    </tr>

    <tr>

      <th>2758</th>

      <td>陶然亭租房</td>

      <td>中海紫御公馆</td>

      <td>中海紫御公馆  把您的家安放在花园里</td>

      <td>2室2厅</td>

      <td>91平米</td>

      <td>12000</td>

      <td>中楼层(共22层)</td>

      <td>2010年建板塔结合</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>6</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101703605.html</td>

    </tr>

    <tr>

      <th>2759</th>

      <td>三元桥租房</td>

      <td>曙光里</td>

      <td>曙光里南向 高层两居室 随时看房</td>

      <td>2室1厅</td>

      <td>62平米</td>

      <td>6200</td>

      <td>高楼层(共18层)</td>

      <td>1992年建塔楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>19</td>

      <td>距离机场线三元桥站980米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101704735.html</td>

    </tr>

  </tbody>

</table>

<p>2760 rows × 13 columns</p>

</div>



<pre><code>df.columns



Index([&#39;区域&#39;, &#39;地址&#39;, &#39;标题&#39;, &#39;户型&#39;, &#39;面积&#39;, &#39;价格&#39;, &#39;楼层&#39;, &#39;建造时间&#39;, &#39;朝向&#39;, &#39;更新时间&#39;, &#39;看房人数&#39;,
       &#39;备注&#39;, &#39;链接地址&#39;],
      dtype=&#39;object&#39;)



```python
df.rename(columns={&#39;区域&#39;: &#39;district&#39;}) # 和下面的重命名方式进行对比
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>district</th>

      <th>地址</th>

      <th>标题</th>

      <th>户型</th>

      <th>面积</th>

      <th>价格</th>

      <th>楼层</th>

      <th>建造时间</th>

      <th>朝向</th>

      <th>更新时间</th>

      <th>看房人数</th>

      <th>备注</th>

      <th>链接地址</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>0</th>

      <td>燕莎租房</td>

      <td>新源街</td>

      <td>亮马桥 新源街  精装两居 交通便利 看房方便 随时入住</td>

      <td>2室1厅</td>

      <td>50平米</td>

      <td>5800</td>

      <td>中楼层(共6层)</td>

      <td>1981年建板楼</td>

      <td>南</td>

      <td>2017.07.21</td>

      <td>26</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101803342.html</td>

    </tr>

    <tr>

      <th>1</th>

      <td>望京租房</td>

      <td>澳洲康都</td>

      <td>澳洲康都东向精致两居室...........</td>

      <td>2室1厅</td>

      <td>79平米</td>

      <td>7800</td>

      <td>中楼层(共28层)</td>

      <td>2005年建板塔结合</td>

      <td>东</td>

      <td>2017.07.23</td>

      <td>33</td>

      <td>距离14号线(东段)东湖渠站731米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101753126.html</td>

    </tr>

    <tr>

      <th>2</th>

      <td>广安门租房</td>

      <td>远见名苑</td>

      <td>远见名苑 东向两居室 独立小区环境 适合居家</td>

      <td>2室1厅</td>

      <td>86平米</td>

      <td>8000</td>

      <td>低楼层(共25层)</td>

      <td>2006年建塔楼</td>

      <td>东</td>

      <td>2017.07.20</td>

      <td>34</td>

      <td>距离7号线达官营站684米 随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101756753.html</td>

    </tr>

    <tr>

      <th>3</th>

      <td>天通苑租房</td>

      <td>天通苑北一区</td>

      <td>北一区简装两居，采光好，视野美，出行方便</td>

      <td>2室1厅</td>

      <td>103平米</td>

      <td>5300</td>

      <td>低楼层(共13层)</td>

      <td>2004年建板楼</td>

      <td>东南</td>

      <td>2017.07.25</td>

      <td>30</td>

      <td>距离5号线天通苑站927米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101780034.html</td>

    </tr>

    <tr>

      <th>4</th>

      <td>团结湖租房</td>

      <td>团结湖北口</td>

      <td>团结湖北口近地铁高楼层朝南向精装修正规两居室</td>

      <td>2室1厅</td>

      <td>63平米</td>

      <td>6400</td>

      <td>高楼层(共16层)</td>

      <td>1982年建塔楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>30</td>

      <td>距离10号线团结湖站88米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101781083.html</td>

    </tr>

    <tr>

      <th>5</th>

      <td>回龙观租房</td>

      <td>龙华园</td>

      <td>龙泽龙华园57平低楼层一居室家具家电齐全拎包入住</td>

      <td>1室1厅</td>

      <td>58平米</td>

      <td>4000</td>

      <td>低楼层(共6层)</td>

      <td>1994年建板楼</td>

      <td>南</td>

      <td>2017.07.23</td>

      <td>61</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101748994.html</td>

    </tr>

    <tr>

      <th>6</th>

      <td>北苑租房</td>

      <td>筑华年</td>

      <td>筑华年西南小三居 靠谱出租 看房方便有钥匙</td>

      <td>3室1厅</td>

      <td>89平米</td>

      <td>7500</td>

      <td>高楼层(共24层)</td>

      <td>2012年建板楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>29</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101767631.html</td>

    </tr>

    <tr>

      <th>7</th>

      <td>马甸租房</td>

      <td>月季园</td>

      <td>10号牡丹园站月季园小区 拎包入住 离梦想更近一点</td>

      <td>2室1厅</td>

      <td>53平米</td>

      <td>6000</td>

      <td>低楼层(共21层)</td>

      <td>1997年建塔楼</td>

      <td>南</td>

      <td>2017.07.16</td>

      <td>26</td>

      <td>距离10号线牡丹园站580米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101763532.html</td>

    </tr>

    <tr>

      <th>8</th>

      <td>小西天租房</td>

      <td>今典花园</td>

      <td>花园社区，西直门 今典花园精装两居，诚心出售。</td>

      <td>2室1厅</td>

      <td>73平米</td>

      <td>8500</td>

      <td>中楼层(共25层)</td>

      <td>2004年建塔楼</td>

      <td>西</td>

      <td>2017.07.23</td>

      <td>44</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101758850.html</td>

    </tr>

    <tr>

      <th>9</th>

      <td>北苑租房</td>

      <td>北苑家园绣菊园</td>

      <td>北苑东南两居室，可改三居 业主随时签约</td>

      <td>2室1厅</td>

      <td>82平米</td>

      <td>5300</td>

      <td>低楼层(共25层)</td>

      <td>2000年建塔楼</td>

      <td>东南</td>

      <td>2017.07.26</td>

      <td>30</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101779767.html</td>

    </tr>

    <tr>

      <th>10</th>

      <td>和平里租房</td>

      <td>甘水桥</td>

      <td>北三环里   蒋宅口   安外甘水桥   正规三居室</td>

      <td>3室1厅</td>

      <td>76平米</td>

      <td>7600</td>

      <td>高楼层(共14层)</td>

      <td>1988年建板塔结合</td>

      <td>东 西</td>

      <td>2017.07.26</td>

      <td>24</td>

      <td>距离5号线和平里北街站1198米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101753337.html</td>

    </tr>

    <tr>

      <th>11</th>

      <td>健翔桥租房</td>

      <td>华严北里中科院</td>

      <td>中科院 双南向 二居室 看房方便</td>

      <td>2室1厅</td>

      <td>60平米</td>

      <td>6300</td>

      <td>中楼层(共16层)</td>

      <td>1988年建塔楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>27</td>

      <td>距离10号线健德门站1056米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101758776.html</td>

    </tr>

    <tr>

      <th>12</th>

      <td>看丹桥租房</td>

      <td>新华街七里</td>

      <td>低楼层带电梯两居室，交通便利，家电齐全</td>

      <td>2室1厅</td>

      <td>65平米</td>

      <td>4500</td>

      <td>低楼层(共24层)</td>

      <td>2000年建塔楼</td>

      <td>西北</td>

      <td>2017.07.22</td>

      <td>27</td>

      <td>距离9号线丰台南路站924米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101762732.html</td>

    </tr>

    <tr>

      <th>13</th>

      <td>朝阳门内租房</td>

      <td>朝阳首府</td>

      <td>商品房  24小时保安 刷卡进出</td>

      <td>2室2厅</td>

      <td>104平米</td>

      <td>14500</td>

      <td>高楼层(共15层)</td>

      <td>2009年建塔楼</td>

      <td>东 东北</td>

      <td>2017.07.26</td>

      <td>34</td>

      <td>距离2号线朝阳门站94米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101755036.html</td>

    </tr>

    <tr>

      <th>14</th>

      <td>双井租房</td>

      <td>富力城B区</td>

      <td>顶层大复式，带私人70平大露台，豪华装修，随时能看</td>

      <td>4室1厅</td>

      <td>253平米</td>

      <td>32000</td>

      <td>高楼层(共18层)</td>

      <td>2004年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>18</td>

      <td>距离10号线双井站498米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101751322.html</td>

    </tr>

    <tr>

      <th>15</th>

      <td>刘家窑租房</td>

      <td>石榴园南里小区</td>

      <td>石榴园南里简装一居室，朝南采光好</td>

      <td>1室1厅</td>

      <td>47平米</td>

      <td>3700</td>

      <td>高楼层(共6层)</td>

      <td>1997年建板楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>23</td>

      <td>距离10号线石榴庄站752米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101807363.html</td>

    </tr>

    <tr>

      <th>16</th>

      <td>紫竹桥租房</td>

      <td>北洼西里</td>

      <td>北洼路北洼西里精装修两居出租随时看房</td>

      <td>2室1厅</td>

      <td>74平米</td>

      <td>7000</td>

      <td>中楼层(共18层)</td>

      <td>1996年建塔楼</td>

      <td>东南</td>

      <td>2017.07.27</td>

      <td>27</td>

      <td>距离6号线慈寿寺站1166米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101827666.html</td>

    </tr>

    <tr>

      <th>17</th>

      <td>甘家口租房</td>

      <td>建设部大院</td>

      <td>建设部大院  乙子区铁道部2001年楼龄  高楼层  精装修</td>

      <td>3室1厅</td>

      <td>100平米</td>

      <td>13000</td>

      <td>中楼层(共24层)</td>

      <td>2000年建塔楼</td>

      <td>西 北</td>

      <td>2017.07.26</td>

      <td>24</td>

      <td>距离6号线白石桥南站732米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101819163.html</td>

    </tr>

    <tr>

      <th>18</th>

      <td>北苑租房</td>

      <td>新街坊</td>

      <td>地铁5号线、精装修一改二，看房方便</td>

      <td>2室1厅</td>

      <td>57平米</td>

      <td>5500</td>

      <td>低楼层(共18层)</td>

      <td>2004年建板塔结合</td>

      <td>东</td>

      <td>2017.07.27</td>

      <td>19</td>

      <td>距离5号线北苑路北站1130米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101822606.html</td>

    </tr>

    <tr>

      <th>19</th>

      <td>四季青租房</td>

      <td>绿波漫板</td>

      <td>绿波漫板 东北向开间 带燃气 带家具家电 舒适宜人</td>

      <td>1室0厅</td>

      <td>43平米</td>

      <td>5200</td>

      <td>中楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>东 北</td>

      <td>2017.07.20</td>

      <td>41</td>

      <td>距离6号线慈寿寺站667米 随时看房 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101811584.html</td>

    </tr>

    <tr>

      <th>20</th>

      <td>望京租房</td>

      <td>宝星园一区</td>

      <td>大四居室   低于市场价  可办公 可居家</td>

      <td>4室2厅</td>

      <td>217平米</td>

      <td>15000</td>

      <td>低楼层(共23层)</td>

      <td>2003年建塔楼</td>

      <td>南</td>

      <td>2017.07.23</td>

      <td>32</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101603861.html</td>

    </tr>

    <tr>

      <th>21</th>

      <td>望京租房</td>

      <td>融科橄榄城三期</td>

      <td>融科两居室，精装家具家电齐全，随时入住，采光好</td>

      <td>2室1厅</td>

      <td>95平米</td>

      <td>12000</td>

      <td>低楼层(共27层)</td>

      <td>2009年建板楼</td>

      <td>南</td>

      <td>2017.07.19</td>

      <td>32</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101641236.html</td>

    </tr>

    <tr>

      <th>22</th>

      <td>酒仙桥租房</td>

      <td>卡布其诺</td>

      <td>全南两居 东西通透 直观小区花园 观景房</td>

      <td>2室1厅</td>

      <td>90平米</td>

      <td>8800</td>

      <td>中楼层(共9层)</td>

      <td>2005年建板楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>50</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101712757.html</td>

    </tr>

    <tr>

      <th>23</th>

      <td>官园租房</td>

      <td>官苑8号</td>

      <td>官苑8号 精装西南三居可以长租，看房随时</td>

      <td>3室2厅</td>

      <td>121平米</td>

      <td>21500</td>

      <td>中楼层(共16层)</td>

      <td>2007年建板塔结合</td>

      <td>南 西</td>

      <td>2017.07.25</td>

      <td>61</td>

      <td>距离2号线车公庄站773米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101583407.html</td>

    </tr>

    <tr>

      <th>24</th>

      <td>北大地租房</td>

      <td>西安街4号院</td>

      <td>精装三改二大两居 南北通透 希望客户能把它当自己的家</td>

      <td>2室1厅</td>

      <td>83平米</td>

      <td>4500</td>

      <td>高楼层(共6层)</td>

      <td>1989年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>27</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101601709.html</td>

    </tr>

    <tr>

      <th>25</th>

      <td>回龙观租房</td>

      <td>佰嘉城</td>

      <td>佰嘉城一层三居室 户型方正 南北通透</td>

      <td>3室1厅</td>

      <td>119平米</td>

      <td>6300</td>

      <td>低楼层(共6层)</td>

      <td>2006年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>25</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101726428.html</td>

    </tr>

    <tr>

      <th>26</th>

      <td>广安门租房</td>

      <td>朗琴园</td>

      <td>广安门朗琴园精装开间 随时入住 交通方便</td>

      <td>1室0厅</td>

      <td>58平米</td>

      <td>5600</td>

      <td>中楼层(共29层)</td>

      <td>2006年建塔楼</td>

      <td>西</td>

      <td>2017.07.25</td>

      <td>30</td>

      <td>距离7号线达官营站731米 随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101692994.html</td>

    </tr>

    <tr>

      <th>27</th>

      <td>鼓楼大街租房</td>

      <td>金隅万科城</td>

      <td>金隅万科城 三居室 家具家电齐全 诚意出租</td>

      <td>3室1厅</td>

      <td>88平米</td>

      <td>4800</td>

      <td>低楼层(共26层)</td>

      <td>2012年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>31</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101612398.html</td>

    </tr>

    <tr>

      <th>28</th>

      <td>紫竹桥租房</td>

      <td>西三环北路89号院</td>

      <td>花园桥 南北两居 家具家电齐全 拎包入住</td>

      <td>2室1厅</td>

      <td>54平米</td>

      <td>6000</td>

      <td>高楼层(共6层)</td>

      <td>1987年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>31</td>

      <td>距离6号线花园桥站620米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101567440.html</td>

    </tr>

    <tr>

      <th>29</th>

      <td>六里桥租房</td>

      <td>京铁家园</td>

      <td>地铁1号线五棵松站 京铁家园精装两居室 东南向 有钥匙</td>

      <td>2室1厅</td>

      <td>107平米</td>

      <td>6000</td>

      <td>中楼层(共22层)</td>

      <td>2002年建塔楼</td>

      <td>东南</td>

      <td>2017.07.22</td>

      <td>32</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101647855.html</td>

    </tr>

    <tr>

      <th>...</th>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

    </tr>

    <tr>

      <th>2730</th>

      <td>安定门租房</td>

      <td>朗家胡同13号院</td>

      <td>安定门内 南北通透一居室 家具家电齐全</td>

      <td>1室1厅</td>

      <td>40平米</td>

      <td>4500</td>

      <td>高楼层(共6层)</td>

      <td>1990年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>11</td>

      <td>距离2号线鼓楼大街站774米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739270.html</td>

    </tr>

    <tr>

      <th>2731</th>

      <td>东关租房</td>

      <td>清秀园北区</td>

      <td>楼龄新，精装修，可直接拎包入住</td>

      <td>1室0厅</td>

      <td>59平米</td>

      <td>2500</td>

      <td>高楼层(共19层)</td>

      <td>2003年建塔楼</td>

      <td>西</td>

      <td>2017.07.27</td>

      <td>15</td>

      <td>距离昌平线昌平站810米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739341.html</td>

    </tr>

    <tr>

      <th>2732</th>

      <td>西坝河租房</td>

      <td>光熙门北里</td>

      <td>光熙门北里 3室1厅 7300元</td>

      <td>3室1厅</td>

      <td>68平米</td>

      <td>7300</td>

      <td>低楼层(共22层)</td>

      <td>1991年建塔楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>12</td>

      <td>距离13号线光熙门站471米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739485.html</td>

    </tr>

    <tr>

      <th>2733</th>

      <td>建国门外租房</td>

      <td>地杰长安驿</td>

      <td>东二环 地杰长安驿 南向高层开间</td>

      <td>1室0厅</td>

      <td>45平米</td>

      <td>8500</td>

      <td>中楼层(共27层)</td>

      <td>2007年建塔楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>9</td>

      <td>距离1号线永安里站712米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739616.html</td>

    </tr>

    <tr>

      <th>2734</th>

      <td>临河里租房</td>

      <td>海棠湾二期</td>

      <td>海棠湾精装两居随时看房随时签约拎包入住</td>

      <td>2室1厅</td>

      <td>88平米</td>

      <td>5500</td>

      <td>中楼层(共20层)</td>

      <td>2011年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.16</td>

      <td>10</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739983.html</td>

    </tr>

    <tr>

      <th>2735</th>

      <td>滨河西区租房</td>

      <td>永兴小区</td>

      <td>永兴小区  南北向       两 居室</td>

      <td>2室1厅</td>

      <td>79平米</td>

      <td>2900</td>

      <td>高楼层(共6层)</td>

      <td>2000年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>9</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101735385.html</td>

    </tr>

    <tr>

      <th>2736</th>

      <td>定福庄租房</td>

      <td>妇联小区</td>

      <td>东南朝向，装修较好，通风比较好。</td>

      <td>1室1厅</td>

      <td>46平米</td>

      <td>3500</td>

      <td>低楼层(共16层)</td>

      <td>1995年建塔楼</td>

      <td>东南</td>

      <td>2017.07.23</td>

      <td>16</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101738106.html</td>

    </tr>

    <tr>

      <th>2737</th>

      <td>公主坟租房</td>

      <td>水利新宿舍</td>

      <td>水利新宿舍东南朝向大两居复式结构带出租车位</td>

      <td>2室2厅</td>

      <td>138平米</td>

      <td>15000</td>

      <td>低楼层(共28层)</td>

      <td>1995年建塔楼</td>

      <td>东南</td>

      <td>2017.07.27</td>

      <td>9</td>

      <td>距离1号线公主坟站748米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101705949.html</td>

    </tr>

    <tr>

      <th>2738</th>

      <td>良乡租房</td>

      <td>北潞春家园</td>

      <td>北潞春家园 5室3厅 4500元</td>

      <td>5室3厅</td>

      <td>196平米</td>

      <td>4500</td>

      <td>高楼层(共6层)</td>

      <td>2000年建板楼</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>10</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101631061.html</td>

    </tr>

    <tr>

      <th>2739</th>

      <td>西关环岛租房</td>

      <td>秋实家园</td>

      <td>精装修，南北通透两居室，家具家电齐全</td>

      <td>2室1厅</td>

      <td>81平米</td>

      <td>2300</td>

      <td>高楼层(共5层)</td>

      <td>2002年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>7</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101632293.html</td>

    </tr>

    <tr>

      <th>2740</th>

      <td>酒仙桥租房</td>

      <td>丽都水岸</td>

      <td>丽都水岸小区，一层带花园三居室</td>

      <td>3室2厅</td>

      <td>167平米</td>

      <td>25000</td>

      <td>低楼层(共20层)</td>

      <td>2005年建塔楼</td>

      <td>东南 西北</td>

      <td>2017.07.20</td>

      <td>9</td>

      <td>距离14号线(东段)将台站648米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101636553.html</td>

    </tr>

    <tr>

      <th>2741</th>

      <td>潞苑租房</td>

      <td>上潞园</td>

      <td>上潞园精装一居改两居室  业主诚租看房方便</td>

      <td>2室1厅</td>

      <td>57平米</td>

      <td>2200</td>

      <td>高楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>东</td>

      <td>2017.07.25</td>

      <td>5</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101655660.html</td>

    </tr>

    <tr>

      <th>2742</th>

      <td>良乡租房</td>

      <td>嘉瑞通小区</td>

      <td>嘉瑞通小区 2室1厅 2600元</td>

      <td>2室1厅</td>

      <td>92平米</td>

      <td>2600</td>

      <td>低楼层(共15层)</td>

      <td>2006年建塔楼</td>

      <td>南 西</td>

      <td>2017.07.19</td>

      <td>13</td>

      <td>距离房山线良乡南关站165米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101660289.html</td>

    </tr>

    <tr>

      <th>2743</th>

      <td>朝青租房</td>

      <td>银谷美泉家园</td>

      <td>朝青 花园社区 银谷美泉 精装三居</td>

      <td>3室2厅</td>

      <td>142平米</td>

      <td>13000</td>

      <td>中楼层(共7层)</td>

      <td>2008年建板楼</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>6</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101584316.html</td>

    </tr>

    <tr>

      <th>2744</th>

      <td>朝青租房</td>

      <td>润枫水尚</td>

      <td>润枫水尚 2室1厅 10000元</td>

      <td>2室1厅</td>

      <td>121平米</td>

      <td>10000</td>

      <td>低楼层(共14层)</td>

      <td>2008年建板楼</td>

      <td>南 北</td>

      <td>2017.07.21</td>

      <td>34</td>

      <td>距离6号线青年路站829米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101283618.html</td>

    </tr>

    <tr>

      <th>2745</th>

      <td>新宫租房</td>

      <td>飞腾家园</td>

      <td>飞腾家园 3室1厅 4000元</td>

      <td>3室1厅</td>

      <td>91平米</td>

      <td>4000</td>

      <td>高楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>17</td>

      <td>随时看房 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101677753.html</td>

    </tr>

    <tr>

      <th>2746</th>

      <td>奥林匹克公园租房</td>

      <td>京师园</td>

      <td>京师园 3室1厅 14000元</td>

      <td>3室1厅</td>

      <td>147平米</td>

      <td>14000</td>

      <td>低楼层(共21层)</td>

      <td>2004年建板塔结合</td>

      <td>东 南</td>

      <td>2017.07.20</td>

      <td>13</td>

      <td>距离8号线林萃桥站781米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101692633.html</td>

    </tr>

    <tr>

      <th>2747</th>

      <td>朝青租房</td>

      <td>青年汇佳园</td>

      <td>青年汇佳园一居室诚意出租七月到期</td>

      <td>1室1厅</td>

      <td>65平米</td>

      <td>6300</td>

      <td>低楼层(共13层)</td>

      <td>2008年建板塔结合</td>

      <td>南 西 北</td>

      <td>2017.07.26</td>

      <td>17</td>

      <td>距离6号线青年路站458米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101693532.html</td>

    </tr>

    <tr>

      <th>2748</th>

      <td>九棵树(家乐福)租房</td>

      <td>大方居</td>

      <td>大方居简装西向两居室 家电家具齐</td>

      <td>2室1厅</td>

      <td>89平米</td>

      <td>3100</td>

      <td>低楼层(共22层)</td>

      <td>2008年建板塔结合</td>

      <td>西</td>

      <td>2017.07.26</td>

      <td>9</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101694062.html</td>

    </tr>

    <tr>

      <th>2749</th>

      <td>天通苑租房</td>

      <td>天通苑北二区</td>

      <td>天通苑北二区电梯高层 精装修 观景高层</td>

      <td>2室1厅</td>

      <td>103平米</td>

      <td>5000</td>

      <td>高楼层(共12层)</td>

      <td>2005年建板楼</td>

      <td>西南</td>

      <td>2017.07.27</td>

      <td>14</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101694097.html</td>

    </tr>

    <tr>

      <th>2750</th>

      <td>朝阳门外租房</td>

      <td>麒麟公馆</td>

      <td>麒麟公馆 2室1厅 18500元</td>

      <td>2室1厅</td>

      <td>95平米</td>

      <td>18500</td>

      <td>低楼层(共24层)</td>

      <td>2010年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.23</td>

      <td>14</td>

      <td>距离2号线朝阳门站801米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101696313.html</td>

    </tr>

    <tr>

      <th>2751</th>

      <td>芍药居租房</td>

      <td>芍药居</td>

      <td>芍药居 中煤信息大厦 精装南北2居 有车位</td>

      <td>2室1厅</td>

      <td>75平米</td>

      <td>7500</td>

      <td>高楼层(共14层)</td>

      <td>2000年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.18</td>

      <td>7</td>

      <td>距离13号线芍药居站947米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101696415.html</td>

    </tr>

    <tr>

      <th>2752</th>

      <td>双榆树租房</td>

      <td>双榆树东里</td>

      <td>南北通透三居室，业主可以接受长租，家具家电齐全</td>

      <td>3室1厅</td>

      <td>81平米</td>

      <td>10000</td>

      <td>中楼层(共12层)</td>

      <td>1990年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.19</td>

      <td>8</td>

      <td>距离4号线人民大学站735米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697415.html</td>

    </tr>

    <tr>

      <th>2753</th>

      <td>红庙租房</td>

      <td>延静里中街</td>

      <td>房子是双南向的小两居 ，楼层低，最重要的是价格低</td>

      <td>2室0厅</td>

      <td>46平米</td>

      <td>5200</td>

      <td>低楼层(共6层)</td>

      <td>1984年建板楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>13</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697453.html</td>

    </tr>

    <tr>

      <th>2754</th>

      <td>西三旗租房</td>

      <td>知本时代</td>

      <td>知本时代精装北向开间，有电梯，距离地铁近，看房方便</td>

      <td>1室0厅</td>

      <td>42平米</td>

      <td>4000</td>

      <td>高楼层(共15层)</td>

      <td>2003年建板塔结合</td>

      <td>北</td>

      <td>2017.07.27</td>

      <td>16</td>

      <td>距离8号线霍营站1144米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697749.html</td>

    </tr>

    <tr>

      <th>2755</th>

      <td>朝青租房</td>

      <td>天鹅湾北区</td>

      <td>天鹅湾北区 1室1厅 9500元</td>

      <td>1室1厅</td>

      <td>50平米</td>

      <td>9500</td>

      <td>中楼层(共8层)</td>

      <td>2010年建板塔结合</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>13</td>

      <td>距离6号线青年路站736米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697995.html</td>

    </tr>

    <tr>

      <th>2756</th>

      <td>太阳宫租房</td>

      <td>水星园</td>

      <td>水星园精装一居室  可自带家具家电 业主也可配齐</td>

      <td>1室1厅</td>

      <td>68平米</td>

      <td>9500</td>

      <td>中楼层(共23层)</td>

      <td>2005年建板塔结合</td>

      <td>北</td>

      <td>2017.07.24</td>

      <td>14</td>

      <td>距离10号线太阳宫站432米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101698013.html</td>

    </tr>

    <tr>

      <th>2757</th>

      <td>六里桥租房</td>

      <td>莲花小区</td>

      <td>莲花小区 西南两居室 温馨舒适 楼层合适</td>

      <td>2室1厅</td>

      <td>84平米</td>

      <td>7200</td>

      <td>低楼层(共28层)</td>

      <td>1999年建板塔结合</td>

      <td>西南</td>

      <td>2017.07.26</td>

      <td>7</td>

      <td>距离10号线莲花桥站661米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101702130.html</td>

    </tr>

    <tr>

      <th>2758</th>

      <td>陶然亭租房</td>

      <td>中海紫御公馆</td>

      <td>中海紫御公馆  把您的家安放在花园里</td>

      <td>2室2厅</td>

      <td>91平米</td>

      <td>12000</td>

      <td>中楼层(共22层)</td>

      <td>2010年建板塔结合</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>6</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101703605.html</td>

    </tr>

    <tr>

      <th>2759</th>

      <td>三元桥租房</td>

      <td>曙光里</td>

      <td>曙光里南向 高层两居室 随时看房</td>

      <td>2室1厅</td>

      <td>62平米</td>

      <td>6200</td>

      <td>高楼层(共18层)</td>

      <td>1992年建塔楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>19</td>

      <td>距离机场线三元桥站980米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101704735.html</td>

    </tr>

  </tbody>

</table>

<p>2760 rows × 13 columns</p>

</div>



<pre><code># 这种重命名方式必须对所有的列都进行命名 即列表长度必须和列数一样
df.columns = [&#39;district&#39;, &#39;address&#39;, &#39;title&#39;, &#39;house_type&#39;, &#39;area&#39;, &#39;price&#39;, &#39;floor&#39;, &#39;build_time&#39;, &#39;direction&#39;, &#39;update_time&#39;, &#39;view_num&#39;, &#39;extra_info&#39;, &#39;link&#39;]

df
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>district</th>

      <th>address</th>

      <th>title</th>

      <th>house_type</th>

      <th>area</th>

      <th>price</th>

      <th>floor</th>

      <th>build_time</th>

      <th>direction</th>

      <th>update_time</th>

      <th>view_num</th>

      <th>extra_info</th>

      <th>link</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>0</th>

      <td>燕莎租房</td>

      <td>新源街</td>

      <td>亮马桥 新源街  精装两居 交通便利 看房方便 随时入住</td>

      <td>2室1厅</td>

      <td>50平米</td>

      <td>5800</td>

      <td>中楼层(共6层)</td>

      <td>1981年建板楼</td>

      <td>南</td>

      <td>2017.07.21</td>

      <td>26</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101803342.html</td>

    </tr>

    <tr>

      <th>1</th>

      <td>望京租房</td>

      <td>澳洲康都</td>

      <td>澳洲康都东向精致两居室...........</td>

      <td>2室1厅</td>

      <td>79平米</td>

      <td>7800</td>

      <td>中楼层(共28层)</td>

      <td>2005年建板塔结合</td>

      <td>东</td>

      <td>2017.07.23</td>

      <td>33</td>

      <td>距离14号线(东段)东湖渠站731米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101753126.html</td>

    </tr>

    <tr>

      <th>2</th>

      <td>广安门租房</td>

      <td>远见名苑</td>

      <td>远见名苑 东向两居室 独立小区环境 适合居家</td>

      <td>2室1厅</td>

      <td>86平米</td>

      <td>8000</td>

      <td>低楼层(共25层)</td>

      <td>2006年建塔楼</td>

      <td>东</td>

      <td>2017.07.20</td>

      <td>34</td>

      <td>距离7号线达官营站684米 随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101756753.html</td>

    </tr>

    <tr>

      <th>3</th>

      <td>天通苑租房</td>

      <td>天通苑北一区</td>

      <td>北一区简装两居，采光好，视野美，出行方便</td>

      <td>2室1厅</td>

      <td>103平米</td>

      <td>5300</td>

      <td>低楼层(共13层)</td>

      <td>2004年建板楼</td>

      <td>东南</td>

      <td>2017.07.25</td>

      <td>30</td>

      <td>距离5号线天通苑站927米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101780034.html</td>

    </tr>

    <tr>

      <th>4</th>

      <td>团结湖租房</td>

      <td>团结湖北口</td>

      <td>团结湖北口近地铁高楼层朝南向精装修正规两居室</td>

      <td>2室1厅</td>

      <td>63平米</td>

      <td>6400</td>

      <td>高楼层(共16层)</td>

      <td>1982年建塔楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>30</td>

      <td>距离10号线团结湖站88米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101781083.html</td>

    </tr>

    <tr>

      <th>5</th>

      <td>回龙观租房</td>

      <td>龙华园</td>

      <td>龙泽龙华园57平低楼层一居室家具家电齐全拎包入住</td>

      <td>1室1厅</td>

      <td>58平米</td>

      <td>4000</td>

      <td>低楼层(共6层)</td>

      <td>1994年建板楼</td>

      <td>南</td>

      <td>2017.07.23</td>

      <td>61</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101748994.html</td>

    </tr>

    <tr>

      <th>6</th>

      <td>北苑租房</td>

      <td>筑华年</td>

      <td>筑华年西南小三居 靠谱出租 看房方便有钥匙</td>

      <td>3室1厅</td>

      <td>89平米</td>

      <td>7500</td>

      <td>高楼层(共24层)</td>

      <td>2012年建板楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>29</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101767631.html</td>

    </tr>

    <tr>

      <th>7</th>

      <td>马甸租房</td>

      <td>月季园</td>

      <td>10号牡丹园站月季园小区 拎包入住 离梦想更近一点</td>

      <td>2室1厅</td>

      <td>53平米</td>

      <td>6000</td>

      <td>低楼层(共21层)</td>

      <td>1997年建塔楼</td>

      <td>南</td>

      <td>2017.07.16</td>

      <td>26</td>

      <td>距离10号线牡丹园站580米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101763532.html</td>

    </tr>

    <tr>

      <th>8</th>

      <td>小西天租房</td>

      <td>今典花园</td>

      <td>花园社区，西直门 今典花园精装两居，诚心出售。</td>

      <td>2室1厅</td>

      <td>73平米</td>

      <td>8500</td>

      <td>中楼层(共25层)</td>

      <td>2004年建塔楼</td>

      <td>西</td>

      <td>2017.07.23</td>

      <td>44</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101758850.html</td>

    </tr>

    <tr>

      <th>9</th>

      <td>北苑租房</td>

      <td>北苑家园绣菊园</td>

      <td>北苑东南两居室，可改三居 业主随时签约</td>

      <td>2室1厅</td>

      <td>82平米</td>

      <td>5300</td>

      <td>低楼层(共25层)</td>

      <td>2000年建塔楼</td>

      <td>东南</td>

      <td>2017.07.26</td>

      <td>30</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101779767.html</td>

    </tr>

    <tr>

      <th>10</th>

      <td>和平里租房</td>

      <td>甘水桥</td>

      <td>北三环里   蒋宅口   安外甘水桥   正规三居室</td>

      <td>3室1厅</td>

      <td>76平米</td>

      <td>7600</td>

      <td>高楼层(共14层)</td>

      <td>1988年建板塔结合</td>

      <td>东 西</td>

      <td>2017.07.26</td>

      <td>24</td>

      <td>距离5号线和平里北街站1198米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101753337.html</td>

    </tr>

    <tr>

      <th>11</th>

      <td>健翔桥租房</td>

      <td>华严北里中科院</td>

      <td>中科院 双南向 二居室 看房方便</td>

      <td>2室1厅</td>

      <td>60平米</td>

      <td>6300</td>

      <td>中楼层(共16层)</td>

      <td>1988年建塔楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>27</td>

      <td>距离10号线健德门站1056米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101758776.html</td>

    </tr>

    <tr>

      <th>12</th>

      <td>看丹桥租房</td>

      <td>新华街七里</td>

      <td>低楼层带电梯两居室，交通便利，家电齐全</td>

      <td>2室1厅</td>

      <td>65平米</td>

      <td>4500</td>

      <td>低楼层(共24层)</td>

      <td>2000年建塔楼</td>

      <td>西北</td>

      <td>2017.07.22</td>

      <td>27</td>

      <td>距离9号线丰台南路站924米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101762732.html</td>

    </tr>

    <tr>

      <th>13</th>

      <td>朝阳门内租房</td>

      <td>朝阳首府</td>

      <td>商品房  24小时保安 刷卡进出</td>

      <td>2室2厅</td>

      <td>104平米</td>

      <td>14500</td>

      <td>高楼层(共15层)</td>

      <td>2009年建塔楼</td>

      <td>东 东北</td>

      <td>2017.07.26</td>

      <td>34</td>

      <td>距离2号线朝阳门站94米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101755036.html</td>

    </tr>

    <tr>

      <th>14</th>

      <td>双井租房</td>

      <td>富力城B区</td>

      <td>顶层大复式，带私人70平大露台，豪华装修，随时能看</td>

      <td>4室1厅</td>

      <td>253平米</td>

      <td>32000</td>

      <td>高楼层(共18层)</td>

      <td>2004年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>18</td>

      <td>距离10号线双井站498米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101751322.html</td>

    </tr>

    <tr>

      <th>15</th>

      <td>刘家窑租房</td>

      <td>石榴园南里小区</td>

      <td>石榴园南里简装一居室，朝南采光好</td>

      <td>1室1厅</td>

      <td>47平米</td>

      <td>3700</td>

      <td>高楼层(共6层)</td>

      <td>1997年建板楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>23</td>

      <td>距离10号线石榴庄站752米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101807363.html</td>

    </tr>

    <tr>

      <th>16</th>

      <td>紫竹桥租房</td>

      <td>北洼西里</td>

      <td>北洼路北洼西里精装修两居出租随时看房</td>

      <td>2室1厅</td>

      <td>74平米</td>

      <td>7000</td>

      <td>中楼层(共18层)</td>

      <td>1996年建塔楼</td>

      <td>东南</td>

      <td>2017.07.27</td>

      <td>27</td>

      <td>距离6号线慈寿寺站1166米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101827666.html</td>

    </tr>

    <tr>

      <th>17</th>

      <td>甘家口租房</td>

      <td>建设部大院</td>

      <td>建设部大院  乙子区铁道部2001年楼龄  高楼层  精装修</td>

      <td>3室1厅</td>

      <td>100平米</td>

      <td>13000</td>

      <td>中楼层(共24层)</td>

      <td>2000年建塔楼</td>

      <td>西 北</td>

      <td>2017.07.26</td>

      <td>24</td>

      <td>距离6号线白石桥南站732米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101819163.html</td>

    </tr>

    <tr>

      <th>18</th>

      <td>北苑租房</td>

      <td>新街坊</td>

      <td>地铁5号线、精装修一改二，看房方便</td>

      <td>2室1厅</td>

      <td>57平米</td>

      <td>5500</td>

      <td>低楼层(共18层)</td>

      <td>2004年建板塔结合</td>

      <td>东</td>

      <td>2017.07.27</td>

      <td>19</td>

      <td>距离5号线北苑路北站1130米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101822606.html</td>

    </tr>

    <tr>

      <th>19</th>

      <td>四季青租房</td>

      <td>绿波漫板</td>

      <td>绿波漫板 东北向开间 带燃气 带家具家电 舒适宜人</td>

      <td>1室0厅</td>

      <td>43平米</td>

      <td>5200</td>

      <td>中楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>东 北</td>

      <td>2017.07.20</td>

      <td>41</td>

      <td>距离6号线慈寿寺站667米 随时看房 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101811584.html</td>

    </tr>

    <tr>

      <th>20</th>

      <td>望京租房</td>

      <td>宝星园一区</td>

      <td>大四居室   低于市场价  可办公 可居家</td>

      <td>4室2厅</td>

      <td>217平米</td>

      <td>15000</td>

      <td>低楼层(共23层)</td>

      <td>2003年建塔楼</td>

      <td>南</td>

      <td>2017.07.23</td>

      <td>32</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101603861.html</td>

    </tr>

    <tr>

      <th>21</th>

      <td>望京租房</td>

      <td>融科橄榄城三期</td>

      <td>融科两居室，精装家具家电齐全，随时入住，采光好</td>

      <td>2室1厅</td>

      <td>95平米</td>

      <td>12000</td>

      <td>低楼层(共27层)</td>

      <td>2009年建板楼</td>

      <td>南</td>

      <td>2017.07.19</td>

      <td>32</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101641236.html</td>

    </tr>

    <tr>

      <th>22</th>

      <td>酒仙桥租房</td>

      <td>卡布其诺</td>

      <td>全南两居 东西通透 直观小区花园 观景房</td>

      <td>2室1厅</td>

      <td>90平米</td>

      <td>8800</td>

      <td>中楼层(共9层)</td>

      <td>2005年建板楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>50</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101712757.html</td>

    </tr>

    <tr>

      <th>23</th>

      <td>官园租房</td>

      <td>官苑8号</td>

      <td>官苑8号 精装西南三居可以长租，看房随时</td>

      <td>3室2厅</td>

      <td>121平米</td>

      <td>21500</td>

      <td>中楼层(共16层)</td>

      <td>2007年建板塔结合</td>

      <td>南 西</td>

      <td>2017.07.25</td>

      <td>61</td>

      <td>距离2号线车公庄站773米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101583407.html</td>

    </tr>

    <tr>

      <th>24</th>

      <td>北大地租房</td>

      <td>西安街4号院</td>

      <td>精装三改二大两居 南北通透 希望客户能把它当自己的家</td>

      <td>2室1厅</td>

      <td>83平米</td>

      <td>4500</td>

      <td>高楼层(共6层)</td>

      <td>1989年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>27</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101601709.html</td>

    </tr>

    <tr>

      <th>25</th>

      <td>回龙观租房</td>

      <td>佰嘉城</td>

      <td>佰嘉城一层三居室 户型方正 南北通透</td>

      <td>3室1厅</td>

      <td>119平米</td>

      <td>6300</td>

      <td>低楼层(共6层)</td>

      <td>2006年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>25</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101726428.html</td>

    </tr>

    <tr>

      <th>26</th>

      <td>广安门租房</td>

      <td>朗琴园</td>

      <td>广安门朗琴园精装开间 随时入住 交通方便</td>

      <td>1室0厅</td>

      <td>58平米</td>

      <td>5600</td>

      <td>中楼层(共29层)</td>

      <td>2006年建塔楼</td>

      <td>西</td>

      <td>2017.07.25</td>

      <td>30</td>

      <td>距离7号线达官营站731米 随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101692994.html</td>

    </tr>

    <tr>

      <th>27</th>

      <td>鼓楼大街租房</td>

      <td>金隅万科城</td>

      <td>金隅万科城 三居室 家具家电齐全 诚意出租</td>

      <td>3室1厅</td>

      <td>88平米</td>

      <td>4800</td>

      <td>低楼层(共26层)</td>

      <td>2012年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>31</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101612398.html</td>

    </tr>

    <tr>

      <th>28</th>

      <td>紫竹桥租房</td>

      <td>西三环北路89号院</td>

      <td>花园桥 南北两居 家具家电齐全 拎包入住</td>

      <td>2室1厅</td>

      <td>54平米</td>

      <td>6000</td>

      <td>高楼层(共6层)</td>

      <td>1987年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>31</td>

      <td>距离6号线花园桥站620米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101567440.html</td>

    </tr>

    <tr>

      <th>29</th>

      <td>六里桥租房</td>

      <td>京铁家园</td>

      <td>地铁1号线五棵松站 京铁家园精装两居室 东南向 有钥匙</td>

      <td>2室1厅</td>

      <td>107平米</td>

      <td>6000</td>

      <td>中楼层(共22层)</td>

      <td>2002年建塔楼</td>

      <td>东南</td>

      <td>2017.07.22</td>

      <td>32</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101647855.html</td>

    </tr>

    <tr>

      <th>...</th>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

    </tr>

    <tr>

      <th>2730</th>

      <td>安定门租房</td>

      <td>朗家胡同13号院</td>

      <td>安定门内 南北通透一居室 家具家电齐全</td>

      <td>1室1厅</td>

      <td>40平米</td>

      <td>4500</td>

      <td>高楼层(共6层)</td>

      <td>1990年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>11</td>

      <td>距离2号线鼓楼大街站774米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739270.html</td>

    </tr>

    <tr>

      <th>2731</th>

      <td>东关租房</td>

      <td>清秀园北区</td>

      <td>楼龄新，精装修，可直接拎包入住</td>

      <td>1室0厅</td>

      <td>59平米</td>

      <td>2500</td>

      <td>高楼层(共19层)</td>

      <td>2003年建塔楼</td>

      <td>西</td>

      <td>2017.07.27</td>

      <td>15</td>

      <td>距离昌平线昌平站810米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739341.html</td>

    </tr>

    <tr>

      <th>2732</th>

      <td>西坝河租房</td>

      <td>光熙门北里</td>

      <td>光熙门北里 3室1厅 7300元</td>

      <td>3室1厅</td>

      <td>68平米</td>

      <td>7300</td>

      <td>低楼层(共22层)</td>

      <td>1991年建塔楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>12</td>

      <td>距离13号线光熙门站471米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739485.html</td>

    </tr>

    <tr>

      <th>2733</th>

      <td>建国门外租房</td>

      <td>地杰长安驿</td>

      <td>东二环 地杰长安驿 南向高层开间</td>

      <td>1室0厅</td>

      <td>45平米</td>

      <td>8500</td>

      <td>中楼层(共27层)</td>

      <td>2007年建塔楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>9</td>

      <td>距离1号线永安里站712米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739616.html</td>

    </tr>

    <tr>

      <th>2734</th>

      <td>临河里租房</td>

      <td>海棠湾二期</td>

      <td>海棠湾精装两居随时看房随时签约拎包入住</td>

      <td>2室1厅</td>

      <td>88平米</td>

      <td>5500</td>

      <td>中楼层(共20层)</td>

      <td>2011年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.16</td>

      <td>10</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739983.html</td>

    </tr>

    <tr>

      <th>2735</th>

      <td>滨河西区租房</td>

      <td>永兴小区</td>

      <td>永兴小区  南北向       两 居室</td>

      <td>2室1厅</td>

      <td>79平米</td>

      <td>2900</td>

      <td>高楼层(共6层)</td>

      <td>2000年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>9</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101735385.html</td>

    </tr>

    <tr>

      <th>2736</th>

      <td>定福庄租房</td>

      <td>妇联小区</td>

      <td>东南朝向，装修较好，通风比较好。</td>

      <td>1室1厅</td>

      <td>46平米</td>

      <td>3500</td>

      <td>低楼层(共16层)</td>

      <td>1995年建塔楼</td>

      <td>东南</td>

      <td>2017.07.23</td>

      <td>16</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101738106.html</td>

    </tr>

    <tr>

      <th>2737</th>

      <td>公主坟租房</td>

      <td>水利新宿舍</td>

      <td>水利新宿舍东南朝向大两居复式结构带出租车位</td>

      <td>2室2厅</td>

      <td>138平米</td>

      <td>15000</td>

      <td>低楼层(共28层)</td>

      <td>1995年建塔楼</td>

      <td>东南</td>

      <td>2017.07.27</td>

      <td>9</td>

      <td>距离1号线公主坟站748米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101705949.html</td>

    </tr>

    <tr>

      <th>2738</th>

      <td>良乡租房</td>

      <td>北潞春家园</td>

      <td>北潞春家园 5室3厅 4500元</td>

      <td>5室3厅</td>

      <td>196平米</td>

      <td>4500</td>

      <td>高楼层(共6层)</td>

      <td>2000年建板楼</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>10</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101631061.html</td>

    </tr>

    <tr>

      <th>2739</th>

      <td>西关环岛租房</td>

      <td>秋实家园</td>

      <td>精装修，南北通透两居室，家具家电齐全</td>

      <td>2室1厅</td>

      <td>81平米</td>

      <td>2300</td>

      <td>高楼层(共5层)</td>

      <td>2002年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>7</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101632293.html</td>

    </tr>

    <tr>

      <th>2740</th>

      <td>酒仙桥租房</td>

      <td>丽都水岸</td>

      <td>丽都水岸小区，一层带花园三居室</td>

      <td>3室2厅</td>

      <td>167平米</td>

      <td>25000</td>

      <td>低楼层(共20层)</td>

      <td>2005年建塔楼</td>

      <td>东南 西北</td>

      <td>2017.07.20</td>

      <td>9</td>

      <td>距离14号线(东段)将台站648米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101636553.html</td>

    </tr>

    <tr>

      <th>2741</th>

      <td>潞苑租房</td>

      <td>上潞园</td>

      <td>上潞园精装一居改两居室  业主诚租看房方便</td>

      <td>2室1厅</td>

      <td>57平米</td>

      <td>2200</td>

      <td>高楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>东</td>

      <td>2017.07.25</td>

      <td>5</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101655660.html</td>

    </tr>

    <tr>

      <th>2742</th>

      <td>良乡租房</td>

      <td>嘉瑞通小区</td>

      <td>嘉瑞通小区 2室1厅 2600元</td>

      <td>2室1厅</td>

      <td>92平米</td>

      <td>2600</td>

      <td>低楼层(共15层)</td>

      <td>2006年建塔楼</td>

      <td>南 西</td>

      <td>2017.07.19</td>

      <td>13</td>

      <td>距离房山线良乡南关站165米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101660289.html</td>

    </tr>

    <tr>

      <th>2743</th>

      <td>朝青租房</td>

      <td>银谷美泉家园</td>

      <td>朝青 花园社区 银谷美泉 精装三居</td>

      <td>3室2厅</td>

      <td>142平米</td>

      <td>13000</td>

      <td>中楼层(共7层)</td>

      <td>2008年建板楼</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>6</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101584316.html</td>

    </tr>

    <tr>

      <th>2744</th>

      <td>朝青租房</td>

      <td>润枫水尚</td>

      <td>润枫水尚 2室1厅 10000元</td>

      <td>2室1厅</td>

      <td>121平米</td>

      <td>10000</td>

      <td>低楼层(共14层)</td>

      <td>2008年建板楼</td>

      <td>南 北</td>

      <td>2017.07.21</td>

      <td>34</td>

      <td>距离6号线青年路站829米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101283618.html</td>

    </tr>

    <tr>

      <th>2745</th>

      <td>新宫租房</td>

      <td>飞腾家园</td>

      <td>飞腾家园 3室1厅 4000元</td>

      <td>3室1厅</td>

      <td>91平米</td>

      <td>4000</td>

      <td>高楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>17</td>

      <td>随时看房 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101677753.html</td>

    </tr>

    <tr>

      <th>2746</th>

      <td>奥林匹克公园租房</td>

      <td>京师园</td>

      <td>京师园 3室1厅 14000元</td>

      <td>3室1厅</td>

      <td>147平米</td>

      <td>14000</td>

      <td>低楼层(共21层)</td>

      <td>2004年建板塔结合</td>

      <td>东 南</td>

      <td>2017.07.20</td>

      <td>13</td>

      <td>距离8号线林萃桥站781米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101692633.html</td>

    </tr>

    <tr>

      <th>2747</th>

      <td>朝青租房</td>

      <td>青年汇佳园</td>

      <td>青年汇佳园一居室诚意出租七月到期</td>

      <td>1室1厅</td>

      <td>65平米</td>

      <td>6300</td>

      <td>低楼层(共13层)</td>

      <td>2008年建板塔结合</td>

      <td>南 西 北</td>

      <td>2017.07.26</td>

      <td>17</td>

      <td>距离6号线青年路站458米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101693532.html</td>

    </tr>

    <tr>

      <th>2748</th>

      <td>九棵树(家乐福)租房</td>

      <td>大方居</td>

      <td>大方居简装西向两居室 家电家具齐</td>

      <td>2室1厅</td>

      <td>89平米</td>

      <td>3100</td>

      <td>低楼层(共22层)</td>

      <td>2008年建板塔结合</td>

      <td>西</td>

      <td>2017.07.26</td>

      <td>9</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101694062.html</td>

    </tr>

    <tr>

      <th>2749</th>

      <td>天通苑租房</td>

      <td>天通苑北二区</td>

      <td>天通苑北二区电梯高层 精装修 观景高层</td>

      <td>2室1厅</td>

      <td>103平米</td>

      <td>5000</td>

      <td>高楼层(共12层)</td>

      <td>2005年建板楼</td>

      <td>西南</td>

      <td>2017.07.27</td>

      <td>14</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101694097.html</td>

    </tr>

    <tr>

      <th>2750</th>

      <td>朝阳门外租房</td>

      <td>麒麟公馆</td>

      <td>麒麟公馆 2室1厅 18500元</td>

      <td>2室1厅</td>

      <td>95平米</td>

      <td>18500</td>

      <td>低楼层(共24层)</td>

      <td>2010年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.23</td>

      <td>14</td>

      <td>距离2号线朝阳门站801米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101696313.html</td>

    </tr>

    <tr>

      <th>2751</th>

      <td>芍药居租房</td>

      <td>芍药居</td>

      <td>芍药居 中煤信息大厦 精装南北2居 有车位</td>

      <td>2室1厅</td>

      <td>75平米</td>

      <td>7500</td>

      <td>高楼层(共14层)</td>

      <td>2000年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.18</td>

      <td>7</td>

      <td>距离13号线芍药居站947米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101696415.html</td>

    </tr>

    <tr>

      <th>2752</th>

      <td>双榆树租房</td>

      <td>双榆树东里</td>

      <td>南北通透三居室，业主可以接受长租，家具家电齐全</td>

      <td>3室1厅</td>

      <td>81平米</td>

      <td>10000</td>

      <td>中楼层(共12层)</td>

      <td>1990年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.19</td>

      <td>8</td>

      <td>距离4号线人民大学站735米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697415.html</td>

    </tr>

    <tr>

      <th>2753</th>

      <td>红庙租房</td>

      <td>延静里中街</td>

      <td>房子是双南向的小两居 ，楼层低，最重要的是价格低</td>

      <td>2室0厅</td>

      <td>46平米</td>

      <td>5200</td>

      <td>低楼层(共6层)</td>

      <td>1984年建板楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>13</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697453.html</td>

    </tr>

    <tr>

      <th>2754</th>

      <td>西三旗租房</td>

      <td>知本时代</td>

      <td>知本时代精装北向开间，有电梯，距离地铁近，看房方便</td>

      <td>1室0厅</td>

      <td>42平米</td>

      <td>4000</td>

      <td>高楼层(共15层)</td>

      <td>2003年建板塔结合</td>

      <td>北</td>

      <td>2017.07.27</td>

      <td>16</td>

      <td>距离8号线霍营站1144米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697749.html</td>

    </tr>

    <tr>

      <th>2755</th>

      <td>朝青租房</td>

      <td>天鹅湾北区</td>

      <td>天鹅湾北区 1室1厅 9500元</td>

      <td>1室1厅</td>

      <td>50平米</td>

      <td>9500</td>

      <td>中楼层(共8层)</td>

      <td>2010年建板塔结合</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>13</td>

      <td>距离6号线青年路站736米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697995.html</td>

    </tr>

    <tr>

      <th>2756</th>

      <td>太阳宫租房</td>

      <td>水星园</td>

      <td>水星园精装一居室  可自带家具家电 业主也可配齐</td>

      <td>1室1厅</td>

      <td>68平米</td>

      <td>9500</td>

      <td>中楼层(共23层)</td>

      <td>2005年建板塔结合</td>

      <td>北</td>

      <td>2017.07.24</td>

      <td>14</td>

      <td>距离10号线太阳宫站432米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101698013.html</td>

    </tr>

    <tr>

      <th>2757</th>

      <td>六里桥租房</td>

      <td>莲花小区</td>

      <td>莲花小区 西南两居室 温馨舒适 楼层合适</td>

      <td>2室1厅</td>

      <td>84平米</td>

      <td>7200</td>

      <td>低楼层(共28层)</td>

      <td>1999年建板塔结合</td>

      <td>西南</td>

      <td>2017.07.26</td>

      <td>7</td>

      <td>距离10号线莲花桥站661米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101702130.html</td>

    </tr>

    <tr>

      <th>2758</th>

      <td>陶然亭租房</td>

      <td>中海紫御公馆</td>

      <td>中海紫御公馆  把您的家安放在花园里</td>

      <td>2室2厅</td>

      <td>91平米</td>

      <td>12000</td>

      <td>中楼层(共22层)</td>

      <td>2010年建板塔结合</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>6</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101703605.html</td>

    </tr>

    <tr>

      <th>2759</th>

      <td>三元桥租房</td>

      <td>曙光里</td>

      <td>曙光里南向 高层两居室 随时看房</td>

      <td>2室1厅</td>

      <td>62平米</td>

      <td>6200</td>

      <td>高楼层(共18层)</td>

      <td>1992年建塔楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>19</td>

      <td>距离机场线三元桥站980米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101704735.html</td>

    </tr>

  </tbody>

</table>

<p>2760 rows × 13 columns</p>

</div>



<p>1 查看数据的形状和信息</p>
<pre><code>df.head



&lt;bound method NDFrame.head of         district    address                           title house_type   area  price      floor  build_time direction update_time  view_num                         extra_info                                             link
0           燕莎租房        新源街    亮马桥 新源街  精装两居 交通便利 看房方便 随时入住       2室1厅   50平米   5800   中楼层(共6层)    1981年建板楼         南  2017.07.21        26                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101803342.html
1           望京租房       澳洲康都          澳洲康都东向精致两居室...........       2室1厅   79平米   7800  中楼层(共28层)  2005年建板塔结合         东  2017.07.23        33   距离14号线(东段)东湖渠站731米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101753126.html
2          广安门租房       远见名苑          远见名苑 东向两居室 独立小区环境 适合居家       2室1厅   86平米   8000  低楼层(共25层)    2006年建塔楼         东  2017.07.20        34         距离7号线达官营站684米 随时看房 精装修 自供暖  https://bj.lianjia.com/zufang/101101756753.html
3          天通苑租房     天通苑北一区            北一区简装两居，采光好，视野美，出行方便       2室1厅  103平米   5300  低楼层(共13层)    2004年建板楼        东南  2017.07.25        30        距离5号线天通苑站927米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101780034.html
4          团结湖租房      团结湖北口          团结湖北口近地铁高楼层朝南向精装修正规两居室       2室1厅   63平米   6400  高楼层(共16层)    1982年建塔楼         南  2017.07.26        30        距离10号线团结湖站88米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101781083.html
5          回龙观租房        龙华园        龙泽龙华园57平低楼层一居室家具家电齐全拎包入住       1室1厅   58平米   4000   低楼层(共6层)    1994年建板楼         南  2017.07.23        61                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101748994.html
6           北苑租房        筑华年           筑华年西南小三居 靠谱出租 看房方便有钥匙       3室1厅   89平米   7500  高楼层(共24层)    2012年建板楼         南  2017.07.25        29                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101767631.html
7           马甸租房        月季园       10号牡丹园站月季园小区 拎包入住 离梦想更近一点       2室1厅   53平米   6000  低楼层(共21层)    1997年建塔楼         南  2017.07.16        26       距离10号线牡丹园站580米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101763532.html
8          小西天租房       今典花园         花园社区，西直门 今典花园精装两居，诚心出售。       2室1厅   73平米   8500  中楼层(共25层)    2004年建塔楼         西  2017.07.23        44                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101758850.html
9           北苑租房    北苑家园绣菊园             北苑东南两居室，可改三居 业主随时签约       2室1厅   82平米   5300  低楼层(共25层)    2000年建塔楼        东南  2017.07.26        30                          随时看房 集中供暖  https://bj.lianjia.com/zufang/101101779767.html
10         和平里租房        甘水桥   北三环里   蒋宅口   安外甘水桥   正规三居室          3室1厅   76平米   7600  高楼层(共14层)  1988年建板塔结合       东 西  2017.07.26        24         距离5号线和平里北街站1198米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101753337.html
11         健翔桥租房    华严北里中科院                中科院 双南向 二居室 看房方便       2室1厅   60平米   6300  中楼层(共16层)    1988年建塔楼         南  2017.07.25        27          距离10号线健德门站1056米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101758776.html
12         看丹桥租房      新华街七里             低楼层带电梯两居室，交通便利，家电齐全       2室1厅   65平米   4500  低楼层(共24层)    2000年建塔楼        西北  2017.07.22        27       距离9号线丰台南路站924米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101762732.html
13        朝阳门内租房       朝阳首府               商品房  24小时保安 刷卡进出        2室2厅  104平米  14500  高楼层(共15层)    2009年建塔楼      东 东北  2017.07.26        34         距离2号线朝阳门站94米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101755036.html
14          双井租房      富力城B区       顶层大复式，带私人70平大露台，豪华装修，随时能看       4室1厅  253平米  32000  高楼层(共18层)  2004年建板塔结合       南 北  2017.07.24        18        距离10号线双井站498米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101751322.html
15         刘家窑租房    石榴园南里小区                石榴园南里简装一居室，朝南采光好       1室1厅   47平米   3700   高楼层(共6层)    1997年建板楼         南  2017.07.26        23           距离10号线石榴庄站752米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101807363.html
16         紫竹桥租房       北洼西里              北洼路北洼西里精装修两居出租随时看房       2室1厅   74平米   7000  中楼层(共18层)    1996年建塔楼        东南  2017.07.27        27       距离6号线慈寿寺站1166米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101827666.html
17         甘家口租房      建设部大院  建设部大院  乙子区铁道部2001年楼龄  高楼层  精装修       3室1厅  100平米  13000  中楼层(共24层)    2000年建塔楼       西 北  2017.07.26        24       距离6号线白石桥南站732米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101819163.html
18          北苑租房        新街坊               地铁5号线、精装修一改二，看房方便       2室1厅   57平米   5500  低楼层(共18层)  2004年建板塔结合         东  2017.07.27        19      距离5号线北苑路北站1130米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101822606.html
19         四季青租房       绿波漫板       绿波漫板 东北向开间 带燃气 带家具家电 舒适宜人       1室0厅   43平米   5200   中楼层(共6层)    2004年建板楼       东 北  2017.07.20        41             距离6号线慈寿寺站667米 随时看房 自供暖  https://bj.lianjia.com/zufang/101101811584.html
20          望京租房      宝星园一区           大四居室   低于市场价  可办公 可居家       4室2厅  217平米  15000  低楼层(共23层)    2003年建塔楼         南  2017.07.23        32                       随时看房 精装修 自供暖  https://bj.lianjia.com/zufang/101101603861.html
21          望京租房    融科橄榄城三期         融科两居室，精装家具家电齐全，随时入住，采光好       2室1厅   95平米  12000  低楼层(共27层)    2009年建板楼         南  2017.07.19        32                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101641236.html
22         酒仙桥租房       卡布其诺            全南两居 东西通透 直观小区花园 观景房       2室1厅   90平米   8800   中楼层(共9层)    2005年建板楼         南  2017.07.27        50                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101712757.html
23          官园租房       官苑8号            官苑8号 精装西南三居可以长租，看房随时       3室2厅  121平米  21500  中楼层(共16层)  2007年建板塔结合       南 西  2017.07.25        61            距离2号线车公庄站773米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101583407.html
24         北大地租房     西安街4号院      精装三改二大两居 南北通透 希望客户能把它当自己的家       2室1厅   83平米   4500   高楼层(共6层)    1989年建板楼       南 北  2017.07.22        27                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101601709.html
25         回龙观租房        佰嘉城              佰嘉城一层三居室 户型方正 南北通透       3室1厅  119平米   6300   低楼层(共6层)    2006年建板楼       南 北  2017.07.22        25                       随时看房 精装修 自供暖  https://bj.lianjia.com/zufang/101101726428.html
26         广安门租房        朗琴园            广安门朗琴园精装开间 随时入住 交通方便       1室0厅   58平米   5600  中楼层(共29层)    2006年建塔楼         西  2017.07.25        30         距离7号线达官营站731米 随时看房 精装修 自供暖  https://bj.lianjia.com/zufang/101101692994.html
27        鼓楼大街租房      金隅万科城           金隅万科城 三居室 家具家电齐全 诚意出租       3室1厅   88平米   4800  低楼层(共26层)  2012年建板塔结合       南 北  2017.07.26        31                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101612398.html
28         紫竹桥租房  西三环北路89号院            花园桥 南北两居 家具家电齐全 拎包入住       2室1厅   54平米   6000   高楼层(共6层)    1987年建板楼       南 北  2017.07.26        31            距离6号线花园桥站620米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101567440.html
29         六里桥租房       京铁家园     地铁1号线五棵松站 京铁家园精装两居室 东南向 有钥匙       2室1厅  107平米   6000  中楼层(共22层)    2002年建塔楼        东南  2017.07.22        32                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101647855.html
...          ...        ...                             ...        ...    ...    ...        ...         ...       ...         ...       ...                                ...                                              ...
2730       安定门租房   朗家胡同13号院             安定门内 南北通透一居室 家具家电齐全       1室1厅   40平米   4500   高楼层(共6层)    1990年建板楼       南 北  2017.07.26        11           距离2号线鼓楼大街站774米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101739270.html
2731        东关租房      清秀园北区                 楼龄新，精装修，可直接拎包入住       1室0厅   59平米   2500  高楼层(共19层)    2003年建塔楼         西  2017.07.27        15         距离昌平线昌平站810米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101739341.html
2732       西坝河租房      光熙门北里                光熙门北里 3室1厅 7300元       3室1厅   68平米   7300  低楼层(共22层)    1991年建塔楼       南 北  2017.07.26        12           距离13号线光熙门站471米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101739485.html
2733      建国门外租房      地杰长安驿                东二环 地杰长安驿 南向高层开间       1室0厅   45平米   8500  中楼层(共27层)    2007年建塔楼         南  2017.07.27         9        距离1号线永安里站712米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101739616.html
2734       临河里租房      海棠湾二期             海棠湾精装两居随时看房随时签约拎包入住       2室1厅   88平米   5500  中楼层(共20层)  2011年建板塔结合       南 北  2017.07.16        10                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101739983.html
2735      滨河西区租房       永兴小区            永兴小区  南北向       两 居室       2室1厅   79平米   2900   高楼层(共6层)    2000年建板楼       南 北  2017.07.26         9                          随时看房 集中供暖  https://bj.lianjia.com/zufang/101101735385.html
2736       定福庄租房       妇联小区                东南朝向，装修较好，通风比较好。       1室1厅   46平米   3500  低楼层(共16层)    1995年建塔楼        东南  2017.07.23        16                          随时看房 集中供暖  https://bj.lianjia.com/zufang/101101738106.html
2737       公主坟租房      水利新宿舍           水利新宿舍东南朝向大两居复式结构带出租车位       2室2厅  138平米  15000  低楼层(共28层)    1995年建塔楼        东南  2017.07.27         9        距离1号线公主坟站748米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101705949.html
2738        良乡租房      北潞春家园                北潞春家园 5室3厅 4500元       5室3厅  196平米   4500   高楼层(共6层)    2000年建板楼       南 北  2017.07.24        10                       随时看房 精装修 自供暖  https://bj.lianjia.com/zufang/101101631061.html
2739      西关环岛租房       秋实家园              精装修，南北通透两居室，家具家电齐全       2室1厅   81平米   2300   高楼层(共5层)    2002年建板楼       南 北  2017.07.22         7                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101632293.html
2740       酒仙桥租房       丽都水岸                 丽都水岸小区，一层带花园三居室       3室2厅  167平米  25000  低楼层(共20层)    2005年建塔楼     东南 西北  2017.07.20         9    距离14号线(东段)将台站648米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101636553.html
2741        潞苑租房        上潞园           上潞园精装一居改两居室  业主诚租看房方便       2室1厅   57平米   2200   高楼层(共6层)    2004年建板楼         东  2017.07.25         5                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101655660.html
2742        良乡租房      嘉瑞通小区                嘉瑞通小区 2室1厅 2600元       2室1厅   92平米   2600  低楼层(共15层)    2006年建塔楼       南 西  2017.07.19        13       距离房山线良乡南关站165米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101660289.html
2743        朝青租房     银谷美泉家园               朝青 花园社区 银谷美泉 精装三居       3室2厅  142平米  13000   中楼层(共7层)    2008年建板楼       南 北  2017.07.24         6                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101584316.html
2744        朝青租房       润枫水尚                润枫水尚 2室1厅 10000元       2室1厅  121平米  10000  低楼层(共14层)    2008年建板楼       南 北  2017.07.21        34        距离6号线青年路站829米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101283618.html
2745        新宫租房       飞腾家园                 飞腾家园 3室1厅 4000元       3室1厅   91平米   4000   高楼层(共6层)    2004年建板楼       南 北  2017.07.22        17                           随时看房 自供暖  https://bj.lianjia.com/zufang/101101677753.html
2746    奥林匹克公园租房        京师园                 京师园 3室1厅 14000元       3室1厅  147平米  14000  低楼层(共21层)  2004年建板塔结合       东 南  2017.07.20        13        距离8号线林萃桥站781米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101692633.html
2747        朝青租房      青年汇佳园                青年汇佳园一居室诚意出租七月到期       1室1厅   65平米   6300  低楼层(共13层)  2008年建板塔结合     南 西 北  2017.07.26        17        距离6号线青年路站458米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101693532.html
2748  九棵树(家乐福)租房        大方居                大方居简装西向两居室 家电家具齐       2室1厅   89平米   3100  低楼层(共22层)  2008年建板塔结合         西  2017.07.26         9                          随时看房 集中供暖  https://bj.lianjia.com/zufang/101101694062.html
2749       天通苑租房     天通苑北二区             天通苑北二区电梯高层 精装修 观景高层       2室1厅  103平米   5000  高楼层(共12层)    2005年建板楼        西南  2017.07.27        14                          随时看房 集中供暖  https://bj.lianjia.com/zufang/101101694097.html
2750      朝阳门外租房       麒麟公馆                麒麟公馆 2室1厅 18500元       2室1厅   95平米  18500  低楼层(共24层)  2010年建板塔结合       南 北  2017.07.23        14        距离2号线朝阳门站801米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101696313.html
2751       芍药居租房        芍药居           芍药居 中煤信息大厦 精装南北2居 有车位       2室1厅   75平米   7500  高楼层(共14层)  2000年建板塔结合       南 北  2017.07.18         7       距离13号线芍药居站947米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101696415.html
2752       双榆树租房      双榆树东里         南北通透三居室，业主可以接受长租，家具家电齐全       3室1厅   81平米  10000  中楼层(共12层)  1990年建板塔结合       南 北  2017.07.19         8           距离4号线人民大学站735米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101697415.html
2753        红庙租房      延静里中街        房子是双南向的小两居 ，楼层低，最重要的是价格低       2室0厅   46平米   5200   低楼层(共6层)    1984年建板楼         南  2017.07.27        13                          随时看房 集中供暖  https://bj.lianjia.com/zufang/101101697453.html
2754       西三旗租房       知本时代       知本时代精装北向开间，有电梯，距离地铁近，看房方便       1室0厅   42平米   4000  高楼层(共15层)  2003年建板塔结合         北  2017.07.27        16        距离8号线霍营站1144米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101697749.html
2755        朝青租房      天鹅湾北区                天鹅湾北区 1室1厅 9500元       1室1厅   50平米   9500   中楼层(共8层)  2010年建板塔结合         南  2017.07.27        13        距离6号线青年路站736米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101697995.html
2756       太阳宫租房        水星园        水星园精装一居室  可自带家具家电 业主也可配齐       1室1厅   68平米   9500  中楼层(共23层)  2005年建板塔结合         北  2017.07.24        14           距离10号线太阳宫站432米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101698013.html
2757       六里桥租房       莲花小区            莲花小区 西南两居室 温馨舒适 楼层合适       2室1厅   84平米   7200  低楼层(共28层)  1999年建板塔结合        西南  2017.07.26         7           距离10号线莲花桥站661米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101702130.html
2758       陶然亭租房     中海紫御公馆              中海紫御公馆  把您的家安放在花园里       2室2厅   91平米  12000  中楼层(共22层)  2010年建板塔结合         南  2017.07.26         6                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101703605.html
2759       三元桥租房        曙光里                曙光里南向 高层两居室 随时看房       2室1厅   62平米   6200  高楼层(共18层)    1992年建塔楼         南  2017.07.25        19            距离机场线三元桥站980米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101704735.html

[2760 rows x 13 columns]&gt;



```python
df.tail



&lt;bound method NDFrame.tail of         district    address                           title house_type   area  price      floor  build_time direction update_time  view_num                         extra_info                                             link
0           燕莎租房        新源街    亮马桥 新源街  精装两居 交通便利 看房方便 随时入住       2室1厅   50平米   5800   中楼层(共6层)    1981年建板楼         南  2017.07.21        26                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101803342.html
1           望京租房       澳洲康都          澳洲康都东向精致两居室...........       2室1厅   79平米   7800  中楼层(共28层)  2005年建板塔结合         东  2017.07.23        33   距离14号线(东段)东湖渠站731米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101753126.html
2          广安门租房       远见名苑          远见名苑 东向两居室 独立小区环境 适合居家       2室1厅   86平米   8000  低楼层(共25层)    2006年建塔楼         东  2017.07.20        34         距离7号线达官营站684米 随时看房 精装修 自供暖  https://bj.lianjia.com/zufang/101101756753.html
3          天通苑租房     天通苑北一区            北一区简装两居，采光好，视野美，出行方便       2室1厅  103平米   5300  低楼层(共13层)    2004年建板楼        东南  2017.07.25        30        距离5号线天通苑站927米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101780034.html
4          团结湖租房      团结湖北口          团结湖北口近地铁高楼层朝南向精装修正规两居室       2室1厅   63平米   6400  高楼层(共16层)    1982年建塔楼         南  2017.07.26        30        距离10号线团结湖站88米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101781083.html
5          回龙观租房        龙华园        龙泽龙华园57平低楼层一居室家具家电齐全拎包入住       1室1厅   58平米   4000   低楼层(共6层)    1994年建板楼         南  2017.07.23        61                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101748994.html
6           北苑租房        筑华年           筑华年西南小三居 靠谱出租 看房方便有钥匙       3室1厅   89平米   7500  高楼层(共24层)    2012年建板楼         南  2017.07.25        29                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101767631.html
7           马甸租房        月季园       10号牡丹园站月季园小区 拎包入住 离梦想更近一点       2室1厅   53平米   6000  低楼层(共21层)    1997年建塔楼         南  2017.07.16        26       距离10号线牡丹园站580米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101763532.html
8          小西天租房       今典花园         花园社区，西直门 今典花园精装两居，诚心出售。       2室1厅   73平米   8500  中楼层(共25层)    2004年建塔楼         西  2017.07.23        44                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101758850.html
9           北苑租房    北苑家园绣菊园             北苑东南两居室，可改三居 业主随时签约       2室1厅   82平米   5300  低楼层(共25层)    2000年建塔楼        东南  2017.07.26        30                          随时看房 集中供暖  https://bj.lianjia.com/zufang/101101779767.html
10         和平里租房        甘水桥   北三环里   蒋宅口   安外甘水桥   正规三居室          3室1厅   76平米   7600  高楼层(共14层)  1988年建板塔结合       东 西  2017.07.26        24         距离5号线和平里北街站1198米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101753337.html
11         健翔桥租房    华严北里中科院                中科院 双南向 二居室 看房方便       2室1厅   60平米   6300  中楼层(共16层)    1988年建塔楼         南  2017.07.25        27          距离10号线健德门站1056米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101758776.html
12         看丹桥租房      新华街七里             低楼层带电梯两居室，交通便利，家电齐全       2室1厅   65平米   4500  低楼层(共24层)    2000年建塔楼        西北  2017.07.22        27       距离9号线丰台南路站924米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101762732.html
13        朝阳门内租房       朝阳首府               商品房  24小时保安 刷卡进出        2室2厅  104平米  14500  高楼层(共15层)    2009年建塔楼      东 东北  2017.07.26        34         距离2号线朝阳门站94米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101755036.html
14          双井租房      富力城B区       顶层大复式，带私人70平大露台，豪华装修，随时能看       4室1厅  253平米  32000  高楼层(共18层)  2004年建板塔结合       南 北  2017.07.24        18        距离10号线双井站498米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101751322.html
15         刘家窑租房    石榴园南里小区                石榴园南里简装一居室，朝南采光好       1室1厅   47平米   3700   高楼层(共6层)    1997年建板楼         南  2017.07.26        23           距离10号线石榴庄站752米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101807363.html
16         紫竹桥租房       北洼西里              北洼路北洼西里精装修两居出租随时看房       2室1厅   74平米   7000  中楼层(共18层)    1996年建塔楼        东南  2017.07.27        27       距离6号线慈寿寺站1166米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101827666.html
17         甘家口租房      建设部大院  建设部大院  乙子区铁道部2001年楼龄  高楼层  精装修       3室1厅  100平米  13000  中楼层(共24层)    2000年建塔楼       西 北  2017.07.26        24       距离6号线白石桥南站732米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101819163.html
18          北苑租房        新街坊               地铁5号线、精装修一改二，看房方便       2室1厅   57平米   5500  低楼层(共18层)  2004年建板塔结合         东  2017.07.27        19      距离5号线北苑路北站1130米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101822606.html
19         四季青租房       绿波漫板       绿波漫板 东北向开间 带燃气 带家具家电 舒适宜人       1室0厅   43平米   5200   中楼层(共6层)    2004年建板楼       东 北  2017.07.20        41             距离6号线慈寿寺站667米 随时看房 自供暖  https://bj.lianjia.com/zufang/101101811584.html
20          望京租房      宝星园一区           大四居室   低于市场价  可办公 可居家       4室2厅  217平米  15000  低楼层(共23层)    2003年建塔楼         南  2017.07.23        32                       随时看房 精装修 自供暖  https://bj.lianjia.com/zufang/101101603861.html
21          望京租房    融科橄榄城三期         融科两居室，精装家具家电齐全，随时入住，采光好       2室1厅   95平米  12000  低楼层(共27层)    2009年建板楼         南  2017.07.19        32                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101641236.html
22         酒仙桥租房       卡布其诺            全南两居 东西通透 直观小区花园 观景房       2室1厅   90平米   8800   中楼层(共9层)    2005年建板楼         南  2017.07.27        50                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101712757.html
23          官园租房       官苑8号            官苑8号 精装西南三居可以长租，看房随时       3室2厅  121平米  21500  中楼层(共16层)  2007年建板塔结合       南 西  2017.07.25        61            距离2号线车公庄站773米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101583407.html
24         北大地租房     西安街4号院      精装三改二大两居 南北通透 希望客户能把它当自己的家       2室1厅   83平米   4500   高楼层(共6层)    1989年建板楼       南 北  2017.07.22        27                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101601709.html
25         回龙观租房        佰嘉城              佰嘉城一层三居室 户型方正 南北通透       3室1厅  119平米   6300   低楼层(共6层)    2006年建板楼       南 北  2017.07.22        25                       随时看房 精装修 自供暖  https://bj.lianjia.com/zufang/101101726428.html
26         广安门租房        朗琴园            广安门朗琴园精装开间 随时入住 交通方便       1室0厅   58平米   5600  中楼层(共29层)    2006年建塔楼         西  2017.07.25        30         距离7号线达官营站731米 随时看房 精装修 自供暖  https://bj.lianjia.com/zufang/101101692994.html
27        鼓楼大街租房      金隅万科城           金隅万科城 三居室 家具家电齐全 诚意出租       3室1厅   88平米   4800  低楼层(共26层)  2012年建板塔结合       南 北  2017.07.26        31                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101612398.html
28         紫竹桥租房  西三环北路89号院            花园桥 南北两居 家具家电齐全 拎包入住       2室1厅   54平米   6000   高楼层(共6层)    1987年建板楼       南 北  2017.07.26        31            距离6号线花园桥站620米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101567440.html
29         六里桥租房       京铁家园     地铁1号线五棵松站 京铁家园精装两居室 东南向 有钥匙       2室1厅  107平米   6000  中楼层(共22层)    2002年建塔楼        东南  2017.07.22        32                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101647855.html
...          ...        ...                             ...        ...    ...    ...        ...         ...       ...         ...       ...                                ...                                              ...
2730       安定门租房   朗家胡同13号院             安定门内 南北通透一居室 家具家电齐全       1室1厅   40平米   4500   高楼层(共6层)    1990年建板楼       南 北  2017.07.26        11           距离2号线鼓楼大街站774米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101739270.html
2731        东关租房      清秀园北区                 楼龄新，精装修，可直接拎包入住       1室0厅   59平米   2500  高楼层(共19层)    2003年建塔楼         西  2017.07.27        15         距离昌平线昌平站810米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101739341.html
2732       西坝河租房      光熙门北里                光熙门北里 3室1厅 7300元       3室1厅   68平米   7300  低楼层(共22层)    1991年建塔楼       南 北  2017.07.26        12           距离13号线光熙门站471米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101739485.html
2733      建国门外租房      地杰长安驿                东二环 地杰长安驿 南向高层开间       1室0厅   45平米   8500  中楼层(共27层)    2007年建塔楼         南  2017.07.27         9        距离1号线永安里站712米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101739616.html
2734       临河里租房      海棠湾二期             海棠湾精装两居随时看房随时签约拎包入住       2室1厅   88平米   5500  中楼层(共20层)  2011年建板塔结合       南 北  2017.07.16        10                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101739983.html
2735      滨河西区租房       永兴小区            永兴小区  南北向       两 居室       2室1厅   79平米   2900   高楼层(共6层)    2000年建板楼       南 北  2017.07.26         9                          随时看房 集中供暖  https://bj.lianjia.com/zufang/101101735385.html
2736       定福庄租房       妇联小区                东南朝向，装修较好，通风比较好。       1室1厅   46平米   3500  低楼层(共16层)    1995年建塔楼        东南  2017.07.23        16                          随时看房 集中供暖  https://bj.lianjia.com/zufang/101101738106.html
2737       公主坟租房      水利新宿舍           水利新宿舍东南朝向大两居复式结构带出租车位       2室2厅  138平米  15000  低楼层(共28层)    1995年建塔楼        东南  2017.07.27         9        距离1号线公主坟站748米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101705949.html
2738        良乡租房      北潞春家园                北潞春家园 5室3厅 4500元       5室3厅  196平米   4500   高楼层(共6层)    2000年建板楼       南 北  2017.07.24        10                       随时看房 精装修 自供暖  https://bj.lianjia.com/zufang/101101631061.html
2739      西关环岛租房       秋实家园              精装修，南北通透两居室，家具家电齐全       2室1厅   81平米   2300   高楼层(共5层)    2002年建板楼       南 北  2017.07.22         7                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101632293.html
2740       酒仙桥租房       丽都水岸                 丽都水岸小区，一层带花园三居室       3室2厅  167平米  25000  低楼层(共20层)    2005年建塔楼     东南 西北  2017.07.20         9    距离14号线(东段)将台站648米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101636553.html
2741        潞苑租房        上潞园           上潞园精装一居改两居室  业主诚租看房方便       2室1厅   57平米   2200   高楼层(共6层)    2004年建板楼         东  2017.07.25         5                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101655660.html
2742        良乡租房      嘉瑞通小区                嘉瑞通小区 2室1厅 2600元       2室1厅   92平米   2600  低楼层(共15层)    2006年建塔楼       南 西  2017.07.19        13       距离房山线良乡南关站165米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101660289.html
2743        朝青租房     银谷美泉家园               朝青 花园社区 银谷美泉 精装三居       3室2厅  142平米  13000   中楼层(共7层)    2008年建板楼       南 北  2017.07.24         6                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101584316.html
2744        朝青租房       润枫水尚                润枫水尚 2室1厅 10000元       2室1厅  121平米  10000  低楼层(共14层)    2008年建板楼       南 北  2017.07.21        34        距离6号线青年路站829米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101283618.html
2745        新宫租房       飞腾家园                 飞腾家园 3室1厅 4000元       3室1厅   91平米   4000   高楼层(共6层)    2004年建板楼       南 北  2017.07.22        17                           随时看房 自供暖  https://bj.lianjia.com/zufang/101101677753.html
2746    奥林匹克公园租房        京师园                 京师园 3室1厅 14000元       3室1厅  147平米  14000  低楼层(共21层)  2004年建板塔结合       东 南  2017.07.20        13        距离8号线林萃桥站781米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101692633.html
2747        朝青租房      青年汇佳园                青年汇佳园一居室诚意出租七月到期       1室1厅   65平米   6300  低楼层(共13层)  2008年建板塔结合     南 西 北  2017.07.26        17        距离6号线青年路站458米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101693532.html
2748  九棵树(家乐福)租房        大方居                大方居简装西向两居室 家电家具齐       2室1厅   89平米   3100  低楼层(共22层)  2008年建板塔结合         西  2017.07.26         9                          随时看房 集中供暖  https://bj.lianjia.com/zufang/101101694062.html
2749       天通苑租房     天通苑北二区             天通苑北二区电梯高层 精装修 观景高层       2室1厅  103平米   5000  高楼层(共12层)    2005年建板楼        西南  2017.07.27        14                          随时看房 集中供暖  https://bj.lianjia.com/zufang/101101694097.html
2750      朝阳门外租房       麒麟公馆                麒麟公馆 2室1厅 18500元       2室1厅   95平米  18500  低楼层(共24层)  2010年建板塔结合       南 北  2017.07.23        14        距离2号线朝阳门站801米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101696313.html
2751       芍药居租房        芍药居           芍药居 中煤信息大厦 精装南北2居 有车位       2室1厅   75平米   7500  高楼层(共14层)  2000年建板塔结合       南 北  2017.07.18         7       距离13号线芍药居站947米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101696415.html
2752       双榆树租房      双榆树东里         南北通透三居室，业主可以接受长租，家具家电齐全       3室1厅   81平米  10000  中楼层(共12层)  1990年建板塔结合       南 北  2017.07.19         8           距离4号线人民大学站735米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101697415.html
2753        红庙租房      延静里中街        房子是双南向的小两居 ，楼层低，最重要的是价格低       2室0厅   46平米   5200   低楼层(共6层)    1984年建板楼         南  2017.07.27        13                          随时看房 集中供暖  https://bj.lianjia.com/zufang/101101697453.html
2754       西三旗租房       知本时代       知本时代精装北向开间，有电梯，距离地铁近，看房方便       1室0厅   42平米   4000  高楼层(共15层)  2003年建板塔结合         北  2017.07.27        16        距离8号线霍营站1144米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101697749.html
2755        朝青租房      天鹅湾北区                天鹅湾北区 1室1厅 9500元       1室1厅   50平米   9500   中楼层(共8层)  2010年建板塔结合         南  2017.07.27        13        距离6号线青年路站736米 随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101697995.html
2756       太阳宫租房        水星园        水星园精装一居室  可自带家具家电 业主也可配齐       1室1厅   68平米   9500  中楼层(共23层)  2005年建板塔结合         北  2017.07.24        14           距离10号线太阳宫站432米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101698013.html
2757       六里桥租房       莲花小区            莲花小区 西南两居室 温馨舒适 楼层合适       2室1厅   84平米   7200  低楼层(共28层)  1999年建板塔结合        西南  2017.07.26         7           距离10号线莲花桥站661米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101702130.html
2758       陶然亭租房     中海紫御公馆              中海紫御公馆  把您的家安放在花园里       2室2厅   91平米  12000  中楼层(共22层)  2010年建板塔结合         南  2017.07.26         6                      随时看房 精装修 集中供暖  https://bj.lianjia.com/zufang/101101703605.html
2759       三元桥租房        曙光里                曙光里南向 高层两居室 随时看房       2室1厅   62平米   6200  高楼层(共18层)    1992年建塔楼         南  2017.07.25        19            距离机场线三元桥站980米 随时看房 集中供暖  https://bj.lianjia.com/zufang/101101704735.html

[2760 rows x 13 columns]&gt;



```python
df.shape



(2760, 13)



```python
df.info() # build_time 2758 说明有两个缺失值

&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 2760 entries, 0 to 2759
Data columns (total 13 columns):
district       2760 non-null object
address        2760 non-null object
title          2760 non-null object
house_type     2760 non-null object
area           2760 non-null object
price          2760 non-null int64
floor          2760 non-null object
build_time     2758 non-null object
direction      2760 non-null object
update_time    2760 non-null object
view_num       2760 non-null int64
extra_info     2760 non-null object
link           2760 non-null object
dtypes: int64(2), object(11)
memory usage: 280.4+ KB


```python
df.describe() # 只对数值型的列做统计
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>price</th>

      <th>view_num</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>count</th>

      <td>2760.000000</td>

      <td>2760.000000</td>

    </tr>

    <tr>

      <th>mean</th>

      <td>7570.800725</td>

      <td>13.448913</td>

    </tr>

    <tr>

      <th>std</th>

      <td>6316.204986</td>

      <td>12.746202</td>

    </tr>

    <tr>

      <th>min</th>

      <td>1300.000000</td>

      <td>0.000000</td>

    </tr>

    <tr>

      <th>25%</th>

      <td>4500.000000</td>

      <td>4.000000</td>

    </tr>

    <tr>

      <th>50%</th>

      <td>6000.000000</td>

      <td>10.000000</td>

    </tr>

    <tr>

      <th>75%</th>

      <td>8500.000000</td>

      <td>19.000000</td>

    </tr>

    <tr>

      <th>max</th>

      <td>210000.000000</td>

      <td>122.000000</td>

    </tr>

  </tbody>

</table>

</div>



<p>找到最便宜和最贵的房子</p>
<pre><code># 找最贵和最便宜的房子
df[df[&#39;price&#39;]==df[&#39;price&#39;].max()]
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>district</th>

      <th>address</th>

      <th>title</th>

      <th>house_type</th>

      <th>area</th>

      <th>price</th>

      <th>floor</th>

      <th>build_time</th>

      <th>direction</th>

      <th>update_time</th>

      <th>view_num</th>

      <th>extra_info</th>

      <th>link</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>2658</th>

      <td>和平里租房</td>

      <td>雍和家园二期</td>

      <td>雍和家园 底商出租 使用面积720米</td>

      <td>6室3厅</td>

      <td>720平米</td>

      <td>210000</td>

      <td>低楼层(共6层)</td>

      <td>2005年建板楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>21</td>

      <td>距离2号线雍和宫站293米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101672514.html</td>

    </tr>

  </tbody>

</table>

</div>



<pre><code>df[df[&#39;price&#39;]==df[&#39;price&#39;].min()]
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>district</th>

      <th>address</th>

      <th>title</th>

      <th>house_type</th>

      <th>area</th>

      <th>price</th>

      <th>floor</th>

      <th>build_time</th>

      <th>direction</th>

      <th>update_time</th>

      <th>view_num</th>

      <th>extra_info</th>

      <th>link</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>2527</th>

      <td>良乡租房</td>

      <td>伟业嘉园西里</td>

      <td>半地下室 家电齐全 集中供暖 简单装修</td>

      <td>1室1厅</td>

      <td>46平米</td>

      <td>1300</td>

      <td>地下室(共5层)</td>

      <td>2005年建</td>

      <td>南</td>

      <td>2017.07.19</td>

      <td>14</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101538484.html</td>

    </tr>

  </tbody>

</table>

</div>



<pre><code>df.sort_values(&#39;price&#39;).iloc[0, ] # 是个Series 效率比上面低



district                                                  良乡租房
address                                                 伟业嘉园西里
title                                     半地下室 家电齐全 集中供暖 简单装修 
house_type                                                1室1厅
area                                                      46平米
price                                                     1300
floor                                                 地下室(共5层)
build_time                                              2005年建
direction                                                    南
update_time                                         2017.07.19
view_num                                                    14
extra_info                                           随时看房 集中供暖
link           https://bj.lianjia.com/zufang/101101538484.html
Name: 2527, dtype: object



```python
df.sort_values(by=&#39;price&#39;).head(1) # 是个dataframe
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>district</th>

      <th>address</th>

      <th>title</th>

      <th>house_type</th>

      <th>area</th>

      <th>price</th>

      <th>floor</th>

      <th>build_time</th>

      <th>direction</th>

      <th>update_time</th>

      <th>view_num</th>

      <th>extra_info</th>

      <th>link</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>2527</th>

      <td>良乡租房</td>

      <td>伟业嘉园西里</td>

      <td>半地下室 家电齐全 集中供暖 简单装修</td>

      <td>1室1厅</td>

      <td>46平米</td>

      <td>1300</td>

      <td>地下室(共5层)</td>

      <td>2005年建</td>

      <td>南</td>

      <td>2017.07.19</td>

      <td>14</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101538484.html</td>

    </tr>

  </tbody>

</table>

</div>



<pre><code>df.nlargest(1, &#39;price&#39;)
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>district</th>

      <th>address</th>

      <th>title</th>

      <th>house_type</th>

      <th>area</th>

      <th>price</th>

      <th>floor</th>

      <th>build_time</th>

      <th>direction</th>

      <th>update_time</th>

      <th>view_num</th>

      <th>extra_info</th>

      <th>link</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>2658</th>

      <td>和平里租房</td>

      <td>雍和家园二期</td>

      <td>雍和家园 底商出租 使用面积720米</td>

      <td>6室3厅</td>

      <td>720平米</td>

      <td>210000</td>

      <td>低楼层(共6层)</td>

      <td>2005年建板楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>21</td>

      <td>距离2号线雍和宫站293米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101672514.html</td>

    </tr>

  </tbody>

</table>

</div>



<p>找到最近更新信息的20套房子</p>
<pre><code>df.nsmallest(1, &#39;price&#39;)
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }


</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>district</th>

      <th>address</th>

      <th>title</th>

      <th>house_type</th>

      <th>area</th>

      <th>price</th>

      <th>floor</th>

      <th>build_time</th>

      <th>direction</th>

      <th>update_time</th>

      <th>view_num</th>

      <th>extra_info</th>

      <th>link</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>2527</th>

      <td>良乡租房</td>

      <td>伟业嘉园西里</td>

      <td>半地下室 家电齐全 集中供暖 简单装修</td>

      <td>1室1厅</td>

      <td>46平米</td>

      <td>1300</td>

      <td>地下室(共5层)</td>

      <td>2005年建</td>

      <td>南</td>

      <td>2017.07.19</td>

      <td>14</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101538484.html</td>

    </tr>

  </tbody>

</table>

</div>



<pre><code>df.sort_values(by=&#39;update_time&#39;, ascending=False).head(20)
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }


</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>district</th>

      <th>address</th>

      <th>title</th>

      <th>house_type</th>

      <th>area</th>

      <th>price</th>

      <th>floor</th>

      <th>build_time</th>

      <th>direction</th>

      <th>update_time</th>

      <th>view_num</th>

      <th>extra_info</th>

      <th>link</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>347</th>

      <td>劲松租房</td>

      <td>武圣西里</td>

      <td>武圣西里正规三居室,低楼层,看房方便</td>

      <td>3室1厅</td>

      <td>73平米</td>

      <td>6500</td>

      <td>低楼层(共6层)</td>

      <td>1986年建板楼</td>

      <td>东南 北</td>

      <td>2017.07.27</td>

      <td>0</td>

      <td>距离10号线潘家园站965米 随时看房</td>

      <td>https://bj.lianjia.com/zufang/101101862495.html</td>

    </tr>

    <tr>

      <th>1790</th>

      <td>广安门租房</td>

      <td>恒昌花园</td>

      <td>广安门恒昌花园西向三居室集中供暖</td>

      <td>3室2厅</td>

      <td>159平米</td>

      <td>13500</td>

      <td>高楼层(共28层)</td>

      <td>1999年建塔楼</td>

      <td>西</td>

      <td>2017.07.27</td>

      <td>12</td>

      <td>距离7号线达官营站292米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101692254.html</td>

    </tr>

    <tr>

      <th>2405</th>

      <td>武夷花园租房</td>

      <td>月亮城堡</td>

      <td>月亮城堡精装修正规一居 南北通透 户型好</td>

      <td>1室1厅</td>

      <td>102平米</td>

      <td>4500</td>

      <td>低楼层(共11层)</td>

      <td>2005年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.27</td>

      <td>28</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101495373.html</td>

    </tr>

    <tr>

      <th>2639</th>

      <td>常营租房</td>

      <td>北京像素南区</td>

      <td>北京像素 地铁6号线草房 北向开间</td>

      <td>1房间1卫</td>

      <td>48平米</td>

      <td>3750</td>

      <td>低楼层(共23层)</td>

      <td>2012年建板塔结合</td>

      <td>北</td>

      <td>2017.07.27</td>

      <td>3</td>

      <td>距离6号线草房站66米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101852394.html</td>

    </tr>

    <tr>

      <th>2366</th>

      <td>马甸租房</td>

      <td>北太平庄路</td>

      <td>牡丹园精装一居室 可当两居 350米到10号线 南北通透</td>

      <td>1室1厅</td>

      <td>33平米</td>

      <td>4000</td>

      <td>低楼层(共5层)</td>

      <td>1985年建板楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>24</td>

      <td>距离10号线牡丹园站335米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101622752.html</td>

    </tr>

    <tr>

      <th>405</th>

      <td>东直门租房</td>

      <td>海运仓小区</td>

      <td>东四十条海运仓小区精装两居室诚意出租！</td>

      <td>2室1厅</td>

      <td>64平米</td>

      <td>8500</td>

      <td>中楼层(共8层)</td>

      <td>2002年建板楼</td>

      <td>东 西</td>

      <td>2017.07.27</td>

      <td>32</td>

      <td>距离2号线东四十条站808米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101731530.html</td>

    </tr>

    <tr>

      <th>2538</th>

      <td>四季青租房</td>

      <td>观澜国际</td>

      <td>观澜国际 带车位 二改三  家电齐全</td>

      <td>3室1厅</td>

      <td>122平米</td>

      <td>13000</td>

      <td>低楼层(共16层)</td>

      <td>2004年建板楼</td>

      <td>南 北</td>

      <td>2017.07.27</td>

      <td>13</td>

      <td>距离10号线车道沟站333米 随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101613246.html</td>

    </tr>

    <tr>

      <th>407</th>

      <td>武夷花园租房</td>

      <td>京贸国际城西区</td>

      <td>京贸国际城西区   全南两居室  家具家电齐全</td>

      <td>2室1厅</td>

      <td>91平米</td>

      <td>4100</td>

      <td>高楼层(共35层)</td>

      <td>2011年建塔楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>30</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101708896.html</td>

    </tr>

    <tr>

      <th>2033</th>

      <td>知春路租房</td>

      <td>罗庄西里</td>

      <td>罗庄西里两居室中等装修拎包即住</td>

      <td>2室1厅</td>

      <td>86平米</td>

      <td>8200</td>

      <td>高楼层(共18层)</td>

      <td>1998年建塔楼</td>

      <td>东南</td>

      <td>2017.07.27</td>

      <td>18</td>

      <td>距离10号线知春路站698米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101414799.html</td>

    </tr>

    <tr>

      <th>273</th>

      <td>小西天租房</td>

      <td>文慧园北路26号院</td>

      <td>小西天积水潭 文慧园北路26号院精装双南二居拎包入住</td>

      <td>2室0厅</td>

      <td>55平米</td>

      <td>5000</td>

      <td>中楼层(共14层)</td>

      <td>1989年建塔楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>22</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101777561.html</td>

    </tr>

    <tr>

      <th>2541</th>

      <td>梨园租房</td>

      <td>映翠居</td>

      <td>映翠居 一改二两居 房子空置 随时看房</td>

      <td>2室1厅</td>

      <td>63平米</td>

      <td>3000</td>

      <td>高楼层(共6层)</td>

      <td>2003年建板楼</td>

      <td>南 北</td>

      <td>2017.07.27</td>

      <td>3</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101641963.html</td>

    </tr>

    <tr>

      <th>2636</th>

      <td>武夷花园租房</td>

      <td>荔景园</td>

      <td>荔景园精装一居室带电梯居住舒适</td>

      <td>1室1厅</td>

      <td>61平米</td>

      <td>2900</td>

      <td>中楼层(共11层)</td>

      <td>2005年建板塔结合</td>

      <td>北</td>

      <td>2017.07.27</td>

      <td>0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101809324.html</td>

    </tr>

    <tr>

      <th>1737</th>

      <td>新华大街租房</td>

      <td>玉带河西街8号院</td>

      <td>朝南卧室采光好，交通生活便利。</td>

      <td>1室1厅</td>

      <td>51平米</td>

      <td>2500</td>

      <td>高楼层(共6层)</td>

      <td>1997年建板楼</td>

      <td>南 北</td>

      <td>2017.07.27</td>

      <td>0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101850645.html</td>

    </tr>

    <tr>

      <th>419</th>

      <td>六里桥租房</td>

      <td>铁路小区</td>

      <td>吴家场路铁路小区 两居室  户型好 采光好</td>

      <td>2室1厅</td>

      <td>75平米</td>

      <td>5500</td>

      <td>高楼层(共24层)</td>

      <td>1997年建塔楼</td>

      <td>西南</td>

      <td>2017.07.27</td>

      <td>23</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739575.html</td>

    </tr>

    <tr>

      <th>2404</th>

      <td>武夷花园租房</td>

      <td>紫荆园</td>

      <td>武夷花园紫荆园 南北通透两居室</td>

      <td>2室2厅</td>

      <td>88平米</td>

      <td>3300</td>

      <td>高楼层(共6层)</td>

      <td>2001年建板楼</td>

      <td>南 北</td>

      <td>2017.07.27</td>

      <td>18</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101429148.html</td>

    </tr>

    <tr>

      <th>423</th>

      <td>工体租房</td>

      <td>首开幸福广场</td>

      <td>首开幸福广场 精装修正规一居室 电梯房</td>

      <td>1室1厅</td>

      <td>92平米</td>

      <td>13000</td>

      <td>中楼层(共27层)</td>

      <td>2007年建板塔结合</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>33</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101744452.html</td>

    </tr>

    <tr>

      <th>2536</th>

      <td>玉泉营租房</td>

      <td>优筑</td>

      <td>丰台玉泉营 优筑正规两居室 空房适合办公</td>

      <td>2室1厅</td>

      <td>100平米</td>

      <td>5700</td>

      <td>低楼层(共16层)</td>

      <td>2007年建板楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>14</td>

      <td>距离10号线首经贸站1172米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101608168.html</td>

    </tr>

    <tr>

      <th>2535</th>

      <td>亚运村小营租房</td>

      <td>欧陆经典</td>

      <td>亚运村小营  欧陆经典 东南向三居室 精装修</td>

      <td>3室1厅</td>

      <td>105平米</td>

      <td>9200</td>

      <td>中楼层(共22层)</td>

      <td>1999年建塔楼</td>

      <td>东南</td>

      <td>2017.07.27</td>

      <td>14</td>

      <td>距离5号线惠新西街北口站1187米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101601904.html</td>

    </tr>

    <tr>

      <th>1793</th>

      <td>常营租房</td>

      <td>北京像素北区</td>

      <td>小区出行方便，配套健全，出行仅有200百米地铁</td>

      <td>3房间2卫</td>

      <td>39平米</td>

      <td>5000</td>

      <td>中楼层(共17层)</td>

      <td>2011年建板塔结合</td>

      <td>东</td>

      <td>2017.07.27</td>

      <td>24</td>

      <td>距离6号线草房站751米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101698620.html</td>

    </tr>

    <tr>

      <th>2534</th>

      <td>西关环岛租房</td>

      <td>蓝郡国际花园</td>

      <td>楼龄新，电梯房，地理位置优越，离地铁站近。</td>

      <td>1室1厅</td>

      <td>49平米</td>

      <td>2400</td>

      <td>中楼层(共15层)</td>

      <td>2009年建塔楼</td>

      <td>东</td>

      <td>2017.07.27</td>

      <td>30</td>

      <td>距离昌平线昌平站715米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101235454.html</td>

    </tr>

  </tbody>

</table>

</div>



<p>日期有哪些</p>
<pre><code>df[&#39;update_time&#39;].unique()



array([&#39;2017.07.21&#39;, &#39;2017.07.23&#39;, &#39;2017.07.20&#39;, &#39;2017.07.25&#39;,
       &#39;2017.07.26&#39;, &#39;2017.07.16&#39;, &#39;2017.07.22&#39;, &#39;2017.07.24&#39;,
       &#39;2017.07.27&#39;, &#39;2017.07.19&#39;, &#39;2017.07.14&#39;, &#39;2017.07.15&#39;,
       &#39;2017.07.17&#39;, &#39;2017.07.18&#39;], dtype=object)
</code></pre><p>平均看房人数</p>
<p>平均看房人数</p>
<pre><code>df[&#39;view_num&#39;].mean()



13.44891304347826




```python
df[&#39;view_num&#39;].median()



10.0




```python
df[&#39;view_num&#39;].value_counts()



0      152
1      149
4      147
2      143
7      136
3      129
6      129
9      127
5      119
10     105
8      103
12     102
11      97
13      94
14      71
18      64
15      61
19      56
17      52
16      52
23      51
22      46
21      45
26      43
24      43
20      39
30      39
27      32
25      30
29      28
      ... 
49       6
41       6
54       5
63       4
47       4
48       4
75       3
46       3
71       3
52       3
45       2
38       2
60       2
70       2
61       2
53       2
51       2
122      2
67       1
59       1
57       1
73       1
102      1
84       1
82       1
80       1
74       1
72       1
58       1
86       1
Name: view_num, Length: 74, dtype: int64




```python
tmp_df = df[&#39;view_num&#39;].value_counts().to_frame().reset_index()
tmp_df.columns=[&#39;view_num&#39;, &#39;count&#39;]
tmp_df
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }


</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>view_num</th>

      <th>count</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>0</th>

      <td>0</td>

      <td>152</td>

    </tr>

    <tr>

      <th>1</th>

      <td>1</td>

      <td>149</td>

    </tr>

    <tr>

      <th>2</th>

      <td>4</td>

      <td>147</td>

    </tr>

    <tr>

      <th>3</th>

      <td>2</td>

      <td>143</td>

    </tr>

    <tr>

      <th>4</th>

      <td>7</td>

      <td>136</td>

    </tr>

    <tr>

      <th>5</th>

      <td>3</td>

      <td>129</td>

    </tr>

    <tr>

      <th>6</th>

      <td>6</td>

      <td>129</td>

    </tr>

    <tr>

      <th>7</th>

      <td>9</td>

      <td>127</td>

    </tr>

    <tr>

      <th>8</th>

      <td>5</td>

      <td>119</td>

    </tr>

    <tr>

      <th>9</th>

      <td>10</td>

      <td>105</td>

    </tr>

    <tr>

      <th>10</th>

      <td>8</td>

      <td>103</td>

    </tr>

    <tr>

      <th>11</th>

      <td>12</td>

      <td>102</td>

    </tr>

    <tr>

      <th>12</th>

      <td>11</td>

      <td>97</td>

    </tr>

    <tr>

      <th>13</th>

      <td>13</td>

      <td>94</td>

    </tr>

    <tr>

      <th>14</th>

      <td>14</td>

      <td>71</td>

    </tr>

    <tr>

      <th>15</th>

      <td>18</td>

      <td>64</td>

    </tr>

    <tr>

      <th>16</th>

      <td>15</td>

      <td>61</td>

    </tr>

    <tr>

      <th>17</th>

      <td>19</td>

      <td>56</td>

    </tr>

    <tr>

      <th>18</th>

      <td>17</td>

      <td>52</td>

    </tr>

    <tr>

      <th>19</th>

      <td>16</td>

      <td>52</td>

    </tr>

    <tr>

      <th>20</th>

      <td>23</td>

      <td>51</td>

    </tr>

    <tr>

      <th>21</th>

      <td>22</td>

      <td>46</td>

    </tr>

    <tr>

      <th>22</th>

      <td>21</td>

      <td>45</td>

    </tr>

    <tr>

      <th>23</th>

      <td>26</td>

      <td>43</td>

    </tr>

    <tr>

      <th>24</th>

      <td>24</td>

      <td>43</td>

    </tr>

    <tr>

      <th>25</th>

      <td>20</td>

      <td>39</td>

    </tr>

    <tr>

      <th>26</th>

      <td>30</td>

      <td>39</td>

    </tr>

    <tr>

      <th>27</th>

      <td>27</td>

      <td>32</td>

    </tr>

    <tr>

      <th>28</th>

      <td>25</td>

      <td>30</td>

    </tr>

    <tr>

      <th>29</th>

      <td>29</td>

      <td>28</td>

    </tr>

    <tr>

      <th>...</th>

      <td>...</td>

      <td>...</td>

    </tr>

    <tr>

      <th>44</th>

      <td>49</td>

      <td>6</td>

    </tr>

    <tr>

      <th>45</th>

      <td>41</td>

      <td>6</td>

    </tr>

    <tr>

      <th>46</th>

      <td>54</td>

      <td>5</td>

    </tr>

    <tr>

      <th>47</th>

      <td>63</td>

      <td>4</td>

    </tr>

    <tr>

      <th>48</th>

      <td>47</td>

      <td>4</td>

    </tr>

    <tr>

      <th>49</th>

      <td>48</td>

      <td>4</td>

    </tr>

    <tr>

      <th>50</th>

      <td>75</td>

      <td>3</td>

    </tr>

    <tr>

      <th>51</th>

      <td>46</td>

      <td>3</td>

    </tr>

    <tr>

      <th>52</th>

      <td>71</td>

      <td>3</td>

    </tr>

    <tr>

      <th>53</th>

      <td>52</td>

      <td>3</td>

    </tr>

    <tr>

      <th>54</th>

      <td>45</td>

      <td>2</td>

    </tr>

    <tr>

      <th>55</th>

      <td>38</td>

      <td>2</td>

    </tr>

    <tr>

      <th>56</th>

      <td>60</td>

      <td>2</td>

    </tr>

    <tr>

      <th>57</th>

      <td>70</td>

      <td>2</td>

    </tr>

    <tr>

      <th>58</th>

      <td>61</td>

      <td>2</td>

    </tr>

    <tr>

      <th>59</th>

      <td>53</td>

      <td>2</td>

    </tr>

    <tr>

      <th>60</th>

      <td>51</td>

      <td>2</td>

    </tr>

    <tr>

      <th>61</th>

      <td>122</td>

      <td>2</td>

    </tr>

    <tr>

      <th>62</th>

      <td>67</td>

      <td>1</td>

    </tr>

    <tr>

      <th>63</th>

      <td>59</td>

      <td>1</td>

    </tr>

    <tr>

      <th>64</th>

      <td>57</td>

      <td>1</td>

    </tr>

    <tr>

      <th>65</th>

      <td>73</td>

      <td>1</td>

    </tr>

    <tr>

      <th>66</th>

      <td>102</td>

      <td>1</td>

    </tr>

    <tr>

      <th>67</th>

      <td>84</td>

      <td>1</td>

    </tr>

    <tr>

      <th>68</th>

      <td>82</td>

      <td>1</td>

    </tr>

    <tr>

      <th>69</th>

      <td>80</td>

      <td>1</td>

    </tr>

    <tr>

      <th>70</th>

      <td>74</td>

      <td>1</td>

    </tr>

    <tr>

      <th>71</th>

      <td>72</td>

      <td>1</td>

    </tr>

    <tr>

      <th>72</th>

      <td>58</td>

      <td>1</td>

    </tr>

    <tr>

      <th>73</th>

      <td>86</td>

      <td>1</td>

    </tr>

  </tbody>

</table>

<p>74 rows × 2 columns</p>

</div>



<pre><code>tmp_df.sort_values(by=&#39;view_num&#39;, inplace=True)
tmp_df
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }


</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>view_num</th>

      <th>count</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>0</th>

      <td>0</td>

      <td>152</td>

    </tr>

    <tr>

      <th>1</th>

      <td>1</td>

      <td>149</td>

    </tr>

    <tr>

      <th>3</th>

      <td>2</td>

      <td>143</td>

    </tr>

    <tr>

      <th>5</th>

      <td>3</td>

      <td>129</td>

    </tr>

    <tr>

      <th>2</th>

      <td>4</td>

      <td>147</td>

    </tr>

    <tr>

      <th>8</th>

      <td>5</td>

      <td>119</td>

    </tr>

    <tr>

      <th>6</th>

      <td>6</td>

      <td>129</td>

    </tr>

    <tr>

      <th>4</th>

      <td>7</td>

      <td>136</td>

    </tr>

    <tr>

      <th>10</th>

      <td>8</td>

      <td>103</td>

    </tr>

    <tr>

      <th>7</th>

      <td>9</td>

      <td>127</td>

    </tr>

    <tr>

      <th>9</th>

      <td>10</td>

      <td>105</td>

    </tr>

    <tr>

      <th>12</th>

      <td>11</td>

      <td>97</td>

    </tr>

    <tr>

      <th>11</th>

      <td>12</td>

      <td>102</td>

    </tr>

    <tr>

      <th>13</th>

      <td>13</td>

      <td>94</td>

    </tr>

    <tr>

      <th>14</th>

      <td>14</td>

      <td>71</td>

    </tr>

    <tr>

      <th>16</th>

      <td>15</td>

      <td>61</td>

    </tr>

    <tr>

      <th>19</th>

      <td>16</td>

      <td>52</td>

    </tr>

    <tr>

      <th>18</th>

      <td>17</td>

      <td>52</td>

    </tr>

    <tr>

      <th>15</th>

      <td>18</td>

      <td>64</td>

    </tr>

    <tr>

      <th>17</th>

      <td>19</td>

      <td>56</td>

    </tr>

    <tr>

      <th>25</th>

      <td>20</td>

      <td>39</td>

    </tr>

    <tr>

      <th>22</th>

      <td>21</td>

      <td>45</td>

    </tr>

    <tr>

      <th>21</th>

      <td>22</td>

      <td>46</td>

    </tr>

    <tr>

      <th>20</th>

      <td>23</td>

      <td>51</td>

    </tr>

    <tr>

      <th>24</th>

      <td>24</td>

      <td>43</td>

    </tr>

    <tr>

      <th>28</th>

      <td>25</td>

      <td>30</td>

    </tr>

    <tr>

      <th>23</th>

      <td>26</td>

      <td>43</td>

    </tr>

    <tr>

      <th>27</th>

      <td>27</td>

      <td>32</td>

    </tr>

    <tr>

      <th>31</th>

      <td>28</td>

      <td>28</td>

    </tr>

    <tr>

      <th>29</th>

      <td>29</td>

      <td>28</td>

    </tr>

    <tr>

      <th>...</th>

      <td>...</td>

      <td>...</td>

    </tr>

    <tr>

      <th>39</th>

      <td>44</td>

      <td>10</td>

    </tr>

    <tr>

      <th>54</th>

      <td>45</td>

      <td>2</td>

    </tr>

    <tr>

      <th>51</th>

      <td>46</td>

      <td>3</td>

    </tr>

    <tr>

      <th>48</th>

      <td>47</td>

      <td>4</td>

    </tr>

    <tr>

      <th>49</th>

      <td>48</td>

      <td>4</td>

    </tr>

    <tr>

      <th>44</th>

      <td>49</td>

      <td>6</td>

    </tr>

    <tr>

      <th>42</th>

      <td>50</td>

      <td>8</td>

    </tr>

    <tr>

      <th>60</th>

      <td>51</td>

      <td>2</td>

    </tr>

    <tr>

      <th>53</th>

      <td>52</td>

      <td>3</td>

    </tr>

    <tr>

      <th>59</th>

      <td>53</td>

      <td>2</td>

    </tr>

    <tr>

      <th>46</th>

      <td>54</td>

      <td>5</td>

    </tr>

    <tr>

      <th>64</th>

      <td>57</td>

      <td>1</td>

    </tr>

    <tr>

      <th>72</th>

      <td>58</td>

      <td>1</td>

    </tr>

    <tr>

      <th>63</th>

      <td>59</td>

      <td>1</td>

    </tr>

    <tr>

      <th>56</th>

      <td>60</td>

      <td>2</td>

    </tr>

    <tr>

      <th>58</th>

      <td>61</td>

      <td>2</td>

    </tr>

    <tr>

      <th>47</th>

      <td>63</td>

      <td>4</td>

    </tr>

    <tr>

      <th>62</th>

      <td>67</td>

      <td>1</td>

    </tr>

    <tr>

      <th>57</th>

      <td>70</td>

      <td>2</td>

    </tr>

    <tr>

      <th>52</th>

      <td>71</td>

      <td>3</td>

    </tr>

    <tr>

      <th>71</th>

      <td>72</td>

      <td>1</td>

    </tr>

    <tr>

      <th>65</th>

      <td>73</td>

      <td>1</td>

    </tr>

    <tr>

      <th>70</th>

      <td>74</td>

      <td>1</td>

    </tr>

    <tr>

      <th>50</th>

      <td>75</td>

      <td>3</td>

    </tr>

    <tr>

      <th>69</th>

      <td>80</td>

      <td>1</td>

    </tr>

    <tr>

      <th>68</th>

      <td>82</td>

      <td>1</td>

    </tr>

    <tr>

      <th>67</th>

      <td>84</td>

      <td>1</td>

    </tr>

    <tr>

      <th>73</th>

      <td>86</td>

      <td>1</td>

    </tr>

    <tr>

      <th>66</th>

      <td>102</td>

      <td>1</td>

    </tr>

    <tr>

      <th>61</th>

      <td>122</td>

      <td>2</td>

    </tr>

  </tbody>

</table>

<p>74 rows × 2 columns</p>

</div>



<pre><code>%matplotlib inline
tmp_df[&#39;count&#39;].plot(kind=&#39;bar&#39;)



&lt;matplotlib.axes._subplots.AxesSubplot at 0xbafaa90&gt;
</code></pre><p>房龄最小的20套房子的平均看房人数、平均面积</p>
<pre><code>df.sort_values(by=&#39;build_time&#39;, ascending=False)
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }


</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>district</th>

      <th>address</th>

      <th>title</th>

      <th>house_type</th>

      <th>area</th>

      <th>price</th>

      <th>floor</th>

      <th>build_time</th>

      <th>direction</th>

      <th>update_time</th>

      <th>view_num</th>

      <th>extra_info</th>

      <th>link</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>1202</th>

      <td>通州北苑租房</td>

      <td>杨庄北街2号院</td>

      <td>通州北苑城铁站 家电齐全三居室 只需4500</td>

      <td>3室2厅</td>

      <td>111平米</td>

      <td>4500</td>

      <td>低楼层(共6层)</td>

      <td>板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>7</td>

      <td>距离八通线通州北苑站674米 随时看房</td>

      <td>https://bj.lianjia.com/zufang/101101780999.html</td>

    </tr>

    <tr>

      <th>2680</th>

      <td>良乡租房</td>

      <td>瑞雪春堂</td>

      <td>此房源南北通透，采光好，无遮挡，电梯房。</td>

      <td>2室1厅</td>

      <td>83平米</td>

      <td>2800</td>

      <td>中楼层(共15层)</td>

      <td>板楼</td>

      <td>南 北</td>

      <td>2017.07.21</td>

      <td>3</td>

      <td>随时看房 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101607789.html</td>

    </tr>

    <tr>

      <th>1729</th>

      <td>新华大街租房</td>

      <td>玉带河东街387号院</td>

      <td>正规三居室，家具家电可配，价格可聊，业主很好相处</td>

      <td>3室1厅</td>

      <td>68平米</td>

      <td>3400</td>

      <td>高楼层(共6层)</td>

      <td>板楼</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>0</td>

      <td>随时看房</td>

      <td>https://bj.lianjia.com/zufang/101101832241.html</td>

    </tr>

    <tr>

      <th>1830</th>

      <td>知春路租房</td>

      <td>保利海德公园</td>

      <td>西土城保利海德公园装修不错的一居诚意出租</td>

      <td>2房间2卫</td>

      <td>38平米</td>

      <td>10500</td>

      <td>中楼层(共10层)</td>

      <td>2016年建板楼</td>

      <td>东</td>

      <td>2017.07.25</td>

      <td>30</td>

      <td>距离10号线西土城站155米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101632056.html</td>

    </tr>

    <tr>

      <th>1713</th>

      <td>天宫院租房</td>

      <td>明发雅苑</td>

      <td>明发雅苑，纯南向两居室，低楼层商品房</td>

      <td>2室1厅</td>

      <td>87平米</td>

      <td>3000</td>

      <td>低楼层(共26层)</td>

      <td>2015年建板楼</td>

      <td>南</td>

      <td>2017.07.24</td>

      <td>0</td>

      <td>距离4号线生物医药基地站953米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101848750.html</td>

    </tr>

    <tr>

      <th>1522</th>

      <td>海淀北部新区租房</td>

      <td>冠城大通百旺府</td>

      <td>冠城大通百旺府 婚房装修  随时看房</td>

      <td>3室2厅</td>

      <td>150平米</td>

      <td>10000</td>

      <td>中楼层(共7层)</td>

      <td>2015年建板楼</td>

      <td>南 北</td>

      <td>2017.07.27</td>

      <td>39</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101430780.html</td>

    </tr>

    <tr>

      <th>2691</th>

      <td>良乡租房</td>

      <td>新里程南区二期</td>

      <td>新里程二期 万科精装 品质社区</td>

      <td>3室1厅</td>

      <td>102平米</td>

      <td>3600</td>

      <td>高楼层(共12层)</td>

      <td>2015年建板楼</td>

      <td>南 北</td>

      <td>2017.07.21</td>

      <td>6</td>

      <td>距离房山线良乡大学城北站744米 随时看房 精装修</td>

      <td>https://bj.lianjia.com/zufang/101101693579.html</td>

    </tr>

    <tr>

      <th>1802</th>

      <td>天宫院租房</td>

      <td>住总万科橙</td>

      <td>住总万科橙精装两居南北通透空房</td>

      <td>2室1厅</td>

      <td>78平米</td>

      <td>3800</td>

      <td>中楼层(共18层)</td>

      <td>2015年建板楼</td>

      <td>南 北</td>

      <td>2017.07.23</td>

      <td>13</td>

      <td>距离4号线生物医药基地站283米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101733195.html</td>

    </tr>

    <tr>

      <th>1658</th>

      <td>望京租房</td>

      <td>臻园</td>

      <td>臻园 南北通透三居室 精装修   无遮挡</td>

      <td>3室2厅</td>

      <td>178平米</td>

      <td>20000</td>

      <td>低楼层(共16层)</td>

      <td>2015年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>7</td>

      <td>距离14号线(东段)来广营站363米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101451419.html</td>

    </tr>

    <tr>

      <th>2676</th>

      <td>鼓楼大街租房</td>

      <td>蔚府</td>

      <td>蔚云府 南北通透 精装修 三居室 电梯房</td>

      <td>3室1厅</td>

      <td>108平米</td>

      <td>5500</td>

      <td>中楼层(共16层)</td>

      <td>2015年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.23</td>

      <td>1</td>

      <td>距离昌平线昌平站487米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101657607.html</td>

    </tr>

    <tr>

      <th>356</th>

      <td>科技园区租房</td>

      <td>北京方向</td>

      <td>北京方向精装南北通透三居室随时看房随时入住</td>

      <td>3室1厅</td>

      <td>119平米</td>

      <td>8800</td>

      <td>中楼层(共19层)</td>

      <td>2015年建</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>21</td>

      <td>距离房山线郭公庄站97米 随时看房 精装修</td>

      <td>https://bj.lianjia.com/zufang/101101693142.html</td>

    </tr>

    <tr>

      <th>1857</th>

      <td>南邵租房</td>

      <td>花雨汀</td>

      <td>昌平花雨汀小区电梯房中高楼层精装修南北三居室</td>

      <td>3室1厅</td>

      <td>95平米</td>

      <td>3300</td>

      <td>高楼层(共15层)</td>

      <td>2014年建板楼</td>

      <td>南 北</td>

      <td>2017.07.23</td>

      <td>14</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101660411.html</td>

    </tr>

    <tr>

      <th>1977</th>

      <td>北苑租房</td>

      <td>天润福熙大道</td>

      <td>天润福熙大道 板楼两居+书房 精装修拎包入住 朝外旁</td>

      <td>2室1厅</td>

      <td>121平米</td>

      <td>9800</td>

      <td>中楼层(共27层)</td>

      <td>2014年建板楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>5</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101801980.html</td>

    </tr>

    <tr>

      <th>2429</th>

      <td>长阳租房</td>

      <td>中国铁建国际花园</td>

      <td>j精装修 空房 南北通透 高楼层</td>

      <td>3室1厅</td>

      <td>89平米</td>

      <td>3400</td>

      <td>高楼层(共18层)</td>

      <td>2014年建板楼</td>

      <td>南 北</td>

      <td>2017.07.21</td>

      <td>0</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101790974.html</td>

    </tr>

    <tr>

      <th>185</th>

      <td>南邵租房</td>

      <td>路劲世界城二期</td>

      <td>路劲世界城二期 三居室 有钥匙 看房方便</td>

      <td>3室1厅</td>

      <td>96平米</td>

      <td>4200</td>

      <td>高楼层(共10层)</td>

      <td>2014年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>2</td>

      <td>距离昌平线南邵站669米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101841675.html</td>

    </tr>

    <tr>

      <th>2484</th>

      <td>望京租房</td>

      <td>臻园</td>

      <td>臻园精装大两居 环境好 治安好 随时起租</td>

      <td>2室1厅</td>

      <td>91平米</td>

      <td>12000</td>

      <td>低楼层(共18层)</td>

      <td>2014年建板楼</td>

      <td>东南</td>

      <td>2017.07.25</td>

      <td>3</td>

      <td>距离14号线(东段)来广营站584米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101676304.html</td>

    </tr>

    <tr>

      <th>1948</th>

      <td>北苑租房</td>

      <td>天润福熙大道</td>

      <td>天润福熙大道 板楼两居+书房 精装修拎包入住 朝外旁</td>

      <td>2室1厅</td>

      <td>121平米</td>

      <td>9800</td>

      <td>中楼层(共27层)</td>

      <td>2014年建板楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>5</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101801980.html</td>

    </tr>

    <tr>

      <th>1745</th>

      <td>南邵租房</td>

      <td>花雨汀</td>

      <td>花雨汀 精装 电梯房 一居室 有钥匙随时看房</td>

      <td>1室1厅</td>

      <td>63平米</td>

      <td>2900</td>

      <td>低楼层(共15层)</td>

      <td>2014年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>1</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101859895.html</td>

    </tr>

    <tr>

      <th>1673</th>

      <td>回龙观租房</td>

      <td>首开国风美唐综合楼</td>

      <td>首开国风美唐综合楼，东向开间，随时可住，高层视野好</td>

      <td>1房间1卫</td>

      <td>46平米</td>

      <td>4200</td>

      <td>高楼层(共17层)</td>

      <td>2014年建板楼</td>

      <td>东</td>

      <td>2017.07.26</td>

      <td>35</td>

      <td>距离8号线霍营站240米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101631270.html</td>

    </tr>

    <tr>

      <th>1901</th>

      <td>新华大街租房</td>

      <td>京杭府</td>

      <td>京杭府 空中花园 观景房 精装三居室 万达广场</td>

      <td>3室2厅</td>

      <td>183平米</td>

      <td>12000</td>

      <td>低楼层(共36层)</td>

      <td>2014年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>3</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101771889.html</td>

    </tr>

    <tr>

      <th>1823</th>

      <td>西红门租房</td>

      <td>鸿坤理想城曦望山</td>

      <td>低入住率曦望山小区安静舒适空房三居随时入住</td>

      <td>3室2厅</td>

      <td>115平米</td>

      <td>6600</td>

      <td>低楼层(共18层)</td>

      <td>2014年建板楼</td>

      <td>南</td>

      <td>2017.07.19</td>

      <td>12</td>

      <td>随时看房 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101691463.html</td>

    </tr>

    <tr>

      <th>1951</th>

      <td>南邵租房</td>

      <td>花雨汀</td>

      <td>花雨汀  正规2居室 南北通透 看房随时</td>

      <td>2室1厅</td>

      <td>93平米</td>

      <td>3500</td>

      <td>高楼层(共6层)</td>

      <td>2014年建板楼</td>

      <td>南 北</td>

      <td>2017.07.25</td>

      <td>1</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101790686.html</td>

    </tr>

    <tr>

      <th>2215</th>

      <td>西三旗租房</td>

      <td>金隅翡丽爱公馆</td>

      <td>家电齐全全南一居看房方便随时入住</td>

      <td>1室1厅</td>

      <td>68平米</td>

      <td>4600</td>

      <td>中楼层(共18层)</td>

      <td>2014年建板塔结合</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>2</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101822102.html</td>

    </tr>

    <tr>

      <th>1902</th>

      <td>长阳租房</td>

      <td>长阳半岛怡和路3号院</td>

      <td>长阳地铁站 万科三居室 精装修</td>

      <td>3室1厅</td>

      <td>101平米</td>

      <td>4500</td>

      <td>低楼层(共18层)</td>

      <td>2014年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.18</td>

      <td>1</td>

      <td>距离房山线长阳站802米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101772449.html</td>

    </tr>

    <tr>

      <th>85</th>

      <td>回龙观租房</td>

      <td>首开国风美唐二期</td>

      <td>首开国风美唐二期 南北通透大两居  精装修</td>

      <td>2室2厅</td>

      <td>96平米</td>

      <td>7600</td>

      <td>高楼层(共16层)</td>

      <td>2014年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>13</td>

      <td>距离8号线回龙观东大街站217米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101813416.html</td>

    </tr>

    <tr>

      <th>2602</th>

      <td>北苑租房</td>

      <td>n次方</td>

      <td>13号线N次方 一居室  精装修 随时可用</td>

      <td>2房间1卫</td>

      <td>67平米</td>

      <td>4800</td>

      <td>高楼层(共18层)</td>

      <td>2014年建塔楼</td>

      <td>西</td>

      <td>2017.07.26</td>

      <td>7</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101801837.html</td>

    </tr>

    <tr>

      <th>1649</th>

      <td>后沙峪租房</td>

      <td>明德家园</td>

      <td>明德家园 2室1厅 5000元</td>

      <td>2室1厅</td>

      <td>91平米</td>

      <td>5000</td>

      <td>低楼层(共9层)</td>

      <td>2014年建</td>

      <td>南 北</td>

      <td>2017.07.16</td>

      <td>22</td>

      <td>随时看房</td>

      <td>https://bj.lianjia.com/zufang/101101536060.html</td>

    </tr>

    <tr>

      <th>2000</th>

      <td>潞苑租房</td>

      <td>中建红杉溪谷</td>

      <td>通州北关 中建红杉溪谷 新社区 环境好 人车分流 毛坯</td>

      <td>4室2厅</td>

      <td>207平米</td>

      <td>7000</td>

      <td>中楼层(共4层)</td>

      <td>2014年建</td>

      <td>南 北</td>

      <td>2017.07.27</td>

      <td>2</td>

      <td>随时看房 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101637814.html</td>

    </tr>

    <tr>

      <th>1847</th>

      <td>酒仙桥租房</td>

      <td>丽都壹号</td>

      <td>丽都壹号  精装复式出租   家具家电齐全   拎包住</td>

      <td>2室1厅</td>

      <td>60平米</td>

      <td>12000</td>

      <td>高楼层(共22层)</td>

      <td>2013年建板楼</td>

      <td>西北</td>

      <td>2017.07.24</td>

      <td>18</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101740809.html</td>

    </tr>

    <tr>

      <th>2652</th>

      <td>亦庄开发区其它租房</td>

      <td>中信新城西区</td>

      <td>中信新城西区三室两厅两卫业主诚心出租</td>

      <td>3室1厅</td>

      <td>144平米</td>

      <td>7200</td>

      <td>低楼层(共18层)</td>

      <td>2013年建板楼</td>

      <td>南 北</td>

      <td>2017.07.27</td>

      <td>9</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101700004.html</td>

    </tr>

    <tr>

      <th>...</th>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

    </tr>

    <tr>

      <th>2249</th>

      <td>和平里租房</td>

      <td>兴化西里</td>

      <td>兴化西里南北通透2居室，业主诚意出租</td>

      <td>2室1厅</td>

      <td>58平米</td>

      <td>6800</td>

      <td>低楼层(共5层)</td>

      <td>1976年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>4</td>

      <td>距离5号线和平里北街站474米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101829241.html</td>

    </tr>

    <tr>

      <th>2464</th>

      <td>五棵松租房</td>

      <td>六建</td>

      <td>六建 2室1厅 5000元</td>

      <td>2室1厅</td>

      <td>53平米</td>

      <td>5000</td>

      <td>中楼层(共5层)</td>

      <td>1976年建板楼</td>

      <td>南 北</td>

      <td>2017.07.25</td>

      <td>8</td>

      <td>距离1号线五棵松站642米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101812087.html</td>

    </tr>

    <tr>

      <th>765</th>

      <td>甘家口租房</td>

      <td>阜成路8号院</td>

      <td>航天部家属楼  精装修业 南北2居</td>

      <td>2室1厅</td>

      <td>51平米</td>

      <td>8500</td>

      <td>低楼层(共5层)</td>

      <td>1975年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>6</td>

      <td>距离9号线白堆子站607米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101850875.html</td>

    </tr>

    <tr>

      <th>195</th>

      <td>劲松租房</td>

      <td>垂杨柳南里</td>

      <td>垂杨柳南里 正规两居 双南户型 精装修</td>

      <td>2室1厅</td>

      <td>55平米</td>

      <td>5300</td>

      <td>低楼层(共6层)</td>

      <td>1974年建板楼</td>

      <td>南</td>

      <td>2017.07.18</td>

      <td>26</td>

      <td>距离7号线广渠门外站904米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101645973.html</td>

    </tr>

    <tr>

      <th>2283</th>

      <td>西三旗租房</td>

      <td>五机床厂宿舍</td>

      <td>五机床厂宿舍 看房方便 提前联系 两居室 价格实惠</td>

      <td>2室1厅</td>

      <td>44平米</td>

      <td>4000</td>

      <td>高楼层(共4层)</td>

      <td>1974年建板楼</td>

      <td>南</td>

      <td>2017.07.23</td>

      <td>1</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101826559.html</td>

    </tr>

    <tr>

      <th>1415</th>

      <td>广安门租房</td>

      <td>手帕口北街</td>

      <td>手帕口北街两居室，南北通透，价格低</td>

      <td>2室1厅</td>

      <td>50平米</td>

      <td>4800</td>

      <td>高楼层(共5层)</td>

      <td>1974年建板楼</td>

      <td>南 北</td>

      <td>2017.07.23</td>

      <td>6</td>

      <td>距离7号线达官营站552米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101846218.html</td>

    </tr>

    <tr>

      <th>583</th>

      <td>大山子租房</td>

      <td>北窑地</td>

      <td>酒仙桥 大山子 北窑地 798 360 两室 干净整洁</td>

      <td>2室1厅</td>

      <td>58平米</td>

      <td>5500</td>

      <td>中楼层(共5层)</td>

      <td>1974年建板楼</td>

      <td>南</td>

      <td>2017.07.23</td>

      <td>4</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101813854.html</td>

    </tr>

    <tr>

      <th>1409</th>

      <td>广安门租房</td>

      <td>手帕口北街</td>

      <td>手帕口北街两居室，南北通透，价格低</td>

      <td>2室1厅</td>

      <td>50平米</td>

      <td>4800</td>

      <td>高楼层(共5层)</td>

      <td>1974年建板楼</td>

      <td>南 北</td>

      <td>2017.07.23</td>

      <td>6</td>

      <td>距离7号线达官营站552米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101846218.html</td>

    </tr>

    <tr>

      <th>824</th>

      <td>西单租房</td>

      <td>西黄城根南街9号院</td>

      <td>西黄城根9号院  中等装修 可配置家具 灵境胡同地铁站</td>

      <td>3室1厅</td>

      <td>75平米</td>

      <td>12000</td>

      <td>高楼层(共4层)</td>

      <td>1973年建板楼</td>

      <td>南 北</td>

      <td>2017.07.27</td>

      <td>6</td>

      <td>距离4号线灵境胡同站487米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101852063.html</td>

    </tr>

    <tr>

      <th>2665</th>

      <td>永定门租房</td>

      <td>民主北街22号院</td>

      <td>永定门地铁站旁小一居 价格便宜 出行方便</td>

      <td>1室1厅</td>

      <td>35平米</td>

      <td>3600</td>

      <td>高楼层(共5层)</td>

      <td>1970年建板楼</td>

      <td>东</td>

      <td>2017.07.26</td>

      <td>10</td>

      <td>距离14号线(东段)永定门外站448米 随时看房</td>

      <td>https://bj.lianjia.com/zufang/101101727781.html</td>

    </tr>

    <tr>

      <th>1244</th>

      <td>蒲黄榆租房</td>

      <td>安乐林路</td>

      <td>简单装修一居室，看房方便，随时拎包入住。</td>

      <td>1室1厅</td>

      <td>48平米</td>

      <td>4300</td>

      <td>高楼层(共6层)</td>

      <td>1970年建板楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>7</td>

      <td>距离5号线蒲黄榆站321米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101761135.html</td>

    </tr>

    <tr>

      <th>2328</th>

      <td>天坛租房</td>

      <td>永定门东街中里</td>

      <td>天坛旁精装修两居室 全新家具家电拎包入住</td>

      <td>2室1厅</td>

      <td>49平米</td>

      <td>4800</td>

      <td>中楼层(共5层)</td>

      <td>1970年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>3</td>

      <td>随时看房 精装修</td>

      <td>https://bj.lianjia.com/zufang/101101821284.html</td>

    </tr>

    <tr>

      <th>2307</th>

      <td>永定门租房</td>

      <td>民主北街22号院</td>

      <td>距离14号线永定门外站100米，交通便利</td>

      <td>2室1厅</td>

      <td>51平米</td>

      <td>4300</td>

      <td>高楼层(共5层)</td>

      <td>1970年建板楼</td>

      <td>南</td>

      <td>2017.07.24</td>

      <td>4</td>

      <td>距离14号线(东段)永定门外站335米 随时看房</td>

      <td>https://bj.lianjia.com/zufang/101101804281.html</td>

    </tr>

    <tr>

      <th>2241</th>

      <td>永定门租房</td>

      <td>民主北街22号院</td>

      <td>距离14号线永定门外站100米，交通便利</td>

      <td>2室1厅</td>

      <td>51平米</td>

      <td>4300</td>

      <td>高楼层(共5层)</td>

      <td>1970年建板楼</td>

      <td>南</td>

      <td>2017.07.24</td>

      <td>4</td>

      <td>距离14号线(东段)永定门外站335米 随时看房</td>

      <td>https://bj.lianjia.com/zufang/101101804281.html</td>

    </tr>

    <tr>

      <th>2414</th>

      <td>左安门租房</td>

      <td>体育馆路</td>

      <td>二环里 东城区 体育馆路 正规两居室 东南向</td>

      <td>2室1厅</td>

      <td>48平米</td>

      <td>5300</td>

      <td>高楼层(共6层)</td>

      <td>1970年建板楼</td>

      <td>东 南</td>

      <td>2017.07.23</td>

      <td>23</td>

      <td>距离5号线天坛东门站360米 随时看房</td>

      <td>https://bj.lianjia.com/zufang/101101627386.html</td>

    </tr>

    <tr>

      <th>1681</th>

      <td>西单租房</td>

      <td>前门西大街</td>

      <td>朝南 两居室  集中供暖  近地铁</td>

      <td>2室0厅</td>

      <td>53平米</td>

      <td>6000</td>

      <td>低楼层(共9层)</td>

      <td>1970年建板楼</td>

      <td>南</td>

      <td>2017.07.22</td>

      <td>27</td>

      <td>距离2号线和平门站256米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101364714.html</td>

    </tr>

    <tr>

      <th>1545</th>

      <td>劲松租房</td>

      <td>垂杨柳西里</td>

      <td>简装两居室，小区环境优美安静0</td>

      <td>2室1厅</td>

      <td>49平米</td>

      <td>5500</td>

      <td>高楼层(共5层)</td>

      <td>1963年建板楼</td>

      <td>南 北</td>

      <td>2017.07.23</td>

      <td>4</td>

      <td>距离10号线劲松站924米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101811930.html</td>

    </tr>

    <tr>

      <th>1592</th>

      <td>劲松租房</td>

      <td>垂杨柳西里</td>

      <td>简装两居室，小区环境优美安静0</td>

      <td>2室1厅</td>

      <td>49平米</td>

      <td>5500</td>

      <td>高楼层(共5层)</td>

      <td>1963年建板楼</td>

      <td>南 北</td>

      <td>2017.07.23</td>

      <td>4</td>

      <td>距离10号线劲松站924米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101811930.html</td>

    </tr>

    <tr>

      <th>508</th>

      <td>阜成门租房</td>

      <td>百万庄2号院</td>

      <td>阜成门 车公庄 百万庄 家具家电齐两居室 价格合理</td>

      <td>2室1厅</td>

      <td>48平米</td>

      <td>5500</td>

      <td>高楼层(共6层)</td>

      <td>1962年建板楼</td>

      <td>东 西</td>

      <td>2017.07.21</td>

      <td>5</td>

      <td>距离2号线阜成门站623米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101748545.html</td>

    </tr>

    <tr>

      <th>537</th>

      <td>阜成门租房</td>

      <td>百万庄2号院</td>

      <td>阜成门 车公庄 百万庄 家具家电齐两居室 价格合理</td>

      <td>2室1厅</td>

      <td>48平米</td>

      <td>5500</td>

      <td>高楼层(共6层)</td>

      <td>1962年建板楼</td>

      <td>东 西</td>

      <td>2017.07.21</td>

      <td>5</td>

      <td>距离2号线阜成门站623米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101748545.html</td>

    </tr>

    <tr>

      <th>2289</th>

      <td>和平里租房</td>

      <td>和平街十三区</td>

      <td>和平街十三区 精诚实验2居室 业主诚租</td>

      <td>2室1厅</td>

      <td>64平米</td>

      <td>6200</td>

      <td>中楼层(共5层)</td>

      <td>1962年建板楼</td>

      <td>南 北</td>

      <td>2017.07.27</td>

      <td>4</td>

      <td>距离5号线和平西桥站1099米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101810565.html</td>

    </tr>

    <tr>

      <th>1953</th>

      <td>木樨地租房</td>

      <td>真武庙三里</td>

      <td>真武庙三里三居室，正规的三居室</td>

      <td>3室1厅</td>

      <td>92平米</td>

      <td>6500</td>

      <td>中楼层(共4层)</td>

      <td>1961年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>1</td>

      <td>距离1号线南礼士路站911米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101791924.html</td>

    </tr>

    <tr>

      <th>1925</th>

      <td>左安门租房</td>

      <td>龙潭北里四条</td>

      <td>龙潭湖公园 南北两居室 拎包入住 看房方便</td>

      <td>3室1厅</td>

      <td>56平米</td>

      <td>5500</td>

      <td>高楼层(共5层)</td>

      <td>1960年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>4</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101794066.html</td>

    </tr>

    <tr>

      <th>90</th>

      <td>甘家口租房</td>

      <td>甘家口8号院</td>

      <td>甘家口8号院 交通便利 精装修</td>

      <td>3室1厅</td>

      <td>99平米</td>

      <td>10000</td>

      <td>中楼层(共4层)</td>

      <td>1960年建板楼</td>

      <td>东 西</td>

      <td>2017.07.26</td>

      <td>19</td>

      <td>距离9号线白堆子站858米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101708968.html</td>

    </tr>

    <tr>

      <th>711</th>

      <td>木樨园租房</td>

      <td>东三亲家坟</td>

      <td>东三亲家坟精装大两居，随时入住</td>

      <td>2室1厅</td>

      <td>68平米</td>

      <td>4300</td>

      <td>中楼层(共6层)</td>

      <td>1959年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>30</td>

      <td>距离5号线刘家窑站1057米 随时看房 精装修</td>

      <td>https://bj.lianjia.com/zufang/101101457860.html</td>

    </tr>

    <tr>

      <th>2370</th>

      <td>和平里租房</td>

      <td>和平街十二区</td>

      <td>和平街十二区 南北通透2居 可以长租 临北三环</td>

      <td>2室1厅</td>

      <td>43平米</td>

      <td>5300</td>

      <td>低楼层(共4层)</td>

      <td>1959年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>16</td>

      <td>距离5号线和平西桥站947米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101720457.html</td>

    </tr>

    <tr>

      <th>56</th>

      <td>阜成门租房</td>

      <td>百万庄子区</td>

      <td>车公庄 百万庄子区 前后20平米的小院 精装修 拎包入住</td>

      <td>3室1厅</td>

      <td>73平米</td>

      <td>10000</td>

      <td>低楼层(共3层)</td>

      <td>1956年建板楼</td>

      <td>东北</td>

      <td>2017.07.17</td>

      <td>22</td>

      <td>距离6号线车公庄西站795米 随时看房 精装修</td>

      <td>https://bj.lianjia.com/zufang/101101798037.html</td>

    </tr>

    <tr>

      <th>1407</th>

      <td>小西天租房</td>

      <td>北三环中路34号院</td>

      <td>北师大北太平庄二居室双南向 看房有钥匙东西齐拎包住</td>

      <td>2室1厅</td>

      <td>66平米</td>

      <td>6400</td>

      <td>中楼层(共4层)</td>

      <td>1956年建板楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>1</td>

      <td>随时看房 精装修</td>

      <td>https://bj.lianjia.com/zufang/101101855625.html</td>

    </tr>

    <tr>

      <th>993</th>

      <td>玉泉营租房</td>

      <td>葛村西里</td>

      <td>葛村西里 正规两居室 业主诚心出租</td>

      <td>2室1厅</td>

      <td>48平米</td>

      <td>3500</td>

      <td>低楼层(共3层)</td>

      <td>NaN</td>

      <td>南</td>

      <td>2017.07.22</td>

      <td>17</td>

      <td>随时看房 精装修</td>

      <td>https://bj.lianjia.com/zufang/101101731645.html</td>

    </tr>

    <tr>

      <th>1749</th>

      <td>东关租房</td>

      <td>富康路11号</td>

      <td>中间楼层，家具家电齐全，南北通透</td>

      <td>3室1厅</td>

      <td>91平米</td>

      <td>3300</td>

      <td>中楼层(共6层)</td>

      <td>NaN</td>

      <td>南 北</td>

      <td>2017.07.27</td>

      <td>6</td>

      <td>随时看房 精装修</td>

      <td>https://bj.lianjia.com/zufang/101101562026.html</td>

    </tr>

  </tbody>

</table>

<p>2760 rows × 13 columns</p>

</div>



<pre><code>def get_front_4_num(x):
    try:
        return int(x[:4])
    except:
        return -1
df.loc[:,&#39;house_age&#39;] = 2018 - df[&#39;build_time&#39;].apply(get_front_4_num)
# df.drop(&#39;house_age&#39;, inplace=True)

# df[&#39;area&#39;] = df[&#39;area&#39;].apply(lambda x: x.replace(&#39;平米&#39;, &#39;&#39;)).apply(lambda x: float(x))
df
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }


</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>district</th>

      <th>address</th>

      <th>title</th>

      <th>house_type</th>

      <th>area</th>

      <th>price</th>

      <th>floor</th>

      <th>build_time</th>

      <th>direction</th>

      <th>update_time</th>

      <th>view_num</th>

      <th>extra_info</th>

      <th>link</th>

      <th>house_age</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>0</th>

      <td>燕莎租房</td>

      <td>新源街</td>

      <td>亮马桥 新源街  精装两居 交通便利 看房方便 随时入住</td>

      <td>2室1厅</td>

      <td>50.0</td>

      <td>5800.0</td>

      <td>中楼层(共6层)</td>

      <td>1981年建板楼</td>

      <td>南</td>

      <td>2017.07.21</td>

      <td>26.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101803342.html</td>

      <td>37</td>

    </tr>

    <tr>

      <th>1</th>

      <td>望京租房</td>

      <td>澳洲康都</td>

      <td>澳洲康都东向精致两居室...........</td>

      <td>2室1厅</td>

      <td>79.0</td>

      <td>7800.0</td>

      <td>中楼层(共28层)</td>

      <td>2005年建板塔结合</td>

      <td>东</td>

      <td>2017.07.23</td>

      <td>33.0</td>

      <td>距离14号线(东段)东湖渠站731米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101753126.html</td>

      <td>13</td>

    </tr>

    <tr>

      <th>2</th>

      <td>广安门租房</td>

      <td>远见名苑</td>

      <td>远见名苑 东向两居室 独立小区环境 适合居家</td>

      <td>2室1厅</td>

      <td>86.0</td>

      <td>8000.0</td>

      <td>低楼层(共25层)</td>

      <td>2006年建塔楼</td>

      <td>东</td>

      <td>2017.07.20</td>

      <td>34.0</td>

      <td>距离7号线达官营站684米 随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101756753.html</td>

      <td>12</td>

    </tr>

    <tr>

      <th>3</th>

      <td>天通苑租房</td>

      <td>天通苑北一区</td>

      <td>北一区简装两居，采光好，视野美，出行方便</td>

      <td>2室1厅</td>

      <td>103.0</td>

      <td>5300.0</td>

      <td>低楼层(共13层)</td>

      <td>2004年建板楼</td>

      <td>东南</td>

      <td>2017.07.25</td>

      <td>30.0</td>

      <td>距离5号线天通苑站927米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101780034.html</td>

      <td>14</td>

    </tr>

    <tr>

      <th>4</th>

      <td>团结湖租房</td>

      <td>团结湖北口</td>

      <td>团结湖北口近地铁高楼层朝南向精装修正规两居室</td>

      <td>2室1厅</td>

      <td>63.0</td>

      <td>6400.0</td>

      <td>高楼层(共16层)</td>

      <td>1982年建塔楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>30.0</td>

      <td>距离10号线团结湖站88米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101781083.html</td>

      <td>36</td>

    </tr>

    <tr>

      <th>5</th>

      <td>回龙观租房</td>

      <td>龙华园</td>

      <td>龙泽龙华园57平低楼层一居室家具家电齐全拎包入住</td>

      <td>1室1厅</td>

      <td>58.0</td>

      <td>4000.0</td>

      <td>低楼层(共6层)</td>

      <td>1994年建板楼</td>

      <td>南</td>

      <td>2017.07.23</td>

      <td>61.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101748994.html</td>

      <td>24</td>

    </tr>

    <tr>

      <th>6</th>

      <td>北苑租房</td>

      <td>筑华年</td>

      <td>筑华年西南小三居 靠谱出租 看房方便有钥匙</td>

      <td>3室1厅</td>

      <td>89.0</td>

      <td>7500.0</td>

      <td>高楼层(共24层)</td>

      <td>2012年建板楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>29.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101767631.html</td>

      <td>6</td>

    </tr>

    <tr>

      <th>7</th>

      <td>马甸租房</td>

      <td>月季园</td>

      <td>10号牡丹园站月季园小区 拎包入住 离梦想更近一点</td>

      <td>2室1厅</td>

      <td>53.0</td>

      <td>6000.0</td>

      <td>低楼层(共21层)</td>

      <td>1997年建塔楼</td>

      <td>南</td>

      <td>2017.07.16</td>

      <td>26.0</td>

      <td>距离10号线牡丹园站580米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101763532.html</td>

      <td>21</td>

    </tr>

    <tr>

      <th>8</th>

      <td>小西天租房</td>

      <td>今典花园</td>

      <td>花园社区，西直门 今典花园精装两居，诚心出售。</td>

      <td>2室1厅</td>

      <td>73.0</td>

      <td>8500.0</td>

      <td>中楼层(共25层)</td>

      <td>2004年建塔楼</td>

      <td>西</td>

      <td>2017.07.23</td>

      <td>44.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101758850.html</td>

      <td>14</td>

    </tr>

    <tr>

      <th>9</th>

      <td>北苑租房</td>

      <td>北苑家园绣菊园</td>

      <td>北苑东南两居室，可改三居 业主随时签约</td>

      <td>2室1厅</td>

      <td>82.0</td>

      <td>5300.0</td>

      <td>低楼层(共25层)</td>

      <td>2000年建塔楼</td>

      <td>东南</td>

      <td>2017.07.26</td>

      <td>30.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101779767.html</td>

      <td>18</td>

    </tr>

    <tr>

      <th>10</th>

      <td>和平里租房</td>

      <td>甘水桥</td>

      <td>北三环里   蒋宅口   安外甘水桥   正规三居室</td>

      <td>3室1厅</td>

      <td>76.0</td>

      <td>7600.0</td>

      <td>高楼层(共14层)</td>

      <td>1988年建板塔结合</td>

      <td>东 西</td>

      <td>2017.07.26</td>

      <td>24.0</td>

      <td>距离5号线和平里北街站1198米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101753337.html</td>

      <td>30</td>

    </tr>

    <tr>

      <th>11</th>

      <td>健翔桥租房</td>

      <td>华严北里中科院</td>

      <td>中科院 双南向 二居室 看房方便</td>

      <td>2室1厅</td>

      <td>60.0</td>

      <td>6300.0</td>

      <td>中楼层(共16层)</td>

      <td>1988年建塔楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>27.0</td>

      <td>距离10号线健德门站1056米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101758776.html</td>

      <td>30</td>

    </tr>

    <tr>

      <th>12</th>

      <td>看丹桥租房</td>

      <td>新华街七里</td>

      <td>低楼层带电梯两居室，交通便利，家电齐全</td>

      <td>2室1厅</td>

      <td>65.0</td>

      <td>4500.0</td>

      <td>低楼层(共24层)</td>

      <td>2000年建塔楼</td>

      <td>西北</td>

      <td>2017.07.22</td>

      <td>27.0</td>

      <td>距离9号线丰台南路站924米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101762732.html</td>

      <td>18</td>

    </tr>

    <tr>

      <th>13</th>

      <td>朝阳门内租房</td>

      <td>朝阳首府</td>

      <td>商品房  24小时保安 刷卡进出</td>

      <td>2室2厅</td>

      <td>104.0</td>

      <td>14500.0</td>

      <td>高楼层(共15层)</td>

      <td>2009年建塔楼</td>

      <td>东 东北</td>

      <td>2017.07.26</td>

      <td>34.0</td>

      <td>距离2号线朝阳门站94米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101755036.html</td>

      <td>9</td>

    </tr>

    <tr>

      <th>14</th>

      <td>双井租房</td>

      <td>富力城B区</td>

      <td>顶层大复式，带私人70平大露台，豪华装修，随时能看</td>

      <td>4室1厅</td>

      <td>253.0</td>

      <td>32000.0</td>

      <td>高楼层(共18层)</td>

      <td>2004年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>18.0</td>

      <td>距离10号线双井站498米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101751322.html</td>

      <td>14</td>

    </tr>

    <tr>

      <th>15</th>

      <td>刘家窑租房</td>

      <td>石榴园南里小区</td>

      <td>石榴园南里简装一居室，朝南采光好</td>

      <td>1室1厅</td>

      <td>47.0</td>

      <td>3700.0</td>

      <td>高楼层(共6层)</td>

      <td>1997年建板楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>23.0</td>

      <td>距离10号线石榴庄站752米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101807363.html</td>

      <td>21</td>

    </tr>

    <tr>

      <th>16</th>

      <td>紫竹桥租房</td>

      <td>北洼西里</td>

      <td>北洼路北洼西里精装修两居出租随时看房</td>

      <td>2室1厅</td>

      <td>74.0</td>

      <td>7000.0</td>

      <td>中楼层(共18层)</td>

      <td>1996年建塔楼</td>

      <td>东南</td>

      <td>2017.07.27</td>

      <td>27.0</td>

      <td>距离6号线慈寿寺站1166米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101827666.html</td>

      <td>22</td>

    </tr>

    <tr>

      <th>17</th>

      <td>甘家口租房</td>

      <td>建设部大院</td>

      <td>建设部大院  乙子区铁道部2001年楼龄  高楼层  精装修</td>

      <td>3室1厅</td>

      <td>100.0</td>

      <td>13000.0</td>

      <td>中楼层(共24层)</td>

      <td>2000年建塔楼</td>

      <td>西 北</td>

      <td>2017.07.26</td>

      <td>24.0</td>

      <td>距离6号线白石桥南站732米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101819163.html</td>

      <td>18</td>

    </tr>

    <tr>

      <th>18</th>

      <td>北苑租房</td>

      <td>新街坊</td>

      <td>地铁5号线、精装修一改二，看房方便</td>

      <td>2室1厅</td>

      <td>57.0</td>

      <td>5500.0</td>

      <td>低楼层(共18层)</td>

      <td>2004年建板塔结合</td>

      <td>东</td>

      <td>2017.07.27</td>

      <td>19.0</td>

      <td>距离5号线北苑路北站1130米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101822606.html</td>

      <td>14</td>

    </tr>

    <tr>

      <th>19</th>

      <td>四季青租房</td>

      <td>绿波漫板</td>

      <td>绿波漫板 东北向开间 带燃气 带家具家电 舒适宜人</td>

      <td>1室0厅</td>

      <td>43.0</td>

      <td>5200.0</td>

      <td>中楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>东 北</td>

      <td>2017.07.20</td>

      <td>41.0</td>

      <td>距离6号线慈寿寺站667米 随时看房 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101811584.html</td>

      <td>14</td>

    </tr>

    <tr>

      <th>20</th>

      <td>望京租房</td>

      <td>宝星园一区</td>

      <td>大四居室   低于市场价  可办公 可居家</td>

      <td>4室2厅</td>

      <td>217.0</td>

      <td>15000.0</td>

      <td>低楼层(共23层)</td>

      <td>2003年建塔楼</td>

      <td>南</td>

      <td>2017.07.23</td>

      <td>32.0</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101603861.html</td>

      <td>15</td>

    </tr>

    <tr>

      <th>21</th>

      <td>望京租房</td>

      <td>融科橄榄城三期</td>

      <td>融科两居室，精装家具家电齐全，随时入住，采光好</td>

      <td>2室1厅</td>

      <td>95.0</td>

      <td>12000.0</td>

      <td>低楼层(共27层)</td>

      <td>2009年建板楼</td>

      <td>南</td>

      <td>2017.07.19</td>

      <td>32.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101641236.html</td>

      <td>9</td>

    </tr>

    <tr>

      <th>22</th>

      <td>酒仙桥租房</td>

      <td>卡布其诺</td>

      <td>全南两居 东西通透 直观小区花园 观景房</td>

      <td>2室1厅</td>

      <td>90.0</td>

      <td>8800.0</td>

      <td>中楼层(共9层)</td>

      <td>2005年建板楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>50.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101712757.html</td>

      <td>13</td>

    </tr>

    <tr>

      <th>23</th>

      <td>官园租房</td>

      <td>官苑8号</td>

      <td>官苑8号 精装西南三居可以长租，看房随时</td>

      <td>3室2厅</td>

      <td>121.0</td>

      <td>21500.0</td>

      <td>中楼层(共16层)</td>

      <td>2007年建板塔结合</td>

      <td>南 西</td>

      <td>2017.07.25</td>

      <td>61.0</td>

      <td>距离2号线车公庄站773米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101583407.html</td>

      <td>11</td>

    </tr>

    <tr>

      <th>24</th>

      <td>北大地租房</td>

      <td>西安街4号院</td>

      <td>精装三改二大两居 南北通透 希望客户能把它当自己的家</td>

      <td>2室1厅</td>

      <td>83.0</td>

      <td>4500.0</td>

      <td>高楼层(共6层)</td>

      <td>1989年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>27.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101601709.html</td>

      <td>29</td>

    </tr>

    <tr>

      <th>25</th>

      <td>回龙观租房</td>

      <td>佰嘉城</td>

      <td>佰嘉城一层三居室 户型方正 南北通透</td>

      <td>3室1厅</td>

      <td>119.0</td>

      <td>6300.0</td>

      <td>低楼层(共6层)</td>

      <td>2006年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>25.0</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101726428.html</td>

      <td>12</td>

    </tr>

    <tr>

      <th>26</th>

      <td>广安门租房</td>

      <td>朗琴园</td>

      <td>广安门朗琴园精装开间 随时入住 交通方便</td>

      <td>1室0厅</td>

      <td>58.0</td>

      <td>5600.0</td>

      <td>中楼层(共29层)</td>

      <td>2006年建塔楼</td>

      <td>西</td>

      <td>2017.07.25</td>

      <td>30.0</td>

      <td>距离7号线达官营站731米 随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101692994.html</td>

      <td>12</td>

    </tr>

    <tr>

      <th>27</th>

      <td>鼓楼大街租房</td>

      <td>金隅万科城</td>

      <td>金隅万科城 三居室 家具家电齐全 诚意出租</td>

      <td>3室1厅</td>

      <td>88.0</td>

      <td>4800.0</td>

      <td>低楼层(共26层)</td>

      <td>2012年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>31.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101612398.html</td>

      <td>6</td>

    </tr>

    <tr>

      <th>28</th>

      <td>紫竹桥租房</td>

      <td>西三环北路89号院</td>

      <td>花园桥 南北两居 家具家电齐全 拎包入住</td>

      <td>2室1厅</td>

      <td>54.0</td>

      <td>6000.0</td>

      <td>高楼层(共6层)</td>

      <td>1987年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>31.0</td>

      <td>距离6号线花园桥站620米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101567440.html</td>

      <td>31</td>

    </tr>

    <tr>

      <th>29</th>

      <td>六里桥租房</td>

      <td>京铁家园</td>

      <td>地铁1号线五棵松站 京铁家园精装两居室 东南向 有钥匙</td>

      <td>2室1厅</td>

      <td>107.0</td>

      <td>6000.0</td>

      <td>中楼层(共22层)</td>

      <td>2002年建塔楼</td>

      <td>东南</td>

      <td>2017.07.22</td>

      <td>32.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101647855.html</td>

      <td>16</td>

    </tr>

    <tr>

      <th>...</th>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

    </tr>

    <tr>

      <th>2730</th>

      <td>安定门租房</td>

      <td>朗家胡同13号院</td>

      <td>安定门内 南北通透一居室 家具家电齐全</td>

      <td>1室1厅</td>

      <td>40.0</td>

      <td>4500.0</td>

      <td>高楼层(共6层)</td>

      <td>1990年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>11.0</td>

      <td>距离2号线鼓楼大街站774米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739270.html</td>

      <td>28</td>

    </tr>

    <tr>

      <th>2731</th>

      <td>东关租房</td>

      <td>清秀园北区</td>

      <td>楼龄新，精装修，可直接拎包入住</td>

      <td>1室0厅</td>

      <td>59.0</td>

      <td>2500.0</td>

      <td>高楼层(共19层)</td>

      <td>2003年建塔楼</td>

      <td>西</td>

      <td>2017.07.27</td>

      <td>15.0</td>

      <td>距离昌平线昌平站810米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739341.html</td>

      <td>15</td>

    </tr>

    <tr>

      <th>2732</th>

      <td>西坝河租房</td>

      <td>光熙门北里</td>

      <td>光熙门北里 3室1厅 7300元</td>

      <td>3室1厅</td>

      <td>68.0</td>

      <td>7300.0</td>

      <td>低楼层(共22层)</td>

      <td>1991年建塔楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>12.0</td>

      <td>距离13号线光熙门站471米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739485.html</td>

      <td>27</td>

    </tr>

    <tr>

      <th>2733</th>

      <td>建国门外租房</td>

      <td>地杰长安驿</td>

      <td>东二环 地杰长安驿 南向高层开间</td>

      <td>1室0厅</td>

      <td>45.0</td>

      <td>8500.0</td>

      <td>中楼层(共27层)</td>

      <td>2007年建塔楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>9.0</td>

      <td>距离1号线永安里站712米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739616.html</td>

      <td>11</td>

    </tr>

    <tr>

      <th>2734</th>

      <td>临河里租房</td>

      <td>海棠湾二期</td>

      <td>海棠湾精装两居随时看房随时签约拎包入住</td>

      <td>2室1厅</td>

      <td>88.0</td>

      <td>5500.0</td>

      <td>中楼层(共20层)</td>

      <td>2011年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.16</td>

      <td>10.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739983.html</td>

      <td>7</td>

    </tr>

    <tr>

      <th>2735</th>

      <td>滨河西区租房</td>

      <td>永兴小区</td>

      <td>永兴小区  南北向       两 居室</td>

      <td>2室1厅</td>

      <td>79.0</td>

      <td>2900.0</td>

      <td>高楼层(共6层)</td>

      <td>2000年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>9.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101735385.html</td>

      <td>18</td>

    </tr>

    <tr>

      <th>2736</th>

      <td>定福庄租房</td>

      <td>妇联小区</td>

      <td>东南朝向，装修较好，通风比较好。</td>

      <td>1室1厅</td>

      <td>46.0</td>

      <td>3500.0</td>

      <td>低楼层(共16层)</td>

      <td>1995年建塔楼</td>

      <td>东南</td>

      <td>2017.07.23</td>

      <td>16.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101738106.html</td>

      <td>23</td>

    </tr>

    <tr>

      <th>2737</th>

      <td>公主坟租房</td>

      <td>水利新宿舍</td>

      <td>水利新宿舍东南朝向大两居复式结构带出租车位</td>

      <td>2室2厅</td>

      <td>138.0</td>

      <td>15000.0</td>

      <td>低楼层(共28层)</td>

      <td>1995年建塔楼</td>

      <td>东南</td>

      <td>2017.07.27</td>

      <td>9.0</td>

      <td>距离1号线公主坟站748米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101705949.html</td>

      <td>23</td>

    </tr>

    <tr>

      <th>2738</th>

      <td>良乡租房</td>

      <td>北潞春家园</td>

      <td>北潞春家园 5室3厅 4500元</td>

      <td>5室3厅</td>

      <td>196.0</td>

      <td>4500.0</td>

      <td>高楼层(共6层)</td>

      <td>2000年建板楼</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>10.0</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101631061.html</td>

      <td>18</td>

    </tr>

    <tr>

      <th>2739</th>

      <td>西关环岛租房</td>

      <td>秋实家园</td>

      <td>精装修，南北通透两居室，家具家电齐全</td>

      <td>2室1厅</td>

      <td>81.0</td>

      <td>2300.0</td>

      <td>高楼层(共5层)</td>

      <td>2002年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>7.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101632293.html</td>

      <td>16</td>

    </tr>

    <tr>

      <th>2740</th>

      <td>酒仙桥租房</td>

      <td>丽都水岸</td>

      <td>丽都水岸小区，一层带花园三居室</td>

      <td>3室2厅</td>

      <td>167.0</td>

      <td>25000.0</td>

      <td>低楼层(共20层)</td>

      <td>2005年建塔楼</td>

      <td>东南 西北</td>

      <td>2017.07.20</td>

      <td>9.0</td>

      <td>距离14号线(东段)将台站648米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101636553.html</td>

      <td>13</td>

    </tr>

    <tr>

      <th>2741</th>

      <td>潞苑租房</td>

      <td>上潞园</td>

      <td>上潞园精装一居改两居室  业主诚租看房方便</td>

      <td>2室1厅</td>

      <td>57.0</td>

      <td>2200.0</td>

      <td>高楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>东</td>

      <td>2017.07.25</td>

      <td>5.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101655660.html</td>

      <td>14</td>

    </tr>

    <tr>

      <th>2742</th>

      <td>良乡租房</td>

      <td>嘉瑞通小区</td>

      <td>嘉瑞通小区 2室1厅 2600元</td>

      <td>2室1厅</td>

      <td>92.0</td>

      <td>2600.0</td>

      <td>低楼层(共15层)</td>

      <td>2006年建塔楼</td>

      <td>南 西</td>

      <td>2017.07.19</td>

      <td>13.0</td>

      <td>距离房山线良乡南关站165米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101660289.html</td>

      <td>12</td>

    </tr>

    <tr>

      <th>2743</th>

      <td>朝青租房</td>

      <td>银谷美泉家园</td>

      <td>朝青 花园社区 银谷美泉 精装三居</td>

      <td>3室2厅</td>

      <td>142.0</td>

      <td>13000.0</td>

      <td>中楼层(共7层)</td>

      <td>2008年建板楼</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>6.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101584316.html</td>

      <td>10</td>

    </tr>

    <tr>

      <th>2744</th>

      <td>朝青租房</td>

      <td>润枫水尚</td>

      <td>润枫水尚 2室1厅 10000元</td>

      <td>2室1厅</td>

      <td>121.0</td>

      <td>10000.0</td>

      <td>低楼层(共14层)</td>

      <td>2008年建板楼</td>

      <td>南 北</td>

      <td>2017.07.21</td>

      <td>34.0</td>

      <td>距离6号线青年路站829米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101283618.html</td>

      <td>10</td>

    </tr>

    <tr>

      <th>2745</th>

      <td>新宫租房</td>

      <td>飞腾家园</td>

      <td>飞腾家园 3室1厅 4000元</td>

      <td>3室1厅</td>

      <td>91.0</td>

      <td>4000.0</td>

      <td>高楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>17.0</td>

      <td>随时看房 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101677753.html</td>

      <td>14</td>

    </tr>

    <tr>

      <th>2746</th>

      <td>奥林匹克公园租房</td>

      <td>京师园</td>

      <td>京师园 3室1厅 14000元</td>

      <td>3室1厅</td>

      <td>147.0</td>

      <td>14000.0</td>

      <td>低楼层(共21层)</td>

      <td>2004年建板塔结合</td>

      <td>东 南</td>

      <td>2017.07.20</td>

      <td>13.0</td>

      <td>距离8号线林萃桥站781米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101692633.html</td>

      <td>14</td>

    </tr>

    <tr>

      <th>2747</th>

      <td>朝青租房</td>

      <td>青年汇佳园</td>

      <td>青年汇佳园一居室诚意出租七月到期</td>

      <td>1室1厅</td>

      <td>65.0</td>

      <td>6300.0</td>

      <td>低楼层(共13层)</td>

      <td>2008年建板塔结合</td>

      <td>南 西 北</td>

      <td>2017.07.26</td>

      <td>17.0</td>

      <td>距离6号线青年路站458米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101693532.html</td>

      <td>10</td>

    </tr>

    <tr>

      <th>2748</th>

      <td>九棵树(家乐福)租房</td>

      <td>大方居</td>

      <td>大方居简装西向两居室 家电家具齐</td>

      <td>2室1厅</td>

      <td>89.0</td>

      <td>3100.0</td>

      <td>低楼层(共22层)</td>

      <td>2008年建板塔结合</td>

      <td>西</td>

      <td>2017.07.26</td>

      <td>9.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101694062.html</td>

      <td>10</td>

    </tr>

    <tr>

      <th>2749</th>

      <td>天通苑租房</td>

      <td>天通苑北二区</td>

      <td>天通苑北二区电梯高层 精装修 观景高层</td>

      <td>2室1厅</td>

      <td>103.0</td>

      <td>5000.0</td>

      <td>高楼层(共12层)</td>

      <td>2005年建板楼</td>

      <td>西南</td>

      <td>2017.07.27</td>

      <td>14.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101694097.html</td>

      <td>13</td>

    </tr>

    <tr>

      <th>2750</th>

      <td>朝阳门外租房</td>

      <td>麒麟公馆</td>

      <td>麒麟公馆 2室1厅 18500元</td>

      <td>2室1厅</td>

      <td>95.0</td>

      <td>18500.0</td>

      <td>低楼层(共24层)</td>

      <td>2010年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.23</td>

      <td>14.0</td>

      <td>距离2号线朝阳门站801米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101696313.html</td>

      <td>8</td>

    </tr>

    <tr>

      <th>2751</th>

      <td>芍药居租房</td>

      <td>芍药居</td>

      <td>芍药居 中煤信息大厦 精装南北2居 有车位</td>

      <td>2室1厅</td>

      <td>75.0</td>

      <td>7500.0</td>

      <td>高楼层(共14层)</td>

      <td>2000年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.18</td>

      <td>7.0</td>

      <td>距离13号线芍药居站947米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101696415.html</td>

      <td>18</td>

    </tr>

    <tr>

      <th>2752</th>

      <td>双榆树租房</td>

      <td>双榆树东里</td>

      <td>南北通透三居室，业主可以接受长租，家具家电齐全</td>

      <td>3室1厅</td>

      <td>81.0</td>

      <td>10000.0</td>

      <td>中楼层(共12层)</td>

      <td>1990年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.19</td>

      <td>8.0</td>

      <td>距离4号线人民大学站735米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697415.html</td>

      <td>28</td>

    </tr>

    <tr>

      <th>2753</th>

      <td>红庙租房</td>

      <td>延静里中街</td>

      <td>房子是双南向的小两居 ，楼层低，最重要的是价格低</td>

      <td>2室0厅</td>

      <td>46.0</td>

      <td>5200.0</td>

      <td>低楼层(共6层)</td>

      <td>1984年建板楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>13.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697453.html</td>

      <td>34</td>

    </tr>

    <tr>

      <th>2754</th>

      <td>西三旗租房</td>

      <td>知本时代</td>

      <td>知本时代精装北向开间，有电梯，距离地铁近，看房方便</td>

      <td>1室0厅</td>

      <td>42.0</td>

      <td>4000.0</td>

      <td>高楼层(共15层)</td>

      <td>2003年建板塔结合</td>

      <td>北</td>

      <td>2017.07.27</td>

      <td>16.0</td>

      <td>距离8号线霍营站1144米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697749.html</td>

      <td>15</td>

    </tr>

    <tr>

      <th>2755</th>

      <td>朝青租房</td>

      <td>天鹅湾北区</td>

      <td>天鹅湾北区 1室1厅 9500元</td>

      <td>1室1厅</td>

      <td>50.0</td>

      <td>9500.0</td>

      <td>中楼层(共8层)</td>

      <td>2010年建板塔结合</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>13.0</td>

      <td>距离6号线青年路站736米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697995.html</td>

      <td>8</td>

    </tr>

    <tr>

      <th>2756</th>

      <td>太阳宫租房</td>

      <td>水星园</td>

      <td>水星园精装一居室  可自带家具家电 业主也可配齐</td>

      <td>1室1厅</td>

      <td>68.0</td>

      <td>9500.0</td>

      <td>中楼层(共23层)</td>

      <td>2005年建板塔结合</td>

      <td>北</td>

      <td>2017.07.24</td>

      <td>14.0</td>

      <td>距离10号线太阳宫站432米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101698013.html</td>

      <td>13</td>

    </tr>

    <tr>

      <th>2757</th>

      <td>六里桥租房</td>

      <td>莲花小区</td>

      <td>莲花小区 西南两居室 温馨舒适 楼层合适</td>

      <td>2室1厅</td>

      <td>84.0</td>

      <td>7200.0</td>

      <td>低楼层(共28层)</td>

      <td>1999年建板塔结合</td>

      <td>西南</td>

      <td>2017.07.26</td>

      <td>7.0</td>

      <td>距离10号线莲花桥站661米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101702130.html</td>

      <td>19</td>

    </tr>

    <tr>

      <th>2758</th>

      <td>陶然亭租房</td>

      <td>中海紫御公馆</td>

      <td>中海紫御公馆  把您的家安放在花园里</td>

      <td>2室2厅</td>

      <td>91.0</td>

      <td>12000.0</td>

      <td>中楼层(共22层)</td>

      <td>2010年建板塔结合</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>6.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101703605.html</td>

      <td>8</td>

    </tr>

    <tr>

      <th>2759</th>

      <td>三元桥租房</td>

      <td>曙光里</td>

      <td>曙光里南向 高层两居室 随时看房</td>

      <td>2室1厅</td>

      <td>62.0</td>

      <td>6200.0</td>

      <td>高楼层(共18层)</td>

      <td>1992年建塔楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>19.0</td>

      <td>距离机场线三元桥站980米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101704735.html</td>

      <td>26</td>

    </tr>

  </tbody>

</table>

<p>2760 rows × 14 columns</p>

</div>



<pre><code>df.sort_values(by=&#39;house_age&#39;).head(20)[[&#39;view_num&#39;, &#39;area&#39;]].mean()



view_num      8.45
area        106.00
dtype: float64




```python
ddf[&#39;area&#39;].apply(lambda x: x[:-2]).apply(lambda x: float(x)).mean()



106.0
</code></pre><p>房子价格的分布（平均、方差、中位数）</p>
<p>房子价格的分布（平均、方差、中位数）</p>
<pre><code>df[&#39;price&#39;].mean()



7570.800724637681




```python
df[&#39;price&#39;].std()



6316.204986067457




```python
df[&#39;price&#39;].median()



6000.0




```python
df[&#39;price&#39;].apply(np.mean, np.std, np.)
</code></pre><p>最受欢迎的朝向（看房人数）</p>
<pre><code>popular_direction = df.groupby(&#39;direction&#39;)[[&#39;view_num&#39;]].sum()
popular_direction = popular_direction.reset_index()

popular_direction[popular_direction[&#39;view_num&#39;]==popular_direction[&#39;view_num&#39;].max()]
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }


</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>direction</th>

      <th>view_num</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>23</th>

      <td>南 北</td>

      <td>11785.0</td>

    </tr>

  </tbody>

</table>

</div>



<p>房型数量分布</p>
<pre><code>house_type_dis = df.groupby([&#39;house_type&#39;]).count()

house_type_dis[&#39;district&#39;].plot(kind=&#39;bar&#39;)



&lt;matplotlib.axes._subplots.AxesSubplot at 0xbe22198&gt;
</code></pre><p>最受欢迎的房型</p>
<pre><code>tmp = df.groupby(&#39;house_type&#39;).agg({&#39;view_num&#39;: &#39;sum&#39;})

tmp = tmp.reset_index()

tmp[tmp[&#39;view_num&#39;]==tmp[&#39;view_num&#39;].max()]
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }


</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>house_type</th>

      <th>view_num</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>5</th>

      <td>2室1厅</td>

      <td>17589.0</td>

    </tr>

  </tbody>

</table>

</div>



<p>房子平均租房价格（按平米算）</p>
<pre><code>df[&#39;price_per_m2&#39;] = df[&#39;price&#39;]/df[&#39;area&#39;]

df[&#39;price_per_m2&#39;].mean()



87.72268429900429
</code></pre><p>最受欢迎的小区</p>
<p>最受欢迎的小区</p>
<pre><code>address_df = df[[&#39;address&#39;, &#39;view_num&#39;]].groupby([&#39;address&#39;]).sum()
address_df.reset_index(inplace=True)
address_df.sort_values(by=&#39;view_num&#39;, ascending=False)
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }


</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>address</th>

      <th>view_num</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>951</th>

      <td>清芷园</td>

      <td>246.0</td>

    </tr>

    <tr>

      <th>369</th>

      <td>卡布其诺</td>

      <td>245.0</td>

    </tr>

    <tr>

      <th>938</th>

      <td>润枫水尚</td>

      <td>217.0</td>

    </tr>

    <tr>

      <th>1149</th>

      <td>芍药居北里</td>

      <td>194.0</td>

    </tr>

    <tr>

      <th>743</th>

      <td>新康园</td>

      <td>186.0</td>

    </tr>

    <tr>

      <th>1288</th>

      <td>远洋山水</td>

      <td>184.0</td>

    </tr>

    <tr>

      <th>342</th>

      <td>华贸城</td>

      <td>176.0</td>

    </tr>

    <tr>

      <th>15</th>

      <td>万国城MOMA</td>

      <td>176.0</td>

    </tr>

    <tr>

      <th>1460</th>

      <td>龙华园</td>

      <td>171.0</td>

    </tr>

    <tr>

      <th>1182</th>

      <td>荣丰2008</td>

      <td>170.0</td>

    </tr>

    <tr>

      <th>971</th>

      <td>炫特嘉园一期</td>

      <td>163.0</td>

    </tr>

    <tr>

      <th>875</th>

      <td>椿树园</td>

      <td>158.0</td>

    </tr>

    <tr>

      <th>530</th>

      <td>天鹅湾北区</td>

      <td>150.0</td>

    </tr>

    <tr>

      <th>823</th>

      <td>望园东里</td>

      <td>144.0</td>

    </tr>

    <tr>

      <th>681</th>

      <td>当代城市家园</td>

      <td>137.0</td>

    </tr>

    <tr>

      <th>311</th>

      <td>北苑家园绣菊园</td>

      <td>133.0</td>

    </tr>

    <tr>

      <th>700</th>

      <td>恋日花都</td>

      <td>133.0</td>

    </tr>

    <tr>

      <th>450</th>

      <td>国美第一城3号院</td>

      <td>133.0</td>

    </tr>

    <tr>

      <th>1265</th>

      <td>财智公馆</td>

      <td>132.0</td>

    </tr>

    <tr>

      <th>380</th>

      <td>双榆树东里</td>

      <td>132.0</td>

    </tr>

    <tr>

      <th>541</th>

      <td>太阳公元</td>

      <td>130.0</td>

    </tr>

    <tr>

      <th>969</th>

      <td>澳洲康都</td>

      <td>128.0</td>

    </tr>

    <tr>

      <th>235</th>

      <td>六建</td>

      <td>128.0</td>

    </tr>

    <tr>

      <th>806</th>

      <td>曙光里</td>

      <td>126.0</td>

    </tr>

    <tr>

      <th>401</th>

      <td>后现代城</td>

      <td>125.0</td>

    </tr>

    <tr>

      <th>469</th>

      <td>塔院小区</td>

      <td>120.0</td>

    </tr>

    <tr>

      <th>1212</th>

      <td>裕中西里</td>

      <td>119.0</td>

    </tr>

    <tr>

      <th>1200</th>

      <td>蓝调沙龙东区</td>

      <td>119.0</td>

    </tr>

    <tr>

      <th>155</th>

      <td>丽都壹号</td>

      <td>118.0</td>

    </tr>

    <tr>

      <th>1390</th>

      <td>雅丽世居</td>

      <td>117.0</td>

    </tr>

    <tr>

      <th>...</th>

      <td>...</td>

      <td>...</td>

    </tr>

    <tr>

      <th>1300</th>

      <td>邑上苑</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>350</th>

      <td>南厂北区</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>393</th>

      <td>合生世界花园</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>391</th>

      <td>右外西三条</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>670</th>

      <td>建功北里</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>226</th>

      <td>光熙家园三期</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>1145</th>

      <td>良乡中路24号院</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>1141</th>

      <td>胡家园26号院</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>887</th>

      <td>武圣西里</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>882</th>

      <td>樱花园六区</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>1074</th>

      <td>福怡苑</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>119</th>

      <td>中国铁建国际花园</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>1076</th>

      <td>福顺里</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>851</th>

      <td>枣园北里</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>126</th>

      <td>中景理想家</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>831</th>

      <td>朝阳门内大街</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>1106</th>

      <td>绿城百合公寓叠翠苑</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>784</th>

      <td>星城国际</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>779</th>

      <td>明发雅苑</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>778</th>

      <td>昌盛园三区</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>158</th>

      <td>久居雅园</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>164</th>

      <td>九洲溪雅苑一区</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>1125</th>

      <td>翌景嘉园</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>165</th>

      <td>九洲溪雅苑二区</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>1130</th>

      <td>翠福园</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>383</th>

      <td>双河北里</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>191</th>

      <td>人民大学北路19号院</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>763</th>

      <td>方舟苑二期</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>758</th>

      <td>新风街</td>

      <td>0.0</td>

    </tr>

    <tr>

      <th>482</th>

      <td>大柳树13号院</td>

      <td>0.0</td>

    </tr>

  </tbody>

</table>

<p>1473 rows × 2 columns</p>

</div>



<p>出租房源最多的小区</p>
<pre><code>tmp_df2 = df[[&#39;address&#39;, &#39;view_num&#39;]].groupby([&#39;address&#39;]).count()
tmp_df2 = tmp_df2.reset_index()

tmp_df2.columns = [&#39;address&#39;, &#39;count&#39;]
tmp_df2
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }


</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>address</th>

      <th>count</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>0</th>

      <td>10AM新坐标</td>

      <td>3</td>

    </tr>

    <tr>

      <th>1</th>

      <td>11站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2</th>

      <td>BOBO自由城</td>

      <td>2</td>

    </tr>

    <tr>

      <th>3</th>

      <td>CBD总部公寓二期</td>

      <td>1</td>

    </tr>

    <tr>

      <th>4</th>

      <td>DBC加州小镇</td>

      <td>1</td>

    </tr>

    <tr>

      <th>5</th>

      <td>DBC加州小镇C区</td>

      <td>5</td>

    </tr>

    <tr>

      <th>6</th>

      <td>K2清水湾</td>

      <td>3</td>

    </tr>

    <tr>

      <th>7</th>

      <td>SOHO现代城</td>

      <td>2</td>

    </tr>

    <tr>

      <th>8</th>

      <td>UHN国际村</td>

      <td>4</td>

    </tr>

    <tr>

      <th>9</th>

      <td>gogo新世代</td>

      <td>2</td>

    </tr>

    <tr>

      <th>10</th>

      <td>n次方</td>

      <td>1</td>

    </tr>

    <tr>

      <th>11</th>

      <td>一世情园</td>

      <td>1</td>

    </tr>

    <tr>

      <th>12</th>

      <td>一品亦庄</td>

      <td>1</td>

    </tr>

    <tr>

      <th>13</th>

      <td>一栋苑</td>

      <td>1</td>

    </tr>

    <tr>

      <th>14</th>

      <td>七星园</td>

      <td>2</td>

    </tr>

    <tr>

      <th>15</th>

      <td>万国城MOMA</td>

      <td>5</td>

    </tr>

    <tr>

      <th>16</th>

      <td>万寿园</td>

      <td>1</td>

    </tr>

    <tr>

      <th>17</th>

      <td>万寿路26号院</td>

      <td>1</td>

    </tr>

    <tr>

      <th>18</th>

      <td>万寿路27号院</td>

      <td>1</td>

    </tr>

    <tr>

      <th>19</th>

      <td>万寿路甲15号院四区</td>

      <td>1</td>

    </tr>

    <tr>

      <th>20</th>

      <td>万寿路西街10号院</td>

      <td>1</td>

    </tr>

    <tr>

      <th>21</th>

      <td>万寿路西街11号院</td>

      <td>1</td>

    </tr>

    <tr>

      <th>22</th>

      <td>万年花城一期</td>

      <td>1</td>

    </tr>

    <tr>

      <th>23</th>

      <td>万年花城三期</td>

      <td>1</td>

    </tr>

    <tr>

      <th>24</th>

      <td>万年花城五期</td>

      <td>1</td>

    </tr>

    <tr>

      <th>25</th>

      <td>万年花城四期</td>

      <td>1</td>

    </tr>

    <tr>

      <th>26</th>

      <td>万年花城回迁</td>

      <td>2</td>

    </tr>

    <tr>

      <th>27</th>

      <td>万方家园</td>

      <td>1</td>

    </tr>

    <tr>

      <th>28</th>

      <td>万方景轩</td>

      <td>1</td>

    </tr>

    <tr>

      <th>29</th>

      <td>万泉庄1号院</td>

      <td>2</td>

    </tr>

    <tr>

      <th>...</th>

      <td>...</td>

      <td>...</td>

    </tr>

    <tr>

      <th>1443</th>

      <td>高井</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1444</th>

      <td>鲁能7号院颐景润园</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1445</th>

      <td>鸿业兴园一区</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1446</th>

      <td>鸿坤理想城大满贯</td>

      <td>8</td>

    </tr>

    <tr>

      <th>1447</th>

      <td>鸿坤理想城曦望山</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1448</th>

      <td>鸿坤理想城礼域府</td>

      <td>8</td>

    </tr>

    <tr>

      <th>1449</th>

      <td>鸿顺园东区</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1450</th>

      <td>鸿顺园西区</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1451</th>

      <td>鹿港嘉苑</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1452</th>

      <td>鹿鸣苑</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1453</th>

      <td>麒麟公馆</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1454</th>

      <td>黄寺大街24号院</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1455</th>

      <td>黄庄小区</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1456</th>

      <td>黄瓜园</td>

      <td>2</td>

    </tr>

    <tr>

      <th>1457</th>

      <td>鼎晟国际</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1458</th>

      <td>鼓楼外大街52号</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1459</th>

      <td>鼓楼西大街</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1460</th>

      <td>龙华园</td>

      <td>4</td>

    </tr>

    <tr>

      <th>1461</th>

      <td>龙博苑三区</td>

      <td>2</td>

    </tr>

    <tr>

      <th>1462</th>

      <td>龙回苑</td>

      <td>3</td>

    </tr>

    <tr>

      <th>1463</th>

      <td>龙城花园N区</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1464</th>

      <td>龙城花园北二区</td>

      <td>2</td>

    </tr>

    <tr>

      <th>1465</th>

      <td>龙湖蔚澜香醍</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1466</th>

      <td>龙湖香醍漫步四区南区</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1467</th>

      <td>龙潭北里四条</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1468</th>

      <td>龙翔路小区</td>

      <td>3</td>

    </tr>

    <tr>

      <th>1469</th>

      <td>龙腾苑二区</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1470</th>

      <td>龙腾苑四区</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1471</th>

      <td>龙锦苑东五区</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1472</th>

      <td>龙鼎园</td>

      <td>1</td>

    </tr>

  </tbody>

</table>

<p>1473 rows × 2 columns</p>

</div>



<pre><code>tmp_df2.nlargest(columns=&#39;count&#39;, n=1)
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }


</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>address</th>

      <th>count</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>1288</th>

      <td>远洋山水</td>

      <td>19</td>

    </tr>

  </tbody>

</table>

</div>



<p>出租房源最多的地区</p>
<p>集中供暖和非集中供暖的有多少家，平均价格是多少</p>
<pre><code>def center_heating(x):
    return 1 if &#39;集中供暖&#39; in x else 0
df.loc[:, &#39;center_heating&#39;] = df[&#39;extra_info&#39;].apply(lambda x: center_heating(x))
df
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }


</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>district</th>

      <th>address</th>

      <th>title</th>

      <th>house_type</th>

      <th>area</th>

      <th>price</th>

      <th>floor</th>

      <th>build_time</th>

      <th>direction</th>

      <th>update_time</th>

      <th>view_num</th>

      <th>extra_info</th>

      <th>link</th>

      <th>house_age</th>

      <th>price_per_m2</th>

      <th>center_heating</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>0</th>

      <td>燕莎租房</td>

      <td>新源街</td>

      <td>亮马桥 新源街  精装两居 交通便利 看房方便 随时入住</td>

      <td>2室1厅</td>

      <td>50.0</td>

      <td>5800.0</td>

      <td>中楼层(共6层)</td>

      <td>1981年建板楼</td>

      <td>南</td>

      <td>2017.07.21</td>

      <td>26.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101803342.html</td>

      <td>37</td>

      <td>116.000000</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1</th>

      <td>望京租房</td>

      <td>澳洲康都</td>

      <td>澳洲康都东向精致两居室...........</td>

      <td>2室1厅</td>

      <td>79.0</td>

      <td>7800.0</td>

      <td>中楼层(共28层)</td>

      <td>2005年建板塔结合</td>

      <td>东</td>

      <td>2017.07.23</td>

      <td>33.0</td>

      <td>距离14号线(东段)东湖渠站731米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101753126.html</td>

      <td>13</td>

      <td>98.734177</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2</th>

      <td>广安门租房</td>

      <td>远见名苑</td>

      <td>远见名苑 东向两居室 独立小区环境 适合居家</td>

      <td>2室1厅</td>

      <td>86.0</td>

      <td>8000.0</td>

      <td>低楼层(共25层)</td>

      <td>2006年建塔楼</td>

      <td>东</td>

      <td>2017.07.20</td>

      <td>34.0</td>

      <td>距离7号线达官营站684米 随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101756753.html</td>

      <td>12</td>

      <td>93.023256</td>

      <td>0</td>

    </tr>

    <tr>

      <th>3</th>

      <td>天通苑租房</td>

      <td>天通苑北一区</td>

      <td>北一区简装两居，采光好，视野美，出行方便</td>

      <td>2室1厅</td>

      <td>103.0</td>

      <td>5300.0</td>

      <td>低楼层(共13层)</td>

      <td>2004年建板楼</td>

      <td>东南</td>

      <td>2017.07.25</td>

      <td>30.0</td>

      <td>距离5号线天通苑站927米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101780034.html</td>

      <td>14</td>

      <td>51.456311</td>

      <td>1</td>

    </tr>

    <tr>

      <th>4</th>

      <td>团结湖租房</td>

      <td>团结湖北口</td>

      <td>团结湖北口近地铁高楼层朝南向精装修正规两居室</td>

      <td>2室1厅</td>

      <td>63.0</td>

      <td>6400.0</td>

      <td>高楼层(共16层)</td>

      <td>1982年建塔楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>30.0</td>

      <td>距离10号线团结湖站88米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101781083.html</td>

      <td>36</td>

      <td>101.587302</td>

      <td>1</td>

    </tr>

    <tr>

      <th>5</th>

      <td>回龙观租房</td>

      <td>龙华园</td>

      <td>龙泽龙华园57平低楼层一居室家具家电齐全拎包入住</td>

      <td>1室1厅</td>

      <td>58.0</td>

      <td>4000.0</td>

      <td>低楼层(共6层)</td>

      <td>1994年建板楼</td>

      <td>南</td>

      <td>2017.07.23</td>

      <td>61.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101748994.html</td>

      <td>24</td>

      <td>68.965517</td>

      <td>1</td>

    </tr>

    <tr>

      <th>6</th>

      <td>北苑租房</td>

      <td>筑华年</td>

      <td>筑华年西南小三居 靠谱出租 看房方便有钥匙</td>

      <td>3室1厅</td>

      <td>89.0</td>

      <td>7500.0</td>

      <td>高楼层(共24层)</td>

      <td>2012年建板楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>29.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101767631.html</td>

      <td>6</td>

      <td>84.269663</td>

      <td>1</td>

    </tr>

    <tr>

      <th>7</th>

      <td>马甸租房</td>

      <td>月季园</td>

      <td>10号牡丹园站月季园小区 拎包入住 离梦想更近一点</td>

      <td>2室1厅</td>

      <td>53.0</td>

      <td>6000.0</td>

      <td>低楼层(共21层)</td>

      <td>1997年建塔楼</td>

      <td>南</td>

      <td>2017.07.16</td>

      <td>26.0</td>

      <td>距离10号线牡丹园站580米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101763532.html</td>

      <td>21</td>

      <td>113.207547</td>

      <td>1</td>

    </tr>

    <tr>

      <th>8</th>

      <td>小西天租房</td>

      <td>今典花园</td>

      <td>花园社区，西直门 今典花园精装两居，诚心出售。</td>

      <td>2室1厅</td>

      <td>73.0</td>

      <td>8500.0</td>

      <td>中楼层(共25层)</td>

      <td>2004年建塔楼</td>

      <td>西</td>

      <td>2017.07.23</td>

      <td>44.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101758850.html</td>

      <td>14</td>

      <td>116.438356</td>

      <td>1</td>

    </tr>

    <tr>

      <th>9</th>

      <td>北苑租房</td>

      <td>北苑家园绣菊园</td>

      <td>北苑东南两居室，可改三居 业主随时签约</td>

      <td>2室1厅</td>

      <td>82.0</td>

      <td>5300.0</td>

      <td>低楼层(共25层)</td>

      <td>2000年建塔楼</td>

      <td>东南</td>

      <td>2017.07.26</td>

      <td>30.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101779767.html</td>

      <td>18</td>

      <td>64.634146</td>

      <td>1</td>

    </tr>

    <tr>

      <th>10</th>

      <td>和平里租房</td>

      <td>甘水桥</td>

      <td>北三环里   蒋宅口   安外甘水桥   正规三居室</td>

      <td>3室1厅</td>

      <td>76.0</td>

      <td>7600.0</td>

      <td>高楼层(共14层)</td>

      <td>1988年建板塔结合</td>

      <td>东 西</td>

      <td>2017.07.26</td>

      <td>24.0</td>

      <td>距离5号线和平里北街站1198米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101753337.html</td>

      <td>30</td>

      <td>100.000000</td>

      <td>1</td>

    </tr>

    <tr>

      <th>11</th>

      <td>健翔桥租房</td>

      <td>华严北里中科院</td>

      <td>中科院 双南向 二居室 看房方便</td>

      <td>2室1厅</td>

      <td>60.0</td>

      <td>6300.0</td>

      <td>中楼层(共16层)</td>

      <td>1988年建塔楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>27.0</td>

      <td>距离10号线健德门站1056米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101758776.html</td>

      <td>30</td>

      <td>105.000000</td>

      <td>1</td>

    </tr>

    <tr>

      <th>12</th>

      <td>看丹桥租房</td>

      <td>新华街七里</td>

      <td>低楼层带电梯两居室，交通便利，家电齐全</td>

      <td>2室1厅</td>

      <td>65.0</td>

      <td>4500.0</td>

      <td>低楼层(共24层)</td>

      <td>2000年建塔楼</td>

      <td>西北</td>

      <td>2017.07.22</td>

      <td>27.0</td>

      <td>距离9号线丰台南路站924米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101762732.html</td>

      <td>18</td>

      <td>69.230769</td>

      <td>1</td>

    </tr>

    <tr>

      <th>13</th>

      <td>朝阳门内租房</td>

      <td>朝阳首府</td>

      <td>商品房  24小时保安 刷卡进出</td>

      <td>2室2厅</td>

      <td>104.0</td>

      <td>14500.0</td>

      <td>高楼层(共15层)</td>

      <td>2009年建塔楼</td>

      <td>东 东北</td>

      <td>2017.07.26</td>

      <td>34.0</td>

      <td>距离2号线朝阳门站94米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101755036.html</td>

      <td>9</td>

      <td>139.423077</td>

      <td>1</td>

    </tr>

    <tr>

      <th>14</th>

      <td>双井租房</td>

      <td>富力城B区</td>

      <td>顶层大复式，带私人70平大露台，豪华装修，随时能看</td>

      <td>4室1厅</td>

      <td>253.0</td>

      <td>32000.0</td>

      <td>高楼层(共18层)</td>

      <td>2004年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>18.0</td>

      <td>距离10号线双井站498米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101751322.html</td>

      <td>14</td>

      <td>126.482213</td>

      <td>1</td>

    </tr>

    <tr>

      <th>15</th>

      <td>刘家窑租房</td>

      <td>石榴园南里小区</td>

      <td>石榴园南里简装一居室，朝南采光好</td>

      <td>1室1厅</td>

      <td>47.0</td>

      <td>3700.0</td>

      <td>高楼层(共6层)</td>

      <td>1997年建板楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>23.0</td>

      <td>距离10号线石榴庄站752米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101807363.html</td>

      <td>21</td>

      <td>78.723404</td>

      <td>1</td>

    </tr>

    <tr>

      <th>16</th>

      <td>紫竹桥租房</td>

      <td>北洼西里</td>

      <td>北洼路北洼西里精装修两居出租随时看房</td>

      <td>2室1厅</td>

      <td>74.0</td>

      <td>7000.0</td>

      <td>中楼层(共18层)</td>

      <td>1996年建塔楼</td>

      <td>东南</td>

      <td>2017.07.27</td>

      <td>27.0</td>

      <td>距离6号线慈寿寺站1166米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101827666.html</td>

      <td>22</td>

      <td>94.594595</td>

      <td>1</td>

    </tr>

    <tr>

      <th>17</th>

      <td>甘家口租房</td>

      <td>建设部大院</td>

      <td>建设部大院  乙子区铁道部2001年楼龄  高楼层  精装修</td>

      <td>3室1厅</td>

      <td>100.0</td>

      <td>13000.0</td>

      <td>中楼层(共24层)</td>

      <td>2000年建塔楼</td>

      <td>西 北</td>

      <td>2017.07.26</td>

      <td>24.0</td>

      <td>距离6号线白石桥南站732米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101819163.html</td>

      <td>18</td>

      <td>130.000000</td>

      <td>1</td>

    </tr>

    <tr>

      <th>18</th>

      <td>北苑租房</td>

      <td>新街坊</td>

      <td>地铁5号线、精装修一改二，看房方便</td>

      <td>2室1厅</td>

      <td>57.0</td>

      <td>5500.0</td>

      <td>低楼层(共18层)</td>

      <td>2004年建板塔结合</td>

      <td>东</td>

      <td>2017.07.27</td>

      <td>19.0</td>

      <td>距离5号线北苑路北站1130米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101822606.html</td>

      <td>14</td>

      <td>96.491228</td>

      <td>1</td>

    </tr>

    <tr>

      <th>19</th>

      <td>四季青租房</td>

      <td>绿波漫板</td>

      <td>绿波漫板 东北向开间 带燃气 带家具家电 舒适宜人</td>

      <td>1室0厅</td>

      <td>43.0</td>

      <td>5200.0</td>

      <td>中楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>东 北</td>

      <td>2017.07.20</td>

      <td>41.0</td>

      <td>距离6号线慈寿寺站667米 随时看房 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101811584.html</td>

      <td>14</td>

      <td>120.930233</td>

      <td>0</td>

    </tr>

    <tr>

      <th>20</th>

      <td>望京租房</td>

      <td>宝星园一区</td>

      <td>大四居室   低于市场价  可办公 可居家</td>

      <td>4室2厅</td>

      <td>217.0</td>

      <td>15000.0</td>

      <td>低楼层(共23层)</td>

      <td>2003年建塔楼</td>

      <td>南</td>

      <td>2017.07.23</td>

      <td>32.0</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101603861.html</td>

      <td>15</td>

      <td>69.124424</td>

      <td>0</td>

    </tr>

    <tr>

      <th>21</th>

      <td>望京租房</td>

      <td>融科橄榄城三期</td>

      <td>融科两居室，精装家具家电齐全，随时入住，采光好</td>

      <td>2室1厅</td>

      <td>95.0</td>

      <td>12000.0</td>

      <td>低楼层(共27层)</td>

      <td>2009年建板楼</td>

      <td>南</td>

      <td>2017.07.19</td>

      <td>32.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101641236.html</td>

      <td>9</td>

      <td>126.315789</td>

      <td>1</td>

    </tr>

    <tr>

      <th>22</th>

      <td>酒仙桥租房</td>

      <td>卡布其诺</td>

      <td>全南两居 东西通透 直观小区花园 观景房</td>

      <td>2室1厅</td>

      <td>90.0</td>

      <td>8800.0</td>

      <td>中楼层(共9层)</td>

      <td>2005年建板楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>50.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101712757.html</td>

      <td>13</td>

      <td>97.777778</td>

      <td>1</td>

    </tr>

    <tr>

      <th>23</th>

      <td>官园租房</td>

      <td>官苑8号</td>

      <td>官苑8号 精装西南三居可以长租，看房随时</td>

      <td>3室2厅</td>

      <td>121.0</td>

      <td>21500.0</td>

      <td>中楼层(共16层)</td>

      <td>2007年建板塔结合</td>

      <td>南 西</td>

      <td>2017.07.25</td>

      <td>61.0</td>

      <td>距离2号线车公庄站773米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101583407.html</td>

      <td>11</td>

      <td>177.685950</td>

      <td>1</td>

    </tr>

    <tr>

      <th>24</th>

      <td>北大地租房</td>

      <td>西安街4号院</td>

      <td>精装三改二大两居 南北通透 希望客户能把它当自己的家</td>

      <td>2室1厅</td>

      <td>83.0</td>

      <td>4500.0</td>

      <td>高楼层(共6层)</td>

      <td>1989年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>27.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101601709.html</td>

      <td>29</td>

      <td>54.216867</td>

      <td>1</td>

    </tr>

    <tr>

      <th>25</th>

      <td>回龙观租房</td>

      <td>佰嘉城</td>

      <td>佰嘉城一层三居室 户型方正 南北通透</td>

      <td>3室1厅</td>

      <td>119.0</td>

      <td>6300.0</td>

      <td>低楼层(共6层)</td>

      <td>2006年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>25.0</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101726428.html</td>

      <td>12</td>

      <td>52.941176</td>

      <td>0</td>

    </tr>

    <tr>

      <th>26</th>

      <td>广安门租房</td>

      <td>朗琴园</td>

      <td>广安门朗琴园精装开间 随时入住 交通方便</td>

      <td>1室0厅</td>

      <td>58.0</td>

      <td>5600.0</td>

      <td>中楼层(共29层)</td>

      <td>2006年建塔楼</td>

      <td>西</td>

      <td>2017.07.25</td>

      <td>30.0</td>

      <td>距离7号线达官营站731米 随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101692994.html</td>

      <td>12</td>

      <td>96.551724</td>

      <td>0</td>

    </tr>

    <tr>

      <th>27</th>

      <td>鼓楼大街租房</td>

      <td>金隅万科城</td>

      <td>金隅万科城 三居室 家具家电齐全 诚意出租</td>

      <td>3室1厅</td>

      <td>88.0</td>

      <td>4800.0</td>

      <td>低楼层(共26层)</td>

      <td>2012年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>31.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101612398.html</td>

      <td>6</td>

      <td>54.545455</td>

      <td>1</td>

    </tr>

    <tr>

      <th>28</th>

      <td>紫竹桥租房</td>

      <td>西三环北路89号院</td>

      <td>花园桥 南北两居 家具家电齐全 拎包入住</td>

      <td>2室1厅</td>

      <td>54.0</td>

      <td>6000.0</td>

      <td>高楼层(共6层)</td>

      <td>1987年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>31.0</td>

      <td>距离6号线花园桥站620米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101567440.html</td>

      <td>31</td>

      <td>111.111111</td>

      <td>1</td>

    </tr>

    <tr>

      <th>29</th>

      <td>六里桥租房</td>

      <td>京铁家园</td>

      <td>地铁1号线五棵松站 京铁家园精装两居室 东南向 有钥匙</td>

      <td>2室1厅</td>

      <td>107.0</td>

      <td>6000.0</td>

      <td>中楼层(共22层)</td>

      <td>2002年建塔楼</td>

      <td>东南</td>

      <td>2017.07.22</td>

      <td>32.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101647855.html</td>

      <td>16</td>

      <td>56.074766</td>

      <td>1</td>

    </tr>

    <tr>

      <th>...</th>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

    </tr>

    <tr>

      <th>2730</th>

      <td>安定门租房</td>

      <td>朗家胡同13号院</td>

      <td>安定门内 南北通透一居室 家具家电齐全</td>

      <td>1室1厅</td>

      <td>40.0</td>

      <td>4500.0</td>

      <td>高楼层(共6层)</td>

      <td>1990年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>11.0</td>

      <td>距离2号线鼓楼大街站774米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739270.html</td>

      <td>28</td>

      <td>112.500000</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2731</th>

      <td>东关租房</td>

      <td>清秀园北区</td>

      <td>楼龄新，精装修，可直接拎包入住</td>

      <td>1室0厅</td>

      <td>59.0</td>

      <td>2500.0</td>

      <td>高楼层(共19层)</td>

      <td>2003年建塔楼</td>

      <td>西</td>

      <td>2017.07.27</td>

      <td>15.0</td>

      <td>距离昌平线昌平站810米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739341.html</td>

      <td>15</td>

      <td>42.372881</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2732</th>

      <td>西坝河租房</td>

      <td>光熙门北里</td>

      <td>光熙门北里 3室1厅 7300元</td>

      <td>3室1厅</td>

      <td>68.0</td>

      <td>7300.0</td>

      <td>低楼层(共22层)</td>

      <td>1991年建塔楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>12.0</td>

      <td>距离13号线光熙门站471米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739485.html</td>

      <td>27</td>

      <td>107.352941</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2733</th>

      <td>建国门外租房</td>

      <td>地杰长安驿</td>

      <td>东二环 地杰长安驿 南向高层开间</td>

      <td>1室0厅</td>

      <td>45.0</td>

      <td>8500.0</td>

      <td>中楼层(共27层)</td>

      <td>2007年建塔楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>9.0</td>

      <td>距离1号线永安里站712米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739616.html</td>

      <td>11</td>

      <td>188.888889</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2734</th>

      <td>临河里租房</td>

      <td>海棠湾二期</td>

      <td>海棠湾精装两居随时看房随时签约拎包入住</td>

      <td>2室1厅</td>

      <td>88.0</td>

      <td>5500.0</td>

      <td>中楼层(共20层)</td>

      <td>2011年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.16</td>

      <td>10.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739983.html</td>

      <td>7</td>

      <td>62.500000</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2735</th>

      <td>滨河西区租房</td>

      <td>永兴小区</td>

      <td>永兴小区  南北向       两 居室</td>

      <td>2室1厅</td>

      <td>79.0</td>

      <td>2900.0</td>

      <td>高楼层(共6层)</td>

      <td>2000年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>9.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101735385.html</td>

      <td>18</td>

      <td>36.708861</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2736</th>

      <td>定福庄租房</td>

      <td>妇联小区</td>

      <td>东南朝向，装修较好，通风比较好。</td>

      <td>1室1厅</td>

      <td>46.0</td>

      <td>3500.0</td>

      <td>低楼层(共16层)</td>

      <td>1995年建塔楼</td>

      <td>东南</td>

      <td>2017.07.23</td>

      <td>16.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101738106.html</td>

      <td>23</td>

      <td>76.086957</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2737</th>

      <td>公主坟租房</td>

      <td>水利新宿舍</td>

      <td>水利新宿舍东南朝向大两居复式结构带出租车位</td>

      <td>2室2厅</td>

      <td>138.0</td>

      <td>15000.0</td>

      <td>低楼层(共28层)</td>

      <td>1995年建塔楼</td>

      <td>东南</td>

      <td>2017.07.27</td>

      <td>9.0</td>

      <td>距离1号线公主坟站748米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101705949.html</td>

      <td>23</td>

      <td>108.695652</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2738</th>

      <td>良乡租房</td>

      <td>北潞春家园</td>

      <td>北潞春家园 5室3厅 4500元</td>

      <td>5室3厅</td>

      <td>196.0</td>

      <td>4500.0</td>

      <td>高楼层(共6层)</td>

      <td>2000年建板楼</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>10.0</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101631061.html</td>

      <td>18</td>

      <td>22.959184</td>

      <td>0</td>

    </tr>

    <tr>

      <th>2739</th>

      <td>西关环岛租房</td>

      <td>秋实家园</td>

      <td>精装修，南北通透两居室，家具家电齐全</td>

      <td>2室1厅</td>

      <td>81.0</td>

      <td>2300.0</td>

      <td>高楼层(共5层)</td>

      <td>2002年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>7.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101632293.html</td>

      <td>16</td>

      <td>28.395062</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2740</th>

      <td>酒仙桥租房</td>

      <td>丽都水岸</td>

      <td>丽都水岸小区，一层带花园三居室</td>

      <td>3室2厅</td>

      <td>167.0</td>

      <td>25000.0</td>

      <td>低楼层(共20层)</td>

      <td>2005年建塔楼</td>

      <td>东南 西北</td>

      <td>2017.07.20</td>

      <td>9.0</td>

      <td>距离14号线(东段)将台站648米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101636553.html</td>

      <td>13</td>

      <td>149.700599</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2741</th>

      <td>潞苑租房</td>

      <td>上潞园</td>

      <td>上潞园精装一居改两居室  业主诚租看房方便</td>

      <td>2室1厅</td>

      <td>57.0</td>

      <td>2200.0</td>

      <td>高楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>东</td>

      <td>2017.07.25</td>

      <td>5.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101655660.html</td>

      <td>14</td>

      <td>38.596491</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2742</th>

      <td>良乡租房</td>

      <td>嘉瑞通小区</td>

      <td>嘉瑞通小区 2室1厅 2600元</td>

      <td>2室1厅</td>

      <td>92.0</td>

      <td>2600.0</td>

      <td>低楼层(共15层)</td>

      <td>2006年建塔楼</td>

      <td>南 西</td>

      <td>2017.07.19</td>

      <td>13.0</td>

      <td>距离房山线良乡南关站165米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101660289.html</td>

      <td>12</td>

      <td>28.260870</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2743</th>

      <td>朝青租房</td>

      <td>银谷美泉家园</td>

      <td>朝青 花园社区 银谷美泉 精装三居</td>

      <td>3室2厅</td>

      <td>142.0</td>

      <td>13000.0</td>

      <td>中楼层(共7层)</td>

      <td>2008年建板楼</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>6.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101584316.html</td>

      <td>10</td>

      <td>91.549296</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2744</th>

      <td>朝青租房</td>

      <td>润枫水尚</td>

      <td>润枫水尚 2室1厅 10000元</td>

      <td>2室1厅</td>

      <td>121.0</td>

      <td>10000.0</td>

      <td>低楼层(共14层)</td>

      <td>2008年建板楼</td>

      <td>南 北</td>

      <td>2017.07.21</td>

      <td>34.0</td>

      <td>距离6号线青年路站829米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101283618.html</td>

      <td>10</td>

      <td>82.644628</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2745</th>

      <td>新宫租房</td>

      <td>飞腾家园</td>

      <td>飞腾家园 3室1厅 4000元</td>

      <td>3室1厅</td>

      <td>91.0</td>

      <td>4000.0</td>

      <td>高楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>17.0</td>

      <td>随时看房 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101677753.html</td>

      <td>14</td>

      <td>43.956044</td>

      <td>0</td>

    </tr>

    <tr>

      <th>2746</th>

      <td>奥林匹克公园租房</td>

      <td>京师园</td>

      <td>京师园 3室1厅 14000元</td>

      <td>3室1厅</td>

      <td>147.0</td>

      <td>14000.0</td>

      <td>低楼层(共21层)</td>

      <td>2004年建板塔结合</td>

      <td>东 南</td>

      <td>2017.07.20</td>

      <td>13.0</td>

      <td>距离8号线林萃桥站781米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101692633.html</td>

      <td>14</td>

      <td>95.238095</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2747</th>

      <td>朝青租房</td>

      <td>青年汇佳园</td>

      <td>青年汇佳园一居室诚意出租七月到期</td>

      <td>1室1厅</td>

      <td>65.0</td>

      <td>6300.0</td>

      <td>低楼层(共13层)</td>

      <td>2008年建板塔结合</td>

      <td>南 西 北</td>

      <td>2017.07.26</td>

      <td>17.0</td>

      <td>距离6号线青年路站458米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101693532.html</td>

      <td>10</td>

      <td>96.923077</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2748</th>

      <td>九棵树(家乐福)租房</td>

      <td>大方居</td>

      <td>大方居简装西向两居室 家电家具齐</td>

      <td>2室1厅</td>

      <td>89.0</td>

      <td>3100.0</td>

      <td>低楼层(共22层)</td>

      <td>2008年建板塔结合</td>

      <td>西</td>

      <td>2017.07.26</td>

      <td>9.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101694062.html</td>

      <td>10</td>

      <td>34.831461</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2749</th>

      <td>天通苑租房</td>

      <td>天通苑北二区</td>

      <td>天通苑北二区电梯高层 精装修 观景高层</td>

      <td>2室1厅</td>

      <td>103.0</td>

      <td>5000.0</td>

      <td>高楼层(共12层)</td>

      <td>2005年建板楼</td>

      <td>西南</td>

      <td>2017.07.27</td>

      <td>14.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101694097.html</td>

      <td>13</td>

      <td>48.543689</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2750</th>

      <td>朝阳门外租房</td>

      <td>麒麟公馆</td>

      <td>麒麟公馆 2室1厅 18500元</td>

      <td>2室1厅</td>

      <td>95.0</td>

      <td>18500.0</td>

      <td>低楼层(共24层)</td>

      <td>2010年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.23</td>

      <td>14.0</td>

      <td>距离2号线朝阳门站801米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101696313.html</td>

      <td>8</td>

      <td>194.736842</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2751</th>

      <td>芍药居租房</td>

      <td>芍药居</td>

      <td>芍药居 中煤信息大厦 精装南北2居 有车位</td>

      <td>2室1厅</td>

      <td>75.0</td>

      <td>7500.0</td>

      <td>高楼层(共14层)</td>

      <td>2000年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.18</td>

      <td>7.0</td>

      <td>距离13号线芍药居站947米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101696415.html</td>

      <td>18</td>

      <td>100.000000</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2752</th>

      <td>双榆树租房</td>

      <td>双榆树东里</td>

      <td>南北通透三居室，业主可以接受长租，家具家电齐全</td>

      <td>3室1厅</td>

      <td>81.0</td>

      <td>10000.0</td>

      <td>中楼层(共12层)</td>

      <td>1990年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.19</td>

      <td>8.0</td>

      <td>距离4号线人民大学站735米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697415.html</td>

      <td>28</td>

      <td>123.456790</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2753</th>

      <td>红庙租房</td>

      <td>延静里中街</td>

      <td>房子是双南向的小两居 ，楼层低，最重要的是价格低</td>

      <td>2室0厅</td>

      <td>46.0</td>

      <td>5200.0</td>

      <td>低楼层(共6层)</td>

      <td>1984年建板楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>13.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697453.html</td>

      <td>34</td>

      <td>113.043478</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2754</th>

      <td>西三旗租房</td>

      <td>知本时代</td>

      <td>知本时代精装北向开间，有电梯，距离地铁近，看房方便</td>

      <td>1室0厅</td>

      <td>42.0</td>

      <td>4000.0</td>

      <td>高楼层(共15层)</td>

      <td>2003年建板塔结合</td>

      <td>北</td>

      <td>2017.07.27</td>

      <td>16.0</td>

      <td>距离8号线霍营站1144米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697749.html</td>

      <td>15</td>

      <td>95.238095</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2755</th>

      <td>朝青租房</td>

      <td>天鹅湾北区</td>

      <td>天鹅湾北区 1室1厅 9500元</td>

      <td>1室1厅</td>

      <td>50.0</td>

      <td>9500.0</td>

      <td>中楼层(共8层)</td>

      <td>2010年建板塔结合</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>13.0</td>

      <td>距离6号线青年路站736米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697995.html</td>

      <td>8</td>

      <td>190.000000</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2756</th>

      <td>太阳宫租房</td>

      <td>水星园</td>

      <td>水星园精装一居室  可自带家具家电 业主也可配齐</td>

      <td>1室1厅</td>

      <td>68.0</td>

      <td>9500.0</td>

      <td>中楼层(共23层)</td>

      <td>2005年建板塔结合</td>

      <td>北</td>

      <td>2017.07.24</td>

      <td>14.0</td>

      <td>距离10号线太阳宫站432米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101698013.html</td>

      <td>13</td>

      <td>139.705882</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2757</th>

      <td>六里桥租房</td>

      <td>莲花小区</td>

      <td>莲花小区 西南两居室 温馨舒适 楼层合适</td>

      <td>2室1厅</td>

      <td>84.0</td>

      <td>7200.0</td>

      <td>低楼层(共28层)</td>

      <td>1999年建板塔结合</td>

      <td>西南</td>

      <td>2017.07.26</td>

      <td>7.0</td>

      <td>距离10号线莲花桥站661米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101702130.html</td>

      <td>19</td>

      <td>85.714286</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2758</th>

      <td>陶然亭租房</td>

      <td>中海紫御公馆</td>

      <td>中海紫御公馆  把您的家安放在花园里</td>

      <td>2室2厅</td>

      <td>91.0</td>

      <td>12000.0</td>

      <td>中楼层(共22层)</td>

      <td>2010年建板塔结合</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>6.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101703605.html</td>

      <td>8</td>

      <td>131.868132</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2759</th>

      <td>三元桥租房</td>

      <td>曙光里</td>

      <td>曙光里南向 高层两居室 随时看房</td>

      <td>2室1厅</td>

      <td>62.0</td>

      <td>6200.0</td>

      <td>高楼层(共18层)</td>

      <td>1992年建塔楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>19.0</td>

      <td>距离机场线三元桥站980米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101704735.html</td>

      <td>26</td>

      <td>100.000000</td>

      <td>1</td>

    </tr>

  </tbody>

</table>

<p>2760 rows × 16 columns</p>

</div>



<pre><code>df[&#39;center_heating&#39;].value_counts()



1    2284
0     476
Name: center_heating, dtype: int64




```python
df[[&#39;center_heating&#39;, &#39;price&#39;]].groupby(&#39;center_heating&#39;).mean()
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }


</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>price</th>

    </tr>

    <tr>

      <th>center_heating</th>

      <th></th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>0</th>

      <td>7317.436975</td>

    </tr>

    <tr>

      <th>1</th>

      <td>7623.603327</td>

    </tr>

  </tbody>

</table>

</div>



<p>哪个地区的租房价格最贵，平均价格是多少</p>
<p>必须进一步爬取房子所在的地区才可以计算</p>
<p>不同房型的平均/最大/最小面积</p>
<p>两种写法：</p>
<pre><code>df[[&#39;area&#39;, &#39;house_type&#39;]].groupby(&#39;house_type&#39;)[&#39;area&#39;].agg([&#39;mean&#39;, &#39;min&#39;, &#39;max&#39;])
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }


</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>mean</th>

      <th>min</th>

      <th>max</th>

    </tr>

    <tr>

      <th>house_type</th>

      <th></th>

      <th></th>

      <th></th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>1室0厅</th>

      <td>48.484076</td>

      <td>19.0</td>

      <td>140.0</td>

    </tr>

    <tr>

      <th>1室1厅</th>

      <td>54.669584</td>

      <td>28.0</td>

      <td>107.0</td>

    </tr>

    <tr>

      <th>1室2厅</th>

      <td>72.411765</td>

      <td>45.0</td>

      <td>109.0</td>

    </tr>

    <tr>

      <th>1房间1卫</th>

      <td>42.875000</td>

      <td>35.0</td>

      <td>48.0</td>

    </tr>

    <tr>

      <th>2室0厅</th>

      <td>49.888889</td>

      <td>42.0</td>

      <td>55.0</td>

    </tr>

    <tr>

      <th>2室1厅</th>

      <td>78.725857</td>

      <td>26.0</td>

      <td>194.0</td>

    </tr>

    <tr>

      <th>2室2厅</th>

      <td>106.028169</td>

      <td>60.0</td>

      <td>228.0</td>

    </tr>

    <tr>

      <th>2房间1卫</th>

      <td>60.166667</td>

      <td>52.0</td>

      <td>67.0</td>

    </tr>

    <tr>

      <th>2房间2卫</th>

      <td>37.000000</td>

      <td>36.0</td>

      <td>38.0</td>

    </tr>

    <tr>

      <th>3室0厅</th>

      <td>67.000000</td>

      <td>61.0</td>

      <td>70.0</td>

    </tr>

    <tr>

      <th>3室1厅</th>

      <td>114.237197</td>

      <td>54.0</td>

      <td>217.0</td>

    </tr>

    <tr>

      <th>3室2厅</th>

      <td>145.690821</td>

      <td>79.0</td>

      <td>255.0</td>

    </tr>

    <tr>

      <th>3室3厅</th>

      <td>144.000000</td>

      <td>123.0</td>

      <td>181.0</td>

    </tr>

    <tr>

      <th>3房间1卫</th>

      <td>85.333333</td>

      <td>77.0</td>

      <td>91.0</td>

    </tr>

    <tr>

      <th>3房间2卫</th>

      <td>46.750000</td>

      <td>39.0</td>

      <td>63.0</td>

    </tr>

    <tr>

      <th>4室1厅</th>

      <td>165.285714</td>

      <td>87.0</td>

      <td>330.0</td>

    </tr>

    <tr>

      <th>4室2厅</th>

      <td>196.333333</td>

      <td>119.0</td>

      <td>304.0</td>

    </tr>

    <tr>

      <th>4室3厅</th>

      <td>179.000000</td>

      <td>150.0</td>

      <td>237.0</td>

    </tr>

    <tr>

      <th>5室1厅</th>

      <td>138.250000</td>

      <td>99.0</td>

      <td>180.0</td>

    </tr>

    <tr>

      <th>5室2厅</th>

      <td>242.125000</td>

      <td>181.0</td>

      <td>332.0</td>

    </tr>

    <tr>

      <th>5室3厅</th>

      <td>191.600000</td>

      <td>135.0</td>

      <td>219.0</td>

    </tr>

    <tr>

      <th>5房间2卫</th>

      <td>158.000000</td>

      <td>158.0</td>

      <td>158.0</td>

    </tr>

    <tr>

      <th>6室2厅</th>

      <td>274.000000</td>

      <td>232.0</td>

      <td>316.0</td>

    </tr>

    <tr>

      <th>6室3厅</th>

      <td>720.000000</td>

      <td>720.0</td>

      <td>720.0</td>

    </tr>

  </tbody>

</table>

</div>



<pre><code>house_area_info = df[[&#39;house_type&#39;, &#39;area&#39;]].groupby(&#39;house_type&#39;).agg({&#39;area&#39;: {&#39;mean&#39;:np.mean, &#39;max&#39;: np.max, &#39;min&#39;: np.min}})
house_area_info

D:\ProgramFiles\Anaconda3\lib\site-packages\pandas\core\groupby.py:4036: FutureWarning: using a dict with renaming is deprecated and will be removed in a future version
  return super(DataFrameGroupBy, self).aggregate(arg, *args, **kwargs)
</code></pre><div>

<div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }


</style>

<table border="1" class="dataframe">

  <thead>

    <tr>

      <th></th>

      <th colspan="3" halign="left">area</th>

    </tr>

    <tr>

      <th></th>

      <th>mean</th>

      <th>max</th>

      <th>min</th>

    </tr>

    <tr>

      <th>house_type</th>

      <th></th>

      <th></th>

      <th></th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>1室0厅</th>

      <td>48.484076</td>

      <td>140.0</td>

      <td>19.0</td>

    </tr>

    <tr>

      <th>1室1厅</th>

      <td>54.669584</td>

      <td>107.0</td>

      <td>28.0</td>

    </tr>

    <tr>

      <th>1室2厅</th>

      <td>72.411765</td>

      <td>109.0</td>

      <td>45.0</td>

    </tr>

    <tr>

      <th>1房间1卫</th>

      <td>42.875000</td>

      <td>48.0</td>

      <td>35.0</td>

    </tr>

    <tr>

      <th>2室0厅</th>

      <td>49.888889</td>

      <td>55.0</td>

      <td>42.0</td>

    </tr>

    <tr>

      <th>2室1厅</th>

      <td>78.725857</td>

      <td>194.0</td>

      <td>26.0</td>

    </tr>

    <tr>

      <th>2室2厅</th>

      <td>106.028169</td>

      <td>228.0</td>

      <td>60.0</td>

    </tr>

    <tr>

      <th>2房间1卫</th>

      <td>60.166667</td>

      <td>67.0</td>

      <td>52.0</td>

    </tr>

    <tr>

      <th>2房间2卫</th>

      <td>37.000000</td>

      <td>38.0</td>

      <td>36.0</td>

    </tr>

    <tr>

      <th>3室0厅</th>

      <td>67.000000</td>

      <td>70.0</td>

      <td>61.0</td>

    </tr>

    <tr>

      <th>3室1厅</th>

      <td>114.237197</td>

      <td>217.0</td>

      <td>54.0</td>

    </tr>

    <tr>

      <th>3室2厅</th>

      <td>145.690821</td>

      <td>255.0</td>

      <td>79.0</td>

    </tr>

    <tr>

      <th>3室3厅</th>

      <td>144.000000</td>

      <td>181.0</td>

      <td>123.0</td>

    </tr>

    <tr>

      <th>3房间1卫</th>

      <td>85.333333</td>

      <td>91.0</td>

      <td>77.0</td>

    </tr>

    <tr>

      <th>3房间2卫</th>

      <td>46.750000</td>

      <td>63.0</td>

      <td>39.0</td>

    </tr>

    <tr>

      <th>4室1厅</th>

      <td>165.285714</td>

      <td>330.0</td>

      <td>87.0</td>

    </tr>

    <tr>

      <th>4室2厅</th>

      <td>196.333333</td>

      <td>304.0</td>

      <td>119.0</td>

    </tr>

    <tr>

      <th>4室3厅</th>

      <td>179.000000</td>

      <td>237.0</td>

      <td>150.0</td>

    </tr>

    <tr>

      <th>5室1厅</th>

      <td>138.250000</td>

      <td>180.0</td>

      <td>99.0</td>

    </tr>

    <tr>

      <th>5室2厅</th>

      <td>242.125000</td>

      <td>332.0</td>

      <td>181.0</td>

    </tr>

    <tr>

      <th>5室3厅</th>

      <td>191.600000</td>

      <td>219.0</td>

      <td>135.0</td>

    </tr>

    <tr>

      <th>5房间2卫</th>

      <td>158.000000</td>

      <td>158.0</td>

      <td>158.0</td>

    </tr>

    <tr>

      <th>6室2厅</th>

      <td>274.000000</td>

      <td>316.0</td>

      <td>232.0</td>

    </tr>

    <tr>

      <th>6室3厅</th>

      <td>720.000000</td>

      <td>720.0</td>

      <td>720.0</td>

    </tr>

  </tbody>

</table>

</div>



<p>哪个地铁口附近的房子最多</p>
<pre><code>df
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }


</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>district</th>

      <th>address</th>

      <th>title</th>

      <th>house_type</th>

      <th>area</th>

      <th>price</th>

      <th>floor</th>

      <th>build_time</th>

      <th>direction</th>

      <th>update_time</th>

      <th>view_num</th>

      <th>extra_info</th>

      <th>link</th>

      <th>house_age</th>

      <th>price_per_m2</th>

      <th>center_heating</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>0</th>

      <td>燕莎租房</td>

      <td>新源街</td>

      <td>亮马桥 新源街  精装两居 交通便利 看房方便 随时入住</td>

      <td>2室1厅</td>

      <td>50.0</td>

      <td>5800.0</td>

      <td>中楼层(共6层)</td>

      <td>1981年建板楼</td>

      <td>南</td>

      <td>2017.07.21</td>

      <td>26.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101803342.html</td>

      <td>37</td>

      <td>116.000000</td>

      <td>1</td>

    </tr>

    <tr>

      <th>1</th>

      <td>望京租房</td>

      <td>澳洲康都</td>

      <td>澳洲康都东向精致两居室...........</td>

      <td>2室1厅</td>

      <td>79.0</td>

      <td>7800.0</td>

      <td>中楼层(共28层)</td>

      <td>2005年建板塔结合</td>

      <td>东</td>

      <td>2017.07.23</td>

      <td>33.0</td>

      <td>距离14号线(东段)东湖渠站731米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101753126.html</td>

      <td>13</td>

      <td>98.734177</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2</th>

      <td>广安门租房</td>

      <td>远见名苑</td>

      <td>远见名苑 东向两居室 独立小区环境 适合居家</td>

      <td>2室1厅</td>

      <td>86.0</td>

      <td>8000.0</td>

      <td>低楼层(共25层)</td>

      <td>2006年建塔楼</td>

      <td>东</td>

      <td>2017.07.20</td>

      <td>34.0</td>

      <td>距离7号线达官营站684米 随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101756753.html</td>

      <td>12</td>

      <td>93.023256</td>

      <td>0</td>

    </tr>

    <tr>

      <th>3</th>

      <td>天通苑租房</td>

      <td>天通苑北一区</td>

      <td>北一区简装两居，采光好，视野美，出行方便</td>

      <td>2室1厅</td>

      <td>103.0</td>

      <td>5300.0</td>

      <td>低楼层(共13层)</td>

      <td>2004年建板楼</td>

      <td>东南</td>

      <td>2017.07.25</td>

      <td>30.0</td>

      <td>距离5号线天通苑站927米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101780034.html</td>

      <td>14</td>

      <td>51.456311</td>

      <td>1</td>

    </tr>

    <tr>

      <th>4</th>

      <td>团结湖租房</td>

      <td>团结湖北口</td>

      <td>团结湖北口近地铁高楼层朝南向精装修正规两居室</td>

      <td>2室1厅</td>

      <td>63.0</td>

      <td>6400.0</td>

      <td>高楼层(共16层)</td>

      <td>1982年建塔楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>30.0</td>

      <td>距离10号线团结湖站88米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101781083.html</td>

      <td>36</td>

      <td>101.587302</td>

      <td>1</td>

    </tr>

    <tr>

      <th>5</th>

      <td>回龙观租房</td>

      <td>龙华园</td>

      <td>龙泽龙华园57平低楼层一居室家具家电齐全拎包入住</td>

      <td>1室1厅</td>

      <td>58.0</td>

      <td>4000.0</td>

      <td>低楼层(共6层)</td>

      <td>1994年建板楼</td>

      <td>南</td>

      <td>2017.07.23</td>

      <td>61.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101748994.html</td>

      <td>24</td>

      <td>68.965517</td>

      <td>1</td>

    </tr>

    <tr>

      <th>6</th>

      <td>北苑租房</td>

      <td>筑华年</td>

      <td>筑华年西南小三居 靠谱出租 看房方便有钥匙</td>

      <td>3室1厅</td>

      <td>89.0</td>

      <td>7500.0</td>

      <td>高楼层(共24层)</td>

      <td>2012年建板楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>29.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101767631.html</td>

      <td>6</td>

      <td>84.269663</td>

      <td>1</td>

    </tr>

    <tr>

      <th>7</th>

      <td>马甸租房</td>

      <td>月季园</td>

      <td>10号牡丹园站月季园小区 拎包入住 离梦想更近一点</td>

      <td>2室1厅</td>

      <td>53.0</td>

      <td>6000.0</td>

      <td>低楼层(共21层)</td>

      <td>1997年建塔楼</td>

      <td>南</td>

      <td>2017.07.16</td>

      <td>26.0</td>

      <td>距离10号线牡丹园站580米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101763532.html</td>

      <td>21</td>

      <td>113.207547</td>

      <td>1</td>

    </tr>

    <tr>

      <th>8</th>

      <td>小西天租房</td>

      <td>今典花园</td>

      <td>花园社区，西直门 今典花园精装两居，诚心出售。</td>

      <td>2室1厅</td>

      <td>73.0</td>

      <td>8500.0</td>

      <td>中楼层(共25层)</td>

      <td>2004年建塔楼</td>

      <td>西</td>

      <td>2017.07.23</td>

      <td>44.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101758850.html</td>

      <td>14</td>

      <td>116.438356</td>

      <td>1</td>

    </tr>

    <tr>

      <th>9</th>

      <td>北苑租房</td>

      <td>北苑家园绣菊园</td>

      <td>北苑东南两居室，可改三居 业主随时签约</td>

      <td>2室1厅</td>

      <td>82.0</td>

      <td>5300.0</td>

      <td>低楼层(共25层)</td>

      <td>2000年建塔楼</td>

      <td>东南</td>

      <td>2017.07.26</td>

      <td>30.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101779767.html</td>

      <td>18</td>

      <td>64.634146</td>

      <td>1</td>

    </tr>

    <tr>

      <th>10</th>

      <td>和平里租房</td>

      <td>甘水桥</td>

      <td>北三环里   蒋宅口   安外甘水桥   正规三居室</td>

      <td>3室1厅</td>

      <td>76.0</td>

      <td>7600.0</td>

      <td>高楼层(共14层)</td>

      <td>1988年建板塔结合</td>

      <td>东 西</td>

      <td>2017.07.26</td>

      <td>24.0</td>

      <td>距离5号线和平里北街站1198米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101753337.html</td>

      <td>30</td>

      <td>100.000000</td>

      <td>1</td>

    </tr>

    <tr>

      <th>11</th>

      <td>健翔桥租房</td>

      <td>华严北里中科院</td>

      <td>中科院 双南向 二居室 看房方便</td>

      <td>2室1厅</td>

      <td>60.0</td>

      <td>6300.0</td>

      <td>中楼层(共16层)</td>

      <td>1988年建塔楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>27.0</td>

      <td>距离10号线健德门站1056米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101758776.html</td>

      <td>30</td>

      <td>105.000000</td>

      <td>1</td>

    </tr>

    <tr>

      <th>12</th>

      <td>看丹桥租房</td>

      <td>新华街七里</td>

      <td>低楼层带电梯两居室，交通便利，家电齐全</td>

      <td>2室1厅</td>

      <td>65.0</td>

      <td>4500.0</td>

      <td>低楼层(共24层)</td>

      <td>2000年建塔楼</td>

      <td>西北</td>

      <td>2017.07.22</td>

      <td>27.0</td>

      <td>距离9号线丰台南路站924米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101762732.html</td>

      <td>18</td>

      <td>69.230769</td>

      <td>1</td>

    </tr>

    <tr>

      <th>13</th>

      <td>朝阳门内租房</td>

      <td>朝阳首府</td>

      <td>商品房  24小时保安 刷卡进出</td>

      <td>2室2厅</td>

      <td>104.0</td>

      <td>14500.0</td>

      <td>高楼层(共15层)</td>

      <td>2009年建塔楼</td>

      <td>东 东北</td>

      <td>2017.07.26</td>

      <td>34.0</td>

      <td>距离2号线朝阳门站94米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101755036.html</td>

      <td>9</td>

      <td>139.423077</td>

      <td>1</td>

    </tr>

    <tr>

      <th>14</th>

      <td>双井租房</td>

      <td>富力城B区</td>

      <td>顶层大复式，带私人70平大露台，豪华装修，随时能看</td>

      <td>4室1厅</td>

      <td>253.0</td>

      <td>32000.0</td>

      <td>高楼层(共18层)</td>

      <td>2004年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>18.0</td>

      <td>距离10号线双井站498米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101751322.html</td>

      <td>14</td>

      <td>126.482213</td>

      <td>1</td>

    </tr>

    <tr>

      <th>15</th>

      <td>刘家窑租房</td>

      <td>石榴园南里小区</td>

      <td>石榴园南里简装一居室，朝南采光好</td>

      <td>1室1厅</td>

      <td>47.0</td>

      <td>3700.0</td>

      <td>高楼层(共6层)</td>

      <td>1997年建板楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>23.0</td>

      <td>距离10号线石榴庄站752米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101807363.html</td>

      <td>21</td>

      <td>78.723404</td>

      <td>1</td>

    </tr>

    <tr>

      <th>16</th>

      <td>紫竹桥租房</td>

      <td>北洼西里</td>

      <td>北洼路北洼西里精装修两居出租随时看房</td>

      <td>2室1厅</td>

      <td>74.0</td>

      <td>7000.0</td>

      <td>中楼层(共18层)</td>

      <td>1996年建塔楼</td>

      <td>东南</td>

      <td>2017.07.27</td>

      <td>27.0</td>

      <td>距离6号线慈寿寺站1166米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101827666.html</td>

      <td>22</td>

      <td>94.594595</td>

      <td>1</td>

    </tr>

    <tr>

      <th>17</th>

      <td>甘家口租房</td>

      <td>建设部大院</td>

      <td>建设部大院  乙子区铁道部2001年楼龄  高楼层  精装修</td>

      <td>3室1厅</td>

      <td>100.0</td>

      <td>13000.0</td>

      <td>中楼层(共24层)</td>

      <td>2000年建塔楼</td>

      <td>西 北</td>

      <td>2017.07.26</td>

      <td>24.0</td>

      <td>距离6号线白石桥南站732米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101819163.html</td>

      <td>18</td>

      <td>130.000000</td>

      <td>1</td>

    </tr>

    <tr>

      <th>18</th>

      <td>北苑租房</td>

      <td>新街坊</td>

      <td>地铁5号线、精装修一改二，看房方便</td>

      <td>2室1厅</td>

      <td>57.0</td>

      <td>5500.0</td>

      <td>低楼层(共18层)</td>

      <td>2004年建板塔结合</td>

      <td>东</td>

      <td>2017.07.27</td>

      <td>19.0</td>

      <td>距离5号线北苑路北站1130米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101822606.html</td>

      <td>14</td>

      <td>96.491228</td>

      <td>1</td>

    </tr>

    <tr>

      <th>19</th>

      <td>四季青租房</td>

      <td>绿波漫板</td>

      <td>绿波漫板 东北向开间 带燃气 带家具家电 舒适宜人</td>

      <td>1室0厅</td>

      <td>43.0</td>

      <td>5200.0</td>

      <td>中楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>东 北</td>

      <td>2017.07.20</td>

      <td>41.0</td>

      <td>距离6号线慈寿寺站667米 随时看房 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101811584.html</td>

      <td>14</td>

      <td>120.930233</td>

      <td>0</td>

    </tr>

    <tr>

      <th>20</th>

      <td>望京租房</td>

      <td>宝星园一区</td>

      <td>大四居室   低于市场价  可办公 可居家</td>

      <td>4室2厅</td>

      <td>217.0</td>

      <td>15000.0</td>

      <td>低楼层(共23层)</td>

      <td>2003年建塔楼</td>

      <td>南</td>

      <td>2017.07.23</td>

      <td>32.0</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101603861.html</td>

      <td>15</td>

      <td>69.124424</td>

      <td>0</td>

    </tr>

    <tr>

      <th>21</th>

      <td>望京租房</td>

      <td>融科橄榄城三期</td>

      <td>融科两居室，精装家具家电齐全，随时入住，采光好</td>

      <td>2室1厅</td>

      <td>95.0</td>

      <td>12000.0</td>

      <td>低楼层(共27层)</td>

      <td>2009年建板楼</td>

      <td>南</td>

      <td>2017.07.19</td>

      <td>32.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101641236.html</td>

      <td>9</td>

      <td>126.315789</td>

      <td>1</td>

    </tr>

    <tr>

      <th>22</th>

      <td>酒仙桥租房</td>

      <td>卡布其诺</td>

      <td>全南两居 东西通透 直观小区花园 观景房</td>

      <td>2室1厅</td>

      <td>90.0</td>

      <td>8800.0</td>

      <td>中楼层(共9层)</td>

      <td>2005年建板楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>50.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101712757.html</td>

      <td>13</td>

      <td>97.777778</td>

      <td>1</td>

    </tr>

    <tr>

      <th>23</th>

      <td>官园租房</td>

      <td>官苑8号</td>

      <td>官苑8号 精装西南三居可以长租，看房随时</td>

      <td>3室2厅</td>

      <td>121.0</td>

      <td>21500.0</td>

      <td>中楼层(共16层)</td>

      <td>2007年建板塔结合</td>

      <td>南 西</td>

      <td>2017.07.25</td>

      <td>61.0</td>

      <td>距离2号线车公庄站773米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101583407.html</td>

      <td>11</td>

      <td>177.685950</td>

      <td>1</td>

    </tr>

    <tr>

      <th>24</th>

      <td>北大地租房</td>

      <td>西安街4号院</td>

      <td>精装三改二大两居 南北通透 希望客户能把它当自己的家</td>

      <td>2室1厅</td>

      <td>83.0</td>

      <td>4500.0</td>

      <td>高楼层(共6层)</td>

      <td>1989年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>27.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101601709.html</td>

      <td>29</td>

      <td>54.216867</td>

      <td>1</td>

    </tr>

    <tr>

      <th>25</th>

      <td>回龙观租房</td>

      <td>佰嘉城</td>

      <td>佰嘉城一层三居室 户型方正 南北通透</td>

      <td>3室1厅</td>

      <td>119.0</td>

      <td>6300.0</td>

      <td>低楼层(共6层)</td>

      <td>2006年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>25.0</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101726428.html</td>

      <td>12</td>

      <td>52.941176</td>

      <td>0</td>

    </tr>

    <tr>

      <th>26</th>

      <td>广安门租房</td>

      <td>朗琴园</td>

      <td>广安门朗琴园精装开间 随时入住 交通方便</td>

      <td>1室0厅</td>

      <td>58.0</td>

      <td>5600.0</td>

      <td>中楼层(共29层)</td>

      <td>2006年建塔楼</td>

      <td>西</td>

      <td>2017.07.25</td>

      <td>30.0</td>

      <td>距离7号线达官营站731米 随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101692994.html</td>

      <td>12</td>

      <td>96.551724</td>

      <td>0</td>

    </tr>

    <tr>

      <th>27</th>

      <td>鼓楼大街租房</td>

      <td>金隅万科城</td>

      <td>金隅万科城 三居室 家具家电齐全 诚意出租</td>

      <td>3室1厅</td>

      <td>88.0</td>

      <td>4800.0</td>

      <td>低楼层(共26层)</td>

      <td>2012年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>31.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101612398.html</td>

      <td>6</td>

      <td>54.545455</td>

      <td>1</td>

    </tr>

    <tr>

      <th>28</th>

      <td>紫竹桥租房</td>

      <td>西三环北路89号院</td>

      <td>花园桥 南北两居 家具家电齐全 拎包入住</td>

      <td>2室1厅</td>

      <td>54.0</td>

      <td>6000.0</td>

      <td>高楼层(共6层)</td>

      <td>1987年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>31.0</td>

      <td>距离6号线花园桥站620米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101567440.html</td>

      <td>31</td>

      <td>111.111111</td>

      <td>1</td>

    </tr>

    <tr>

      <th>29</th>

      <td>六里桥租房</td>

      <td>京铁家园</td>

      <td>地铁1号线五棵松站 京铁家园精装两居室 东南向 有钥匙</td>

      <td>2室1厅</td>

      <td>107.0</td>

      <td>6000.0</td>

      <td>中楼层(共22层)</td>

      <td>2002年建塔楼</td>

      <td>东南</td>

      <td>2017.07.22</td>

      <td>32.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101647855.html</td>

      <td>16</td>

      <td>56.074766</td>

      <td>1</td>

    </tr>

    <tr>

      <th>...</th>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

    </tr>

    <tr>

      <th>2730</th>

      <td>安定门租房</td>

      <td>朗家胡同13号院</td>

      <td>安定门内 南北通透一居室 家具家电齐全</td>

      <td>1室1厅</td>

      <td>40.0</td>

      <td>4500.0</td>

      <td>高楼层(共6层)</td>

      <td>1990年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>11.0</td>

      <td>距离2号线鼓楼大街站774米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739270.html</td>

      <td>28</td>

      <td>112.500000</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2731</th>

      <td>东关租房</td>

      <td>清秀园北区</td>

      <td>楼龄新，精装修，可直接拎包入住</td>

      <td>1室0厅</td>

      <td>59.0</td>

      <td>2500.0</td>

      <td>高楼层(共19层)</td>

      <td>2003年建塔楼</td>

      <td>西</td>

      <td>2017.07.27</td>

      <td>15.0</td>

      <td>距离昌平线昌平站810米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739341.html</td>

      <td>15</td>

      <td>42.372881</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2732</th>

      <td>西坝河租房</td>

      <td>光熙门北里</td>

      <td>光熙门北里 3室1厅 7300元</td>

      <td>3室1厅</td>

      <td>68.0</td>

      <td>7300.0</td>

      <td>低楼层(共22层)</td>

      <td>1991年建塔楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>12.0</td>

      <td>距离13号线光熙门站471米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739485.html</td>

      <td>27</td>

      <td>107.352941</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2733</th>

      <td>建国门外租房</td>

      <td>地杰长安驿</td>

      <td>东二环 地杰长安驿 南向高层开间</td>

      <td>1室0厅</td>

      <td>45.0</td>

      <td>8500.0</td>

      <td>中楼层(共27层)</td>

      <td>2007年建塔楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>9.0</td>

      <td>距离1号线永安里站712米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739616.html</td>

      <td>11</td>

      <td>188.888889</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2734</th>

      <td>临河里租房</td>

      <td>海棠湾二期</td>

      <td>海棠湾精装两居随时看房随时签约拎包入住</td>

      <td>2室1厅</td>

      <td>88.0</td>

      <td>5500.0</td>

      <td>中楼层(共20层)</td>

      <td>2011年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.16</td>

      <td>10.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739983.html</td>

      <td>7</td>

      <td>62.500000</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2735</th>

      <td>滨河西区租房</td>

      <td>永兴小区</td>

      <td>永兴小区  南北向       两 居室</td>

      <td>2室1厅</td>

      <td>79.0</td>

      <td>2900.0</td>

      <td>高楼层(共6层)</td>

      <td>2000年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>9.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101735385.html</td>

      <td>18</td>

      <td>36.708861</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2736</th>

      <td>定福庄租房</td>

      <td>妇联小区</td>

      <td>东南朝向，装修较好，通风比较好。</td>

      <td>1室1厅</td>

      <td>46.0</td>

      <td>3500.0</td>

      <td>低楼层(共16层)</td>

      <td>1995年建塔楼</td>

      <td>东南</td>

      <td>2017.07.23</td>

      <td>16.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101738106.html</td>

      <td>23</td>

      <td>76.086957</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2737</th>

      <td>公主坟租房</td>

      <td>水利新宿舍</td>

      <td>水利新宿舍东南朝向大两居复式结构带出租车位</td>

      <td>2室2厅</td>

      <td>138.0</td>

      <td>15000.0</td>

      <td>低楼层(共28层)</td>

      <td>1995年建塔楼</td>

      <td>东南</td>

      <td>2017.07.27</td>

      <td>9.0</td>

      <td>距离1号线公主坟站748米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101705949.html</td>

      <td>23</td>

      <td>108.695652</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2738</th>

      <td>良乡租房</td>

      <td>北潞春家园</td>

      <td>北潞春家园 5室3厅 4500元</td>

      <td>5室3厅</td>

      <td>196.0</td>

      <td>4500.0</td>

      <td>高楼层(共6层)</td>

      <td>2000年建板楼</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>10.0</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101631061.html</td>

      <td>18</td>

      <td>22.959184</td>

      <td>0</td>

    </tr>

    <tr>

      <th>2739</th>

      <td>西关环岛租房</td>

      <td>秋实家园</td>

      <td>精装修，南北通透两居室，家具家电齐全</td>

      <td>2室1厅</td>

      <td>81.0</td>

      <td>2300.0</td>

      <td>高楼层(共5层)</td>

      <td>2002年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>7.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101632293.html</td>

      <td>16</td>

      <td>28.395062</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2740</th>

      <td>酒仙桥租房</td>

      <td>丽都水岸</td>

      <td>丽都水岸小区，一层带花园三居室</td>

      <td>3室2厅</td>

      <td>167.0</td>

      <td>25000.0</td>

      <td>低楼层(共20层)</td>

      <td>2005年建塔楼</td>

      <td>东南 西北</td>

      <td>2017.07.20</td>

      <td>9.0</td>

      <td>距离14号线(东段)将台站648米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101636553.html</td>

      <td>13</td>

      <td>149.700599</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2741</th>

      <td>潞苑租房</td>

      <td>上潞园</td>

      <td>上潞园精装一居改两居室  业主诚租看房方便</td>

      <td>2室1厅</td>

      <td>57.0</td>

      <td>2200.0</td>

      <td>高楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>东</td>

      <td>2017.07.25</td>

      <td>5.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101655660.html</td>

      <td>14</td>

      <td>38.596491</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2742</th>

      <td>良乡租房</td>

      <td>嘉瑞通小区</td>

      <td>嘉瑞通小区 2室1厅 2600元</td>

      <td>2室1厅</td>

      <td>92.0</td>

      <td>2600.0</td>

      <td>低楼层(共15层)</td>

      <td>2006年建塔楼</td>

      <td>南 西</td>

      <td>2017.07.19</td>

      <td>13.0</td>

      <td>距离房山线良乡南关站165米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101660289.html</td>

      <td>12</td>

      <td>28.260870</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2743</th>

      <td>朝青租房</td>

      <td>银谷美泉家园</td>

      <td>朝青 花园社区 银谷美泉 精装三居</td>

      <td>3室2厅</td>

      <td>142.0</td>

      <td>13000.0</td>

      <td>中楼层(共7层)</td>

      <td>2008年建板楼</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>6.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101584316.html</td>

      <td>10</td>

      <td>91.549296</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2744</th>

      <td>朝青租房</td>

      <td>润枫水尚</td>

      <td>润枫水尚 2室1厅 10000元</td>

      <td>2室1厅</td>

      <td>121.0</td>

      <td>10000.0</td>

      <td>低楼层(共14层)</td>

      <td>2008年建板楼</td>

      <td>南 北</td>

      <td>2017.07.21</td>

      <td>34.0</td>

      <td>距离6号线青年路站829米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101283618.html</td>

      <td>10</td>

      <td>82.644628</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2745</th>

      <td>新宫租房</td>

      <td>飞腾家园</td>

      <td>飞腾家园 3室1厅 4000元</td>

      <td>3室1厅</td>

      <td>91.0</td>

      <td>4000.0</td>

      <td>高楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>17.0</td>

      <td>随时看房 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101677753.html</td>

      <td>14</td>

      <td>43.956044</td>

      <td>0</td>

    </tr>

    <tr>

      <th>2746</th>

      <td>奥林匹克公园租房</td>

      <td>京师园</td>

      <td>京师园 3室1厅 14000元</td>

      <td>3室1厅</td>

      <td>147.0</td>

      <td>14000.0</td>

      <td>低楼层(共21层)</td>

      <td>2004年建板塔结合</td>

      <td>东 南</td>

      <td>2017.07.20</td>

      <td>13.0</td>

      <td>距离8号线林萃桥站781米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101692633.html</td>

      <td>14</td>

      <td>95.238095</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2747</th>

      <td>朝青租房</td>

      <td>青年汇佳园</td>

      <td>青年汇佳园一居室诚意出租七月到期</td>

      <td>1室1厅</td>

      <td>65.0</td>

      <td>6300.0</td>

      <td>低楼层(共13层)</td>

      <td>2008年建板塔结合</td>

      <td>南 西 北</td>

      <td>2017.07.26</td>

      <td>17.0</td>

      <td>距离6号线青年路站458米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101693532.html</td>

      <td>10</td>

      <td>96.923077</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2748</th>

      <td>九棵树(家乐福)租房</td>

      <td>大方居</td>

      <td>大方居简装西向两居室 家电家具齐</td>

      <td>2室1厅</td>

      <td>89.0</td>

      <td>3100.0</td>

      <td>低楼层(共22层)</td>

      <td>2008年建板塔结合</td>

      <td>西</td>

      <td>2017.07.26</td>

      <td>9.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101694062.html</td>

      <td>10</td>

      <td>34.831461</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2749</th>

      <td>天通苑租房</td>

      <td>天通苑北二区</td>

      <td>天通苑北二区电梯高层 精装修 观景高层</td>

      <td>2室1厅</td>

      <td>103.0</td>

      <td>5000.0</td>

      <td>高楼层(共12层)</td>

      <td>2005年建板楼</td>

      <td>西南</td>

      <td>2017.07.27</td>

      <td>14.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101694097.html</td>

      <td>13</td>

      <td>48.543689</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2750</th>

      <td>朝阳门外租房</td>

      <td>麒麟公馆</td>

      <td>麒麟公馆 2室1厅 18500元</td>

      <td>2室1厅</td>

      <td>95.0</td>

      <td>18500.0</td>

      <td>低楼层(共24层)</td>

      <td>2010年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.23</td>

      <td>14.0</td>

      <td>距离2号线朝阳门站801米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101696313.html</td>

      <td>8</td>

      <td>194.736842</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2751</th>

      <td>芍药居租房</td>

      <td>芍药居</td>

      <td>芍药居 中煤信息大厦 精装南北2居 有车位</td>

      <td>2室1厅</td>

      <td>75.0</td>

      <td>7500.0</td>

      <td>高楼层(共14层)</td>

      <td>2000年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.18</td>

      <td>7.0</td>

      <td>距离13号线芍药居站947米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101696415.html</td>

      <td>18</td>

      <td>100.000000</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2752</th>

      <td>双榆树租房</td>

      <td>双榆树东里</td>

      <td>南北通透三居室，业主可以接受长租，家具家电齐全</td>

      <td>3室1厅</td>

      <td>81.0</td>

      <td>10000.0</td>

      <td>中楼层(共12层)</td>

      <td>1990年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.19</td>

      <td>8.0</td>

      <td>距离4号线人民大学站735米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697415.html</td>

      <td>28</td>

      <td>123.456790</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2753</th>

      <td>红庙租房</td>

      <td>延静里中街</td>

      <td>房子是双南向的小两居 ，楼层低，最重要的是价格低</td>

      <td>2室0厅</td>

      <td>46.0</td>

      <td>5200.0</td>

      <td>低楼层(共6层)</td>

      <td>1984年建板楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>13.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697453.html</td>

      <td>34</td>

      <td>113.043478</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2754</th>

      <td>西三旗租房</td>

      <td>知本时代</td>

      <td>知本时代精装北向开间，有电梯，距离地铁近，看房方便</td>

      <td>1室0厅</td>

      <td>42.0</td>

      <td>4000.0</td>

      <td>高楼层(共15层)</td>

      <td>2003年建板塔结合</td>

      <td>北</td>

      <td>2017.07.27</td>

      <td>16.0</td>

      <td>距离8号线霍营站1144米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697749.html</td>

      <td>15</td>

      <td>95.238095</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2755</th>

      <td>朝青租房</td>

      <td>天鹅湾北区</td>

      <td>天鹅湾北区 1室1厅 9500元</td>

      <td>1室1厅</td>

      <td>50.0</td>

      <td>9500.0</td>

      <td>中楼层(共8层)</td>

      <td>2010年建板塔结合</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>13.0</td>

      <td>距离6号线青年路站736米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697995.html</td>

      <td>8</td>

      <td>190.000000</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2756</th>

      <td>太阳宫租房</td>

      <td>水星园</td>

      <td>水星园精装一居室  可自带家具家电 业主也可配齐</td>

      <td>1室1厅</td>

      <td>68.0</td>

      <td>9500.0</td>

      <td>中楼层(共23层)</td>

      <td>2005年建板塔结合</td>

      <td>北</td>

      <td>2017.07.24</td>

      <td>14.0</td>

      <td>距离10号线太阳宫站432米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101698013.html</td>

      <td>13</td>

      <td>139.705882</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2757</th>

      <td>六里桥租房</td>

      <td>莲花小区</td>

      <td>莲花小区 西南两居室 温馨舒适 楼层合适</td>

      <td>2室1厅</td>

      <td>84.0</td>

      <td>7200.0</td>

      <td>低楼层(共28层)</td>

      <td>1999年建板塔结合</td>

      <td>西南</td>

      <td>2017.07.26</td>

      <td>7.0</td>

      <td>距离10号线莲花桥站661米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101702130.html</td>

      <td>19</td>

      <td>85.714286</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2758</th>

      <td>陶然亭租房</td>

      <td>中海紫御公馆</td>

      <td>中海紫御公馆  把您的家安放在花园里</td>

      <td>2室2厅</td>

      <td>91.0</td>

      <td>12000.0</td>

      <td>中楼层(共22层)</td>

      <td>2010年建板塔结合</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>6.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101703605.html</td>

      <td>8</td>

      <td>131.868132</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2759</th>

      <td>三元桥租房</td>

      <td>曙光里</td>

      <td>曙光里南向 高层两居室 随时看房</td>

      <td>2室1厅</td>

      <td>62.0</td>

      <td>6200.0</td>

      <td>高楼层(共18层)</td>

      <td>1992年建塔楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>19.0</td>

      <td>距离机场线三元桥站980米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101704735.html</td>

      <td>26</td>

      <td>100.000000</td>

      <td>1</td>

    </tr>

  </tbody>

</table>

<p>2760 rows × 16 columns</p>

</div>



<p>格式：距离10号线莲花桥站661米 随时看房 集中供暖</p>
<pre><code>import re
def find_sub_station(x):
    try:
        return re.search(pattern=&#39;(.+号线)(.+站)([0-9]+)米&#39;, string=x).group(2)
    except:
        return None
df[&#39;sub_station&#39;] = df[&#39;extra_info&#39;].apply(find_sub_station)
df
df[[&#39;sub_station&#39;, &#39;link&#39;]].groupby(&#39;sub_station&#39;).count()
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }


</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>link</th>

    </tr>

    <tr>

      <th>sub_station</th>

      <th></th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>(东段)东湖渠站</th>

      <td>21</td>

    </tr>

    <tr>

      <th>(东段)东风北桥站</th>

      <td>13</td>

    </tr>

    <tr>

      <th>(东段)北工大西门站</th>

      <td>8</td>

    </tr>

    <tr>

      <th>(东段)将台站</th>

      <td>14</td>

    </tr>

    <tr>

      <th>(东段)方庄站</th>

      <td>13</td>

    </tr>

    <tr>

      <th>(东段)景泰站</th>

      <td>8</td>

    </tr>

    <tr>

      <th>(东段)望京南站</th>

      <td>4</td>

    </tr>

    <tr>

      <th>(东段)朝阳公园站</th>

      <td>19</td>

    </tr>

    <tr>

      <th>(东段)来广营站</th>

      <td>5</td>

    </tr>

    <tr>

      <th>(东段)枣营站</th>

      <td>1</td>

    </tr>

    <tr>

      <th>(东段)永定门外站</th>

      <td>5</td>

    </tr>

    <tr>

      <th>(东段)阜通站</th>

      <td>28</td>

    </tr>

    <tr>

      <th>(西段)大井站</th>

      <td>2</td>

    </tr>

    <tr>

      <th>(西段)郭庄子站</th>

      <td>2</td>

    </tr>

    <tr>

      <th>七里庄站</th>

      <td>14</td>

    </tr>

    <tr>

      <th>万寿路站</th>

      <td>11</td>

    </tr>

    <tr>

      <th>上地站</th>

      <td>5</td>

    </tr>

    <tr>

      <th>东单站</th>

      <td>1</td>

    </tr>

    <tr>

      <th>东四十条站</th>

      <td>9</td>

    </tr>

    <tr>

      <th>东四站</th>

      <td>3</td>

    </tr>

    <tr>

      <th>东大桥站</th>

      <td>10</td>

    </tr>

    <tr>

      <th>东直门站</th>

      <td>19</td>

    </tr>

    <tr>

      <th>丰台东大街站</th>

      <td>2</td>

    </tr>

    <tr>

      <th>丰台南路站</th>

      <td>5</td>

    </tr>

    <tr>

      <th>丰台科技园站</th>

      <td>1</td>

    </tr>

    <tr>

      <th>丰台站站</th>

      <td>7</td>

    </tr>

    <tr>

      <th>九龙山站</th>

      <td>9</td>

    </tr>

    <tr>

      <th>五棵松站</th>

      <td>8</td>

    </tr>

    <tr>

      <th>五道口站</th>

      <td>5</td>

    </tr>

    <tr>

      <th>亮马桥站</th>

      <td>5</td>

    </tr>

    <tr>

      <th>...</th>

      <td>...</td>

    </tr>

    <tr>

      <th>西直门站</th>

      <td>14</td>

    </tr>

    <tr>

      <th>西红门站</th>

      <td>5</td>

    </tr>

    <tr>

      <th>西钓鱼台站</th>

      <td>3</td>

    </tr>

    <tr>

      <th>角门东站</th>

      <td>10</td>

    </tr>

    <tr>

      <th>角门西站</th>

      <td>6</td>

    </tr>

    <tr>

      <th>车公庄站</th>

      <td>12</td>

    </tr>

    <tr>

      <th>车公庄西站</th>

      <td>15</td>

    </tr>

    <tr>

      <th>车道沟站</th>

      <td>14</td>

    </tr>

    <tr>

      <th>达官营站</th>

      <td>43</td>

    </tr>

    <tr>

      <th>金台夕照站</th>

      <td>2</td>

    </tr>

    <tr>

      <th>金台路站</th>

      <td>3</td>

    </tr>

    <tr>

      <th>长春桥站</th>

      <td>3</td>

    </tr>

    <tr>

      <th>长椿街站</th>

      <td>10</td>

    </tr>

    <tr>

      <th>阜成门站</th>

      <td>6</td>

    </tr>

    <tr>

      <th>陶然亭站</th>

      <td>8</td>

    </tr>

    <tr>

      <th>雍和宫站</th>

      <td>4</td>

    </tr>

    <tr>

      <th>霍营站</th>

      <td>7</td>

    </tr>

    <tr>

      <th>青年路站</th>

      <td>30</td>

    </tr>

    <tr>

      <th>顺义站</th>

      <td>7</td>

    </tr>

    <tr>

      <th>首经贸站</th>

      <td>8</td>

    </tr>

    <tr>

      <th>马家堡站</th>

      <td>3</td>

    </tr>

    <tr>

      <th>马连洼站</th>

      <td>2</td>

    </tr>

    <tr>

      <th>高米店北站</th>

      <td>5</td>

    </tr>

    <tr>

      <th>高米店南站</th>

      <td>2</td>

    </tr>

    <tr>

      <th>魏公村站</th>

      <td>4</td>

    </tr>

    <tr>

      <th>黄村火车站站</th>

      <td>3</td>

    </tr>

    <tr>

      <th>黄村西大街站</th>

      <td>3</td>

    </tr>

    <tr>

      <th>黄渠站</th>

      <td>6</td>

    </tr>

    <tr>

      <th>鼓楼大街站</th>

      <td>9</td>

    </tr>

    <tr>

      <th>龙泽站</th>

      <td>2</td>

    </tr>

  </tbody>

</table>

<p>190 rows × 1 columns</p>

</div>



<pre><code>df[[&#39;sub_station&#39;, &#39;link&#39;]].groupby(&#39;sub_station&#39;).size() # 是个Series



sub_station
(东段)东湖渠站      21
(东段)东风北桥站     13
(东段)北工大西门站     8
(东段)将台站       14
(东段)方庄站       13
(东段)景泰站        8
(东段)望京南站       4
(东段)朝阳公园站     19
(东段)来广营站       5
(东段)枣营站        1
(东段)永定门外站      5
(东段)阜通站       28
(西段)大井站        2
(西段)郭庄子站       2
七里庄站          14
万寿路站          11
上地站            5
东单站            1
东四十条站          9
东四站            3
东大桥站          10
东直门站          19
丰台东大街站         2
丰台南路站          5
丰台科技园站         1
丰台站站           7
九龙山站           9
五棵松站           8
五道口站           5
亮马桥站           5
              ..
西直门站          14
西红门站           5
西钓鱼台站          3
角门东站          10
角门西站           6
车公庄站          12
车公庄西站         15
车道沟站          14
达官营站          43
金台夕照站          2
金台路站           3
长春桥站           3
长椿街站          10
阜成门站           6
陶然亭站           8
雍和宫站           4
霍营站            7
青年路站          30
顺义站            7
首经贸站           8
马家堡站           3
马连洼站           2
高米店北站          5
高米店南站          2
魏公村站           4
黄村火车站站         3
黄村西大街站         3
黄渠站            6
鼓楼大街站          9
龙泽站            2
Length: 190, dtype: int64
</code></pre><p>地铁附近的房子平均价格 比 非地铁的高多少</p>
<p>地铁附近的房子平均价格 比 非地铁的高多少</p>
<pre><code>def has_substation(x):
    return 1 if &#39;距离&#39; in x else 0
df.loc[:, &#39;has_sub_station&#39;]=df[&#39;extra_info&#39;].apply(has_substation)
df
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }


</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>district</th>

      <th>address</th>

      <th>title</th>

      <th>house_type</th>

      <th>area</th>

      <th>price</th>

      <th>floor</th>

      <th>build_time</th>

      <th>direction</th>

      <th>update_time</th>

      <th>view_num</th>

      <th>extra_info</th>

      <th>link</th>

      <th>house_age</th>

      <th>price_per_m2</th>

      <th>center_heating</th>

      <th>sub_station</th>

      <th>has_sub_station</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>0</th>

      <td>燕莎租房</td>

      <td>新源街</td>

      <td>亮马桥 新源街  精装两居 交通便利 看房方便 随时入住</td>

      <td>2室1厅</td>

      <td>50.0</td>

      <td>5800.0</td>

      <td>中楼层(共6层)</td>

      <td>1981年建板楼</td>

      <td>南</td>

      <td>2017.07.21</td>

      <td>26.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101803342.html</td>

      <td>37</td>

      <td>116.000000</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>1</th>

      <td>望京租房</td>

      <td>澳洲康都</td>

      <td>澳洲康都东向精致两居室...........</td>

      <td>2室1厅</td>

      <td>79.0</td>

      <td>7800.0</td>

      <td>中楼层(共28层)</td>

      <td>2005年建板塔结合</td>

      <td>东</td>

      <td>2017.07.23</td>

      <td>33.0</td>

      <td>距离14号线(东段)东湖渠站731米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101753126.html</td>

      <td>13</td>

      <td>98.734177</td>

      <td>1</td>

      <td>(东段)东湖渠站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2</th>

      <td>广安门租房</td>

      <td>远见名苑</td>

      <td>远见名苑 东向两居室 独立小区环境 适合居家</td>

      <td>2室1厅</td>

      <td>86.0</td>

      <td>8000.0</td>

      <td>低楼层(共25层)</td>

      <td>2006年建塔楼</td>

      <td>东</td>

      <td>2017.07.20</td>

      <td>34.0</td>

      <td>距离7号线达官营站684米 随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101756753.html</td>

      <td>12</td>

      <td>93.023256</td>

      <td>0</td>

      <td>达官营站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>3</th>

      <td>天通苑租房</td>

      <td>天通苑北一区</td>

      <td>北一区简装两居，采光好，视野美，出行方便</td>

      <td>2室1厅</td>

      <td>103.0</td>

      <td>5300.0</td>

      <td>低楼层(共13层)</td>

      <td>2004年建板楼</td>

      <td>东南</td>

      <td>2017.07.25</td>

      <td>30.0</td>

      <td>距离5号线天通苑站927米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101780034.html</td>

      <td>14</td>

      <td>51.456311</td>

      <td>1</td>

      <td>天通苑站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>4</th>

      <td>团结湖租房</td>

      <td>团结湖北口</td>

      <td>团结湖北口近地铁高楼层朝南向精装修正规两居室</td>

      <td>2室1厅</td>

      <td>63.0</td>

      <td>6400.0</td>

      <td>高楼层(共16层)</td>

      <td>1982年建塔楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>30.0</td>

      <td>距离10号线团结湖站88米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101781083.html</td>

      <td>36</td>

      <td>101.587302</td>

      <td>1</td>

      <td>团结湖站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>5</th>

      <td>回龙观租房</td>

      <td>龙华园</td>

      <td>龙泽龙华园57平低楼层一居室家具家电齐全拎包入住</td>

      <td>1室1厅</td>

      <td>58.0</td>

      <td>4000.0</td>

      <td>低楼层(共6层)</td>

      <td>1994年建板楼</td>

      <td>南</td>

      <td>2017.07.23</td>

      <td>61.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101748994.html</td>

      <td>24</td>

      <td>68.965517</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>6</th>

      <td>北苑租房</td>

      <td>筑华年</td>

      <td>筑华年西南小三居 靠谱出租 看房方便有钥匙</td>

      <td>3室1厅</td>

      <td>89.0</td>

      <td>7500.0</td>

      <td>高楼层(共24层)</td>

      <td>2012年建板楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>29.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101767631.html</td>

      <td>6</td>

      <td>84.269663</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>7</th>

      <td>马甸租房</td>

      <td>月季园</td>

      <td>10号牡丹园站月季园小区 拎包入住 离梦想更近一点</td>

      <td>2室1厅</td>

      <td>53.0</td>

      <td>6000.0</td>

      <td>低楼层(共21层)</td>

      <td>1997年建塔楼</td>

      <td>南</td>

      <td>2017.07.16</td>

      <td>26.0</td>

      <td>距离10号线牡丹园站580米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101763532.html</td>

      <td>21</td>

      <td>113.207547</td>

      <td>1</td>

      <td>牡丹园站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>8</th>

      <td>小西天租房</td>

      <td>今典花园</td>

      <td>花园社区，西直门 今典花园精装两居，诚心出售。</td>

      <td>2室1厅</td>

      <td>73.0</td>

      <td>8500.0</td>

      <td>中楼层(共25层)</td>

      <td>2004年建塔楼</td>

      <td>西</td>

      <td>2017.07.23</td>

      <td>44.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101758850.html</td>

      <td>14</td>

      <td>116.438356</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>9</th>

      <td>北苑租房</td>

      <td>北苑家园绣菊园</td>

      <td>北苑东南两居室，可改三居 业主随时签约</td>

      <td>2室1厅</td>

      <td>82.0</td>

      <td>5300.0</td>

      <td>低楼层(共25层)</td>

      <td>2000年建塔楼</td>

      <td>东南</td>

      <td>2017.07.26</td>

      <td>30.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101779767.html</td>

      <td>18</td>

      <td>64.634146</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>10</th>

      <td>和平里租房</td>

      <td>甘水桥</td>

      <td>北三环里   蒋宅口   安外甘水桥   正规三居室</td>

      <td>3室1厅</td>

      <td>76.0</td>

      <td>7600.0</td>

      <td>高楼层(共14层)</td>

      <td>1988年建板塔结合</td>

      <td>东 西</td>

      <td>2017.07.26</td>

      <td>24.0</td>

      <td>距离5号线和平里北街站1198米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101753337.html</td>

      <td>30</td>

      <td>100.000000</td>

      <td>1</td>

      <td>和平里北街站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>11</th>

      <td>健翔桥租房</td>

      <td>华严北里中科院</td>

      <td>中科院 双南向 二居室 看房方便</td>

      <td>2室1厅</td>

      <td>60.0</td>

      <td>6300.0</td>

      <td>中楼层(共16层)</td>

      <td>1988年建塔楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>27.0</td>

      <td>距离10号线健德门站1056米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101758776.html</td>

      <td>30</td>

      <td>105.000000</td>

      <td>1</td>

      <td>健德门站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>12</th>

      <td>看丹桥租房</td>

      <td>新华街七里</td>

      <td>低楼层带电梯两居室，交通便利，家电齐全</td>

      <td>2室1厅</td>

      <td>65.0</td>

      <td>4500.0</td>

      <td>低楼层(共24层)</td>

      <td>2000年建塔楼</td>

      <td>西北</td>

      <td>2017.07.22</td>

      <td>27.0</td>

      <td>距离9号线丰台南路站924米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101762732.html</td>

      <td>18</td>

      <td>69.230769</td>

      <td>1</td>

      <td>丰台南路站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>13</th>

      <td>朝阳门内租房</td>

      <td>朝阳首府</td>

      <td>商品房  24小时保安 刷卡进出</td>

      <td>2室2厅</td>

      <td>104.0</td>

      <td>14500.0</td>

      <td>高楼层(共15层)</td>

      <td>2009年建塔楼</td>

      <td>东 东北</td>

      <td>2017.07.26</td>

      <td>34.0</td>

      <td>距离2号线朝阳门站94米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101755036.html</td>

      <td>9</td>

      <td>139.423077</td>

      <td>1</td>

      <td>朝阳门站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>14</th>

      <td>双井租房</td>

      <td>富力城B区</td>

      <td>顶层大复式，带私人70平大露台，豪华装修，随时能看</td>

      <td>4室1厅</td>

      <td>253.0</td>

      <td>32000.0</td>

      <td>高楼层(共18层)</td>

      <td>2004年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>18.0</td>

      <td>距离10号线双井站498米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101751322.html</td>

      <td>14</td>

      <td>126.482213</td>

      <td>1</td>

      <td>双井站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>15</th>

      <td>刘家窑租房</td>

      <td>石榴园南里小区</td>

      <td>石榴园南里简装一居室，朝南采光好</td>

      <td>1室1厅</td>

      <td>47.0</td>

      <td>3700.0</td>

      <td>高楼层(共6层)</td>

      <td>1997年建板楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>23.0</td>

      <td>距离10号线石榴庄站752米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101807363.html</td>

      <td>21</td>

      <td>78.723404</td>

      <td>1</td>

      <td>石榴庄站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>16</th>

      <td>紫竹桥租房</td>

      <td>北洼西里</td>

      <td>北洼路北洼西里精装修两居出租随时看房</td>

      <td>2室1厅</td>

      <td>74.0</td>

      <td>7000.0</td>

      <td>中楼层(共18层)</td>

      <td>1996年建塔楼</td>

      <td>东南</td>

      <td>2017.07.27</td>

      <td>27.0</td>

      <td>距离6号线慈寿寺站1166米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101827666.html</td>

      <td>22</td>

      <td>94.594595</td>

      <td>1</td>

      <td>慈寿寺站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>17</th>

      <td>甘家口租房</td>

      <td>建设部大院</td>

      <td>建设部大院  乙子区铁道部2001年楼龄  高楼层  精装修</td>

      <td>3室1厅</td>

      <td>100.0</td>

      <td>13000.0</td>

      <td>中楼层(共24层)</td>

      <td>2000年建塔楼</td>

      <td>西 北</td>

      <td>2017.07.26</td>

      <td>24.0</td>

      <td>距离6号线白石桥南站732米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101819163.html</td>

      <td>18</td>

      <td>130.000000</td>

      <td>1</td>

      <td>白石桥南站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>18</th>

      <td>北苑租房</td>

      <td>新街坊</td>

      <td>地铁5号线、精装修一改二，看房方便</td>

      <td>2室1厅</td>

      <td>57.0</td>

      <td>5500.0</td>

      <td>低楼层(共18层)</td>

      <td>2004年建板塔结合</td>

      <td>东</td>

      <td>2017.07.27</td>

      <td>19.0</td>

      <td>距离5号线北苑路北站1130米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101822606.html</td>

      <td>14</td>

      <td>96.491228</td>

      <td>1</td>

      <td>北苑路北站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>19</th>

      <td>四季青租房</td>

      <td>绿波漫板</td>

      <td>绿波漫板 东北向开间 带燃气 带家具家电 舒适宜人</td>

      <td>1室0厅</td>

      <td>43.0</td>

      <td>5200.0</td>

      <td>中楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>东 北</td>

      <td>2017.07.20</td>

      <td>41.0</td>

      <td>距离6号线慈寿寺站667米 随时看房 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101811584.html</td>

      <td>14</td>

      <td>120.930233</td>

      <td>0</td>

      <td>慈寿寺站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>20</th>

      <td>望京租房</td>

      <td>宝星园一区</td>

      <td>大四居室   低于市场价  可办公 可居家</td>

      <td>4室2厅</td>

      <td>217.0</td>

      <td>15000.0</td>

      <td>低楼层(共23层)</td>

      <td>2003年建塔楼</td>

      <td>南</td>

      <td>2017.07.23</td>

      <td>32.0</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101603861.html</td>

      <td>15</td>

      <td>69.124424</td>

      <td>0</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>21</th>

      <td>望京租房</td>

      <td>融科橄榄城三期</td>

      <td>融科两居室，精装家具家电齐全，随时入住，采光好</td>

      <td>2室1厅</td>

      <td>95.0</td>

      <td>12000.0</td>

      <td>低楼层(共27层)</td>

      <td>2009年建板楼</td>

      <td>南</td>

      <td>2017.07.19</td>

      <td>32.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101641236.html</td>

      <td>9</td>

      <td>126.315789</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>22</th>

      <td>酒仙桥租房</td>

      <td>卡布其诺</td>

      <td>全南两居 东西通透 直观小区花园 观景房</td>

      <td>2室1厅</td>

      <td>90.0</td>

      <td>8800.0</td>

      <td>中楼层(共9层)</td>

      <td>2005年建板楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>50.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101712757.html</td>

      <td>13</td>

      <td>97.777778</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>23</th>

      <td>官园租房</td>

      <td>官苑8号</td>

      <td>官苑8号 精装西南三居可以长租，看房随时</td>

      <td>3室2厅</td>

      <td>121.0</td>

      <td>21500.0</td>

      <td>中楼层(共16层)</td>

      <td>2007年建板塔结合</td>

      <td>南 西</td>

      <td>2017.07.25</td>

      <td>61.0</td>

      <td>距离2号线车公庄站773米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101583407.html</td>

      <td>11</td>

      <td>177.685950</td>

      <td>1</td>

      <td>车公庄站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>24</th>

      <td>北大地租房</td>

      <td>西安街4号院</td>

      <td>精装三改二大两居 南北通透 希望客户能把它当自己的家</td>

      <td>2室1厅</td>

      <td>83.0</td>

      <td>4500.0</td>

      <td>高楼层(共6层)</td>

      <td>1989年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>27.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101601709.html</td>

      <td>29</td>

      <td>54.216867</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>25</th>

      <td>回龙观租房</td>

      <td>佰嘉城</td>

      <td>佰嘉城一层三居室 户型方正 南北通透</td>

      <td>3室1厅</td>

      <td>119.0</td>

      <td>6300.0</td>

      <td>低楼层(共6层)</td>

      <td>2006年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>25.0</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101726428.html</td>

      <td>12</td>

      <td>52.941176</td>

      <td>0</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>26</th>

      <td>广安门租房</td>

      <td>朗琴园</td>

      <td>广安门朗琴园精装开间 随时入住 交通方便</td>

      <td>1室0厅</td>

      <td>58.0</td>

      <td>5600.0</td>

      <td>中楼层(共29层)</td>

      <td>2006年建塔楼</td>

      <td>西</td>

      <td>2017.07.25</td>

      <td>30.0</td>

      <td>距离7号线达官营站731米 随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101692994.html</td>

      <td>12</td>

      <td>96.551724</td>

      <td>0</td>

      <td>达官营站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>27</th>

      <td>鼓楼大街租房</td>

      <td>金隅万科城</td>

      <td>金隅万科城 三居室 家具家电齐全 诚意出租</td>

      <td>3室1厅</td>

      <td>88.0</td>

      <td>4800.0</td>

      <td>低楼层(共26层)</td>

      <td>2012年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>31.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101612398.html</td>

      <td>6</td>

      <td>54.545455</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>28</th>

      <td>紫竹桥租房</td>

      <td>西三环北路89号院</td>

      <td>花园桥 南北两居 家具家电齐全 拎包入住</td>

      <td>2室1厅</td>

      <td>54.0</td>

      <td>6000.0</td>

      <td>高楼层(共6层)</td>

      <td>1987年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>31.0</td>

      <td>距离6号线花园桥站620米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101567440.html</td>

      <td>31</td>

      <td>111.111111</td>

      <td>1</td>

      <td>花园桥站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>29</th>

      <td>六里桥租房</td>

      <td>京铁家园</td>

      <td>地铁1号线五棵松站 京铁家园精装两居室 东南向 有钥匙</td>

      <td>2室1厅</td>

      <td>107.0</td>

      <td>6000.0</td>

      <td>中楼层(共22层)</td>

      <td>2002年建塔楼</td>

      <td>东南</td>

      <td>2017.07.22</td>

      <td>32.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101647855.html</td>

      <td>16</td>

      <td>56.074766</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>...</th>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

    </tr>

    <tr>

      <th>2730</th>

      <td>安定门租房</td>

      <td>朗家胡同13号院</td>

      <td>安定门内 南北通透一居室 家具家电齐全</td>

      <td>1室1厅</td>

      <td>40.0</td>

      <td>4500.0</td>

      <td>高楼层(共6层)</td>

      <td>1990年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>11.0</td>

      <td>距离2号线鼓楼大街站774米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739270.html</td>

      <td>28</td>

      <td>112.500000</td>

      <td>1</td>

      <td>鼓楼大街站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2731</th>

      <td>东关租房</td>

      <td>清秀园北区</td>

      <td>楼龄新，精装修，可直接拎包入住</td>

      <td>1室0厅</td>

      <td>59.0</td>

      <td>2500.0</td>

      <td>高楼层(共19层)</td>

      <td>2003年建塔楼</td>

      <td>西</td>

      <td>2017.07.27</td>

      <td>15.0</td>

      <td>距离昌平线昌平站810米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739341.html</td>

      <td>15</td>

      <td>42.372881</td>

      <td>1</td>

      <td>None</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2732</th>

      <td>西坝河租房</td>

      <td>光熙门北里</td>

      <td>光熙门北里 3室1厅 7300元</td>

      <td>3室1厅</td>

      <td>68.0</td>

      <td>7300.0</td>

      <td>低楼层(共22层)</td>

      <td>1991年建塔楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>12.0</td>

      <td>距离13号线光熙门站471米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739485.html</td>

      <td>27</td>

      <td>107.352941</td>

      <td>1</td>

      <td>光熙门站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2733</th>

      <td>建国门外租房</td>

      <td>地杰长安驿</td>

      <td>东二环 地杰长安驿 南向高层开间</td>

      <td>1室0厅</td>

      <td>45.0</td>

      <td>8500.0</td>

      <td>中楼层(共27层)</td>

      <td>2007年建塔楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>9.0</td>

      <td>距离1号线永安里站712米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739616.html</td>

      <td>11</td>

      <td>188.888889</td>

      <td>1</td>

      <td>永安里站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2734</th>

      <td>临河里租房</td>

      <td>海棠湾二期</td>

      <td>海棠湾精装两居随时看房随时签约拎包入住</td>

      <td>2室1厅</td>

      <td>88.0</td>

      <td>5500.0</td>

      <td>中楼层(共20层)</td>

      <td>2011年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.16</td>

      <td>10.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739983.html</td>

      <td>7</td>

      <td>62.500000</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>2735</th>

      <td>滨河西区租房</td>

      <td>永兴小区</td>

      <td>永兴小区  南北向       两 居室</td>

      <td>2室1厅</td>

      <td>79.0</td>

      <td>2900.0</td>

      <td>高楼层(共6层)</td>

      <td>2000年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>9.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101735385.html</td>

      <td>18</td>

      <td>36.708861</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>2736</th>

      <td>定福庄租房</td>

      <td>妇联小区</td>

      <td>东南朝向，装修较好，通风比较好。</td>

      <td>1室1厅</td>

      <td>46.0</td>

      <td>3500.0</td>

      <td>低楼层(共16层)</td>

      <td>1995年建塔楼</td>

      <td>东南</td>

      <td>2017.07.23</td>

      <td>16.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101738106.html</td>

      <td>23</td>

      <td>76.086957</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>2737</th>

      <td>公主坟租房</td>

      <td>水利新宿舍</td>

      <td>水利新宿舍东南朝向大两居复式结构带出租车位</td>

      <td>2室2厅</td>

      <td>138.0</td>

      <td>15000.0</td>

      <td>低楼层(共28层)</td>

      <td>1995年建塔楼</td>

      <td>东南</td>

      <td>2017.07.27</td>

      <td>9.0</td>

      <td>距离1号线公主坟站748米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101705949.html</td>

      <td>23</td>

      <td>108.695652</td>

      <td>1</td>

      <td>公主坟站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2738</th>

      <td>良乡租房</td>

      <td>北潞春家园</td>

      <td>北潞春家园 5室3厅 4500元</td>

      <td>5室3厅</td>

      <td>196.0</td>

      <td>4500.0</td>

      <td>高楼层(共6层)</td>

      <td>2000年建板楼</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>10.0</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101631061.html</td>

      <td>18</td>

      <td>22.959184</td>

      <td>0</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>2739</th>

      <td>西关环岛租房</td>

      <td>秋实家园</td>

      <td>精装修，南北通透两居室，家具家电齐全</td>

      <td>2室1厅</td>

      <td>81.0</td>

      <td>2300.0</td>

      <td>高楼层(共5层)</td>

      <td>2002年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>7.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101632293.html</td>

      <td>16</td>

      <td>28.395062</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>2740</th>

      <td>酒仙桥租房</td>

      <td>丽都水岸</td>

      <td>丽都水岸小区，一层带花园三居室</td>

      <td>3室2厅</td>

      <td>167.0</td>

      <td>25000.0</td>

      <td>低楼层(共20层)</td>

      <td>2005年建塔楼</td>

      <td>东南 西北</td>

      <td>2017.07.20</td>

      <td>9.0</td>

      <td>距离14号线(东段)将台站648米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101636553.html</td>

      <td>13</td>

      <td>149.700599</td>

      <td>1</td>

      <td>(东段)将台站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2741</th>

      <td>潞苑租房</td>

      <td>上潞园</td>

      <td>上潞园精装一居改两居室  业主诚租看房方便</td>

      <td>2室1厅</td>

      <td>57.0</td>

      <td>2200.0</td>

      <td>高楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>东</td>

      <td>2017.07.25</td>

      <td>5.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101655660.html</td>

      <td>14</td>

      <td>38.596491</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>2742</th>

      <td>良乡租房</td>

      <td>嘉瑞通小区</td>

      <td>嘉瑞通小区 2室1厅 2600元</td>

      <td>2室1厅</td>

      <td>92.0</td>

      <td>2600.0</td>

      <td>低楼层(共15层)</td>

      <td>2006年建塔楼</td>

      <td>南 西</td>

      <td>2017.07.19</td>

      <td>13.0</td>

      <td>距离房山线良乡南关站165米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101660289.html</td>

      <td>12</td>

      <td>28.260870</td>

      <td>1</td>

      <td>None</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2743</th>

      <td>朝青租房</td>

      <td>银谷美泉家园</td>

      <td>朝青 花园社区 银谷美泉 精装三居</td>

      <td>3室2厅</td>

      <td>142.0</td>

      <td>13000.0</td>

      <td>中楼层(共7层)</td>

      <td>2008年建板楼</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>6.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101584316.html</td>

      <td>10</td>

      <td>91.549296</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>2744</th>

      <td>朝青租房</td>

      <td>润枫水尚</td>

      <td>润枫水尚 2室1厅 10000元</td>

      <td>2室1厅</td>

      <td>121.0</td>

      <td>10000.0</td>

      <td>低楼层(共14层)</td>

      <td>2008年建板楼</td>

      <td>南 北</td>

      <td>2017.07.21</td>

      <td>34.0</td>

      <td>距离6号线青年路站829米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101283618.html</td>

      <td>10</td>

      <td>82.644628</td>

      <td>1</td>

      <td>青年路站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2745</th>

      <td>新宫租房</td>

      <td>飞腾家园</td>

      <td>飞腾家园 3室1厅 4000元</td>

      <td>3室1厅</td>

      <td>91.0</td>

      <td>4000.0</td>

      <td>高楼层(共6层)</td>

      <td>2004年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>17.0</td>

      <td>随时看房 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101677753.html</td>

      <td>14</td>

      <td>43.956044</td>

      <td>0</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>2746</th>

      <td>奥林匹克公园租房</td>

      <td>京师园</td>

      <td>京师园 3室1厅 14000元</td>

      <td>3室1厅</td>

      <td>147.0</td>

      <td>14000.0</td>

      <td>低楼层(共21层)</td>

      <td>2004年建板塔结合</td>

      <td>东 南</td>

      <td>2017.07.20</td>

      <td>13.0</td>

      <td>距离8号线林萃桥站781米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101692633.html</td>

      <td>14</td>

      <td>95.238095</td>

      <td>1</td>

      <td>林萃桥站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2747</th>

      <td>朝青租房</td>

      <td>青年汇佳园</td>

      <td>青年汇佳园一居室诚意出租七月到期</td>

      <td>1室1厅</td>

      <td>65.0</td>

      <td>6300.0</td>

      <td>低楼层(共13层)</td>

      <td>2008年建板塔结合</td>

      <td>南 西 北</td>

      <td>2017.07.26</td>

      <td>17.0</td>

      <td>距离6号线青年路站458米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101693532.html</td>

      <td>10</td>

      <td>96.923077</td>

      <td>1</td>

      <td>青年路站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2748</th>

      <td>九棵树(家乐福)租房</td>

      <td>大方居</td>

      <td>大方居简装西向两居室 家电家具齐</td>

      <td>2室1厅</td>

      <td>89.0</td>

      <td>3100.0</td>

      <td>低楼层(共22层)</td>

      <td>2008年建板塔结合</td>

      <td>西</td>

      <td>2017.07.26</td>

      <td>9.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101694062.html</td>

      <td>10</td>

      <td>34.831461</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>2749</th>

      <td>天通苑租房</td>

      <td>天通苑北二区</td>

      <td>天通苑北二区电梯高层 精装修 观景高层</td>

      <td>2室1厅</td>

      <td>103.0</td>

      <td>5000.0</td>

      <td>高楼层(共12层)</td>

      <td>2005年建板楼</td>

      <td>西南</td>

      <td>2017.07.27</td>

      <td>14.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101694097.html</td>

      <td>13</td>

      <td>48.543689</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>2750</th>

      <td>朝阳门外租房</td>

      <td>麒麟公馆</td>

      <td>麒麟公馆 2室1厅 18500元</td>

      <td>2室1厅</td>

      <td>95.0</td>

      <td>18500.0</td>

      <td>低楼层(共24层)</td>

      <td>2010年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.23</td>

      <td>14.0</td>

      <td>距离2号线朝阳门站801米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101696313.html</td>

      <td>8</td>

      <td>194.736842</td>

      <td>1</td>

      <td>朝阳门站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2751</th>

      <td>芍药居租房</td>

      <td>芍药居</td>

      <td>芍药居 中煤信息大厦 精装南北2居 有车位</td>

      <td>2室1厅</td>

      <td>75.0</td>

      <td>7500.0</td>

      <td>高楼层(共14层)</td>

      <td>2000年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.18</td>

      <td>7.0</td>

      <td>距离13号线芍药居站947米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101696415.html</td>

      <td>18</td>

      <td>100.000000</td>

      <td>1</td>

      <td>芍药居站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2752</th>

      <td>双榆树租房</td>

      <td>双榆树东里</td>

      <td>南北通透三居室，业主可以接受长租，家具家电齐全</td>

      <td>3室1厅</td>

      <td>81.0</td>

      <td>10000.0</td>

      <td>中楼层(共12层)</td>

      <td>1990年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.19</td>

      <td>8.0</td>

      <td>距离4号线人民大学站735米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697415.html</td>

      <td>28</td>

      <td>123.456790</td>

      <td>1</td>

      <td>人民大学站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2753</th>

      <td>红庙租房</td>

      <td>延静里中街</td>

      <td>房子是双南向的小两居 ，楼层低，最重要的是价格低</td>

      <td>2室0厅</td>

      <td>46.0</td>

      <td>5200.0</td>

      <td>低楼层(共6层)</td>

      <td>1984年建板楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>13.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697453.html</td>

      <td>34</td>

      <td>113.043478</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>2754</th>

      <td>西三旗租房</td>

      <td>知本时代</td>

      <td>知本时代精装北向开间，有电梯，距离地铁近，看房方便</td>

      <td>1室0厅</td>

      <td>42.0</td>

      <td>4000.0</td>

      <td>高楼层(共15层)</td>

      <td>2003年建板塔结合</td>

      <td>北</td>

      <td>2017.07.27</td>

      <td>16.0</td>

      <td>距离8号线霍营站1144米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697749.html</td>

      <td>15</td>

      <td>95.238095</td>

      <td>1</td>

      <td>霍营站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2755</th>

      <td>朝青租房</td>

      <td>天鹅湾北区</td>

      <td>天鹅湾北区 1室1厅 9500元</td>

      <td>1室1厅</td>

      <td>50.0</td>

      <td>9500.0</td>

      <td>中楼层(共8层)</td>

      <td>2010年建板塔结合</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>13.0</td>

      <td>距离6号线青年路站736米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697995.html</td>

      <td>8</td>

      <td>190.000000</td>

      <td>1</td>

      <td>青年路站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2756</th>

      <td>太阳宫租房</td>

      <td>水星园</td>

      <td>水星园精装一居室  可自带家具家电 业主也可配齐</td>

      <td>1室1厅</td>

      <td>68.0</td>

      <td>9500.0</td>

      <td>中楼层(共23层)</td>

      <td>2005年建板塔结合</td>

      <td>北</td>

      <td>2017.07.24</td>

      <td>14.0</td>

      <td>距离10号线太阳宫站432米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101698013.html</td>

      <td>13</td>

      <td>139.705882</td>

      <td>1</td>

      <td>太阳宫站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2757</th>

      <td>六里桥租房</td>

      <td>莲花小区</td>

      <td>莲花小区 西南两居室 温馨舒适 楼层合适</td>

      <td>2室1厅</td>

      <td>84.0</td>

      <td>7200.0</td>

      <td>低楼层(共28层)</td>

      <td>1999年建板塔结合</td>

      <td>西南</td>

      <td>2017.07.26</td>

      <td>7.0</td>

      <td>距离10号线莲花桥站661米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101702130.html</td>

      <td>19</td>

      <td>85.714286</td>

      <td>1</td>

      <td>莲花桥站</td>

      <td>1</td>

    </tr>

    <tr>

      <th>2758</th>

      <td>陶然亭租房</td>

      <td>中海紫御公馆</td>

      <td>中海紫御公馆  把您的家安放在花园里</td>

      <td>2室2厅</td>

      <td>91.0</td>

      <td>12000.0</td>

      <td>中楼层(共22层)</td>

      <td>2010年建板塔结合</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>6.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101703605.html</td>

      <td>8</td>

      <td>131.868132</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

    </tr>

    <tr>

      <th>2759</th>

      <td>三元桥租房</td>

      <td>曙光里</td>

      <td>曙光里南向 高层两居室 随时看房</td>

      <td>2室1厅</td>

      <td>62.0</td>

      <td>6200.0</td>

      <td>高楼层(共18层)</td>

      <td>1992年建塔楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>19.0</td>

      <td>距离机场线三元桥站980米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101704735.html</td>

      <td>26</td>

      <td>100.000000</td>

      <td>1</td>

      <td>None</td>

      <td>1</td>

    </tr>

  </tbody>

</table>

<p>2760 rows × 18 columns</p>

</div>



<pre><code>df[[&#39;price&#39;, &#39;has_sub_station&#39;]].groupby(&#39;has_sub_station&#39;).agg({&#39;price&#39;:&#39;mean&#39;}).diff()
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }


</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>price</th>

    </tr>

    <tr>

      <th>has_sub_station</th>

      <th></th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>0</th>

      <td>NaN</td>

    </tr>

    <tr>

      <th>1</th>

      <td>2414.364014</td>

    </tr>

  </tbody>

</table>

</div>



<p>地铁附近的房源离地铁平均距离</p>
<p>格式：距离10号线莲花桥站661米 随时看房 集中供暖</p>
<pre><code>def sub_distance(x):
    pat=&#39;距离(\d+)号线(.*?)站(\d+)米 &#39;
    try:
        return int(re.search(pat, x).group(3))
    except:
        return None

df[&#39;extra_info&#39;].apply(sub_distance).mean()



709.1182364729459
</code></pre><p>最多的在租楼层</p>
<p>最多的在租楼层</p>
<pre><code>df[&#39;floor1&#39;]=df[&#39;floor&#39;].apply(lambda x: x[:3])

df.groupby(&#39;floor1&#39;).size()



floor1
中楼层    1026
低楼层     798
地下室       4
高楼层     932
dtype: int64




```python
def get_floor(x):
    if &#39;低楼层&#39; in x:
        return &#39;低楼层&#39;
    elif &#39;中楼层&#39; in x:
        return &#39;中楼层&#39;
    else:
        return &#39;高楼层&#39;

df.loc[:, &#39;floor&#39;] = df[&#39;floor&#39;].apply(get_floor)
df
</code></pre><div>

<style>

    .dataframe thead tr:only-child th {

        text-align: right;

    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }


</style>

<table border="1" class="dataframe">

  <thead>

    <tr style="text-align: right;">

      <th></th>

      <th>district</th>

      <th>address</th>

      <th>title</th>

      <th>house_type</th>

      <th>area</th>

      <th>price</th>

      <th>floor</th>

      <th>build_time</th>

      <th>direction</th>

      <th>update_time</th>

      <th>view_num</th>

      <th>extra_info</th>

      <th>link</th>

      <th>house_age</th>

      <th>price_per_m2</th>

      <th>center_heating</th>

      <th>sub_station</th>

      <th>has_sub_station</th>

      <th>floor1</th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <th>0</th>

      <td>燕莎租房</td>

      <td>新源街</td>

      <td>亮马桥 新源街  精装两居 交通便利 看房方便 随时入住</td>

      <td>2室1厅</td>

      <td>50.0</td>

      <td>5800.0</td>

      <td>中楼层</td>

      <td>1981年建板楼</td>

      <td>南</td>

      <td>2017.07.21</td>

      <td>26.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101803342.html</td>

      <td>37</td>

      <td>116.000000</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

      <td>中楼层</td>

    </tr>

    <tr>

      <th>1</th>

      <td>望京租房</td>

      <td>澳洲康都</td>

      <td>澳洲康都东向精致两居室...........</td>

      <td>2室1厅</td>

      <td>79.0</td>

      <td>7800.0</td>

      <td>中楼层</td>

      <td>2005年建板塔结合</td>

      <td>东</td>

      <td>2017.07.23</td>

      <td>33.0</td>

      <td>距离14号线(东段)东湖渠站731米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101753126.html</td>

      <td>13</td>

      <td>98.734177</td>

      <td>1</td>

      <td>(东段)东湖渠站</td>

      <td>1</td>

      <td>中楼层</td>

    </tr>

    <tr>

      <th>2</th>

      <td>广安门租房</td>

      <td>远见名苑</td>

      <td>远见名苑 东向两居室 独立小区环境 适合居家</td>

      <td>2室1厅</td>

      <td>86.0</td>

      <td>8000.0</td>

      <td>低楼层</td>

      <td>2006年建塔楼</td>

      <td>东</td>

      <td>2017.07.20</td>

      <td>34.0</td>

      <td>距离7号线达官营站684米 随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101756753.html</td>

      <td>12</td>

      <td>93.023256</td>

      <td>0</td>

      <td>达官营站</td>

      <td>1</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>3</th>

      <td>天通苑租房</td>

      <td>天通苑北一区</td>

      <td>北一区简装两居，采光好，视野美，出行方便</td>

      <td>2室1厅</td>

      <td>103.0</td>

      <td>5300.0</td>

      <td>低楼层</td>

      <td>2004年建板楼</td>

      <td>东南</td>

      <td>2017.07.25</td>

      <td>30.0</td>

      <td>距离5号线天通苑站927米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101780034.html</td>

      <td>14</td>

      <td>51.456311</td>

      <td>1</td>

      <td>天通苑站</td>

      <td>1</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>4</th>

      <td>团结湖租房</td>

      <td>团结湖北口</td>

      <td>团结湖北口近地铁高楼层朝南向精装修正规两居室</td>

      <td>2室1厅</td>

      <td>63.0</td>

      <td>6400.0</td>

      <td>高楼层</td>

      <td>1982年建塔楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>30.0</td>

      <td>距离10号线团结湖站88米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101781083.html</td>

      <td>36</td>

      <td>101.587302</td>

      <td>1</td>

      <td>团结湖站</td>

      <td>1</td>

      <td>高楼层</td>

    </tr>

    <tr>

      <th>5</th>

      <td>回龙观租房</td>

      <td>龙华园</td>

      <td>龙泽龙华园57平低楼层一居室家具家电齐全拎包入住</td>

      <td>1室1厅</td>

      <td>58.0</td>

      <td>4000.0</td>

      <td>低楼层</td>

      <td>1994年建板楼</td>

      <td>南</td>

      <td>2017.07.23</td>

      <td>61.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101748994.html</td>

      <td>24</td>

      <td>68.965517</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>6</th>

      <td>北苑租房</td>

      <td>筑华年</td>

      <td>筑华年西南小三居 靠谱出租 看房方便有钥匙</td>

      <td>3室1厅</td>

      <td>89.0</td>

      <td>7500.0</td>

      <td>高楼层</td>

      <td>2012年建板楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>29.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101767631.html</td>

      <td>6</td>

      <td>84.269663</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

      <td>高楼层</td>

    </tr>

    <tr>

      <th>7</th>

      <td>马甸租房</td>

      <td>月季园</td>

      <td>10号牡丹园站月季园小区 拎包入住 离梦想更近一点</td>

      <td>2室1厅</td>

      <td>53.0</td>

      <td>6000.0</td>

      <td>低楼层</td>

      <td>1997年建塔楼</td>

      <td>南</td>

      <td>2017.07.16</td>

      <td>26.0</td>

      <td>距离10号线牡丹园站580米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101763532.html</td>

      <td>21</td>

      <td>113.207547</td>

      <td>1</td>

      <td>牡丹园站</td>

      <td>1</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>8</th>

      <td>小西天租房</td>

      <td>今典花园</td>

      <td>花园社区，西直门 今典花园精装两居，诚心出售。</td>

      <td>2室1厅</td>

      <td>73.0</td>

      <td>8500.0</td>

      <td>中楼层</td>

      <td>2004年建塔楼</td>

      <td>西</td>

      <td>2017.07.23</td>

      <td>44.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101758850.html</td>

      <td>14</td>

      <td>116.438356</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

      <td>中楼层</td>

    </tr>

    <tr>

      <th>9</th>

      <td>北苑租房</td>

      <td>北苑家园绣菊园</td>

      <td>北苑东南两居室，可改三居 业主随时签约</td>

      <td>2室1厅</td>

      <td>82.0</td>

      <td>5300.0</td>

      <td>低楼层</td>

      <td>2000年建塔楼</td>

      <td>东南</td>

      <td>2017.07.26</td>

      <td>30.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101779767.html</td>

      <td>18</td>

      <td>64.634146</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>10</th>

      <td>和平里租房</td>

      <td>甘水桥</td>

      <td>北三环里   蒋宅口   安外甘水桥   正规三居室</td>

      <td>3室1厅</td>

      <td>76.0</td>

      <td>7600.0</td>

      <td>高楼层</td>

      <td>1988年建板塔结合</td>

      <td>东 西</td>

      <td>2017.07.26</td>

      <td>24.0</td>

      <td>距离5号线和平里北街站1198米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101753337.html</td>

      <td>30</td>

      <td>100.000000</td>

      <td>1</td>

      <td>和平里北街站</td>

      <td>1</td>

      <td>高楼层</td>

    </tr>

    <tr>

      <th>11</th>

      <td>健翔桥租房</td>

      <td>华严北里中科院</td>

      <td>中科院 双南向 二居室 看房方便</td>

      <td>2室1厅</td>

      <td>60.0</td>

      <td>6300.0</td>

      <td>中楼层</td>

      <td>1988年建塔楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>27.0</td>

      <td>距离10号线健德门站1056米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101758776.html</td>

      <td>30</td>

      <td>105.000000</td>

      <td>1</td>

      <td>健德门站</td>

      <td>1</td>

      <td>中楼层</td>

    </tr>

    <tr>

      <th>12</th>

      <td>看丹桥租房</td>

      <td>新华街七里</td>

      <td>低楼层带电梯两居室，交通便利，家电齐全</td>

      <td>2室1厅</td>

      <td>65.0</td>

      <td>4500.0</td>

      <td>低楼层</td>

      <td>2000年建塔楼</td>

      <td>西北</td>

      <td>2017.07.22</td>

      <td>27.0</td>

      <td>距离9号线丰台南路站924米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101762732.html</td>

      <td>18</td>

      <td>69.230769</td>

      <td>1</td>

      <td>丰台南路站</td>

      <td>1</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>13</th>

      <td>朝阳门内租房</td>

      <td>朝阳首府</td>

      <td>商品房  24小时保安 刷卡进出</td>

      <td>2室2厅</td>

      <td>104.0</td>

      <td>14500.0</td>

      <td>高楼层</td>

      <td>2009年建塔楼</td>

      <td>东 东北</td>

      <td>2017.07.26</td>

      <td>34.0</td>

      <td>距离2号线朝阳门站94米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101755036.html</td>

      <td>9</td>

      <td>139.423077</td>

      <td>1</td>

      <td>朝阳门站</td>

      <td>1</td>

      <td>高楼层</td>

    </tr>

    <tr>

      <th>14</th>

      <td>双井租房</td>

      <td>富力城B区</td>

      <td>顶层大复式，带私人70平大露台，豪华装修，随时能看</td>

      <td>4室1厅</td>

      <td>253.0</td>

      <td>32000.0</td>

      <td>高楼层</td>

      <td>2004年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>18.0</td>

      <td>距离10号线双井站498米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101751322.html</td>

      <td>14</td>

      <td>126.482213</td>

      <td>1</td>

      <td>双井站</td>

      <td>1</td>

      <td>高楼层</td>

    </tr>

    <tr>

      <th>15</th>

      <td>刘家窑租房</td>

      <td>石榴园南里小区</td>

      <td>石榴园南里简装一居室，朝南采光好</td>

      <td>1室1厅</td>

      <td>47.0</td>

      <td>3700.0</td>

      <td>高楼层</td>

      <td>1997年建板楼</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>23.0</td>

      <td>距离10号线石榴庄站752米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101807363.html</td>

      <td>21</td>

      <td>78.723404</td>

      <td>1</td>

      <td>石榴庄站</td>

      <td>1</td>

      <td>高楼层</td>

    </tr>

    <tr>

      <th>16</th>

      <td>紫竹桥租房</td>

      <td>北洼西里</td>

      <td>北洼路北洼西里精装修两居出租随时看房</td>

      <td>2室1厅</td>

      <td>74.0</td>

      <td>7000.0</td>

      <td>中楼层</td>

      <td>1996年建塔楼</td>

      <td>东南</td>

      <td>2017.07.27</td>

      <td>27.0</td>

      <td>距离6号线慈寿寺站1166米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101827666.html</td>

      <td>22</td>

      <td>94.594595</td>

      <td>1</td>

      <td>慈寿寺站</td>

      <td>1</td>

      <td>中楼层</td>

    </tr>

    <tr>

      <th>17</th>

      <td>甘家口租房</td>

      <td>建设部大院</td>

      <td>建设部大院  乙子区铁道部2001年楼龄  高楼层  精装修</td>

      <td>3室1厅</td>

      <td>100.0</td>

      <td>13000.0</td>

      <td>中楼层</td>

      <td>2000年建塔楼</td>

      <td>西 北</td>

      <td>2017.07.26</td>

      <td>24.0</td>

      <td>距离6号线白石桥南站732米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101819163.html</td>

      <td>18</td>

      <td>130.000000</td>

      <td>1</td>

      <td>白石桥南站</td>

      <td>1</td>

      <td>中楼层</td>

    </tr>

    <tr>

      <th>18</th>

      <td>北苑租房</td>

      <td>新街坊</td>

      <td>地铁5号线、精装修一改二，看房方便</td>

      <td>2室1厅</td>

      <td>57.0</td>

      <td>5500.0</td>

      <td>低楼层</td>

      <td>2004年建板塔结合</td>

      <td>东</td>

      <td>2017.07.27</td>

      <td>19.0</td>

      <td>距离5号线北苑路北站1130米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101822606.html</td>

      <td>14</td>

      <td>96.491228</td>

      <td>1</td>

      <td>北苑路北站</td>

      <td>1</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>19</th>

      <td>四季青租房</td>

      <td>绿波漫板</td>

      <td>绿波漫板 东北向开间 带燃气 带家具家电 舒适宜人</td>

      <td>1室0厅</td>

      <td>43.0</td>

      <td>5200.0</td>

      <td>中楼层</td>

      <td>2004年建板楼</td>

      <td>东 北</td>

      <td>2017.07.20</td>

      <td>41.0</td>

      <td>距离6号线慈寿寺站667米 随时看房 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101811584.html</td>

      <td>14</td>

      <td>120.930233</td>

      <td>0</td>

      <td>慈寿寺站</td>

      <td>1</td>

      <td>中楼层</td>

    </tr>

    <tr>

      <th>20</th>

      <td>望京租房</td>

      <td>宝星园一区</td>

      <td>大四居室   低于市场价  可办公 可居家</td>

      <td>4室2厅</td>

      <td>217.0</td>

      <td>15000.0</td>

      <td>低楼层</td>

      <td>2003年建塔楼</td>

      <td>南</td>

      <td>2017.07.23</td>

      <td>32.0</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101603861.html</td>

      <td>15</td>

      <td>69.124424</td>

      <td>0</td>

      <td>None</td>

      <td>0</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>21</th>

      <td>望京租房</td>

      <td>融科橄榄城三期</td>

      <td>融科两居室，精装家具家电齐全，随时入住，采光好</td>

      <td>2室1厅</td>

      <td>95.0</td>

      <td>12000.0</td>

      <td>低楼层</td>

      <td>2009年建板楼</td>

      <td>南</td>

      <td>2017.07.19</td>

      <td>32.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101641236.html</td>

      <td>9</td>

      <td>126.315789</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>22</th>

      <td>酒仙桥租房</td>

      <td>卡布其诺</td>

      <td>全南两居 东西通透 直观小区花园 观景房</td>

      <td>2室1厅</td>

      <td>90.0</td>

      <td>8800.0</td>

      <td>中楼层</td>

      <td>2005年建板楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>50.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101712757.html</td>

      <td>13</td>

      <td>97.777778</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

      <td>中楼层</td>

    </tr>

    <tr>

      <th>23</th>

      <td>官园租房</td>

      <td>官苑8号</td>

      <td>官苑8号 精装西南三居可以长租，看房随时</td>

      <td>3室2厅</td>

      <td>121.0</td>

      <td>21500.0</td>

      <td>中楼层</td>

      <td>2007年建板塔结合</td>

      <td>南 西</td>

      <td>2017.07.25</td>

      <td>61.0</td>

      <td>距离2号线车公庄站773米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101583407.html</td>

      <td>11</td>

      <td>177.685950</td>

      <td>1</td>

      <td>车公庄站</td>

      <td>1</td>

      <td>中楼层</td>

    </tr>

    <tr>

      <th>24</th>

      <td>北大地租房</td>

      <td>西安街4号院</td>

      <td>精装三改二大两居 南北通透 希望客户能把它当自己的家</td>

      <td>2室1厅</td>

      <td>83.0</td>

      <td>4500.0</td>

      <td>高楼层</td>

      <td>1989年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>27.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101601709.html</td>

      <td>29</td>

      <td>54.216867</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

      <td>高楼层</td>

    </tr>

    <tr>

      <th>25</th>

      <td>回龙观租房</td>

      <td>佰嘉城</td>

      <td>佰嘉城一层三居室 户型方正 南北通透</td>

      <td>3室1厅</td>

      <td>119.0</td>

      <td>6300.0</td>

      <td>低楼层</td>

      <td>2006年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>25.0</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101726428.html</td>

      <td>12</td>

      <td>52.941176</td>

      <td>0</td>

      <td>None</td>

      <td>0</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>26</th>

      <td>广安门租房</td>

      <td>朗琴园</td>

      <td>广安门朗琴园精装开间 随时入住 交通方便</td>

      <td>1室0厅</td>

      <td>58.0</td>

      <td>5600.0</td>

      <td>中楼层</td>

      <td>2006年建塔楼</td>

      <td>西</td>

      <td>2017.07.25</td>

      <td>30.0</td>

      <td>距离7号线达官营站731米 随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101692994.html</td>

      <td>12</td>

      <td>96.551724</td>

      <td>0</td>

      <td>达官营站</td>

      <td>1</td>

      <td>中楼层</td>

    </tr>

    <tr>

      <th>27</th>

      <td>鼓楼大街租房</td>

      <td>金隅万科城</td>

      <td>金隅万科城 三居室 家具家电齐全 诚意出租</td>

      <td>3室1厅</td>

      <td>88.0</td>

      <td>4800.0</td>

      <td>低楼层</td>

      <td>2012年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>31.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101612398.html</td>

      <td>6</td>

      <td>54.545455</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>28</th>

      <td>紫竹桥租房</td>

      <td>西三环北路89号院</td>

      <td>花园桥 南北两居 家具家电齐全 拎包入住</td>

      <td>2室1厅</td>

      <td>54.0</td>

      <td>6000.0</td>

      <td>高楼层</td>

      <td>1987年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>31.0</td>

      <td>距离6号线花园桥站620米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101567440.html</td>

      <td>31</td>

      <td>111.111111</td>

      <td>1</td>

      <td>花园桥站</td>

      <td>1</td>

      <td>高楼层</td>

    </tr>

    <tr>

      <th>29</th>

      <td>六里桥租房</td>

      <td>京铁家园</td>

      <td>地铁1号线五棵松站 京铁家园精装两居室 东南向 有钥匙</td>

      <td>2室1厅</td>

      <td>107.0</td>

      <td>6000.0</td>

      <td>中楼层</td>

      <td>2002年建塔楼</td>

      <td>东南</td>

      <td>2017.07.22</td>

      <td>32.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101647855.html</td>

      <td>16</td>

      <td>56.074766</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

      <td>中楼层</td>

    </tr>

    <tr>

      <th>...</th>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

      <td>...</td>

    </tr>

    <tr>

      <th>2730</th>

      <td>安定门租房</td>

      <td>朗家胡同13号院</td>

      <td>安定门内 南北通透一居室 家具家电齐全</td>

      <td>1室1厅</td>

      <td>40.0</td>

      <td>4500.0</td>

      <td>高楼层</td>

      <td>1990年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>11.0</td>

      <td>距离2号线鼓楼大街站774米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739270.html</td>

      <td>28</td>

      <td>112.500000</td>

      <td>1</td>

      <td>鼓楼大街站</td>

      <td>1</td>

      <td>高楼层</td>

    </tr>

    <tr>

      <th>2731</th>

      <td>东关租房</td>

      <td>清秀园北区</td>

      <td>楼龄新，精装修，可直接拎包入住</td>

      <td>1室0厅</td>

      <td>59.0</td>

      <td>2500.0</td>

      <td>高楼层</td>

      <td>2003年建塔楼</td>

      <td>西</td>

      <td>2017.07.27</td>

      <td>15.0</td>

      <td>距离昌平线昌平站810米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739341.html</td>

      <td>15</td>

      <td>42.372881</td>

      <td>1</td>

      <td>None</td>

      <td>1</td>

      <td>高楼层</td>

    </tr>

    <tr>

      <th>2732</th>

      <td>西坝河租房</td>

      <td>光熙门北里</td>

      <td>光熙门北里 3室1厅 7300元</td>

      <td>3室1厅</td>

      <td>68.0</td>

      <td>7300.0</td>

      <td>低楼层</td>

      <td>1991年建塔楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>12.0</td>

      <td>距离13号线光熙门站471米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739485.html</td>

      <td>27</td>

      <td>107.352941</td>

      <td>1</td>

      <td>光熙门站</td>

      <td>1</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>2733</th>

      <td>建国门外租房</td>

      <td>地杰长安驿</td>

      <td>东二环 地杰长安驿 南向高层开间</td>

      <td>1室0厅</td>

      <td>45.0</td>

      <td>8500.0</td>

      <td>中楼层</td>

      <td>2007年建塔楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>9.0</td>

      <td>距离1号线永安里站712米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739616.html</td>

      <td>11</td>

      <td>188.888889</td>

      <td>1</td>

      <td>永安里站</td>

      <td>1</td>

      <td>中楼层</td>

    </tr>

    <tr>

      <th>2734</th>

      <td>临河里租房</td>

      <td>海棠湾二期</td>

      <td>海棠湾精装两居随时看房随时签约拎包入住</td>

      <td>2室1厅</td>

      <td>88.0</td>

      <td>5500.0</td>

      <td>中楼层</td>

      <td>2011年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.16</td>

      <td>10.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101739983.html</td>

      <td>7</td>

      <td>62.500000</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

      <td>中楼层</td>

    </tr>

    <tr>

      <th>2735</th>

      <td>滨河西区租房</td>

      <td>永兴小区</td>

      <td>永兴小区  南北向       两 居室</td>

      <td>2室1厅</td>

      <td>79.0</td>

      <td>2900.0</td>

      <td>高楼层</td>

      <td>2000年建板楼</td>

      <td>南 北</td>

      <td>2017.07.26</td>

      <td>9.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101735385.html</td>

      <td>18</td>

      <td>36.708861</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

      <td>高楼层</td>

    </tr>

    <tr>

      <th>2736</th>

      <td>定福庄租房</td>

      <td>妇联小区</td>

      <td>东南朝向，装修较好，通风比较好。</td>

      <td>1室1厅</td>

      <td>46.0</td>

      <td>3500.0</td>

      <td>低楼层</td>

      <td>1995年建塔楼</td>

      <td>东南</td>

      <td>2017.07.23</td>

      <td>16.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101738106.html</td>

      <td>23</td>

      <td>76.086957</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>2737</th>

      <td>公主坟租房</td>

      <td>水利新宿舍</td>

      <td>水利新宿舍东南朝向大两居复式结构带出租车位</td>

      <td>2室2厅</td>

      <td>138.0</td>

      <td>15000.0</td>

      <td>低楼层</td>

      <td>1995年建塔楼</td>

      <td>东南</td>

      <td>2017.07.27</td>

      <td>9.0</td>

      <td>距离1号线公主坟站748米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101705949.html</td>

      <td>23</td>

      <td>108.695652</td>

      <td>1</td>

      <td>公主坟站</td>

      <td>1</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>2738</th>

      <td>良乡租房</td>

      <td>北潞春家园</td>

      <td>北潞春家园 5室3厅 4500元</td>

      <td>5室3厅</td>

      <td>196.0</td>

      <td>4500.0</td>

      <td>高楼层</td>

      <td>2000年建板楼</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>10.0</td>

      <td>随时看房 精装修 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101631061.html</td>

      <td>18</td>

      <td>22.959184</td>

      <td>0</td>

      <td>None</td>

      <td>0</td>

      <td>高楼层</td>

    </tr>

    <tr>

      <th>2739</th>

      <td>西关环岛租房</td>

      <td>秋实家园</td>

      <td>精装修，南北通透两居室，家具家电齐全</td>

      <td>2室1厅</td>

      <td>81.0</td>

      <td>2300.0</td>

      <td>高楼层</td>

      <td>2002年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>7.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101632293.html</td>

      <td>16</td>

      <td>28.395062</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

      <td>高楼层</td>

    </tr>

    <tr>

      <th>2740</th>

      <td>酒仙桥租房</td>

      <td>丽都水岸</td>

      <td>丽都水岸小区，一层带花园三居室</td>

      <td>3室2厅</td>

      <td>167.0</td>

      <td>25000.0</td>

      <td>低楼层</td>

      <td>2005年建塔楼</td>

      <td>东南 西北</td>

      <td>2017.07.20</td>

      <td>9.0</td>

      <td>距离14号线(东段)将台站648米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101636553.html</td>

      <td>13</td>

      <td>149.700599</td>

      <td>1</td>

      <td>(东段)将台站</td>

      <td>1</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>2741</th>

      <td>潞苑租房</td>

      <td>上潞园</td>

      <td>上潞园精装一居改两居室  业主诚租看房方便</td>

      <td>2室1厅</td>

      <td>57.0</td>

      <td>2200.0</td>

      <td>高楼层</td>

      <td>2004年建板楼</td>

      <td>东</td>

      <td>2017.07.25</td>

      <td>5.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101655660.html</td>

      <td>14</td>

      <td>38.596491</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

      <td>高楼层</td>

    </tr>

    <tr>

      <th>2742</th>

      <td>良乡租房</td>

      <td>嘉瑞通小区</td>

      <td>嘉瑞通小区 2室1厅 2600元</td>

      <td>2室1厅</td>

      <td>92.0</td>

      <td>2600.0</td>

      <td>低楼层</td>

      <td>2006年建塔楼</td>

      <td>南 西</td>

      <td>2017.07.19</td>

      <td>13.0</td>

      <td>距离房山线良乡南关站165米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101660289.html</td>

      <td>12</td>

      <td>28.260870</td>

      <td>1</td>

      <td>None</td>

      <td>1</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>2743</th>

      <td>朝青租房</td>

      <td>银谷美泉家园</td>

      <td>朝青 花园社区 银谷美泉 精装三居</td>

      <td>3室2厅</td>

      <td>142.0</td>

      <td>13000.0</td>

      <td>中楼层</td>

      <td>2008年建板楼</td>

      <td>南 北</td>

      <td>2017.07.24</td>

      <td>6.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101584316.html</td>

      <td>10</td>

      <td>91.549296</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

      <td>中楼层</td>

    </tr>

    <tr>

      <th>2744</th>

      <td>朝青租房</td>

      <td>润枫水尚</td>

      <td>润枫水尚 2室1厅 10000元</td>

      <td>2室1厅</td>

      <td>121.0</td>

      <td>10000.0</td>

      <td>低楼层</td>

      <td>2008年建板楼</td>

      <td>南 北</td>

      <td>2017.07.21</td>

      <td>34.0</td>

      <td>距离6号线青年路站829米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101283618.html</td>

      <td>10</td>

      <td>82.644628</td>

      <td>1</td>

      <td>青年路站</td>

      <td>1</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>2745</th>

      <td>新宫租房</td>

      <td>飞腾家园</td>

      <td>飞腾家园 3室1厅 4000元</td>

      <td>3室1厅</td>

      <td>91.0</td>

      <td>4000.0</td>

      <td>高楼层</td>

      <td>2004年建板楼</td>

      <td>南 北</td>

      <td>2017.07.22</td>

      <td>17.0</td>

      <td>随时看房 自供暖</td>

      <td>https://bj.lianjia.com/zufang/101101677753.html</td>

      <td>14</td>

      <td>43.956044</td>

      <td>0</td>

      <td>None</td>

      <td>0</td>

      <td>高楼层</td>

    </tr>

    <tr>

      <th>2746</th>

      <td>奥林匹克公园租房</td>

      <td>京师园</td>

      <td>京师园 3室1厅 14000元</td>

      <td>3室1厅</td>

      <td>147.0</td>

      <td>14000.0</td>

      <td>低楼层</td>

      <td>2004年建板塔结合</td>

      <td>东 南</td>

      <td>2017.07.20</td>

      <td>13.0</td>

      <td>距离8号线林萃桥站781米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101692633.html</td>

      <td>14</td>

      <td>95.238095</td>

      <td>1</td>

      <td>林萃桥站</td>

      <td>1</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>2747</th>

      <td>朝青租房</td>

      <td>青年汇佳园</td>

      <td>青年汇佳园一居室诚意出租七月到期</td>

      <td>1室1厅</td>

      <td>65.0</td>

      <td>6300.0</td>

      <td>低楼层</td>

      <td>2008年建板塔结合</td>

      <td>南 西 北</td>

      <td>2017.07.26</td>

      <td>17.0</td>

      <td>距离6号线青年路站458米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101693532.html</td>

      <td>10</td>

      <td>96.923077</td>

      <td>1</td>

      <td>青年路站</td>

      <td>1</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>2748</th>

      <td>九棵树(家乐福)租房</td>

      <td>大方居</td>

      <td>大方居简装西向两居室 家电家具齐</td>

      <td>2室1厅</td>

      <td>89.0</td>

      <td>3100.0</td>

      <td>低楼层</td>

      <td>2008年建板塔结合</td>

      <td>西</td>

      <td>2017.07.26</td>

      <td>9.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101694062.html</td>

      <td>10</td>

      <td>34.831461</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>2749</th>

      <td>天通苑租房</td>

      <td>天通苑北二区</td>

      <td>天通苑北二区电梯高层 精装修 观景高层</td>

      <td>2室1厅</td>

      <td>103.0</td>

      <td>5000.0</td>

      <td>高楼层</td>

      <td>2005年建板楼</td>

      <td>西南</td>

      <td>2017.07.27</td>

      <td>14.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101694097.html</td>

      <td>13</td>

      <td>48.543689</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

      <td>高楼层</td>

    </tr>

    <tr>

      <th>2750</th>

      <td>朝阳门外租房</td>

      <td>麒麟公馆</td>

      <td>麒麟公馆 2室1厅 18500元</td>

      <td>2室1厅</td>

      <td>95.0</td>

      <td>18500.0</td>

      <td>低楼层</td>

      <td>2010年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.23</td>

      <td>14.0</td>

      <td>距离2号线朝阳门站801米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101696313.html</td>

      <td>8</td>

      <td>194.736842</td>

      <td>1</td>

      <td>朝阳门站</td>

      <td>1</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>2751</th>

      <td>芍药居租房</td>

      <td>芍药居</td>

      <td>芍药居 中煤信息大厦 精装南北2居 有车位</td>

      <td>2室1厅</td>

      <td>75.0</td>

      <td>7500.0</td>

      <td>高楼层</td>

      <td>2000年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.18</td>

      <td>7.0</td>

      <td>距离13号线芍药居站947米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101696415.html</td>

      <td>18</td>

      <td>100.000000</td>

      <td>1</td>

      <td>芍药居站</td>

      <td>1</td>

      <td>高楼层</td>

    </tr>

    <tr>

      <th>2752</th>

      <td>双榆树租房</td>

      <td>双榆树东里</td>

      <td>南北通透三居室，业主可以接受长租，家具家电齐全</td>

      <td>3室1厅</td>

      <td>81.0</td>

      <td>10000.0</td>

      <td>中楼层</td>

      <td>1990年建板塔结合</td>

      <td>南 北</td>

      <td>2017.07.19</td>

      <td>8.0</td>

      <td>距离4号线人民大学站735米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697415.html</td>

      <td>28</td>

      <td>123.456790</td>

      <td>1</td>

      <td>人民大学站</td>

      <td>1</td>

      <td>中楼层</td>

    </tr>

    <tr>

      <th>2753</th>

      <td>红庙租房</td>

      <td>延静里中街</td>

      <td>房子是双南向的小两居 ，楼层低，最重要的是价格低</td>

      <td>2室0厅</td>

      <td>46.0</td>

      <td>5200.0</td>

      <td>低楼层</td>

      <td>1984年建板楼</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>13.0</td>

      <td>随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697453.html</td>

      <td>34</td>

      <td>113.043478</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>2754</th>

      <td>西三旗租房</td>

      <td>知本时代</td>

      <td>知本时代精装北向开间，有电梯，距离地铁近，看房方便</td>

      <td>1室0厅</td>

      <td>42.0</td>

      <td>4000.0</td>

      <td>高楼层</td>

      <td>2003年建板塔结合</td>

      <td>北</td>

      <td>2017.07.27</td>

      <td>16.0</td>

      <td>距离8号线霍营站1144米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697749.html</td>

      <td>15</td>

      <td>95.238095</td>

      <td>1</td>

      <td>霍营站</td>

      <td>1</td>

      <td>高楼层</td>

    </tr>

    <tr>

      <th>2755</th>

      <td>朝青租房</td>

      <td>天鹅湾北区</td>

      <td>天鹅湾北区 1室1厅 9500元</td>

      <td>1室1厅</td>

      <td>50.0</td>

      <td>9500.0</td>

      <td>中楼层</td>

      <td>2010年建板塔结合</td>

      <td>南</td>

      <td>2017.07.27</td>

      <td>13.0</td>

      <td>距离6号线青年路站736米 随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101697995.html</td>

      <td>8</td>

      <td>190.000000</td>

      <td>1</td>

      <td>青年路站</td>

      <td>1</td>

      <td>中楼层</td>

    </tr>

    <tr>

      <th>2756</th>

      <td>太阳宫租房</td>

      <td>水星园</td>

      <td>水星园精装一居室  可自带家具家电 业主也可配齐</td>

      <td>1室1厅</td>

      <td>68.0</td>

      <td>9500.0</td>

      <td>中楼层</td>

      <td>2005年建板塔结合</td>

      <td>北</td>

      <td>2017.07.24</td>

      <td>14.0</td>

      <td>距离10号线太阳宫站432米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101698013.html</td>

      <td>13</td>

      <td>139.705882</td>

      <td>1</td>

      <td>太阳宫站</td>

      <td>1</td>

      <td>中楼层</td>

    </tr>

    <tr>

      <th>2757</th>

      <td>六里桥租房</td>

      <td>莲花小区</td>

      <td>莲花小区 西南两居室 温馨舒适 楼层合适</td>

      <td>2室1厅</td>

      <td>84.0</td>

      <td>7200.0</td>

      <td>低楼层</td>

      <td>1999年建板塔结合</td>

      <td>西南</td>

      <td>2017.07.26</td>

      <td>7.0</td>

      <td>距离10号线莲花桥站661米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101702130.html</td>

      <td>19</td>

      <td>85.714286</td>

      <td>1</td>

      <td>莲花桥站</td>

      <td>1</td>

      <td>低楼层</td>

    </tr>

    <tr>

      <th>2758</th>

      <td>陶然亭租房</td>

      <td>中海紫御公馆</td>

      <td>中海紫御公馆  把您的家安放在花园里</td>

      <td>2室2厅</td>

      <td>91.0</td>

      <td>12000.0</td>

      <td>中楼层</td>

      <td>2010年建板塔结合</td>

      <td>南</td>

      <td>2017.07.26</td>

      <td>6.0</td>

      <td>随时看房 精装修 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101703605.html</td>

      <td>8</td>

      <td>131.868132</td>

      <td>1</td>

      <td>None</td>

      <td>0</td>

      <td>中楼层</td>

    </tr>

    <tr>

      <th>2759</th>

      <td>三元桥租房</td>

      <td>曙光里</td>

      <td>曙光里南向 高层两居室 随时看房</td>

      <td>2室1厅</td>

      <td>62.0</td>

      <td>6200.0</td>

      <td>高楼层</td>

      <td>1992年建塔楼</td>

      <td>南</td>

      <td>2017.07.25</td>

      <td>19.0</td>

      <td>距离机场线三元桥站980米 随时看房 集中供暖</td>

      <td>https://bj.lianjia.com/zufang/101101704735.html</td>

      <td>26</td>

      <td>100.000000</td>

      <td>1</td>

      <td>None</td>

      <td>1</td>

      <td>高楼层</td>

    </tr>

  </tbody>

</table>

<p>2760 rows × 19 columns</p>

</div>



<p>不同地区的房龄分布</p>
<p>直接看房的房子比例</p>
<pre><code>def convnient(x):
    if &#39;随时看房&#39; in x:
        return 1
    else:
        return 0

df[&#39;conv&#39;] = df[&#39;extra_info&#39;].apply(convnient)
df.groupby(&#39;conv&#39;).size()



conv
0       4
1    2756
dtype: int64
</code></pre><p>有电梯和无电梯房子数量</p>
<p>有电梯和无电梯房子数量</p>
<p>有电梯和无电梯房子情况（面积/价格/朝向/带看人数）分布</p>
<p>附加信息里主要有哪几类信息，覆盖多少百分比的房子</p>
</div>
          
        
      
    </div>
    
    
    
	<div>
	
	</div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">JieZhao</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">37</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JieZhao</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  








  
  





  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/canvas_sphere.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  


  

  

</body>
</html>
<!-- 页面点击小红心 --> 
<script type="text/javascript" src="/js/src/love.js"></script>